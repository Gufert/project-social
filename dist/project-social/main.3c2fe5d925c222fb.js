(self.webpackChunkproject_social=self.webpackChunkproject_social||[]).push([[179],{2011:(Te,ye,q)=>{"use strict";q.d(ye,{Dh:()=>Me,GT:()=>xe,cc:()=>me,hO:()=>st,on:()=>oe,pX:()=>Ie,xv:()=>ve});var V=q(4650),u=q(9260),$=q(2122);Te=q.hmd(Te);const ge=["ngOnDestroy"],Ie=(pe,De,Le,Ue={})=>new Proxy(pe,{get:(Fe,He)=>Le.runOutsideAngular(()=>{var nt;if(pe[He])return!(null===(nt=Ue?.spy)||void 0===nt)&&nt.get&&Ue.spy.get(He,pe[He]),pe[He];if(ge.indexOf(He)>-1)return()=>{};const _e=De.toPromise().then(Re=>{const Be=Re&&Re[He];return"function"==typeof Be?Be.bind(Re):Be&&Be.then?Be.then(gt=>Le.run(()=>gt)):Le.run(()=>Be)});return new Proxy(()=>{},{get:(Re,Be)=>_e[Be],apply:(Re,Be,gt)=>_e.then(bt=>{var Ot;const an=bt&&bt(...gt);return!(null===(Ot=Ue?.spy)||void 0===Ot)&&Ot.apply&&Ue.spy.apply(He,gt,an),an})})})}),xe=(pe,De)=>{De.forEach(Le=>{Object.getOwnPropertyNames(Le.prototype||Le).forEach(Ue=>{Object.defineProperty(pe.prototype,Ue,Object.getOwnPropertyDescriptor(Le.prototype||Le,Ue))})})};class Se{constructor(De){return De}}const Me=new V.OlP("angularfire2.app.options"),ve=new V.OlP("angularfire2.app.name");function oe(pe,De,Le){const Fe="object"==typeof Le&&Le||{};Fe.name=Fe.name||"string"==typeof Le&&Le||"[DEFAULT]";const nt=u.Z.apps.filter(_e=>_e&&_e.name===Fe.name)[0]||De.runOutsideAngular(()=>u.Z.initializeApp(pe,Fe));try{JSON.stringify(pe)!==JSON.stringify(nt.options)&&ie("error",`${nt.name} Firebase App already initialized with different options${Te.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Se(nt)}const ie=(pe,...De)=>{(0,V.X6Q)()&&typeof console<"u"&&console[pe](...De)},fe={provide:Se,useFactory:oe,deps:[Me,V.R0b,[new V.FiY,ve]]};let st=(()=>{class pe{constructor(Le){u.Z.registerVersion("angularfire",$.q4.full,"core"),u.Z.registerVersion("angularfire",$.q4.full,"app-compat"),u.Z.registerVersion("angular",V.q4F.full,Le.toString())}static initializeApp(Le,Ue){return{ngModule:pe,providers:[{provide:Me,useValue:Le},{provide:ve,useValue:Ue}]}}}return pe.\u0275fac=function(Le){return new(Le||pe)(V.LFG(V.Lbi))},pe.\u0275mod=V.oAB({type:pe}),pe.\u0275inj=V.cJS({providers:[fe]}),pe})();function me(pe,De,Le,Ue,Fe){const[,He,nt]=globalThis.\u0275AngularfireInstanceCache.find(_e=>_e[0]===pe)||[];if(He)return function qe(pe,De){try{return pe.toString()===De.toString()}catch{return pe===De}}(Fe,nt)||(re("error",`${De} was already initialized on the ${Le} Firebase App with different settings.${te?" You may need to reload as Firebase is not HMR aware.":""}`),re("warn",{is:Fe,was:nt})),He;{const _e=Ue();return globalThis.\u0275AngularfireInstanceCache.push([pe,_e,Fe]),_e}}const te=!!Te.hot,re=(pe,...De)=>{(0,V.X6Q)()&&typeof console<"u"&&console[pe](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Te,ye,q)=>{"use strict";q.d(ye,{q4:()=>ou,iC:()=>hc,fc:()=>jh,HU:()=>Vh,vb:()=>Uh,JM:()=>Qr});var V=q(4650),u=q(259),$=q(5861),ge=q(9681),Ie=q(2090),xe=q(4859),Se=q(1877),Me=q(8766);const ve="@firebase/installations",oe="0.6.3",ie=1e4,fe=`w:${oe}`,st="FIS_v2",me="https://firebaseinstallations.googleapis.com/v1",qe=36e5,De=new Ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Le(P){return P instanceof Ie.ZR&&P.code.includes("request-failed")}function Ue({projectId:P}){return`${me}/projects/${P}/installations`}function Fe(P){return{token:P.token,requestStatus:2,expiresIn:bt(P.expiresIn),creationTime:Date.now()}}function He(P,N){return nt.apply(this,arguments)}function nt(){return(nt=(0,$.Z)(function*(P,N){const X=(yield N.json()).error;return De.create("request-failed",{requestName:P,serverCode:X.code,serverMessage:X.message,serverStatus:X.status})})).apply(this,arguments)}function _e({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function Be(P){return gt.apply(this,arguments)}function gt(){return(gt=(0,$.Z)(function*(P){const N=yield P();return N.status>=500&&N.status<600?P():N})).apply(this,arguments)}function bt(P){return Number(P.replace("s","000"))}function ce(){return(ce=(0,$.Z)(function*({appConfig:P,heartbeatServiceProvider:N},{fid:L}){const X=Ue(P),le=_e(P),ae=N.getImmediate({optional:!0});if(ae){const kt=yield ae.getHeartbeatsHeader();kt&&le.append("x-firebase-client",kt)}const St={method:"POST",headers:le,body:JSON.stringify({fid:L,authVersion:st,appId:P.appId,sdkVersion:fe})},Vt=yield Be(()=>fetch(X,St));if(Vt.ok){const kt=yield Vt.json();return{fid:kt.fid||L,registrationStatus:2,refreshToken:kt.refreshToken,authToken:Fe(kt.authToken)}}throw yield He("Create Installation",Vt)})).apply(this,arguments)}function Oe(P){return new Promise(N=>{setTimeout(N,P)})}const Ye=/^[cdef][\w-]{21}$/,it="";function ot(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const L=function wt(P){return function Ve(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return Ye.test(L)?L:it}catch{return it}}function _t(P){return`${P.appName}!${P.appId}`}const ii=new Map;function Jt(P,N){const L=_t(P);pn(L,N),function Yn(P,N){const L=function Pn(){return!ri&&"BroadcastChannel"in self&&(ri=new BroadcastChannel("[Firebase] FID Change"),ri.onmessage=P=>{pn(P.data.key,P.data.fid)}),ri}();L&&L.postMessage({key:P,fid:N}),function Gi(){0===ii.size&&ri&&(ri.close(),ri=null)}()}(L,N)}function pn(P,N){const L=ii.get(P);if(L)for(const X of L)X(N)}let ri=null;const Pr="firebase-installations-database",ro=1,Ii="firebase-installations-store";let ls=null;function us(){return ls||(ls=(0,Me.X3)(Pr,ro,{upgrade:(P,N)=>{0===N&&P.createObjectStore(Ii)}})),ls}function Nr(P,N){return ei.apply(this,arguments)}function ei(){return(ei=(0,$.Z)(function*(P,N){const L=_t(P),le=(yield us()).transaction(Ii,"readwrite"),ae=le.objectStore(Ii),$e=yield ae.get(L);return yield ae.put(N,L),yield le.done,(!$e||$e.fid!==N.fid)&&Jt(P,N.fid),N})).apply(this,arguments)}function Tt(P){return ir.apply(this,arguments)}function ir(){return(ir=(0,$.Z)(function*(P){const N=_t(P),X=(yield us()).transaction(Ii,"readwrite");yield X.objectStore(Ii).delete(N),yield X.done})).apply(this,arguments)}function yr(P,N){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,$.Z)(function*(P,N){const L=_t(P),le=(yield us()).transaction(Ii,"readwrite"),ae=le.objectStore(Ii),$e=yield ae.get(L),St=N($e);return void 0===St?yield ae.delete(L):yield ae.put(St,L),yield le.done,St&&(!$e||$e.fid!==St.fid)&&Jt(P,St.fid),St})).apply(this,arguments)}function vr(P){return qi.apply(this,arguments)}function qi(){return qi=(0,$.Z)(function*(P){let N;const L=yield yr(P.appConfig,X=>{const le=function zn(P){return Ds(P||{fid:ot(),registrationStatus:0})}(X),ae=function Qn(P,N){if(0===N.registrationStatus){if(!navigator.onLine)return{installationEntry:N,registrationPromise:Promise.reject(De.create("app-offline"))};const L={fid:N.fid,registrationStatus:1,registrationTime:Date.now()},X=function zt(P,N){return At.apply(this,arguments)}(P,L);return{installationEntry:L,registrationPromise:X}}return 1===N.registrationStatus?{installationEntry:N,registrationPromise:wr(P)}:{installationEntry:N}}(P,le);return N=ae.registrationPromise,ae.installationEntry});return L.fid===it?{installationEntry:yield N}:{installationEntry:L,registrationPromise:N}}),qi.apply(this,arguments)}function At(){return At=(0,$.Z)(function*(P,N){try{const L=yield function an(P,N){return ce.apply(this,arguments)}(P,N);return Nr(P.appConfig,L)}catch(L){throw Le(L)&&409===L.customData.serverCode?yield Tt(P.appConfig):yield Nr(P.appConfig,{fid:N.fid,registrationStatus:0}),L}}),At.apply(this,arguments)}function wr(P){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,$.Z)(function*(P){let N=yield zi(P.appConfig);for(;1===N.registrationStatus;)yield Oe(100),N=yield zi(P.appConfig);if(0===N.registrationStatus){const{installationEntry:L,registrationPromise:X}=yield vr(P);return X||L}return N})).apply(this,arguments)}function zi(P){return yr(P,N=>{if(!N)throw De.create("installation-not-found");return Ds(N)})}function Ds(P){return function vi(P){return 1===P.registrationStatus&&P.registrationTime+ie<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function Nn(){return(Nn=(0,$.Z)(function*({appConfig:P,heartbeatServiceProvider:N},L){const X=function Zr(P,{fid:N}){return`${Ue(P)}/${N}/authTokens:generate`}(P,L),le=function Re(P,{refreshToken:N}){const L=_e(P);return L.append("Authorization",function Ot(P){return`${st} ${P}`}(N)),L}(P,L),ae=N.getImmediate({optional:!0});if(ae){const kt=yield ae.getHeartbeatsHeader();kt&&le.append("x-firebase-client",kt)}const St={method:"POST",headers:le,body:JSON.stringify({installation:{sdkVersion:fe,appId:P.appId}})},Vt=yield Be(()=>fetch(X,St));if(Vt.ok)return Fe(yield Vt.json());throw yield He("Generate Auth Token",Vt)})).apply(this,arguments)}function mn(P){return rr.apply(this,arguments)}function rr(){return rr=(0,$.Z)(function*(P,N=!1){let L;const X=yield yr(P.appConfig,ae=>{if(!Tn(ae))throw De.create("not-registered");const $e=ae.authToken;if(!N&&function se(P){return 2===P.requestStatus&&!function ee(P){const N=Date.now();return N<P.creationTime||P.creationTime+P.expiresIn<N+qe}(P)}($e))return ae;if(1===$e.requestStatus)return L=function rt(P,N){return Ge.apply(this,arguments)}(P,N),ae;{if(!navigator.onLine)throw De.create("app-offline");const St=function he(P){const N={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:N})}(ae);return L=function Xt(P,N){return nn.apply(this,arguments)}(P,St),St}});return L?yield L:X.authToken}),rr.apply(this,arguments)}function Ge(){return(Ge=(0,$.Z)(function*(P,N){let L=yield yt(P.appConfig);for(;1===L.authToken.requestStatus;)yield Oe(100),L=yield yt(P.appConfig);const X=L.authToken;return 0===X.requestStatus?mn(P,N):X})).apply(this,arguments)}function yt(P){return yr(P,N=>{if(!Tn(N))throw De.create("not-registered");return function J(P){return 1===P.requestStatus&&P.requestTime+ie<Date.now()}(N.authToken)?Object.assign(Object.assign({},N),{authToken:{requestStatus:0}}):N})}function nn(){return nn=(0,$.Z)(function*(P,N){try{const L=yield function fi(P,N){return Nn.apply(this,arguments)}(P,N),X=Object.assign(Object.assign({},N),{authToken:L});return yield Nr(P.appConfig,X),L}catch(L){if(!Le(L)||401!==L.customData.serverCode&&404!==L.customData.serverCode){const X=Object.assign(Object.assign({},N),{authToken:{requestStatus:0}});yield Nr(P.appConfig,X)}else yield Tt(P.appConfig);throw L}}),nn.apply(this,arguments)}function Tn(P){return void 0!==P&&2===P.registrationStatus}function Q(){return(Q=(0,$.Z)(function*(P){const N=P,{installationEntry:L,registrationPromise:X}=yield vr(N);return X?X.catch(console.error):mn(N).catch(console.error),L.fid})).apply(this,arguments)}function We(){return We=(0,$.Z)(function*(P,N=!1){const L=P;return yield function xt(P){return ft.apply(this,arguments)}(L),(yield mn(L,N)).token}),We.apply(this,arguments)}function ft(){return(ft=(0,$.Z)(function*(P){const{registrationPromise:N}=yield vr(P);N&&(yield N)})).apply(this,arguments)}function jl(P){return De.create("missing-app-config-values",{valueName:P})}const Jc="installations",Lu=P=>{const N=P.getProvider("app").getImmediate(),L=function Fu(P){if(!P||!P.options)throw jl("App Configuration");if(!P.name)throw jl("App Name");const N=["projectId","apiKey","appId"];for(const L of N)if(!P.options[L])throw jl(L);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(N);return{app:N,appConfig:L,heartbeatServiceProvider:(0,ge._getProvider)(N,"heartbeat"),_delete:()=>Promise.resolve()}},Uu=P=>{const N=P.getProvider("app").getImmediate(),L=(0,ge._getProvider)(N,Jc).getImmediate();return{getId:()=>function H(P){return Q.apply(this,arguments)}(L),getToken:le=>function Ae(P){return We.apply(this,arguments)}(L,le)}};(function Xc(){(0,ge._registerComponent)(new xe.wA(Jc,Lu,"PUBLIC")),(0,ge._registerComponent)(new xe.wA("installations-internal",Uu,"PRIVATE"))})(),(0,ge.registerVersion)(ve,oe),(0,ge.registerVersion)(ve,oe,"esm2017");const Vu="@firebase/remote-config",Ti=new Ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ga{constructor(N,L,X,le){this.client=N,this.storage=L,this.storageCache=X,this.logger=le}isCachedDataFresh(N,L){if(!L)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const X=Date.now()-L,le=X<=N;return this.logger.debug(`Config fetch cache check. Cache age millis: ${X}. Cache max age millis (minimumFetchIntervalMillis setting): ${N}. Is cache hit: ${le}.`),le}fetch(N){var L=this;return(0,$.Z)(function*(){const[X,le]=yield Promise.all([L.storage.getLastSuccessfulFetchTimestampMillis(),L.storage.getLastSuccessfulFetchResponse()]);if(le&&L.isCachedDataFresh(N.cacheMaxAgeMillis,X))return le;N.eTag=le&&le.eTag;const ae=yield L.client.fetch(N),$e=[L.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&$e.push(L.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all($e),ae})()}}function Fr(P=navigator){return P.languages&&P.languages[0]||P.language}class hs{constructor(N,L,X,le,ae,$e){this.firebaseInstallations=N,this.sdkVersion=L,this.namespace=X,this.projectId=le,this.apiKey=ae,this.appId=$e}fetch(N){var L=this;return(0,$.Z)(function*(){const[X,le]=yield Promise.all([L.firebaseInstallations.getId(),L.firebaseInstallations.getToken()]),$e=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${L.projectId}/namespaces/${L.namespace}:fetch?key=${L.apiKey}`,St={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":N.eTag||"*"},Vt={sdk_version:L.sdkVersion,app_instance_id:X,app_instance_id_token:le,app_id:L.appId,language_code:Fr()},kt={method:"POST",headers:St,body:JSON.stringify(Vt)},Ht=fetch($e,kt),Dt=new Promise((ws,po)=>{N.signal.addEventListener(()=>{const ia=new Error("The operation was aborted.");ia.name="AbortError",po(ia)})});let Fn;try{yield Promise.race([Ht,Dt]),Fn=yield Ht}catch(ws){let po="fetch-client-network";throw"AbortError"===ws?.name&&(po="fetch-timeout"),Ti.create(po,{originalErrorMessage:ws?.message})}let pt=Fn.status;const uu=Fn.headers.get("ETag")||void 0;let _d,yl;if(200===Fn.status){let ws;try{ws=yield Fn.json()}catch(po){throw Ti.create("fetch-client-parse",{originalErrorMessage:po?.message})}_d=ws.entries,yl=ws.state}if("INSTANCE_STATE_UNSPECIFIED"===yl?pt=500:"NO_CHANGE"===yl?pt=304:("NO_TEMPLATE"===yl||"EMPTY_CONFIG"===yl)&&(_d={}),304!==pt&&200!==pt)throw Ti.create("fetch-status",{httpStatus:pt});return{status:pt,eTag:uu,config:_d}})()}}class Jo{constructor(N,L){this.client=N,this.storage=L}fetch(N){var L=this;return(0,$.Z)(function*(){const X=(yield L.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return L.attemptFetch(N,X)})()}attemptFetch(N,{throttleEndTimeMillis:L,backoffCount:X}){var le=this;return(0,$.Z)(function*(){yield function Io(P,N){return new Promise((L,X)=>{const le=Math.max(N-Date.now(),0),ae=setTimeout(L,le);P.addEventListener(()=>{clearTimeout(ae),X(Ti.create("fetch-throttle",{throttleEndTimeMillis:N}))})})}(N.signal,L);try{const ae=yield le.client.fetch(N);return yield le.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function ai(P){if(!(P instanceof Ie.ZR&&P.customData))return!1;const N=Number(P.customData.httpStatus);return 429===N||500===N||503===N||504===N}(ae))throw ae;const $e={throttleEndTimeMillis:Date.now()+(0,Ie.$s)(X),backoffCount:X+1};return yield le.storage.setThrottleMetadata($e),le.attemptFetch(N,$e)}})()}}class $u{constructor(N,L,X,le,ae){this.app=N,this._client=L,this._storageCache=X,this._storage=le,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function To(P,N){const L=P.target.error||void 0;return Ti.create(N,{originalErrorMessage:L&&L?.message})}const Ms="app_namespace_store";class gs{constructor(N,L,X,le=function ps(){return new Promise((P,N)=>{try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=X=>{N(To(X,"storage-open"))},L.onsuccess=X=>{P(X.target.result)},L.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(Ms,{keyPath:"compositeKey"})}}catch(L){N(Ti.create("storage-open",{originalErrorMessage:L?.message}))}})}()){this.appId=N,this.appName=L,this.namespace=X,this.openDbPromise=le}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(N){return this.set("last_fetch_status",N)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(N){return this.set("last_successful_fetch_timestamp_millis",N)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(N){return this.set("last_successful_fetch_response",N)}getActiveConfig(){return this.get("active_config")}setActiveConfig(N){return this.set("active_config",N)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(N){return this.set("active_config_etag",N)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(N){return this.set("throttle_metadata",N)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(N){var L=this;return(0,$.Z)(function*(){const X=yield L.openDbPromise;return new Promise((le,ae)=>{const St=X.transaction([Ms],"readonly").objectStore(Ms),Vt=L.createCompositeKey(N);try{const kt=St.get(Vt);kt.onerror=Ht=>{ae(To(Ht,"storage-get"))},kt.onsuccess=Ht=>{const Dt=Ht.target.result;le(Dt?Dt.value:void 0)}}catch(kt){ae(Ti.create("storage-get",{originalErrorMessage:kt?.message}))}})})()}set(N,L){var X=this;return(0,$.Z)(function*(){const le=yield X.openDbPromise;return new Promise((ae,$e)=>{const Vt=le.transaction([Ms],"readwrite").objectStore(Ms),kt=X.createCompositeKey(N);try{const Ht=Vt.put({compositeKey:kt,value:L});Ht.onerror=Dt=>{$e(To(Dt,"storage-set"))},Ht.onsuccess=()=>{ae()}}catch(Ht){$e(Ti.create("storage-set",{originalErrorMessage:Ht?.message}))}})})()}delete(N){var L=this;return(0,$.Z)(function*(){const X=yield L.openDbPromise;return new Promise((le,ae)=>{const St=X.transaction([Ms],"readwrite").objectStore(Ms),Vt=L.createCompositeKey(N);try{const kt=St.delete(Vt);kt.onerror=Ht=>{ae(To(Ht,"storage-delete"))},kt.onsuccess=()=>{le()}}catch(kt){ae(Ti.create("storage-delete",{originalErrorMessage:kt?.message}))}})})()}createCompositeKey(N){return[this.appId,this.appName,this.namespace,N].join()}}class So{constructor(N){this.storage=N}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var N=this;return(0,$.Z)(function*(){const L=N.storage.getLastFetchStatus(),X=N.storage.getLastSuccessfulFetchTimestampMillis(),le=N.storage.getActiveConfig(),ae=yield L;ae&&(N.lastFetchStatus=ae);const $e=yield X;$e&&(N.lastSuccessfulFetchTimestampMillis=$e);const St=yield le;St&&(N.activeConfig=St)})()}setLastFetchStatus(N){return this.lastFetchStatus=N,this.storage.setLastFetchStatus(N)}setLastSuccessfulFetchTimestampMillis(N){return this.lastSuccessfulFetchTimestampMillis=N,this.storage.setLastSuccessfulFetchTimestampMillis(N)}setActiveConfig(N){return this.activeConfig=N,this.storage.setActiveConfig(N)}}function g_(){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,$.Z)(function*(){if(!(0,Ie.hl)())return!1;try{return yield(0,Ie.eu)()}catch{return!1}})).apply(this,arguments)}!function ql(){(0,ge._registerComponent)(new xe.wA("remote-config",function P(N,{instanceIdentifier:L}){const X=N.getProvider("app").getImmediate(),le=N.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ti.create("registration-window");if(!(0,Ie.hl)())throw Ti.create("indexed-db-unavailable");const{projectId:ae,apiKey:$e,appId:St}=X.options;if(!ae)throw Ti.create("registration-project-id");if(!$e)throw Ti.create("registration-api-key");if(!St)throw Ti.create("registration-app-id");const Vt=new gs(St,X.name,L=L||"firebase"),kt=new So(Vt),Ht=new Se.Yd(Vu);Ht.logLevel=Se.in.ERROR;const Dt=new hs(le,ge.SDK_VERSION,L,ae,$e,St),Fn=new Jo(Dt,Vt),pt=new ga(Fn,Vt,kt,Ht),uu=new $u(X,pt,kt,Vt,Ht);return function On(P){const N=(0,Ie.m9)(P);N._initializePromise||(N._initializePromise=N._storageCache.loadFromStorage().then(()=>{N._isInitializationComplete=!0}))}(uu),uu},"PUBLIC").setMultipleInstances(!0)),(0,ge.registerVersion)(Vu,"0.4.3"),(0,ge.registerVersion)(Vu,"0.4.3","esm2017")}();const Do="/firebase-messaging-sw.js",el="/firebase-cloud-messaging-push-scope",Zl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",m_="https://fcmregistrations.googleapis.com/v1",Rp="google.c.a.c_id",Pp="google.c.a.c_l",__="google.c.a.ts",zl="google.c.a.e";var oo=(()=>{return(P=oo||(oo={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",oo;var P})();function ao(P){const N=new Uint8Array(P);return btoa(String.fromCharCode(...N)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function y_(P){const L=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),X=atob(L),le=new Uint8Array(X.length);for(let ae=0;ae<X.length;++ae)le[ae]=X.charCodeAt(ae);return le}const td="fcm_token_details_db",ms=5,Wl="fcm_token_object_Store";function qu(){return qu=(0,$.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes(td))return null;let N=null;return(yield(0,Me.X3)(td,ms,{upgrade:(X=(0,$.Z)(function*(le,ae,$e,St){var Vt;if(ae<2||!le.objectStoreNames.contains(Wl))return;const kt=St.objectStore(Wl),Ht=yield kt.index("fcmSenderId").get(P);if(yield kt.clear(),Ht)if(2===ae){const Dt=Ht;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;N={token:Dt.fcmToken,createTime:null!==(Vt=Dt.createTime)&&void 0!==Vt?Vt:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:ao(Dt.vapidKey)}}}else if(3===ae){const Dt=Ht;N={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:ao(Dt.auth),p256dh:ao(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:ao(Dt.vapidKey)}}}else if(4===ae){const Dt=Ht;N={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:ao(Dt.auth),p256dh:ao(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:ao(Dt.vapidKey)}}}}),function(ae,$e,St,Vt){return X.apply(this,arguments)})})).close(),yield(0,Me.Lj)(td),yield(0,Me.Lj)("fcm_vapid_details_db"),yield(0,Me.Lj)("undefined"),function nd(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:N}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof N.auth&&N.auth.length>0&&"string"==typeof N.p256dh&&N.p256dh.length>0&&"string"==typeof N.endpoint&&N.endpoint.length>0&&"string"==typeof N.swScope&&N.swScope.length>0&&"string"==typeof N.vapidKey&&N.vapidKey.length>0}(N)?N:null;var X}),qu.apply(this,arguments)}const Np="firebase-messaging-database",Ao=1,tl="firebase-messaging-store";let nl=null;function Kl(){return nl||(nl=(0,Me.X3)(Np,Ao,{upgrade:(P,N)=>{0===N&&P.createObjectStore(tl)}})),nl}function Zu(P){return il.apply(this,arguments)}function il(){return il=(0,$.Z)(function*(P){const N=zu(P),X=yield(yield Kl()).transaction(tl).objectStore(tl).get(N);if(X)return X;{const le=yield function hh(P){return qu.apply(this,arguments)}(P.appConfig.senderId);if(le)return yield ma(P,le),le}}),il.apply(this,arguments)}function ma(P,N){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,$.Z)(function*(P,N){const L=zu(P),le=(yield Kl()).transaction(tl,"readwrite");return yield le.objectStore(tl).put(N,L),yield le.done,N})).apply(this,arguments)}function _a(){return(_a=(0,$.Z)(function*(P){const N=zu(P),X=(yield Kl()).transaction(tl,"readwrite");yield X.objectStore(tl).delete(N),yield X.done})).apply(this,arguments)}function zu({appConfig:P}){return P.appId}const Vi=new Ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function id(P,N){return Si.apply(this,arguments)}function Si(){return(Si=(0,$.Z)(function*(P,N){const L=yield lo(P),X=Ku(N),le={method:"POST",headers:L,body:JSON.stringify(X)};let ae;try{ae=yield(yield fetch(Wu(P.appConfig),le)).json()}catch($e){throw Vi.create("token-subscribe-failed",{errorInfo:$e?.toString()})}if(ae.error)throw Vi.create("token-subscribe-failed",{errorInfo:ae.error.message});if(!ae.token)throw Vi.create("token-subscribe-no-token");return ae.token})).apply(this,arguments)}function qs(){return(qs=(0,$.Z)(function*(P,N){const L=yield lo(P),X=Ku(N.subscriptionOptions),le={method:"PATCH",headers:L,body:JSON.stringify(X)};let ae;try{ae=yield(yield fetch(`${Wu(P.appConfig)}/${N.token}`,le)).json()}catch($e){throw Vi.create("token-update-failed",{errorInfo:$e?.toString()})}if(ae.error)throw Vi.create("token-update-failed",{errorInfo:ae.error.message});if(!ae.token)throw Vi.create("token-update-no-token");return ae.token})).apply(this,arguments)}function zr(P,N){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,$.Z)(function*(P,N){const X={method:"DELETE",headers:yield lo(P)};try{const ae=yield(yield fetch(`${Wu(P.appConfig)}/${N}`,X)).json();if(ae.error)throw Vi.create("token-unsubscribe-failed",{errorInfo:ae.error.message})}catch(le){throw Vi.create("token-unsubscribe-failed",{errorInfo:le?.toString()})}})).apply(this,arguments)}function Wu({projectId:P}){return`${m_}/projects/${P}/registrations`}function lo(P){return dr.apply(this,arguments)}function dr(){return(dr=(0,$.Z)(function*({appConfig:P,installations:N}){const L=yield N.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${L}`})})).apply(this,arguments)}function Ku({p256dh:P,auth:N,endpoint:L,vapidKey:X}){const le={web:{endpoint:L,auth:N,p256dh:P}};return X!==Zl&&(le.web.applicationPubKey=X),le}const ya=6048e5;function xs(){return xs=(0,$.Z)(function*(P){const N=yield function Fp(P,N){return Ql.apply(this,arguments)}(P.swRegistration,P.vapidKey),L={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:N.endpoint,auth:ao(N.getKey("auth")),p256dh:ao(N.getKey("p256dh"))},X=yield Zu(P.firebaseDependencies);if(X){if(function _h(P,N){return N.vapidKey===P.vapidKey&&N.endpoint===P.endpoint&&N.auth===P.auth&&N.p256dh===P.p256dh}(X.subscriptionOptions,L))return Date.now()>=X.createTime+ya?function un(P,N){return rl.apply(this,arguments)}(P,{token:X.token,createTime:Date.now(),subscriptionOptions:L}):X.token;try{yield zr(P.firebaseDependencies,X.token)}catch(le){console.warn(le)}return mh(P.firebaseDependencies,L)}return mh(P.firebaseDependencies,L)}),xs.apply(this,arguments)}function va(){return va=(0,$.Z)(function*(P){const N=yield Zu(P.firebaseDependencies);N&&(yield zr(P.firebaseDependencies,N.token),yield function fh(P){return _a.apply(this,arguments)}(P.firebaseDependencies));const L=yield P.swRegistration.pushManager.getSubscription();return!L||L.unsubscribe()}),va.apply(this,arguments)}function rl(){return rl=(0,$.Z)(function*(P,N){try{const L=yield function ph(P,N){return qs.apply(this,arguments)}(P.firebaseDependencies,N),X=Object.assign(Object.assign({},N),{token:L,createTime:Date.now()});return yield ma(P.firebaseDependencies,X),L}catch(L){throw yield function gh(P){return va.apply(this,arguments)}(P),L}}),rl.apply(this,arguments)}function mh(P,N){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,$.Z)(function*(P,N){const X={token:yield id(P,N),createTime:Date.now(),subscriptionOptions:N};return yield ma(P,X),X.token})).apply(this,arguments)}function Ql(){return(Ql=(0,$.Z)(function*(P,N){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:y_(N)})})).apply(this,arguments)}function Qu(P){const N={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function v_(P,N){if(!N.notification)return;P.notification={};const L=N.notification.title;L&&(P.notification.title=L);const X=N.notification.body;X&&(P.notification.body=X);const le=N.notification.image;le&&(P.notification.image=le);const ae=N.notification.icon;ae&&(P.notification.icon=ae)}(N,P),function ze(P,N){N.data&&(P.data=N.data)}(N,P),function Wt(P,N){var L,X,le,ae,$e;if(!(N.fcmOptions||null!==(L=N.notification)&&void 0!==L&&L.click_action))return;P.fcmOptions={};const St=null!==(le=null===(X=N.fcmOptions)||void 0===X?void 0:X.link)&&void 0!==le?le:null===(ae=N.notification)||void 0===ae?void 0:ae.click_action;St&&(P.fcmOptions.link=St);const Vt=null===($e=N.fcmOptions)||void 0===$e?void 0:$e.analytics_label;Vt&&(P.fcmOptions.analyticsLabel=Vt)}(N,P),N}function yh(P,N){const L=[];for(let X=0;X<P.length;X++)L.push(P.charAt(X)),X<N.length&&L.push(N.charAt(X));return L.join("")}function rd(P){return Vi.create("missing-app-config-values",{valueName:P})}yh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),yh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class sl{constructor(N,L,X){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const le=function Wi(P){if(!P||!P.options)throw rd("App Configuration Object");if(!P.name)throw rd("App Name");const N=["projectId","apiKey","appId","messagingSenderId"],{options:L}=P;for(const X of N)if(!L[X])throw rd(X);return{appName:P.name,projectId:L.projectId,apiKey:L.apiKey,appId:L.appId,senderId:L.messagingSenderId}}(N);this.firebaseDependencies={app:N,appConfig:le,installations:L,analyticsProvider:X}}_delete(){return Promise.resolve()}}function uo(P){return wa.apply(this,arguments)}function wa(){return(wa=(0,$.Z)(function*(P){try{P.swRegistration=yield navigator.serviceWorker.register(Do,{scope:el}),P.swRegistration.update().catch(()=>{})}catch(N){throw Vi.create("failed-service-worker-registration",{browserErrorMessage:N?.message})}})).apply(this,arguments)}function Ju(){return(Ju=(0,$.Z)(function*(P,N){if(!N&&!P.swRegistration&&(yield uo(P)),N||!P.swRegistration){if(!(N instanceof ServiceWorkerRegistration))throw Vi.create("invalid-sw-registration");P.swRegistration=N}})).apply(this,arguments)}function ba(){return(ba=(0,$.Z)(function*(P,N){N?P.vapidKey=N:P.vapidKey||(P.vapidKey=Zl)})).apply(this,arguments)}function _s(){return _s=(0,$.Z)(function*(P,N){if(!navigator)throw Vi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vi.create("permission-blocked");return yield function iw(P,N){return ba.apply(this,arguments)}(P,N?.vapidKey),yield function vh(P,N){return Ju.apply(this,arguments)}(P,N?.serviceWorkerRegistration),function Op(P){return xs.apply(this,arguments)}(P)}),_s.apply(this,arguments)}function Wr(){return(Wr=(0,$.Z)(function*(P,N,L){const X=function ea(P){switch(P){case oo.NOTIFICATION_CLICKED:return"notification_open";case oo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(N);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(X,{message_id:L[Rp],message_name:L[Pp],message_time:L[__],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ol(){return ol=(0,$.Z)(function*(P,N){const L=N.data;if(!L.isFirebaseMessaging)return;P.onMessageHandler&&L.messageType===oo.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(Qu(L)):P.onMessageHandler.next(Qu(L)));const X=L.data;(function Lp(P){return"object"==typeof P&&!!P&&Rp in P})(X)&&"1"===X[zl]&&(yield function Xu(P,N,L){return Wr.apply(this,arguments)}(P,L.messageType,X))}),ol.apply(this,arguments)}const Jl="@firebase/messaging",Ea=P=>{const N=new sl(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",L=>function w_(P,N){return ol.apply(this,arguments)}(N,L)),N},ec=P=>{const N=P.getProvider("messaging").getImmediate();return{getToken:X=>function Er(P,N){return _s.apply(this,arguments)}(N,X)}};function od(){return wh.apply(this,arguments)}function wh(){return(wh=(0,$.Z)(function*(){try{yield(0,Ie.eu)()}catch{return!1}return typeof window<"u"&&(0,Ie.hl)()&&(0,Ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function sd(){(0,ge._registerComponent)(new xe.wA("messaging",Ea,"PUBLIC")),(0,ge._registerComponent)(new xe.wA("messaging-internal",ec,"PRIVATE")),(0,ge.registerVersion)(Jl,"0.12.3"),(0,ge.registerVersion)(Jl,"0.12.3","esm2017")}();const ad="analytics",Kr="firebase_id",Mo="origin",$n=6e4,Eh="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bp="https://www.googletagmanager.com/gtag/js",Cr=new Se.Yd("@firebase/analytics");function jp(P){return Promise.all(P.map(N=>N.catch(L=>L)))}function eu(){return(eu=(0,$.Z)(function*(P,N,L,X,le,ae){const $e=X[le];try{if($e)yield N[$e];else{const Vt=(yield jp(L)).find(kt=>kt.measurementId===le);Vt&&(yield N[Vt.appId])}}catch(St){Cr.error(St)}P("config",le,ae)})).apply(this,arguments)}function tu(){return(tu=(0,$.Z)(function*(P,N,L,X,le){try{let ae=[];if(le&&le.send_to){let $e=le.send_to;Array.isArray($e)||($e=[$e]);const St=yield jp(L);for(const Vt of $e){const kt=St.find(Dt=>Dt.measurementId===Vt),Ht=kt&&N[kt.appId];if(!Ht){ae=[];break}ae.push(Ht)}}0===ae.length&&(ae=Object.values(N)),yield Promise.all(ae),P("event",X,le||{})}catch(ae){Cr.error(ae)}})).apply(this,arguments)}const hr=new Ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),rw=30,Th=new class S_{constructor(N={},L=1e3){this.throttleMetadata=N,this.intervalMillis=L}getThrottleMetadata(N){return this.throttleMetadata[N]}setThrottleMetadata(N,L){this.throttleMetadata[N]=L}deleteThrottleMetadata(N){delete this.throttleMetadata[N]}};function nu(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function pi(){return(pi=(0,$.Z)(function*(P){var N;const{appId:L,apiKey:X}=P,le={method:"GET",headers:nu(X)},ae=Eh.replace("{app-id}",L),$e=yield fetch(ae,le);if(200!==$e.status&&304!==$e.status){let St="";try{const Vt=yield $e.json();null!==(N=Vt.error)&&void 0!==N&&N.message&&(St=Vt.error.message)}catch{}throw hr.create("config-fetch-failed",{httpStatus:$e.status,responseMessage:St})}return $e.json()})).apply(this,arguments)}function Ca(){return(Ca=(0,$.Z)(function*(P,N=Th,L){const{appId:X,apiKey:le,measurementId:ae}=P.options;if(!X)throw hr.create("no-app-id");if(!le){if(ae)return{measurementId:ae,appId:X};throw hr.create("no-api-key")}const $e=N.getThrottleMetadata(X)||{backoffCount:0,throttleEndTimeMillis:Date.now()},St=new cl;return setTimeout((0,$.Z)(function*(){St.abort()}),void 0!==L?L:$n),ic({appId:X,apiKey:le,measurementId:ae},$e,St,N)})).apply(this,arguments)}function ic(P,N,L){return ys.apply(this,arguments)}function ys(){return ys=(0,$.Z)(function*(P,{throttleEndTimeMillis:N,backoffCount:L},X,le=Th){var ae;const{appId:$e,measurementId:St}=P;try{yield function rc(P,N){return new Promise((L,X)=>{const le=Math.max(N-Date.now(),0),ae=setTimeout(L,le);P.addEventListener(()=>{clearTimeout(ae),X(hr.create("fetch-throttle",{throttleEndTimeMillis:N}))})})}(X,N)}catch(Vt){if(St)return Cr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${St} provided in the "measurementId" field in the local Firebase config. [${Vt?.message}]`),{appId:$e,measurementId:St};throw Vt}try{const Vt=yield function D_(P){return pi.apply(this,arguments)}(P);return le.deleteThrottleMetadata($e),Vt}catch(Vt){const kt=Vt;if(!function sc(P){if(!(P instanceof Ie.ZR&&P.customData))return!1;const N=Number(P.customData.httpStatus);return 429===N||500===N||503===N||504===N}(kt)){if(le.deleteThrottleMetadata($e),St)return Cr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${St} provided in the "measurementId" field in the local Firebase config. [${kt?.message}]`),{appId:$e,measurementId:St};throw Vt}const Ht=503===Number(null===(ae=kt?.customData)||void 0===ae?void 0:ae.httpStatus)?(0,Ie.$s)(L,le.intervalMillis,rw):(0,Ie.$s)(L,le.intervalMillis),Dt={throttleEndTimeMillis:Date.now()+Ht,backoffCount:L+1};return le.setThrottleMetadata($e,Dt),Cr.debug(`Calling attemptFetch again in ${Ht} millis`),ic(P,Dt,X,le)}}),ys.apply(this,arguments)}class cl{constructor(){this.listeners=[]}addEventListener(N){this.listeners.push(N)}abort(){this.listeners.forEach(N=>N())}}let oc,pl;function dl(){return(dl=(0,$.Z)(function*(P,N,L,X,le){if(le&&le.global)P("event",L,X);else{const ae=yield N;P("event",L,Object.assign(Object.assign({},X),{send_to:ae}))}})).apply(this,arguments)}function gl(){return(gl=(0,$.Z)(function*(){if(!(0,Ie.hl)())return Cr.warn(hr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ie.eu)()}catch(P){return Cr.warn(hr.create("indexeddb-unavailable",{errorInfo:P?.toString()}).message),!1}return!0})).apply(this,arguments)}function uc(){return uc=(0,$.Z)(function*(P,N,L,X,le,ae,$e){var St;const Vt=function ul(P){return Ca.apply(this,arguments)}(P);Vt.then(pt=>{L[pt.measurementId]=pt.appId,P.options.measurementId&&pt.measurementId!==P.options.measurementId&&Cr.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${pt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pt=>Cr.error(pt)),N.push(Vt);const kt=function Dh(){return gl.apply(this,arguments)}().then(pt=>{if(pt)return X.getId()}),[Ht,Dt]=yield Promise.all([Vt,kt]);(function co(P){const N=window.document.getElementsByTagName("script");for(const L of Object.values(N))if(L.src&&L.src.includes(Bp)&&L.src.includes(P))return L;return null})(ae)||function T_(P,N){const L=document.createElement("script");L.src=`${Bp}?l=${P}&id=${N}`,L.async=!0,document.head.appendChild(L)}(ae,Ht.measurementId),pl&&(le("consent","default",pl),function lc(P){pl=P}(void 0)),le("js",new Date);const Fn=null!==(St=$e?.config)&&void 0!==St?St:{};return Fn[Mo]="firebase",Fn.update=!0,null!=Dt&&(Fn[Kr]=Dt),le("config",Ht.measurementId,Fn),oc&&(le("set",oc),function iu(P){oc=P}(void 0)),Ht.measurementId}),uc.apply(this,arguments)}class dd{constructor(N){this.app=N}_delete(){return delete ks[this.app.options.appId],Promise.resolve()}}let ks={},Ah=[];const ml={};let Mh,Yr,vs="dataLayer",Hp="gtag",Ta=!1;function ru(P,N,L){!function xh(){const P=[];if((0,Ie.ru)()&&P.push("This is a browser extension environment."),(0,Ie.zI)()||P.push("Cookies are not available."),P.length>0){const N=P.map((X,le)=>`(${le+1}) ${X}`).join(" "),L=hr.create("invalid-analytics-context",{errorInfo:N});Cr.warn(L.message)}}();const X=P.options.appId;if(!X)throw hr.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw hr.create("no-api-key");Cr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ks[X])throw hr.create("already-exists",{id:X});if(!Ta){!function Ch(P){let N=[];Array.isArray(window[P])?N=window[P]:window[P]=N}(vs);const{wrappedGtag:ae,gtagCore:$e}=function ld(P,N,L,X,le){let ae=function(...$e){window[X].push(arguments)};return window[le]&&"function"==typeof window[le]&&(ae=window[le]),window[le]=function Ih(P,N,L,X){function ae(){return ae=(0,$.Z)(function*($e,St,Vt){try{"event"===$e?yield function al(P,N,L,X,le){return tu.apply(this,arguments)}(P,N,L,St,Vt):"config"===$e?yield function Xl(P,N,L,X,le,ae){return eu.apply(this,arguments)}(P,N,L,X,St,Vt):"consent"===$e?P("consent","update",Vt):P("set",St)}catch(kt){Cr.error(kt)}}),ae.apply(this,arguments)}return function le($e,St,Vt){return ae.apply(this,arguments)}}(ae,P,N,L),{gtagCore:ae,wrappedGtag:window[le]}}(ks,Ah,ml,vs,Hp);Yr=ae,Mh=$e,Ta=!0}return ks[X]=function cd(P,N,L,X,le,ae,$e){return uc.apply(this,arguments)}(P,Ah,ml,N,Mh,vs,L),new dd(P)}function cc(){return xo.apply(this,arguments)}function xo(){return(xo=(0,$.Z)(function*(){if((0,Ie.ru)()||!(0,Ie.zI)()||!(0,Ie.hl)())return!1;try{return yield(0,Ie.eu)()}catch{return!1}})).apply(this,arguments)}const Gn="@firebase/analytics";!function qp(){(0,ge._registerComponent)(new xe.wA(ad,(N,{options:L})=>ru(N.getProvider("app").getImmediate(),N.getProvider("installations-internal").getImmediate(),L),"PUBLIC")),(0,ge._registerComponent)(new xe.wA("analytics-internal",function P(N){try{const L=N.getProvider(ad).getImmediate();return{logEvent:(X,le,ae)=>function Ph(P,N,L,X){P=(0,Ie.m9)(P),function Ia(P,N,L,X,le){return dl.apply(this,arguments)}(Yr,ks[P.app.options.appId],N,L,X).catch(le=>Cr.error(le))}(L,X,le,ae)}}catch(L){throw hr.create("interop-component-reg-failed",{reason:L})}},"PRIVATE")),(0,ge.registerVersion)(Gn,"0.9.3"),(0,ge.registerVersion)(Gn,"0.9.3","esm2017")}();var sw=q(4408),fo=q(7565);const x_=new class Nh extends fo.v{}(class fd extends sw.o{constructor(N,L){super(N,L),this.scheduler=N,this.work=L}schedule(N,L=0){return L>0?super.schedule(N,L):(this.delay=L,this.state=N,this.scheduler.flush(this),this)}execute(N,L){return L>0||this.closed?super.execute(N,L):this._execute(N,L)}requestAsyncId(N,L,X=0){return null!=X&&X>0||null==X&&this.delay>0?super.requestAsyncId(N,L,X):(N.flush(this),0)}});var Zp=q(4986),su=q(8505),Di=q(5363),Oh=q(9468);const ou=new V.GfV("7.5.0"),Fh="__angularfire_symbol__analyticsIsSupportedValue",Ur="__angularfire_symbol__analyticsIsSupported",ko="__angularfire_symbol__remoteConfigIsSupportedValue",pd="__angularfire_symbol__remoteConfigIsSupported",au="__angularfire_symbol__messagingIsSupportedValue",Ro="__angularfire_symbol__messagingIsSupported";function Qr(P,N,L){if(N){if(1===N.length)return N[0];const ae=N.filter($e=>$e.app===L);if(1===ae.length)return ae[0]}return L.container.getProvider(P).getImmediate({optional:!0})}globalThis[Ur]||(globalThis[Ur]=cc().then(P=>globalThis[Fh]=P).catch(()=>globalThis[Fh]=!1)),globalThis[Ro]||(globalThis[Ro]=od().then(P=>globalThis[au]=P).catch(()=>globalThis[au]=!1)),globalThis[pd]||(globalThis[pd]=g_().then(P=>globalThis[ko]=P).catch(()=>globalThis[ko]=!1));const Uh=(P,N)=>{const L=N?[N]:(0,u.C6)(),X=[];return L.forEach(le=>{le.container.getProvider(P).instances.forEach($e=>{X.includes($e)||X.push($e)})}),X};function Ir(){}class zp{constructor(N,L=x_){this.zone=N,this.delegate=L}now(){return this.delegate.now()}schedule(N,L,X){const le=this.zone;return this.delegate.schedule(function($e){le.runGuarded(()=>{N.apply(this,[$e])})},L,X)}}class gd{constructor(N){this.zone=N,this.task=null}call(N,L){const X=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ir,{},Ir,Ir)),L.pipe((0,su.b)({next:X,complete:X,error:X})).subscribe(N).add(X)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vh=(()=>{class P{constructor(L){this.ngZone=L,this.outsideAngular=L.runOutsideAngular(()=>new zp(Zone.current)),this.insideAngular=L.run(()=>new zp(Zone.current,Zp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(L){return new(L||P)(V.LFG(V.R0b))},P.\u0275prov=V.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function Mt(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function jh(P){return P.pipe((0,Di.Q)(Mt().outsideAngular))}function hc(P){return Mt(),function md(P){return function(L){return(L=L.lift(new gd(P.ngZone))).pipe((0,Oh.R)(P.outsideAngular),(0,Di.Q)(P.insideAngular))}}(Mt())(P)}},2722:(Te,ye,q)=>{"use strict";q.d(ye,{$:()=>Wu,A:()=>ie,B:()=>me,G:()=>Uu,H:()=>oi,J:()=>Jo,L:()=>se,M:()=>Gu,N:()=>m_,P:()=>Zp,Q:()=>Rp,R:()=>Rh,T:()=>Pp,U:()=>Zl,V:()=>oo,W:()=>ao,X:()=>hh,Y:()=>cr,Z:()=>id,_:()=>ph,a:()=>ll,a0:()=>Op,a1:()=>gh,a2:()=>un,a3:()=>mh,a4:()=>Fp,a5:()=>_h,a6:()=>v_,a7:()=>ze,a8:()=>Lp,a9:()=>yh,aA:()=>ee,aB:()=>Vt,aC:()=>jh,aD:()=>Da,aE:()=>or,aI:()=>nu,aL:()=>zl,aa:()=>uo,ab:()=>vh,ac:()=>iw,af:()=>Xu,ag:()=>ea,ah:()=>w_,ak:()=>tl,al:()=>tc,an:()=>Bp,ao:()=>eu,ap:()=>Be,aq:()=>$t,ar:()=>xt,as:()=>Le,at:()=>Jp,au:()=>ws,av:()=>Hn,aw:()=>Ue,ax:()=>_e,ay:()=>pt,az:()=>bt,b:()=>hr,c:()=>au,d:()=>ow,e:()=>Lh,f:()=>md,g:()=>X,h:()=>P,i:()=>gl,j:()=>$e,k:()=>Jr,l:()=>Gp,m:()=>Po,o:()=>Me,r:()=>sw,s:()=>hd,u:()=>x_,z:()=>Kr});var V=q(5861),u=q(2090),$=q(9681),ge=q(1877),Ie=q(655),xe=q(4859);const Me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ie={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const me=function fe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},qe=function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},te=new u.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pe=new ge.Yd("@firebase/auth");function De(I,...v){pe.logLevel<=ge.in.ERROR&&pe.error(`Auth (${$.SDK_VERSION}): ${I}`,...v)}function Le(I,...v){throw nt(I,...v)}function Ue(I,...v){return nt(I,...v)}function Fe(I,v,b){const M=Object.assign(Object.assign({},qe()),{[v]:b});return new u.LL("auth","Firebase",M).create(v,{appName:I.name})}function He(I,v,b){if(!(v instanceof b))throw b.name!==v.constructor.name&&Le(I,"argument-error"),Fe(I,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nt(I,...v){if("string"!=typeof I){const b=v[0],M=[...v.slice(1)];return M[0]&&(M[0].appName=I.name),I._errorFactory.create(b,...M)}return te.create(I,...v)}function _e(I,v,...b){if(!I)throw nt(v,...b)}function Re(I){const v="INTERNAL ASSERTION FAILED: "+I;throw De(v),new Error(v)}function Be(I,v){I||Re(v)}const gt=new Map;function bt(I){Be(I instanceof Function,"Expected a class definition");let v=gt.get(I);return v?(Be(v instanceof I,"Instance stored in cache mismatched with class"),v):(v=new I,gt.set(I,v),v)}function ce(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function Oe(){return"http:"===Ve()||"https:"===Ve()}function Ve(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class ot{constructor(v,b){this.shortDelay=v,this.longDelay=b,Be(b>v,"Short delay should be less than long delay!"),this.isMobile=(0,u.uI)()||(0,u.b$)()}get(){return function Ye(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Oe()||(0,u.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wt(I,v){Be(I.emulator,"Emulator should always be set here");const{url:b}=I.emulator;return v?`${b}${v.startsWith("/")?v.slice(1):v}`:b}class _t{static initialize(v,b,M){this.fetchImpl=v,b&&(this.headersImpl=b),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Re("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Re("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Re("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ii={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Jt=new ot(3e4,6e4);function Zt(I,v){return I.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:I.tenantId}):v}function Ft(I,v,b,M){return pn.apply(this,arguments)}function pn(){return(pn=(0,V.Z)(function*(I,v,b,M,U={}){return Yn(I,U,(0,V.Z)(function*(){let z={},be={};M&&("GET"===v?be=M:z={body:JSON.stringify(M)});const Ze=(0,u.xO)(Object.assign({key:I.config.apiKey},be)).slice(1),It=yield I._getAdditionalHeaders();return It["Content-Type"]="application/json",I.languageCode&&(It["X-Firebase-Locale"]=I.languageCode),_t.fetch()(Pr(I,I.config.apiHost,b,Ze),Object.assign({method:v,headers:It,referrerPolicy:"no-referrer"},z))}))})).apply(this,arguments)}function Yn(I,v,b){return ri.apply(this,arguments)}function ri(){return(ri=(0,V.Z)(function*(I,v,b){I._canInitEmulator=!1;const M=Object.assign(Object.assign({},ii),v);try{const U=new ro(I),z=yield Promise.race([b(),U.promise]);U.clearNetworkTimeout();const be=yield z.json();if("needConfirmation"in be)throw Ii(I,"account-exists-with-different-credential",be);if(z.ok&&!("errorMessage"in be))return be;{const Ze=z.ok?be.errorMessage:be.error.message,[It,Bt]=Ze.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===It)throw Ii(I,"credential-already-in-use",be);if("EMAIL_EXISTS"===It)throw Ii(I,"email-already-in-use",be);if("USER_DISABLED"===It)throw Ii(I,"user-disabled",be);const _n=M[It]||It.toLowerCase().replace(/[_\s]+/g,"-");if(Bt)throw Fe(I,_n,Bt);Le(I,_n)}}catch(U){if(U instanceof u.ZR)throw U;Le(I,"network-request-failed")}})).apply(this,arguments)}function Pn(I,v,b,M){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,V.Z)(function*(I,v,b,M,U={}){const z=yield Ft(I,v,b,M,U);return"mfaPendingCredential"in z&&Le(I,"multi-factor-auth-required",{_serverResponse:z}),z})).apply(this,arguments)}function Pr(I,v,b,M){const U=`${v}${b}?${M}`;return I.config.emulator?wt(I.config,U):`${I.config.apiScheme}://${U}`}class ro{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((b,M)=>{this.timer=setTimeout(()=>M(Ue(this.auth,"network-request-failed")),Jt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ii(I,v,b){const M={appName:I.name};b.email&&(M.email=b.email),b.phoneNumber&&(M.phoneNumber=b.phoneNumber);const U=Ue(I,v,M);return U.customData._tokenResponse=b,U}function us(){return(us=(0,V.Z)(function*(I,v){return Ft(I,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function ei(){return(ei=(0,V.Z)(function*(I,v){return Ft(I,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function ir(){return(ir=(0,V.Z)(function*(I,v){return Ft(I,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function yr(I){if(I)try{const v=new Date(Number(I));if(!isNaN(v.getTime()))return v.toUTCString()}catch{}}function qi(){return(qi=(0,V.Z)(function*(I,v=!1){const b=(0,u.m9)(I),M=yield b.getIdToken(v),U=Qn(M);_e(U&&U.exp&&U.auth_time&&U.iat,b.auth,"internal-error");const z="object"==typeof U.firebase?U.firebase:void 0,be=z?.sign_in_provider;return{claims:U,token:M,authTime:yr(zn(U.auth_time)),issuedAtTime:yr(zn(U.iat)),expirationTime:yr(zn(U.exp)),signInProvider:be||null,signInSecondFactor:z?.sign_in_second_factor||null}})).apply(this,arguments)}function zn(I){return 1e3*Number(I)}function Qn(I){const[v,b,M]=I.split(".");if(void 0===v||void 0===b||void 0===M)return De("JWT malformed, contained fewer than 3 sections"),null;try{const U=(0,u.tV)(b);return U?JSON.parse(U):(De("Failed to decode base64 JWT payload"),null)}catch(U){return De("Caught error parsing JWT payload as JSON",U?.toString()),null}}function At(I,v){return wr.apply(this,arguments)}function wr(){return(wr=(0,V.Z)(function*(I,v,b=!1){if(b)return v;try{return yield v}catch(M){throw M instanceof u.ZR&&function Zi({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}(M)&&I.auth.currentUser===I&&(yield I.auth.signOut()),M}})).apply(this,arguments)}class zi{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var b;if(v){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const U=(null!==(b=this.user.stsTokenManager.expirationTime)&&void 0!==b?b:0)-Date.now()-3e5;return Math.max(0,U)}}schedule(v=!1){var b=this;if(!this.isRunning)return;const M=this.getInterval(v);this.timerId=setTimeout((0,V.Z)(function*(){yield b.iteration()}),M)}iteration(){var v=this;return(0,V.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===b?.code&&v.schedule(!0))}v.schedule()})()}}class Ds{constructor(v,b){this.createdAt=v,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=yr(this.lastLoginAt),this.creationTime=yr(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vi(I){return fi.apply(this,arguments)}function fi(){return fi=(0,V.Z)(function*(I){var v;const b=I.auth,M=yield I.getIdToken(),U=yield At(I,function Tt(I,v){return ir.apply(this,arguments)}(b,{idToken:M}));_e(U?.users.length,b,"internal-error");const z=U.users[0];I._notifyReloadListener(z);const be=null!==(v=z.providerUserInfo)&&void 0!==v&&v.length?function rr(I){return I.map(v=>{var{providerId:b}=v,M=(0,Ie._T)(v,["providerId"]);return{providerId:b,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}(z.providerUserInfo):[],Ze=function mn(I,v){return[...I.filter(M=>!v.some(U=>U.providerId===M.providerId)),...v]}(I.providerData,be),_n=!!I.isAnonymous&&!(I.email&&z.passwordHash||Ze?.length),li={uid:z.localId,displayName:z.displayName||null,photoURL:z.photoUrl||null,email:z.email||null,emailVerified:z.emailVerified||!1,phoneNumber:z.phoneNumber||null,tenantId:z.tenantId||null,providerData:Ze,metadata:new Ds(z.createdAt,z.lastLoginAt),isAnonymous:_n};Object.assign(I,li)}),fi.apply(this,arguments)}function Zr(){return(Zr=(0,V.Z)(function*(I){const v=(0,u.m9)(I);yield vi(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function Ge(){return(Ge=(0,V.Z)(function*(I,v){const b=yield Yn(I,{},(0,V.Z)(function*(){const M=(0,u.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:U,apiKey:z}=I.config,be=Pr(I,U,"/v1/token",`key=${z}`),Ze=yield I._getAdditionalHeaders();return Ze["Content-Type"]="application/x-www-form-urlencoded",_t.fetch()(be,{method:"POST",headers:Ze,body:M})}));return{accessToken:b.access_token,expiresIn:b.expires_in,refreshToken:b.refresh_token}})).apply(this,arguments)}class yt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){_e(v.idToken,"internal-error"),_e(typeof v.idToken<"u","internal-error"),_e(typeof v.refreshToken<"u","internal-error");const b="expiresIn"in v&&typeof v.expiresIn<"u"?Number(v.expiresIn):function zt(I){const v=Qn(I);return _e(v,"internal-error"),_e(typeof v.exp<"u","internal-error"),_e(typeof v.iat<"u","internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,b)}getToken(v,b=!1){var M=this;return(0,V.Z)(function*(){return _e(!M.accessToken||M.refreshToken,v,"user-token-expired"),b||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(v,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,b){var M=this;return(0,V.Z)(function*(){const{accessToken:U,refreshToken:z,expiresIn:be}=yield function rt(I,v){return Ge.apply(this,arguments)}(v,b);M.updateTokensAndExpiration(U,z,Number(be))})()}updateTokensAndExpiration(v,b,M){this.refreshToken=b||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(v,b){const{refreshToken:M,accessToken:U,expirationTime:z}=b,be=new yt;return M&&(_e("string"==typeof M,"internal-error",{appName:v}),be.refreshToken=M),U&&(_e("string"==typeof U,"internal-error",{appName:v}),be.accessToken=U),z&&(_e("number"==typeof z,"internal-error",{appName:v}),be.expirationTime=z),be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new yt,this.toJSON())}_performRefresh(){return Re("not implemented")}}function Xt(I,v){_e("string"==typeof I||typeof I>"u","internal-error",{appName:v})}class nn{constructor(v){var{uid:b,auth:M,stsTokenManager:U}=v,z=(0,Ie._T)(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=b,this.auth=M,this.stsTokenManager=U,this.accessToken=U.accessToken,this.displayName=z.displayName||null,this.email=z.email||null,this.emailVerified=z.emailVerified||!1,this.phoneNumber=z.phoneNumber||null,this.photoURL=z.photoURL||null,this.isAnonymous=z.isAnonymous||!1,this.tenantId=z.tenantId||null,this.providerData=z.providerData?[...z.providerData]:[],this.metadata=new Ds(z.createdAt||void 0,z.lastLoginAt||void 0)}getIdToken(v){var b=this;return(0,V.Z)(function*(){const M=yield At(b,b.stsTokenManager.getToken(b.auth,v));return _e(M,b.auth,"internal-error"),b.accessToken!==M&&(b.accessToken=M,yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)),M})()}getIdTokenResult(v){return function vr(I){return qi.apply(this,arguments)}(this,v)}reload(){return function Nn(I){return Zr.apply(this,arguments)}(this)}_assign(v){this!==v&&(_e(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(b=>Object.assign({},b)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){return new nn(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(v){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,b=!1){var M=this;return(0,V.Z)(function*(){let U=!1;v.idToken&&v.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(v),U=!0),b&&(yield vi(M)),yield M.auth._persistUserIfCurrent(M),U&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var v=this;return(0,V.Z)(function*(){const b=yield v.getIdToken();return yield At(v,function ls(I,v){return us.apply(this,arguments)}(v.auth,{idToken:b})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,b){var M,U,z,be,Ze,It,Bt,_n;const li=null!==(M=b.displayName)&&void 0!==M?M:void 0,_o=null!==(U=b.email)&&void 0!==U?U:void 0,ra=null!==(z=b.phoneNumber)&&void 0!==z?z:void 0,wd=null!==(be=b.photoURL)&&void 0!==be?be:void 0,cu=null!==(Ze=b.tenantId)&&void 0!==Ze?Ze:void 0,bd=null!==(It=b._redirectEventId)&&void 0!==It?It:void 0,du=null!==(Bt=b.createdAt)&&void 0!==Bt?Bt:void 0,eg=null!==(_n=b.lastLoginAt)&&void 0!==_n?_n:void 0,{uid:bl,emailVerified:tg,isAnonymous:$_,providerData:ng,stsTokenManager:G_}=b;_e(bl&&G_,v,"internal-error");const fw=yt.fromJSON(this.name,G_);_e("string"==typeof bl,v,"internal-error"),Xt(li,v.name),Xt(_o,v.name),_e("boolean"==typeof tg,v,"internal-error"),_e("boolean"==typeof $_,v,"internal-error"),Xt(ra,v.name),Xt(wd,v.name),Xt(cu,v.name),Xt(bd,v.name),Xt(du,v.name),Xt(eg,v.name);const Gh=new nn({uid:bl,auth:v,email:_o,emailVerified:tg,displayName:li,isAnonymous:$_,photoURL:wd,phoneNumber:ra,tenantId:cu,stsTokenManager:fw,createdAt:du,lastLoginAt:eg});return ng&&Array.isArray(ng)&&(Gh.providerData=ng.map(qh=>Object.assign({},qh))),bd&&(Gh._redirectEventId=bd),Gh}static _fromIdTokenResponse(v,b,M=!1){return(0,V.Z)(function*(){const U=new yt;U.updateFromServerResponse(b);const z=new nn({uid:b.localId,auth:v,stsTokenManager:U,isAnonymous:M});return yield vi(z),z})()}}const se=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,V.Z)(function*(){return!0})()}_set(b,M){var U=this;return(0,V.Z)(function*(){U.storage[b]=M})()}_get(b){var M=this;return(0,V.Z)(function*(){const U=M.storage[b];return void 0===U?null:U})()}_remove(b){var M=this;return(0,V.Z)(function*(){delete M.storage[b]})()}_addListener(b,M){}_removeListener(b,M){}}return I.type="NONE",I})();function ee(I,v,b){return`firebase:${I}:${v}:${b}`}class he{constructor(v,b,M){this.persistence=v,this.auth=b,this.userKey=M;const{config:U,name:z}=this.auth;this.fullUserKey=ee(this.userKey,U.apiKey,z),this.fullPersistenceKey=ee("persistence",U.apiKey,z),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,V.Z)(function*(){const b=yield v.persistence._get(v.fullUserKey);return b?nn._fromJSON(v.auth,b):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var b=this;return(0,V.Z)(function*(){if(b.persistence===v)return;const M=yield b.getCurrentUser();return yield b.removeCurrentUser(),b.persistence=v,M?b.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,b,M="authUser"){return(0,V.Z)(function*(){if(!b.length)return new he(bt(se),v,M);const U=(yield Promise.all(b.map(function(){var Bt=(0,V.Z)(function*(_n){if(yield _n._isAvailable())return _n});return function(_n){return Bt.apply(this,arguments)}}()))).filter(Bt=>Bt);let z=U[0]||bt(se);const be=ee(M,v.config.apiKey,v.name);let Ze=null;for(const Bt of b)try{const _n=yield Bt._get(be);if(_n){const li=nn._fromJSON(v,_n);Bt!==z&&(Ze=li),z=Bt;break}}catch{}const It=U.filter(Bt=>Bt._shouldAllowMigration);return z._shouldAllowMigration&&It.length?(z=It[0],Ze&&(yield z._set(be,Ze.toJSON())),yield Promise.all(b.map(function(){var Bt=(0,V.Z)(function*(_n){if(_n!==z)try{yield _n._remove(be)}catch{}});return function(_n){return Bt.apply(this,arguments)}}())),new he(z,v,M)):new he(z,v,M)})()}}function J(I){const v=I.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(We(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(H(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(ft(v))return"Blackberry";if(hn(v))return"Webos";if(Q(v))return"Safari";if((v.includes("chrome/")||Ae(v))&&!v.includes("edge/"))return"Chrome";if(xt(v))return"Android";{const M=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===M?.length)return M[1]}return"Other"}function H(I=(0,u.z$)()){return/firefox\//i.test(I)}function Q(I=(0,u.z$)()){const v=I.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function Ae(I=(0,u.z$)()){return/crios\//i.test(I)}function We(I=(0,u.z$)()){return/iemobile/i.test(I)}function xt(I=(0,u.z$)()){return/android/i.test(I)}function ft(I=(0,u.z$)()){return/blackberry/i.test(I)}function hn(I=(0,u.z$)()){return/webos/i.test(I)}function $t(I=(0,u.z$)()){return/iphone|ipad|ipod/i.test(I)||/macintosh/i.test(I)&&/mobile/i.test(I)}function Hn(I=(0,u.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}function br(I=(0,u.z$)()){return $t(I)||xt(I)||hn(I)||ft(I)||/windows phone/i.test(I)||We(I)}function Fu(I,v=[]){let b;switch(I){case"Browser":b=J((0,u.z$)());break;case"Worker":b=`${J((0,u.z$)())}-${I}`;break;default:b=I}const M=v.length?v.join(","):"FirebaseCore-web";return`${b}/JsCore/${$.SDK_VERSION}/${M}`}class jl{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,b){const M=z=>new Promise((be,Ze)=>{try{be(v(z))}catch(It){Ze(It)}});M.onAbort=b,this.queue.push(M);const U=this.queue.length-1;return()=>{this.queue[U]=()=>Promise.resolve()}}runMiddleware(v){var b=this;return(0,V.Z)(function*(){if(b.auth.currentUser===v)return;const M=[];try{for(const U of b.queue)yield U(v),U.onAbort&&M.push(U.onAbort)}catch(U){M.reverse();for(const z of M)try{z()}catch{}throw b.auth._errorFactory.create("login-blocked",{originalMessage:U?.message})}})()}}class Jc{constructor(v,b,M){this.app=v,this.heartbeatServiceProvider=b,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lu(this),this.idTokenSubscription=new Lu(this),this.beforeStateQueue=new jl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=te,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(v,b){var M=this;return b&&(this._popupRedirectResolver=bt(b)),this._initializationPromise=this.queue((0,V.Z)(function*(){var U,z;if(!M._deleted&&(M.persistenceManager=yield he.create(M,v),!M._deleted)){if(null!==(U=M._popupRedirectResolver)&&void 0!==U&&U._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch{}yield M.initializeCurrentUser(b),M.lastNotifiedUid=(null===(z=M.currentUser)||void 0===z?void 0:z.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,V.Z)(function*(){if(v._deleted)return;const b=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||b){if(v.currentUser&&b&&v.currentUser.uid===b.uid)return v._currentUser._assign(b),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(b,!0)}})()}initializeCurrentUser(v){var b=this;return(0,V.Z)(function*(){var M;const U=yield b.assertedPersistence.getCurrentUser();let z=U,be=!1;if(v&&b.config.authDomain){yield b.getOrInitRedirectPersistenceManager();const Ze=null===(M=b.redirectUser)||void 0===M?void 0:M._redirectEventId,It=z?._redirectEventId,Bt=yield b.tryRedirectSignIn(v);(!Ze||Ze===It)&&Bt?.user&&(z=Bt.user,be=!0)}if(!z)return b.directlySetCurrentUser(null);if(!z._redirectEventId){if(be)try{yield b.beforeStateQueue.runMiddleware(z)}catch(Ze){z=U,b._popupRedirectResolver._overrideRedirectResult(b,()=>Promise.reject(Ze))}return z?b.reloadAndSetCurrentUserOrClear(z):b.directlySetCurrentUser(null)}return _e(b._popupRedirectResolver,b,"argument-error"),yield b.getOrInitRedirectPersistenceManager(),b.redirectUser&&b.redirectUser._redirectEventId===z._redirectEventId?b.directlySetCurrentUser(z):b.reloadAndSetCurrentUserOrClear(z)})()}tryRedirectSignIn(v){var b=this;return(0,V.Z)(function*(){let M=null;try{M=yield b._popupRedirectResolver._completeRedirectFn(b,v,!0)}catch{yield b._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(v){var b=this;return(0,V.Z)(function*(){try{yield vi(v)}catch(M){if("auth/network-request-failed"!==M?.code)return b.directlySetCurrentUser(null)}return b.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function it(){if(typeof navigator>"u")return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var v=this;return(0,V.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var b=this;return(0,V.Z)(function*(){const M=v?(0,u.m9)(v):null;return M&&_e(M.auth.config.apiKey===b.config.apiKey,b,"invalid-user-token"),b._updateCurrentUser(M&&M._clone(b))})()}_updateCurrentUser(v,b=!1){var M=this;return(0,V.Z)(function*(){if(!M._deleted)return v&&_e(M.tenantId===v.tenantId,M,"tenant-id-mismatch"),b||(yield M.beforeStateQueue.runMiddleware(v)),M.queue((0,V.Z)(function*(){yield M.directlySetCurrentUser(v),M.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,V.Z)(function*(){return yield v.beforeStateQueue.runMiddleware(null),(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null,!0)})()}setPersistence(v){var b=this;return this.queue((0,V.Z)(function*(){yield b.assertedPersistence.setPersistence(bt(v))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new u.LL("auth","Firebase",v())}onAuthStateChanged(v,b,M){return this.registerStateListener(this.authStateSubscription,v,b,M)}beforeAuthStateChanged(v,b){return this.beforeStateQueue.pushCallback(v,b)}onIdTokenChanged(v,b,M){return this.registerStateListener(this.idTokenSubscription,v,b,M)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,b){var M=this;return(0,V.Z)(function*(){const U=yield M.getOrInitRedirectPersistenceManager(b);return null===v?U.removeCurrentUser():U.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var b=this;return(0,V.Z)(function*(){if(!b.redirectPersistenceManager){const M=v&&bt(v)||b._popupRedirectResolver;_e(M,b,"argument-error"),b.redirectPersistenceManager=yield he.create(b,[bt(M._redirectPersistence)],"redirectUser"),b.redirectUser=yield b.redirectPersistenceManager.getCurrentUser()}return b.redirectPersistenceManager})()}_redirectUserForId(v){var b=this;return(0,V.Z)(function*(){var M,U;return b._isInitialized&&(yield b.queue((0,V.Z)(function*(){}))),(null===(M=b._currentUser)||void 0===M?void 0:M._redirectEventId)===v?b._currentUser:(null===(U=b.redirectUser)||void 0===U?void 0:U._redirectEventId)===v?b.redirectUser:null})()}_persistUserIfCurrent(v){var b=this;return(0,V.Z)(function*(){if(v===b.currentUser)return b.queue((0,V.Z)(function*(){return b.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(b=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==b?b:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,b,M,U){if(this._deleted)return()=>{};const z="function"==typeof b?b:b.next.bind(b),be=this._isInitialized?Promise.resolve():this._initializationPromise;return _e(be,this,"internal-error"),be.then(()=>z(this.currentUser)),"function"==typeof b?v.addObserver(b,M,U):v.addObserver(b)}directlySetCurrentUser(v){var b=this;return(0,V.Z)(function*(){b.currentUser&&b.currentUser!==v&&b._currentUser._stopProactiveRefresh(),v&&b.isProactiveRefreshEnabled&&v._startProactiveRefresh(),b.currentUser=v,v?yield b.assertedPersistence.setCurrentUser(v):yield b.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=Fu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var v=this;return(0,V.Z)(function*(){var b;const M={"X-Client-Version":v.clientVersion};v.app.options.appId&&(M["X-Firebase-gmpid"]=v.app.options.appId);const U=yield null===(b=v.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getHeartbeatsHeader();return U&&(M["X-Firebase-Client"]=U),M})()}}function or(I){return(0,u.m9)(I)}class Lu{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,u.ne)(b=>this.observer=b)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Uu(I,v,b){const M=or(I);_e(M._canInitEmulator,M,"emulator-config-failed"),_e(/^https?:\/\//.test(v),M,"invalid-emulator-scheme");const U=!!b?.disableWarnings,z=Xc(v),{host:be,port:Ze}=function Vu(I){const v=Xc(I),b=/(\/\/)?([^?#/]+)/.exec(I.substr(v.length));if(!b)return{host:"",port:null};const M=b[2].split("@").pop()||"",U=/^(\[[^\]]+\])(:|$)/.exec(M);if(U){const z=U[1];return{host:z,port:Bu(M.substr(z.length+1))}}{const[z,be]=M.split(":");return{host:z,port:Bu(be)}}}(v);M.config.emulator={url:`${z}//${be}${null===Ze?"":`:${Ze}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:be,port:Ze,protocol:z.replace(":",""),options:Object.freeze({disableWarnings:U})}),U||function xn(){function I(){const v=document.createElement("p"),b=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",I):I())}()}function Xc(I){const v=I.indexOf(":");return v<0?"":I.substr(0,v+1)}function Bu(I){if(!I)return null;const v=Number(I);return isNaN(v)?null:v}class oi{constructor(v,b){this.providerId=v,this.signInMethod=b}toJSON(){return Re("not implemented")}_getIdTokenResponse(v){return Re("not implemented")}_linkToIdToken(v,b){return Re("not implemented")}_getReauthenticationResolver(v){return Re("not implemented")}}function ar(I,v){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,V.Z)(function*(I,v){return Ft(I,"POST","/v1/accounts:resetPassword",Zt(I,v))})).apply(this,arguments)}function cs(I,v){return As.apply(this,arguments)}function As(){return(As=(0,V.Z)(function*(I,v){return Ft(I,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function on(){return(on=(0,V.Z)(function*(I,v){return Ft(I,"POST","/v1/accounts:update",Zt(I,v))})).apply(this,arguments)}function Or(){return(Or=(0,V.Z)(function*(I,v){return Pn(I,"POST","/v1/accounts:signInWithPassword",Zt(I,v))})).apply(this,arguments)}function so(I,v){return Li.apply(this,arguments)}function Li(){return(Li=(0,V.Z)(function*(I,v){return Ft(I,"POST","/v1/accounts:sendOobCode",Zt(I,v))})).apply(this,arguments)}function On(){return(On=(0,V.Z)(function*(I,v){return so(I,v)})).apply(this,arguments)}function Qo(){return(Qo=(0,V.Z)(function*(I,v){return so(I,v)})).apply(this,arguments)}function ju(){return(ju=(0,V.Z)(function*(I,v){return so(I,v)})).apply(this,arguments)}function Gl(){return(Gl=(0,V.Z)(function*(I,v){return so(I,v)})).apply(this,arguments)}function Ui(){return(Ui=(0,V.Z)(function*(I,v){return Pn(I,"POST","/v1/accounts:signInWithEmailLink",Zt(I,v))})).apply(this,arguments)}function ga(){return(ga=(0,V.Z)(function*(I,v){return Pn(I,"POST","/v1/accounts:signInWithEmailLink",Zt(I,v))})).apply(this,arguments)}class Fr extends oi{constructor(v,b,M,U=null){super("password",M),this._email=v,this._password=b,this._tenantId=U}static _fromEmailAndPassword(v,b){return new Fr(v,b,"password")}static _fromEmailAndCode(v,b,M=null){return new Fr(v,b,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v;if(b?.email&&b?.password){if("password"===b.signInMethod)return this._fromEmailAndPassword(b.email,b.password);if("emailLink"===b.signInMethod)return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}_getIdTokenResponse(v){var b=this;return(0,V.Z)(function*(){switch(b.signInMethod){case"password":return function wi(I,v){return Or.apply(this,arguments)}(v,{returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function ds(I,v){return Ui.apply(this,arguments)}(v,{email:b._email,oobCode:b._password});default:Le(v,"internal-error")}})()}_linkToIdToken(v,b){var M=this;return(0,V.Z)(function*(){switch(M.signInMethod){case"password":return cs(v,{idToken:b,returnSecureToken:!0,email:M._email,password:M._password});case"emailLink":return function Xa(I,v){return ga.apply(this,arguments)}(v,{idToken:b,email:M._email,oobCode:M._password});default:Le(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function hs(I,v){return Io.apply(this,arguments)}function Io(){return(Io=(0,V.Z)(function*(I,v){return Pn(I,"POST","/v1/accounts:signInWithIdp",Zt(I,v))})).apply(this,arguments)}class Jo extends oi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const b=new Jo(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(b.idToken=v.idToken),v.accessToken&&(b.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(b.nonce=v.nonce),v.pendingToken&&(b.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(b.accessToken=v.oauthToken,b.secret=v.oauthTokenSecret):Le("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v,{providerId:M,signInMethod:U}=b,z=(0,Ie._T)(b,["providerId","signInMethod"]);if(!M||!U)return null;const be=new Jo(M,U);return be.idToken=z.idToken||void 0,be.accessToken=z.accessToken||void 0,be.secret=z.secret,be.nonce=z.nonce,be.pendingToken=z.pendingToken||null,be}_getIdTokenResponse(v){return hs(v,this.buildRequest())}_linkToIdToken(v,b){const M=this.buildRequest();return M.idToken=b,hs(v,M)}_getReauthenticationResolver(v){const b=this.buildRequest();return b.autoCreate=!1,hs(v,b)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),v.postBody=(0,u.xO)(b)}return v}}function Hu(){return(Hu=(0,V.Z)(function*(I,v){return Ft(I,"POST","/v1/accounts:sendVerificationCode",Zt(I,v))})).apply(this,arguments)}function To(){return(To=(0,V.Z)(function*(I,v){return Pn(I,"POST","/v1/accounts:signInWithPhoneNumber",Zt(I,v))})).apply(this,arguments)}function lr(){return(lr=(0,V.Z)(function*(I,v){const b=yield Pn(I,"POST","/v1/accounts:signInWithPhoneNumber",Zt(I,v));if(b.temporaryProof)throw Ii(I,"account-exists-with-different-credential",b);return b})).apply(this,arguments)}const p_={USER_NOT_FOUND:"user-not-found"};function gs(){return(gs=(0,V.Z)(function*(I,v){return Pn(I,"POST","/v1/accounts:signInWithPhoneNumber",Zt(I,Object.assign(Object.assign({},v),{operation:"REAUTH"})),p_)})).apply(this,arguments)}class So extends oi{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,b){return new So({verificationId:v,verificationCode:b})}static _fromTokenResponse(v,b){return new So({phoneNumber:v,temporaryProof:b})}_getIdTokenResponse(v){return function $u(I,v){return To.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,b){return function Ms(I,v){return lr.apply(this,arguments)}(v,Object.assign({idToken:b},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function ps(I,v){return gs.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:b,verificationId:M,verificationCode:U}=this.params;return v&&b?{temporaryProof:v,phoneNumber:b}:{sessionInfo:M,code:U}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:b,verificationCode:M,phoneNumber:U,temporaryProof:z}=v;return M||b||U||z?new So({verificationId:b,verificationCode:M,phoneNumber:U,temporaryProof:z}):null}}class ur{constructor(v){var b,M,U,z,be,Ze;const It=(0,u.zd)((0,u.pd)(v)),Bt=null!==(b=It.apiKey)&&void 0!==b?b:null,_n=null!==(M=It.oobCode)&&void 0!==M?M:null,li=function ql(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(U=It.mode)&&void 0!==U?U:null);_e(Bt&&_n&&li,"argument-error"),this.apiKey=Bt,this.operation=li,this.code=_n,this.continueUrl=null!==(z=It.continueUrl)&&void 0!==z?z:null,this.languageCode=null!==(be=It.languageCode)&&void 0!==be?be:null,this.tenantId=null!==(Ze=It.tenantId)&&void 0!==Ze?Ze:null}static parseLink(v){const b=function ed(I){const v=(0,u.zd)((0,u.pd)(I)).link,b=v?(0,u.zd)((0,u.pd)(v)).deep_link_id:null,M=(0,u.zd)((0,u.pd)(I)).deep_link_id;return(M?(0,u.zd)((0,u.pd)(M)).link:null)||M||b||v||I}(v);try{return new ur(b)}catch{return null}}}let Gu=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(b,M){return Fr._fromEmailAndPassword(b,M)}static credentialWithLink(b,M){const U=ur.parseLink(M);return _e(U,"argument-error"),Fr._fromEmailAndCode(b,U.code,U.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class Do{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class el extends Do{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class Zl extends el{static credentialFromJSON(v){const b="string"==typeof v?JSON.parse(v):v;return _e("providerId"in b&&"signInMethod"in b,"argument-error"),Jo._fromParams(b)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return _e(v.idToken||v.accessToken,"argument-error"),Jo._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return Zl.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return Zl.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:b,oauthAccessToken:M,oauthTokenSecret:U,pendingToken:z,nonce:be,providerId:Ze}=v;if(!M&&!U&&!b&&!z||!Ze)return null;try{return new Zl(Ze)._credential({idToken:b,accessToken:M,nonce:be,pendingToken:z})}catch{return null}}}let m_=(()=>{class I extends el{constructor(){super("facebook.com")}static credential(b){return Jo._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return I.credentialFromTaggedObject(b)}static credentialFromError(b){return I.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return I.credential(b.oauthAccessToken)}catch{return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),Rp=(()=>{class I extends el{constructor(){super("google.com"),this.addScope("profile")}static credential(b,M){return Jo._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:b,accessToken:M})}static credentialFromResult(b){return I.credentialFromTaggedObject(b)}static credentialFromError(b){return I.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:M,oauthAccessToken:U}=b;if(!M&&!U)return null;try{return I.credential(M,U)}catch{return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),Pp=(()=>{class I extends el{constructor(){super("github.com")}static credential(b){return Jo._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return I.credentialFromTaggedObject(b)}static credentialFromError(b){return I.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return I.credential(b.oauthAccessToken)}catch{return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class zl extends oi{constructor(v,b){super(v,v),this.pendingToken=b}_getIdTokenResponse(v){return hs(v,this.buildRequest())}_linkToIdToken(v,b){const M=this.buildRequest();return M.idToken=b,hs(v,M)}_getReauthenticationResolver(v){const b=this.buildRequest();return b.autoCreate=!1,hs(v,b)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v,{providerId:M,signInMethod:U,pendingToken:z}=b;return M&&U&&z&&M===U?new zl(M,z):null}static _create(v,b){return new zl(v,b)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class oo extends Do{constructor(v){_e(v.startsWith("saml."),"argument-error"),super(v)}static credentialFromResult(v){return oo.samlCredentialFromTaggedObject(v)}static credentialFromError(v){return oo.samlCredentialFromTaggedObject(v.customData||{})}static credentialFromJSON(v){const b=zl.fromJSON(v);return _e(b,"argument-error"),b}static samlCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{pendingToken:b,providerId:M}=v;if(!b||!M)return null;try{return zl._create(M,b)}catch{return null}}}let ao=(()=>{class I extends el{constructor(){super("twitter.com")}static credential(b,M){return Jo._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:b,oauthTokenSecret:M})}static credentialFromResult(b){return I.credentialFromTaggedObject(b)}static credentialFromError(b){return I.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthAccessToken:M,oauthTokenSecret:U}=b;if(!M||!U)return null;try{return I.credential(M,U)}catch{return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function y_(I,v){return td.apply(this,arguments)}function td(){return(td=(0,V.Z)(function*(I,v){return Pn(I,"POST","/v1/accounts:signUp",Zt(I,v))})).apply(this,arguments)}class ms{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,b,M,U=!1){return(0,V.Z)(function*(){const z=yield nn._fromIdTokenResponse(v,M,U),be=Wl(M);return new ms({user:z,providerId:be,_tokenResponse:M,operationType:b})})()}static _forOperation(v,b,M){return(0,V.Z)(function*(){yield v._updateTokensIfNecessary(M,!0);const U=Wl(M);return new ms({user:v,providerId:U,_tokenResponse:M,operationType:b})})()}}function Wl(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function hh(I){return qu.apply(this,arguments)}function qu(){return(qu=(0,V.Z)(function*(I){var v;const b=or(I);if(yield b._initializationPromise,null!==(v=b.currentUser)&&void 0!==v&&v.isAnonymous)return new ms({user:b.currentUser,providerId:null,operationType:"signIn"});const M=yield y_(b,{returnSecureToken:!0}),U=yield ms._fromIdTokenResponse(b,"signIn",M,!0);return yield b._updateCurrentUser(U.user),U})).apply(this,arguments)}class nd extends u.ZR{constructor(v,b,M,U){var z;super(b.code,b.message),this.operationType=M,this.user=U,Object.setPrototypeOf(this,nd.prototype),this.customData={appName:v.name,tenantId:null!==(z=v.tenantId)&&void 0!==z?z:void 0,_serverResponse:b.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(v,b,M,U){return new nd(v,b,M,U)}}function Np(I,v,b,M){return("reauthenticate"===v?b._getReauthenticationResolver(I):b._getIdTokenResponse(I)).catch(z=>{throw"auth/multi-factor-auth-required"===z.code?nd._fromErrorAndOperation(I,z,v,M):z})}function Ao(I){return new Set(I.map(({providerId:v})=>v).filter(v=>!!v))}function tl(I,v){return nl.apply(this,arguments)}function nl(){return nl=(0,V.Z)(function*(I,v){const b=(0,u.m9)(I);yield il(!0,b,v);const{providerUserInfo:M}=yield function Nr(I,v){return ei.apply(this,arguments)}(b.auth,{idToken:yield b.getIdToken(),deleteProvider:[v]}),U=Ao(M||[]);return b.providerData=b.providerData.filter(z=>U.has(z.providerId)),U.has("phone")||(b.phoneNumber=null),yield b.auth._persistUserIfCurrent(b),b}),nl.apply(this,arguments)}function Kl(I,v){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,V.Z)(function*(I,v,b=!1){const M=yield At(I,v._linkToIdToken(I.auth,yield I.getIdToken()),b);return ms._forOperation(I,"link",M)})).apply(this,arguments)}function il(I,v,b){return ma.apply(this,arguments)}function ma(){return(ma=(0,V.Z)(function*(I,v,b){yield vi(v);const U=!1===I?"provider-already-linked":"no-such-provider";_e(Ao(v.providerData).has(b)===I,v.auth,U)})).apply(this,arguments)}function Yl(I,v){return fh.apply(this,arguments)}function fh(){return(fh=(0,V.Z)(function*(I,v,b=!1){const{auth:M}=I,U="reauthenticate";try{const z=yield At(I,Np(M,U,v,I),b);_e(z.idToken,M,"internal-error");const be=Qn(z.idToken);_e(be,M,"internal-error");const{sub:Ze}=be;return _e(I.uid===Ze,M,"user-mismatch"),ms._forOperation(I,U,z)}catch(z){throw"auth/user-not-found"===z?.code&&Le(M,"user-mismatch"),z}})).apply(this,arguments)}function _a(I,v){return zu.apply(this,arguments)}function zu(){return(zu=(0,V.Z)(function*(I,v,b=!1){const M="signIn",U=yield Np(I,M,v),z=yield ms._fromIdTokenResponse(I,M,U);return b||(yield I._updateCurrentUser(z.user)),z})).apply(this,arguments)}function cr(I,v){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,V.Z)(function*(I,v){return _a(or(I),v)})).apply(this,arguments)}function id(I,v){return Si.apply(this,arguments)}function Si(){return(Si=(0,V.Z)(function*(I,v){const b=(0,u.m9)(I);return yield il(!1,b,v.providerId),Kl(b,v)})).apply(this,arguments)}function ph(I,v){return qs.apply(this,arguments)}function qs(){return(qs=(0,V.Z)(function*(I,v){return Yl((0,u.m9)(I),v)})).apply(this,arguments)}function Xo(){return(Xo=(0,V.Z)(function*(I,v){return Pn(I,"POST","/v1/accounts:signInWithCustomToken",Zt(I,v))})).apply(this,arguments)}function Wu(I,v){return lo.apply(this,arguments)}function lo(){return lo=(0,V.Z)(function*(I,v){const b=or(I),M=yield function zr(I,v){return Xo.apply(this,arguments)}(b,{token:v,returnSecureToken:!0}),U=yield ms._fromIdTokenResponse(b,"signIn",M);return yield b._updateCurrentUser(U.user),U}),lo.apply(this,arguments)}class dr{constructor(v,b){this.factorId=v,this.uid=b.mfaEnrollmentId,this.enrollmentTime=new Date(b.enrolledAt).toUTCString(),this.displayName=b.displayName}static _fromServerResponse(v,b){return"phoneInfo"in b?Ku._fromServerResponse(v,b):Le(v,"internal-error")}}class Ku extends dr{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,b){return new Ku(b)}}function ya(I,v,b){var M;_e((null===(M=b.url)||void 0===M?void 0:M.length)>0,I,"invalid-continue-uri"),_e(typeof b.dynamicLinkDomain>"u"||b.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),v.continueUrl=b.url,v.dynamicLinkDomain=b.dynamicLinkDomain,v.canHandleCodeInApp=b.handleCodeInApp,b.iOS&&(_e(b.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),v.iOSBundleId=b.iOS.bundleId),b.android&&(_e(b.android.packageName.length>0,I,"missing-android-pkg-name"),v.androidInstallApp=b.android.installApp,v.androidMinimumVersionCode=b.android.minimumVersion,v.androidPackageName=b.android.packageName)}function Op(I,v,b){return xs.apply(this,arguments)}function xs(){return xs=(0,V.Z)(function*(I,v,b){const M=(0,u.m9)(I),U={requestType:"PASSWORD_RESET",email:v};b&&ya(M,U,b),yield function Hl(I,v){return Qo.apply(this,arguments)}(M,U)}),xs.apply(this,arguments)}function gh(I,v,b){return va.apply(this,arguments)}function va(){return(va=(0,V.Z)(function*(I,v,b){yield ar((0,u.m9)(I),{oobCode:v,newPassword:b})})).apply(this,arguments)}function un(I,v){return rl.apply(this,arguments)}function rl(){return rl=(0,V.Z)(function*(I,v){yield function Ct(I,v){return on.apply(this,arguments)}((0,u.m9)(I),{oobCode:v})}),rl.apply(this,arguments)}function mh(I,v){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,V.Z)(function*(I,v){const b=(0,u.m9)(I),M=yield ar(b,{oobCode:v}),U=M.requestType;switch(_e(U,b,"internal-error"),U){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":_e(M.newEmail,b,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":_e(M.mfaInfo,b,"internal-error");default:_e(M.email,b,"internal-error")}let z=null;return M.mfaInfo&&(z=dr._fromServerResponse(or(b),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:z},operation:U}})).apply(this,arguments)}function Fp(I,v){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,V.Z)(function*(I,v){const{data:b}=yield mh((0,u.m9)(I),v);return b.email})).apply(this,arguments)}function _h(I,v,b){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,V.Z)(function*(I,v,b){const M=or(I),U=yield y_(M,{returnSecureToken:!0,email:v,password:b}),z=yield ms._fromIdTokenResponse(M,"signIn",U);return yield M._updateCurrentUser(z.user),z})).apply(this,arguments)}function v_(I,v,b){return cr((0,u.m9)(I),Gu.credential(v,b))}function ze(I,v,b){return Wt.apply(this,arguments)}function Wt(){return Wt=(0,V.Z)(function*(I,v,b){const M=(0,u.m9)(I),U={requestType:"EMAIL_SIGNIN",email:v};_e(b.handleCodeInApp,M,"argument-error"),b&&ya(M,U,b),yield function qt(I,v){return ju.apply(this,arguments)}(M,U)}),Wt.apply(this,arguments)}function Lp(I,v){return"EMAIL_SIGNIN"===ur.parseLink(v)?.operation}function yh(I,v,b){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,V.Z)(function*(I,v,b){const M=(0,u.m9)(I),U=Gu.credentialWithLink(v,b||ce());return _e(U._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),cr(M,U)})).apply(this,arguments)}function sl(){return(sl=(0,V.Z)(function*(I,v){return Ft(I,"POST","/v1/accounts:createAuthUri",Zt(I,v))})).apply(this,arguments)}function uo(I,v){return wa.apply(this,arguments)}function wa(){return wa=(0,V.Z)(function*(I,v){const M={identifier:v,continueUri:Oe()?ce():"http://localhost"},{signinMethods:U}=yield function rd(I,v){return sl.apply(this,arguments)}((0,u.m9)(I),M);return U||[]}),wa.apply(this,arguments)}function vh(I,v){return Ju.apply(this,arguments)}function Ju(){return Ju=(0,V.Z)(function*(I,v){const b=(0,u.m9)(I),U={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};v&&ya(b.auth,U,v);const{email:z}=yield function Yo(I,v){return On.apply(this,arguments)}(b.auth,U);z!==I.email&&(yield I.reload())}),Ju.apply(this,arguments)}function iw(I,v,b){return ba.apply(this,arguments)}function ba(){return ba=(0,V.Z)(function*(I,v,b){const M=(0,u.m9)(I),z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:v};b&&ya(M.auth,z,b);const{email:be}=yield function $l(I,v){return Gl.apply(this,arguments)}(M.auth,z);be!==I.email&&(yield I.reload())}),ba.apply(this,arguments)}function _s(){return(_s=(0,V.Z)(function*(I,v){return Ft(I,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Xu(I,v){return Wr.apply(this,arguments)}function Wr(){return Wr=(0,V.Z)(function*(I,{displayName:v,photoURL:b}){if(void 0===v&&void 0===b)return;const M=(0,u.m9)(I),z={idToken:yield M.getIdToken(),displayName:v,photoUrl:b,returnSecureToken:!0},be=yield At(M,function Er(I,v){return _s.apply(this,arguments)}(M.auth,z));M.displayName=be.displayName||null,M.photoURL=be.photoUrl||null;const Ze=M.providerData.find(({providerId:It})=>"password"===It);Ze&&(Ze.displayName=M.displayName,Ze.photoURL=M.photoURL),yield M._updateTokensIfNecessary(be)}),Wr.apply(this,arguments)}function ea(I,v){return ol((0,u.m9)(I),v,null)}function w_(I,v){return ol((0,u.m9)(I),null,v)}function ol(I,v,b){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,V.Z)(function*(I,v,b){const{auth:M}=I,z={idToken:yield I.getIdToken(),returnSecureToken:!0};v&&(z.email=v),b&&(z.password=b);const be=yield At(I,cs(M,z));yield I._updateTokensIfNecessary(be,!0)})).apply(this,arguments)}class Ea{constructor(v,b,M={}){this.isNewUser=v,this.providerId=b,this.profile=M}}class ec extends Ea{constructor(v,b,M,U){super(v,b,M),this.username=U}}class sd extends Ea{constructor(v,b){super(v,"facebook.com",b)}}class od extends ec{constructor(v,b){super(v,"github.com",b,"string"==typeof b?.login?b?.login:null)}}class wh extends Ea{constructor(v,b){super(v,"google.com",b)}}class Vp extends ec{constructor(v,b,M){super(v,"twitter.com",b,M)}}function tc(I){const{user:v,_tokenResponse:b}=I;return v.isAnonymous&&!b?{providerId:null,isNewUser:!1,profile:null}:function Up(I){var v,b;if(!I)return null;const{providerId:M}=I,U=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},z=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!M&&I?.idToken){const be=null===(b=null===(v=Qn(I.idToken))||void 0===v?void 0:v.firebase)||void 0===b?void 0:b.sign_in_provider;if(be)return new Ea(z,"anonymous"!==be&&"custom"!==be?be:null)}if(!M)return null;switch(M){case"facebook.com":return new sd(z,U);case"github.com":return new od(z,U);case"google.com":return new wh(z,U);case"twitter.com":return new Vp(z,U,I.screenName||null);case"custom":case"anonymous":return new Ea(z,null);default:return new Ea(z,M,U)}}(b)}function Kr(I){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,V.Z)(function*(I){return(0,u.m9)(I).delete()})).apply(this,arguments)}class $n{constructor(v,b,M){this.type=v,this.credential=b,this.auth=M}static _fromIdtoken(v,b){return new $n("enroll",v,b)}static _fromMfaPendingCredential(v){return new $n("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var b,M;if(v?.multiFactorSession){if(null!==(b=v.multiFactorSession)&&void 0!==b&&b.pendingCredential)return $n._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null!==(M=v.multiFactorSession)&&void 0!==M&&M.idToken)return $n._fromIdtoken(v.multiFactorSession.idToken)}return null}}class Eh{constructor(v,b,M){this.session=v,this.hints=b,this.signInResolver=M}static _fromError(v,b){const M=or(v),U=b.customData._serverResponse,z=(U.mfaInfo||[]).map(Ze=>dr._fromServerResponse(M,Ze));_e(U.mfaPendingCredential,M,"internal-error");const be=$n._fromMfaPendingCredential(U.mfaPendingCredential);return new Eh(be,z,function(){var Ze=(0,V.Z)(function*(It){const Bt=yield It._process(M,be);delete U.mfaInfo,delete U.mfaPendingCredential;const _n=Object.assign(Object.assign({},U),{idToken:Bt.idToken,refreshToken:Bt.refreshToken});switch(b.operationType){case"signIn":const li=yield ms._fromIdTokenResponse(M,b.operationType,_n);return yield M._updateCurrentUser(li.user),li;case"reauthenticate":return _e(b.user,M,"internal-error"),ms._forOperation(b.user,b.operationType,_n);default:Le(M,"internal-error")}});return function(It){return Ze.apply(this,arguments)}}())}resolveSignIn(v){var b=this;return(0,V.Z)(function*(){return b.signInResolver(v)})()}}function Bp(I,v){var b;const M=(0,u.m9)(I),U=v;return _e(v.customData.operationType,M,"argument-error"),_e(null===(b=U.customData._serverResponse)||void 0===b?void 0:b.mfaPendingCredential,M,"argument-error"),Eh._fromError(M,U)}class Ch{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(b=>{b.mfaInfo&&(this.enrolledFactors=b.mfaInfo.map(M=>dr._fromServerResponse(v.auth,M)))})}static _fromUser(v){return new Ch(v)}getSession(){var v=this;return(0,V.Z)(function*(){return $n._fromIdtoken(yield v.user.getIdToken(),v.user.auth)})()}enroll(v,b){var M=this;return(0,V.Z)(function*(){const U=v,z=yield M.getSession(),be=yield At(M.user,U._process(M.user.auth,z,b));return yield M.user._updateTokensIfNecessary(be),M.user.reload()})()}unenroll(v){var b=this;return(0,V.Z)(function*(){const M="string"==typeof v?v:v.uid,U=yield b.user.getIdToken();try{const z=yield At(b.user,function T_(I,v){return Ft(I,"POST","/v2/accounts/mfaEnrollment:withdraw",Zt(I,v))}(b.user.auth,{idToken:U,mfaEnrollmentId:M}));b.enrolledFactors=b.enrolledFactors.filter(({uid:be})=>be!==M),yield b.user._updateTokensIfNecessary(z),yield b.user.reload()}catch(z){throw z}})()}}const Xl=new WeakMap;function eu(I){const v=(0,u.m9)(I);return Xl.has(v)||Xl.set(v,Ch._fromUser(v)),Xl.get(v)}const al="__sak";class tu{constructor(v,b){this.storageRetriever=v,this.type=b}_isAvailable(){try{return this.storage?(this.storage.setItem(al,"1"),this.storage.removeItem(al),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(v,b){return this.storage.setItem(v,JSON.stringify(b)),Promise.resolve()}_get(v){const b=this.storage.getItem(v);return Promise.resolve(b?JSON.parse(b):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}const hr=(()=>{class I extends tu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(b,M)=>this.onStorageEvent(b,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ih(){const I=(0,u.z$)();return Q(I)||$t(I)}()&&function Ou(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=br(),this._shouldAllowMigration=!0}forAllChangedKeys(b){for(const M of Object.keys(this.listeners)){const U=this.storage.getItem(M),z=this.localCache[M];U!==z&&b(M,z,U)}}onStorageEvent(b,M=!1){if(!b.key)return void this.forAllChangedKeys((Ze,It,Bt)=>{this.notifyListeners(Ze,Bt)});const U=b.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ze=this.storage.getItem(U);if(b.newValue!==Ze)null!==b.newValue?this.storage.setItem(U,b.newValue):this.storage.removeItem(U);else if(this.localCache[U]===b.newValue&&!M)return}const z=()=>{const Ze=this.storage.getItem(U);!M&&this.localCache[U]===Ze||this.notifyListeners(U,Ze)},be=this.storage.getItem(U);!function ln(){return(0,u.w1)()&&10===document.documentMode}()||be===b.newValue||b.newValue===b.oldValue?z():setTimeout(z,10)}notifyListeners(b,M){this.localCache[b]=M;const U=this.listeners[b];if(U)for(const z of Array.from(U))z(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((b,M,U)=>{this.onStorageEvent(new StorageEvent("storage",{key:b,oldValue:M,newValue:U}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(b,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[b]||(this.listeners[b]=new Set,this.localCache[b]=this.storage.getItem(b)),this.listeners[b].add(M)}_removeListener(b,M){this.listeners[b]&&(this.listeners[b].delete(M),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(b,M){var U=()=>super._set,z=this;return(0,V.Z)(function*(){yield U().call(z,b,M),z.localCache[b]=JSON.stringify(M)})()}_get(b){var M=()=>super._get,U=this;return(0,V.Z)(function*(){const z=yield M().call(U,b);return U.localCache[b]=JSON.stringify(z),z})()}_remove(b){var M=()=>super._remove,U=this;return(0,V.Z)(function*(){yield M().call(U,b),delete U.localCache[b]})()}}return I.type="LOCAL",I})(),ll=(()=>{class I extends tu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(b,M){}_removeListener(b,M){}}return I.type="SESSION",I})();let Th=(()=>{class I{constructor(b){this.eventTarget=b,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(b){const M=this.receivers.find(z=>z.isListeningto(b));if(M)return M;const U=new I(b);return this.receivers.push(U),U}isListeningto(b){return this.eventTarget===b}handleEvent(b){var M=this;return(0,V.Z)(function*(){const U=b,{eventId:z,eventType:be,data:Ze}=U.data,It=M.handlersMap[be];if(!It?.size)return;U.ports[0].postMessage({status:"ack",eventId:z,eventType:be});const Bt=Array.from(It).map(function(){var li=(0,V.Z)(function*(_o){return _o(U.origin,Ze)});return function(_o){return li.apply(this,arguments)}}()),_n=yield function S_(I){return Promise.all(I.map(function(){var v=(0,V.Z)(function*(b){try{return{fulfilled:!0,value:yield b}}catch(M){return{fulfilled:!1,reason:M}}});return function(b){return v.apply(this,arguments)}}()))}(Bt);U.ports[0].postMessage({status:"done",eventId:z,eventType:be,response:_n})})()}_subscribe(b,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[b]||(this.handlersMap[b]=new Set),this.handlersMap[b].add(M)}_unsubscribe(b,M){this.handlersMap[b]&&M&&this.handlersMap[b].delete(M),(!M||0===this.handlersMap[b].size)&&delete this.handlersMap[b],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function nu(I="",v=10){let b="";for(let M=0;M<v;M++)b+=Math.floor(10*Math.random());return I+b}class D_{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,b,M=50){var U=this;return(0,V.Z)(function*(){const z=typeof MessageChannel<"u"?new MessageChannel:null;if(!z)throw new Error("connection_unavailable");let be,Ze;return new Promise((It,Bt)=>{const _n=nu("",20);z.port1.start();const li=setTimeout(()=>{Bt(new Error("unsupported_event"))},M);Ze={messageChannel:z,onMessage(_o){const ra=_o;if(ra.data.eventId===_n)switch(ra.data.status){case"ack":clearTimeout(li),be=setTimeout(()=>{Bt(new Error("timeout"))},3e3);break;case"done":clearTimeout(be),It(ra.data.response);break;default:clearTimeout(li),clearTimeout(be),Bt(new Error("invalid_response"))}}},U.handlers.add(Ze),z.port1.addEventListener("message",Ze.onMessage),U.target.postMessage({eventType:v,eventId:_n,data:b},[z.port2])}).finally(()=>{Ze&&U.removeMessageHandler(Ze)})})()}}function pi(){return window}function Ca(){return typeof pi().WorkerGlobalScope<"u"&&"function"==typeof pi().importScripts}function ys(){return(ys=(0,V.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const cl="firebaseLocalStorageDb",oc=1,Ia="firebaseLocalStorage",dl="fbase_key";class ta{constructor(v){this.request=v}toPromise(){return new Promise((v,b)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function hl(I,v){return I.transaction([Ia],v?"readwrite":"readonly").objectStore(Ia)}function fl(){const I=indexedDB.open(cl,oc);return new Promise((v,b)=>{I.addEventListener("error",()=>{b(I.error)}),I.addEventListener("upgradeneeded",()=>{const M=I.result;try{M.createObjectStore(Ia,{keyPath:dl})}catch(U){b(U)}}),I.addEventListener("success",(0,V.Z)(function*(){const M=I.result;M.objectStoreNames.contains(Ia)?v(M):(M.close(),yield function Sh(){const I=indexedDB.deleteDatabase(cl);return new ta(I).toPromise()}(),v(yield fl()))}))})}function ud(I,v,b){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,V.Z)(function*(I,v,b){const M=hl(I,!0).put({[dl]:v,value:b});return new ta(M).toPromise()})).apply(this,arguments)}function ho(){return(ho=(0,V.Z)(function*(I,v){const b=hl(I,!1).get(v),M=yield new ta(b).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function pl(I,v){const b=hl(I,!0).delete(v);return new ta(b).toPromise()}const gl=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var b=this;return(0,V.Z)(function*(){return b.db||(b.db=yield fl()),b.db})()}_withRetries(b){var M=this;return(0,V.Z)(function*(){let U=0;for(;;)try{const z=yield M._openDb();return yield b(z)}catch(z){if(U++>3)throw z;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var b=this;return(0,V.Z)(function*(){return Ca()?b.initializeReceiver():b.initializeSender()})()}initializeReceiver(){var b=this;return(0,V.Z)(function*(){b.receiver=Th._getInstance(function sc(){return Ca()?self:null}()),b.receiver._subscribe("keyChanged",function(){var M=(0,V.Z)(function*(U,z){return{keyProcessed:(yield b._poll()).includes(z.key)}});return function(U,z){return M.apply(this,arguments)}}()),b.receiver._subscribe("ping",function(){var M=(0,V.Z)(function*(U,z){return["keyChanged"]});return function(U,z){return M.apply(this,arguments)}}())})()}initializeSender(){var b=this;return(0,V.Z)(function*(){var M,U;if(b.activeServiceWorker=yield function ic(){return ys.apply(this,arguments)}(),!b.activeServiceWorker)return;b.sender=new D_(b.activeServiceWorker);const z=yield b.sender._send("ping",{},800);z&&null!==(M=z[0])&&void 0!==M&&M.fulfilled&&null!==(U=z[0])&&void 0!==U&&U.value.includes("keyChanged")&&(b.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(b){var M=this;return(0,V.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function rc(){var I;return(null===(I=navigator?.serviceWorker)||void 0===I?void 0:I.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:b},M.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,V.Z)(function*(){try{if(!indexedDB)return!1;const b=yield fl();return yield ud(b,al,"1"),yield pl(b,al),!0}catch{}return!1})()}_withPendingWrite(b){var M=this;return(0,V.Z)(function*(){M.pendingWrites++;try{yield b()}finally{M.pendingWrites--}})()}_set(b,M){var U=this;return(0,V.Z)(function*(){return U._withPendingWrite((0,V.Z)(function*(){return yield U._withRetries(z=>ud(z,b,M)),U.localCache[b]=M,U.notifyServiceWorker(b)}))})()}_get(b){var M=this;return(0,V.Z)(function*(){const U=yield M._withRetries(z=>function ac(I,v){return ho.apply(this,arguments)}(z,b));return M.localCache[b]=U,U})()}_remove(b){var M=this;return(0,V.Z)(function*(){return M._withPendingWrite((0,V.Z)(function*(){return yield M._withRetries(U=>pl(U,b)),delete M.localCache[b],M.notifyServiceWorker(b)}))})()}_poll(){var b=this;return(0,V.Z)(function*(){const M=yield b._withRetries(be=>{const Ze=hl(be,!1).getAll();return new ta(Ze).toPromise()});if(!M)return[];if(0!==b.pendingWrites)return[];const U=[],z=new Set;for(const{fbase_key:be,value:Ze}of M)z.add(be),JSON.stringify(b.localCache[be])!==JSON.stringify(Ze)&&(b.notifyListeners(be,Ze),U.push(be));for(const be of Object.keys(b.localCache))b.localCache[be]&&!z.has(be)&&(b.notifyListeners(be,null),U.push(be));return U})()}notifyListeners(b,M){this.localCache[b]=M;const U=this.listeners[b];if(U)for(const z of Array.from(U))z(M)}startPolling(){var b=this;this.stopPolling(),this.pollTimer=setInterval((0,V.Z)(function*(){return b._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(b,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[b]||(this.listeners[b]=new Set,this._get(b)),this.listeners[b].add(M)}_removeListener(b,M){this.listeners[b]&&(this.listeners[b].delete(M),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})();function ks(){return(ks=(0,V.Z)(function*(I){return(yield Ft(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ml(I){return new Promise((v,b)=>{const M=document.createElement("script");M.setAttribute("src",I),M.onload=v,M.onerror=U=>{const z=Ue("internal-error");z.customData=U,b(z)},M.type="text/javascript",M.charset="UTF-8",function Ah(){var I,v;return null!==(v=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==v?v:document}().appendChild(M)})}function vs(I){return`__${I}${Math.floor(1e6*Math.random())}`}const Yr=1e12;class Ta{constructor(v){this.auth=v,this.counter=Yr,this._widgets=new Map}render(v,b){const M=this.counter;return this._widgets.set(M,new A_(v,this.auth.name,b||{})),this.counter++,M}reset(v){var b;const M=v||Yr;null===(b=this._widgets.get(M))||void 0===b||b.delete(),this._widgets.delete(M)}getResponse(v){var b;return(null===(b=this._widgets.get(v||Yr))||void 0===b?void 0:b.getResponse())||""}execute(v){var b=this;return(0,V.Z)(function*(){var M;return null===(M=b._widgets.get(v||Yr))||void 0===M||M.execute(),""})()}}class A_{constructor(v,b,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const U="string"==typeof v?document.getElementById(v):v;_e(U,"argument-error",{appName:b}),this.container=U,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function xh(I){const v=[],b="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<I;M++)v.push(b.charAt(Math.floor(Math.random()*b.length)));return v.join("")}(50);const{callback:v,"expired-callback":b}=this.params;if(v)try{v(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ru=vs("rcb"),$p=new ot(3e4,6e4);class cc{constructor(){var v;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(v=pi().grecaptcha)||void 0===v||!v.render)}load(v,b=""){return _e(function xo(I){return I.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I)}(b),v,"argument-error"),this.shouldResolveImmediately(b)?Promise.resolve(pi().grecaptcha):new Promise((M,U)=>{const z=pi().setTimeout(()=>{U(Ue(v,"network-request-failed"))},$p.get());pi()[ru]=()=>{pi().clearTimeout(z),delete pi()[ru];const Ze=pi().grecaptcha;if(!Ze)return void U(Ue(v,"internal-error"));const It=Ze.render;Ze.render=(Bt,_n)=>{const li=It(Bt,_n);return this.counter++,li},this.hostLanguage=b,M(Ze)},ml(`https://www.google.com/recaptcha/api.js??${(0,u.xO)({onload:ru,render:"explicit",hl:b})}`).catch(()=>{clearTimeout(z),U(Ue(v,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){var b;return!(null===(b=pi().grecaptcha)||void 0===b||!b.render)&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class _l{load(v){return(0,V.Z)(function*(){return new Ta(v)})()}clearedOneInstance(){}}const Sa="recaptcha",M_={theme:"light",type:"image"};class Rh{constructor(v,b=Object.assign({},M_),M){this.parameters=b,this.type=Sa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=or(M),this.isInvisible="invisible"===this.parameters.size,_e(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const U="string"==typeof v?document.getElementById(v):v;_e(U,this.auth,"argument-error"),this.container=U,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _l:new cc,this.validateStartingState()}verify(){var v=this;return(0,V.Z)(function*(){v.assertNotDestroyed();const b=yield v.render(),M=v.getAssertedRecaptcha();return M.getResponse(b)||new Promise(z=>{const be=Ze=>{Ze&&(v.tokenChangeListeners.delete(be),z(Ze))};v.tokenChangeListeners.add(be),v.isInvisible&&M.execute(b)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){_e(!this.parameters.sitekey,this.auth,"argument-error"),_e(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_e(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return b=>{if(this.tokenChangeListeners.forEach(M=>M(b)),"function"==typeof v)v(b);else if("string"==typeof v){const M=pi()[v];"function"==typeof M&&M(b)}}}assertNotDestroyed(){_e(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,V.Z)(function*(){if(yield v.init(),!v.widgetId){let b=v.container;if(!v.isInvisible){const M=document.createElement("div");b.appendChild(M),b=M}v.widgetId=v.getAssertedRecaptcha().render(b,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,V.Z)(function*(){_e(Oe()&&!Ca(),v.auth,"internal-error"),yield function dc(){let I=null;return new Promise(v=>{"complete"!==document.readyState?(I=()=>v(),window.addEventListener("load",I)):v()}).catch(v=>{throw I&&window.removeEventListener("load",I),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const b=yield function dd(I){return ks.apply(this,arguments)}(v.auth);_e(b,v.auth,"internal-error"),v.parameters.sitekey=b})()}getAssertedRecaptcha(){return _e(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ph{constructor(v,b){this.verificationId=v,this.onConfirmation=b}confirm(v){const b=So._fromVerification(this.verificationId,v);return this.onConfirmation(b)}}function hd(I,v,b){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,V.Z)(function*(I,v,b){const M=or(I),U=yield fo(M,v,(0,u.m9)(b));return new Ph(U,z=>cr(M,z))})).apply(this,arguments)}function Gp(I,v,b){return qp.apply(this,arguments)}function qp(){return(qp=(0,V.Z)(function*(I,v,b){const M=(0,u.m9)(I);yield il(!1,M,"phone");const U=yield fo(M.auth,v,(0,u.m9)(b));return new Ph(U,z=>id(M,z))})).apply(this,arguments)}function sw(I,v,b){return fd.apply(this,arguments)}function fd(){return(fd=(0,V.Z)(function*(I,v,b){const M=(0,u.m9)(I),U=yield fo(M.auth,v,(0,u.m9)(b));return new Ph(U,z=>ph(M,z))})).apply(this,arguments)}function fo(I,v,b){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,V.Z)(function*(I,v,b){var M;const U=yield b.verify();try{let z;if(_e("string"==typeof U,I,"argument-error"),_e(b.type===Sa,I,"argument-error"),z="string"==typeof v?{phoneNumber:v}:v,"session"in z){const be=z.session;if("phoneNumber"in z)return _e("enroll"===be.type,I,"internal-error"),(yield function Cr(I,v){return Ft(I,"POST","/v2/accounts/mfaEnrollment:start",Zt(I,v))}(I,{idToken:be.credential,phoneEnrollmentInfo:{phoneNumber:z.phoneNumber,recaptchaToken:U}})).phoneSessionInfo.sessionInfo;{_e("signin"===be.type,I,"internal-error");const Ze=(null===(M=z.multiFactorHint)||void 0===M?void 0:M.uid)||z.multiFactorUid;return _e(Ze,I,"missing-multi-factor-info"),(yield function cd(I,v){return Ft(I,"POST","/v2/accounts/mfaSignIn:start",Zt(I,v))}(I,{mfaPendingCredential:be.credential,mfaEnrollmentId:Ze,phoneSignInInfo:{recaptchaToken:U}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:be}=yield function fs(I,v){return Hu.apply(this,arguments)}(I,{phoneNumber:z.phoneNumber,recaptchaToken:U});return be}}finally{b._reset()}}),Nh.apply(this,arguments)}function x_(I,v){return na.apply(this,arguments)}function na(){return(na=(0,V.Z)(function*(I,v){yield Kl((0,u.m9)(I),v)})).apply(this,arguments)}let Zp=(()=>{class I{constructor(b){this.providerId=I.PROVIDER_ID,this.auth=or(b)}verifyPhoneNumber(b,M){return fo(this.auth,b,(0,u.m9)(M))}static credential(b,M){return So._fromVerification(b,M)}static credentialFromResult(b){return I.credentialFromTaggedObject(b)}static credentialFromError(b){return I.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{phoneNumber:M,temporaryProof:U}=b;return M&&U?So._fromTokenResponse(M,U):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function su(I,v){return v?bt(v):(_e(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class Di extends oi{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return hs(v,this._buildIdpRequest())}_linkToIdToken(v,b){return hs(v,this._buildIdpRequest(b))}_getReauthenticationResolver(v){return hs(v,this._buildIdpRequest())}_buildIdpRequest(v){const b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(b.idToken=v),b}}function Oh(I){return _a(I.auth,new Di(I),I.bypassAuthState)}function ou(I){const{auth:v,user:b}=I;return _e(b,v,"internal-error"),Yl(b,new Di(I),I.bypassAuthState)}function Fh(I){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,V.Z)(function*(I){const{auth:v,user:b}=I;return _e(b,v,"internal-error"),Kl(b,new Di(I),I.bypassAuthState)})).apply(this,arguments)}class ko{constructor(v,b,M,U,z=!1){this.auth=v,this.resolver=M,this.user=U,this.bypassAuthState=z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(b)?b:[b]}execute(){var v=this;return new Promise(function(){var b=(0,V.Z)(function*(M,U){v.pendingPromise={resolve:M,reject:U};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(z){v.reject(z)}});return function(M,U){return b.apply(this,arguments)}}())}onAuthEvent(v){var b=this;return(0,V.Z)(function*(){const{urlResponse:M,sessionId:U,postBody:z,tenantId:be,error:Ze,type:It}=v;if(Ze)return void b.reject(Ze);const Bt={auth:b.auth,requestUri:M,sessionId:U,tenantId:be||void 0,postBody:z||void 0,user:b.user,bypassAuthState:b.bypassAuthState};try{b.resolve(yield b.getIdpTask(It)(Bt))}catch(_n){b.reject(_n)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return Oh;case"linkViaPopup":case"linkViaRedirect":return Fh;case"reauthViaPopup":case"reauthViaRedirect":return ou;default:Le(this.auth,"internal-error")}}resolve(v){Be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){Be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pd=new ot(2e3,1e4);function au(I,v,b){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,V.Z)(function*(I,v,b){const M=or(I);He(I,v,Do);const U=su(M,b);return new Qr(M,"signInViaPopup",v,U).executeNotNull()})).apply(this,arguments)}function Lh(I,v,b){return k_.apply(this,arguments)}function k_(){return(k_=(0,V.Z)(function*(I,v,b){const M=(0,u.m9)(I);He(M.auth,v,Do);const U=su(M.auth,b);return new Qr(M.auth,"reauthViaPopup",v,U,M).executeNotNull()})).apply(this,arguments)}function ow(I,v,b){return R_.apply(this,arguments)}function R_(){return(R_=(0,V.Z)(function*(I,v,b){const M=(0,u.m9)(I);He(M.auth,v,Do);const U=su(M.auth,b);return new Qr(M.auth,"linkViaPopup",v,U,M).executeNotNull()})).apply(this,arguments)}let Qr=(()=>{class I extends ko{constructor(b,M,U,z,be){super(b,M,z,be),this.provider=U,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var b=this;return(0,V.Z)(function*(){const M=yield b.execute();return _e(M,b.auth,"internal-error"),M})()}onExecution(){var b=this;return(0,V.Z)(function*(){Be(1===b.filter.length,"Popup operations only handle one event");const M=nu();b.authWindow=yield b.resolver._openPopup(b.auth,b.provider,b.filter[0],M),b.authWindow.associatedEvent=M,b.resolver._originValidation(b.auth).catch(U=>{b.reject(U)}),b.resolver._isIframeWebStorageSupported(b.auth,U=>{U||b.reject(Ue(b.auth,"web-storage-unsupported"))}),b.pollUserCancellation()})()}get eventId(){var b;return(null===(b=this.authWindow)||void 0===b?void 0:b.associatedEvent)||null}cancel(){this.reject(Ue(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const b=()=>{var M,U;this.pollId=null!==(U=null===(M=this.authWindow)||void 0===M?void 0:M.window)&&void 0!==U&&U.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ue(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(b,pd.get())};b()}}return I.currentPopupAction=null,I})();const Uh="pendingRedirect",Ir=new Map;class zp extends ko{constructor(v,b,M=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,M),this.eventId=null}execute(){var v=()=>super.execute,b=this;return(0,V.Z)(function*(){let M=Ir.get(b.auth._key());if(!M){try{const z=(yield function gd(I,v){return Vh.apply(this,arguments)}(b.resolver,b.auth))?yield v().call(b):null;M=()=>Promise.resolve(z)}catch(U){M=()=>Promise.reject(U)}Ir.set(b.auth._key(),M)}return b.bypassAuthState||Ir.set(b.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(v){var b=()=>super.onAuthEvent,M=this;return(0,V.Z)(function*(){if("signInViaRedirect"===v.type)return b().call(M,v);if("unknown"!==v.type){if(v.eventId){const U=yield M.auth._redirectUserForId(v.eventId);if(U)return M.user=U,b().call(M,v);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,V.Z)(function*(){})()}cleanUp(){}}function Vh(){return(Vh=(0,V.Z)(function*(I,v){const b=hc(v),M=P_(I);if(!(yield M._isAvailable()))return!1;const U="true"===(yield M._get(b));return yield M._remove(b),U})).apply(this,arguments)}function Mt(I,v){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,V.Z)(function*(I,v){return P_(I)._set(hc(v),"true")})).apply(this,arguments)}function Da(){Ir.clear()}function jh(I,v){Ir.set(I._key(),v)}function P_(I){return bt(I._redirectPersistence)}function hc(I){return ee(Uh,I.config.apiKey,I.name)}function md(I,v,b){return function Hh(I,v,b){return lu.apply(this,arguments)}(I,v,b)}function lu(){return(lu=(0,V.Z)(function*(I,v,b){const M=or(I);He(I,v,Do),yield M._initializationPromise;const U=su(M,b);return yield Mt(U,M),U._openRedirect(M,v,"signInViaRedirect")})).apply(this,arguments)}function P(I,v,b){return function N(I,v,b){return L.apply(this,arguments)}(I,v,b)}function L(){return(L=(0,V.Z)(function*(I,v,b){const M=(0,u.m9)(I);He(M.auth,v,Do),yield M.auth._initializationPromise;const U=su(M.auth,b);yield Mt(U,M.auth);const z=yield Ht(M);return U._openRedirect(M.auth,v,"reauthViaRedirect",z)})).apply(this,arguments)}function X(I,v,b){return function le(I,v,b){return ae.apply(this,arguments)}(I,v,b)}function ae(){return(ae=(0,V.Z)(function*(I,v,b){const M=(0,u.m9)(I);He(M.auth,v,Do),yield M.auth._initializationPromise;const U=su(M.auth,b);yield il(!1,M,v.providerId),yield Mt(U,M.auth);const z=yield Ht(M);return U._openRedirect(M.auth,v,"linkViaRedirect",z)})).apply(this,arguments)}function $e(I,v){return St.apply(this,arguments)}function St(){return(St=(0,V.Z)(function*(I,v){return yield or(I)._initializationPromise,Vt(I,v,!1)})).apply(this,arguments)}function Vt(I,v){return kt.apply(this,arguments)}function kt(){return(kt=(0,V.Z)(function*(I,v,b=!1){const M=or(I),U=su(M,v),be=yield new zp(M,U,b).execute();return be&&!b&&(delete be.user._redirectEventId,yield M._persistUserIfCurrent(be.user),yield M._setRedirectUser(null,v)),be})).apply(this,arguments)}function Ht(I){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,V.Z)(function*(I){const v=nu(`${I.uid}:::`);return I._redirectEventId=v,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),v})).apply(this,arguments)}class pt{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let b=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(v,M)&&(b=!0,this.sendToConsumer(v,M),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function yl(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _d(I);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=v,b=!0)),b}sendToConsumer(v,b){var M;if(v.error&&!_d(v)){const U=(null===(M=v.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";b.onError(Ue(this.auth,U))}else b.onAuthEvent(v)}isEventForConsumer(v,b){const M=null===b.eventId||!!v.eventId&&v.eventId===b.eventId;return b.filter.includes(v.type)&&M}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(uu(v))}saveEventToCache(v){this.cachedEventUids.add(uu(v)),this.lastProcessedEventTime=Date.now()}}function uu(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(v=>v).join("-")}function _d({type:I,error:v}){return"unknown"===I&&"auth/no-auth-event"===v?.code}function ws(I){return po.apply(this,arguments)}function po(){return(po=(0,V.Z)(function*(I,v={}){return Ft(I,"GET","/v1/projects",v)})).apply(this,arguments)}const ia=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rs=/^https?/;function Aa(){return(Aa=(0,V.Z)(function*(I){if(I.config.emulator)return;const{authorizedDomains:v}=yield ws(I);for(const b of v)try{if(Wp(b))return}catch{}Le(I,"unauthorized-domain")})).apply(this,arguments)}function Wp(I){const v=ce(),{protocol:b,hostname:M}=new URL(v);if(I.startsWith("chrome-extension://")){const be=new URL(I);return""===be.hostname&&""===M?"chrome-extension:"===b&&I.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===b&&be.hostname===M}if(!Rs.test(b))return!1;if(ia.test(I))return M===I;const U=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+U+"|"+U+")$","i").test(M)}const Kp=new ot(3e4,6e4);function aw(){const I=pi().___jsl;if(I?.H)for(const v of Object.keys(I.H))if(I.H[v].r=I.H[v].r||[],I.H[v].L=I.H[v].L||[],I.H[v].r=[...I.H[v].L],I.CP)for(let b=0;b<I.CP.length;b++)I.CP[b]=null}let go=null;const lw=new ot(5e3,15e3),N_="__/auth/iframe",kn="emulator/auth/iframe",uw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ST(I){const v=I.config;_e(v.authDomain,I,"auth-domain-config-required");const b=v.emulator?wt(v,kn):`https://${I.config.authDomain}/${N_}`,M={apiKey:v.apiKey,appName:I.name,v:$.SDK_VERSION},U=Yp.get(I.config.apiHost);U&&(M.eid=U);const z=I._getFrameworks();return z.length&&(M.fw=z.join(",")),`${b}?${(0,u.xO)(M).slice(1)}`}function O_(){return O_=(0,V.Z)(function*(I){const v=yield function yd(I){return go=go||function fc(I){return new Promise((v,b)=>{var M,U,z;function be(){aw(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{aw(),b(Ue(I,"network-request-failed"))},timeout:Kp.get()})}if(null!==(U=null===(M=pi().gapi)||void 0===M?void 0:M.iframes)&&void 0!==U&&U.Iframe)v(gapi.iframes.getContext());else{if(null===(z=pi().gapi)||void 0===z||!z.load){const Ze=vs("iframefcb");return pi()[Ze]=()=>{gapi.load?be():b(Ue(I,"network-request-failed"))},ml(`https://apis.google.com/js/api.js?onload=${Ze}`).catch(It=>b(It))}be()}}).catch(v=>{throw go=null,v})}(I),go}(I),b=pi().gapi;return _e(b,I,"internal-error"),v.open({where:document.body,url:ST(I),messageHandlersFilter:b.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uw,dontclear:!0},M=>new Promise(function(){var U=(0,V.Z)(function*(z,be){yield M.restyle({setHideOnLeave:!1});const Ze=Ue(I,"network-request-failed"),It=pi().setTimeout(()=>{be(Ze)},lw.get());function Bt(){pi().clearTimeout(It),z(M)}M.ping(Bt).then(Bt,()=>{be(Ze)})});return function(z,be){return U.apply(this,arguments)}}()))}),O_.apply(this,arguments)}const Qp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cw=500,F_=600,L_="_blank",U_="http://localhost";class V_{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const AT="__/auth/handler",MT="emulator/auth/handler";function Jp(I,v,b,M,U,z){_e(I.config.authDomain,I,"auth-domain-config-required"),_e(I.config.apiKey,I,"invalid-api-key");const be={apiKey:I.config.apiKey,appName:I.name,authType:b,redirectUrl:M,v:$.SDK_VERSION,eventId:U};if(v instanceof Do){v.setDefaultLanguage(I.languageCode),be.providerId=v.providerId||"",(0,u.xb)(v.getCustomParameters())||(be.customParameters=JSON.stringify(v.getCustomParameters()));for(const[It,Bt]of Object.entries(z||{}))be[It]=Bt}if(v instanceof el){const It=v.getScopes().filter(Bt=>""!==Bt);It.length>0&&(be.scopes=It.join(","))}I.tenantId&&(be.tid=I.tenantId);const Ze=be;for(const It of Object.keys(Ze))void 0===Ze[It]&&delete Ze[It];return`${function B_({config:I}){return I.emulator?wt(I,MT):`https://${I.authDomain}/${AT}`}(I)}?${(0,u.xO)(Ze).slice(1)}`}const j_="webStorageSupport",Jr=class Ce{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ll,this._completeRedirectFn=Vt,this._overrideRedirectResult=jh}_openPopup(v,b,M,U){var z=this;return(0,V.Z)(function*(){var be;Be(null===(be=z.eventManagers[v._key()])||void 0===be?void 0:be.manager,"_initialize() not called before _openPopup()");const Ze=Jp(v,b,M,ce(),U);return function Ma(I,v,b,M=cw,U=F_){const z=Math.max((window.screen.availHeight-U)/2,0).toString(),be=Math.max((window.screen.availWidth-M)/2,0).toString();let Ze="";const It=Object.assign(Object.assign({},Qp),{width:M.toString(),height:U.toString(),top:z,left:be}),Bt=(0,u.z$)().toLowerCase();b&&(Ze=Ae(Bt)?L_:b),H(Bt)&&(v=v||U_,It.scrollbars="yes");const _n=Object.entries(It).reduce((_o,[ra,wd])=>`${_o}${ra}=${wd},`,"");if(function sr(I=(0,u.z$)()){var v;return $t(I)&&!(null===(v=window.navigator)||void 0===v||!v.standalone)}(Bt)&&"_self"!==Ze)return function DT(I,v){const b=document.createElement("a");b.href=I,b.target=v;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),b.dispatchEvent(M)}(v||"",Ze),new V_(null);const li=window.open(v||"",Ze,_n);_e(li,I,"popup-blocked");try{li.focus()}catch{}return new V_(li)}(v,Ze,nu())})()}_openRedirect(v,b,M,U){var z=this;return(0,V.Z)(function*(){return yield z._originValidation(v),function ul(I){pi().location.href=I}(Jp(v,b,M,ce(),U)),new Promise(()=>{})})()}_initialize(v){const b=v._key();if(this.eventManagers[b]){const{manager:U,promise:z}=this.eventManagers[b];return U?Promise.resolve(U):(Be(z,"If manager is not set, promise should be"),z)}const M=this.initAndGetManager(v);return this.eventManagers[b]={promise:M},M.catch(()=>{delete this.eventManagers[b]}),M}initAndGetManager(v){var b=this;return(0,V.Z)(function*(){const M=yield function gk(I){return O_.apply(this,arguments)}(v),U=new pt(v);return M.register("authEvent",z=>(_e(z?.authEvent,v,"invalid-auth-event"),{status:U.onEvent(z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),b.eventManagers[v._key()]={manager:U},b.iframes[v._key()]=M,U})()}_isIframeWebStorageSupported(v,b){this.iframes[v._key()].send(j_,{type:j_},U=>{var z;const be=null===(z=U?.[0])||void 0===z?void 0:z[j_];void 0!==be&&b(!!be),Le(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const b=v._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function vl(I){return Aa.apply(this,arguments)}(v)),this.originValidationPromises[b]}get _shouldInitProactively(){return br()||Q()||$t()}};class mo{constructor(v){this.factorId=v}_process(v,b,M){switch(b.type){case"enroll":return this._finalizeEnroll(v,b.credential,M);case"signin":return this._finalizeSignIn(v,b.credential);default:return Re("unexpected MultiFactorSessionType")}}}class W extends mo{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new W(v)}_finalizeEnroll(v,b,M){return function jp(I,v){return Ft(I,"POST","/v2/accounts/mfaEnrollment:finalize",Zt(I,v))}(v,{idToken:b,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,b){return function uc(I,v){return Ft(I,"POST","/v2/accounts/mfaSignIn:finalize",Zt(I,v))}(v,{mfaPendingCredential:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Po=(()=>{class I{constructor(){}static assertion(b){return W._fromCredential(b)}}return I.FACTOR_ID="phone",I})();var Vr="@firebase/auth";class H_{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var b=this;return(0,V.Z)(function*(){return b.assertAuthConfigured(),yield b.auth._initializationPromise,b.auth.currentUser?{accessToken:yield b.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const b=this.auth.onIdTokenChanged(M=>{v(M?.stsTokenManager.accessToken||null)});this.internalListeners.set(v,b),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const b=this.internalListeners.get(v);b&&(this.internalListeners.delete(v),b(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,u.Pz)("authIdTokenMaxAge"),function Xr(I){(0,$._registerComponent)(new xe.wA("auth",(v,{options:b})=>{const M=v.getProvider("app").getImmediate(),U=v.getProvider("heartbeat"),{apiKey:z,authDomain:be}=M.options;return((Ze,It)=>{_e(z&&!z.includes(":"),"invalid-api-key",{appName:Ze.name}),_e(!be?.includes(":"),"argument-error",{appName:Ze.name});const Bt={apiKey:z,authDomain:be,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fu(I)},_n=new Jc(Ze,It,Bt);return function an(I,v){const b=v?.persistence||[],M=(Array.isArray(b)?b:[b]).map(bt);v?.errorMap&&I._updateErrorMap(v.errorMap),I._initializeWithPersistence(M,v?.popupRedirectResolver)}(_n,b),_n})(M,U)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,b,M)=>{v.getProvider("auth-internal").initialize()})),(0,$._registerComponent)(new xe.wA("auth-internal",v=>{const b=or(v.getProvider("auth").getImmediate());return new H_(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,$.registerVersion)(Vr,"0.21.3",function fr(I){switch(I){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(I)),(0,$.registerVersion)(Vr,"0.21.3","esm2017")}("Browser")},2090:(Te,ye,q)=>{"use strict";q.d(ye,{$s:()=>yt,BH:()=>Fe,DV:()=>Ii,Dv:()=>wr,G6:()=>Ve,GJ:()=>Pr,L:()=>Me,LL:()=>ii,Pz:()=>Ue,Sg:()=>He,UG:()=>Re,UI:()=>us,US:()=>xe,Wj:()=>Ds,Wl:()=>pn,Yr:()=>Oe,ZB:()=>ie,ZR:()=>_t,aH:()=>Le,b$:()=>bt,cI:()=>Ft,dS:()=>fi,eu:()=>it,g5:()=>$,gK:()=>Zi,gQ:()=>vr,h$:()=>Se,hl:()=>Ye,hu:()=>u,jU:()=>Be,lb:()=>vi,m9:()=>Tn,ne:()=>qi,p$:()=>oe,pd:()=>Fi,r3:()=>ro,ru:()=>gt,tV:()=>ve,uI:()=>_e,ug:()=>Nn,vZ:()=>Nr,w1:()=>an,w9:()=>Gi,xO:()=>ir,xb:()=>ls,z$:()=>nt,zI:()=>ot,zd:()=>yr});const V={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},u=function(se,ee){if(!se)throw $(ee)},$=function(se){return new Error("Firebase Database ("+V.SDK_VERSION+") INTERNAL ASSERT FAILED: "+se)},ge=function(se){const ee=[];let he=0;for(let J=0;J<se.length;J++){let H=se.charCodeAt(J);H<128?ee[he++]=H:H<2048?(ee[he++]=H>>6|192,ee[he++]=63&H|128):55296==(64512&H)&&J+1<se.length&&56320==(64512&se.charCodeAt(J+1))?(H=65536+((1023&H)<<10)+(1023&se.charCodeAt(++J)),ee[he++]=H>>18|240,ee[he++]=H>>12&63|128,ee[he++]=H>>6&63|128,ee[he++]=63&H|128):(ee[he++]=H>>12|224,ee[he++]=H>>6&63|128,ee[he++]=63&H|128)}return ee},xe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(se,ee){if(!Array.isArray(se))throw Error("encodeByteArray takes an array as a parameter");this.init_();const he=ee?this.byteToCharMapWebSafe_:this.byteToCharMap_,J=[];for(let H=0;H<se.length;H+=3){const Q=se[H],Ae=H+1<se.length,We=Ae?se[H+1]:0,xt=H+2<se.length,ft=xt?se[H+2]:0;let Hn=(15&We)<<2|ft>>6,sr=63&ft;xt||(sr=64,Ae||(Hn=64)),J.push(he[Q>>2],he[(3&Q)<<4|We>>4],he[Hn],he[sr])}return J.join("")},encodeString(se,ee){return this.HAS_NATIVE_SUPPORT&&!ee?btoa(se):this.encodeByteArray(ge(se),ee)},decodeString(se,ee){return this.HAS_NATIVE_SUPPORT&&!ee?atob(se):function(se){const ee=[];let he=0,J=0;for(;he<se.length;){const H=se[he++];if(H<128)ee[J++]=String.fromCharCode(H);else if(H>191&&H<224){const Q=se[he++];ee[J++]=String.fromCharCode((31&H)<<6|63&Q)}else if(H>239&&H<365){const xt=((7&H)<<18|(63&se[he++])<<12|(63&se[he++])<<6|63&se[he++])-65536;ee[J++]=String.fromCharCode(55296+(xt>>10)),ee[J++]=String.fromCharCode(56320+(1023&xt))}else{const Q=se[he++],Ae=se[he++];ee[J++]=String.fromCharCode((15&H)<<12|(63&Q)<<6|63&Ae)}}return ee.join("")}(this.decodeStringToByteArray(se,ee))},decodeStringToByteArray(se,ee){this.init_();const he=ee?this.charToByteMapWebSafe_:this.charToByteMap_,J=[];for(let H=0;H<se.length;){const Q=he[se.charAt(H++)],We=H<se.length?he[se.charAt(H)]:0;++H;const ft=H<se.length?he[se.charAt(H)]:64;++H;const $t=H<se.length?he[se.charAt(H)]:64;if(++H,null==Q||null==We||null==ft||null==$t)throw Error();J.push(Q<<2|We>>4),64!==ft&&(J.push(We<<4&240|ft>>2),64!==$t&&J.push(ft<<6&192|$t))}return J},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let se=0;se<this.ENCODED_VALS.length;se++)this.byteToCharMap_[se]=this.ENCODED_VALS.charAt(se),this.charToByteMap_[this.byteToCharMap_[se]]=se,this.byteToCharMapWebSafe_[se]=this.ENCODED_VALS_WEBSAFE.charAt(se),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[se]]=se,se>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(se)]=se,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(se)]=se)}}},Se=function(se){const ee=ge(se);return xe.encodeByteArray(ee,!0)},Me=function(se){return Se(se).replace(/\./g,"")},ve=function(se){try{return xe.decodeString(se,!0)}catch(ee){console.error("base64Decode failed: ",ee)}return null};function oe(se){return ie(void 0,se)}function ie(se,ee){if(!(ee instanceof Object))return ee;switch(ee.constructor){case Date:return new Date(ee.getTime());case Object:void 0===se&&(se={});break;case Array:se=[];break;default:return ee}for(const he in ee)!ee.hasOwnProperty(he)||!fe(he)||(se[he]=ie(se[he],ee[he]));return se}function fe(se){return"__proto__"!==se}const re=()=>{try{return function st(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const se=process.env.__FIREBASE_DEFAULTS__;return se?JSON.parse(se):void 0})()||(()=>{if(typeof document>"u")return;let se;try{se=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ee=se&&ve(se[1]);return ee&&JSON.parse(ee)})()}catch(se){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${se}`)}},Le=()=>{var se;return null===(se=re())||void 0===se?void 0:se.config},Ue=se=>{var ee;return null===(ee=re())||void 0===ee?void 0:ee[`_${se}`]};class Fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ee,he)=>{this.resolve=ee,this.reject=he})}wrapCallback(ee){return(he,J)=>{he?this.reject(he):this.resolve(J),"function"==typeof ee&&(this.promise.catch(()=>{}),1===ee.length?ee(he):ee(he,J))}}}function He(se,ee){if(se.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const J=ee||"demo-project",H=se.iat||0,Q=se.sub||se.user_id;if(!Q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ae=Object.assign({iss:`https://securetoken.google.com/${J}`,aud:J,iat:H,exp:H+3600,auth_time:H,sub:Q,user_id:Q,firebase:{sign_in_provider:"custom",identities:{}}},se);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(Ae)),""].join(".")}function nt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nt())}function Re(){var se;const ee=null===(se=re())||void 0===se?void 0:se.forceEnvironment;if("node"===ee)return!0;if("browser"===ee)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Be(){return"object"==typeof self&&self.self===self}function gt(){const se="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof se&&void 0!==se.id}function bt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function an(){const se=nt();return se.indexOf("MSIE ")>=0||se.indexOf("Trident/")>=0}function Oe(){return!0===V.NODE_CLIENT||!0===V.NODE_ADMIN}function Ve(){return!Re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ye(){try{return"object"==typeof indexedDB}catch{return!1}}function it(){return new Promise((se,ee)=>{try{let he=!0;const J="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(J);H.onsuccess=()=>{H.result.close(),he||self.indexedDB.deleteDatabase(J),se(!0)},H.onupgradeneeded=()=>{he=!1},H.onerror=()=>{var Q;ee((null===(Q=H.error)||void 0===Q?void 0:Q.message)||"")}}catch(he){ee(he)}})}function ot(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class _t extends Error{constructor(ee,he,J){super(he),this.code=ee,this.customData=J,this.name="FirebaseError",Object.setPrototypeOf(this,_t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ii.prototype.create)}}class ii{constructor(ee,he,J){this.service=ee,this.serviceName=he,this.errors=J}create(ee,...he){const J=he[0]||{},H=`${this.service}/${ee}`,Q=this.errors[ee],Ae=Q?function Jt(se,ee){return se.replace(Zt,(he,J)=>{const H=ee[J];return null!=H?String(H):`<${J}?>`})}(Q,J):"Error";return new _t(H,`${this.serviceName}: ${Ae} (${H}).`,J)}}const Zt=/\{\$([^}]+)}/g;function Ft(se){return JSON.parse(se)}function pn(se){return JSON.stringify(se)}const Yn=function(se){let ee={},he={},J={},H="";try{const Q=se.split(".");ee=Ft(ve(Q[0])||""),he=Ft(ve(Q[1])||""),H=Q[2],J=he.d||{},delete he.d}catch{}return{header:ee,claims:he,data:J,signature:H}},Gi=function(se){const he=Yn(se).claims;return!!he&&"object"==typeof he&&he.hasOwnProperty("iat")},Pr=function(se){const ee=Yn(se).claims;return"object"==typeof ee&&!0===ee.admin};function ro(se,ee){return Object.prototype.hasOwnProperty.call(se,ee)}function Ii(se,ee){if(Object.prototype.hasOwnProperty.call(se,ee))return se[ee]}function ls(se){for(const ee in se)if(Object.prototype.hasOwnProperty.call(se,ee))return!1;return!0}function us(se,ee,he){const J={};for(const H in se)Object.prototype.hasOwnProperty.call(se,H)&&(J[H]=ee.call(he,se[H],H,se));return J}function Nr(se,ee){if(se===ee)return!0;const he=Object.keys(se),J=Object.keys(ee);for(const H of he){if(!J.includes(H))return!1;const Q=se[H],Ae=ee[H];if(ei(Q)&&ei(Ae)){if(!Nr(Q,Ae))return!1}else if(Q!==Ae)return!1}for(const H of J)if(!he.includes(H))return!1;return!0}function ei(se){return null!==se&&"object"==typeof se}function ir(se){const ee=[];for(const[he,J]of Object.entries(se))Array.isArray(J)?J.forEach(H=>{ee.push(encodeURIComponent(he)+"="+encodeURIComponent(H))}):ee.push(encodeURIComponent(he)+"="+encodeURIComponent(J));return ee.length?"&"+ee.join("&"):""}function yr(se){const ee={};return se.replace(/^\?/,"").split("&").forEach(J=>{if(J){const[H,Q]=J.split("=");ee[decodeURIComponent(H)]=decodeURIComponent(Q)}}),ee}function Fi(se){const ee=se.indexOf("?");if(!ee)return"";const he=se.indexOf("#",ee);return se.substring(ee,he>0?he:void 0)}class vr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ee=1;ee<this.blockSize;++ee)this.pad_[ee]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ee,he){he||(he=0);const J=this.W_;if("string"==typeof ee)for(let $t=0;$t<16;$t++)J[$t]=ee.charCodeAt(he)<<24|ee.charCodeAt(he+1)<<16|ee.charCodeAt(he+2)<<8|ee.charCodeAt(he+3),he+=4;else for(let $t=0;$t<16;$t++)J[$t]=ee[he]<<24|ee[he+1]<<16|ee[he+2]<<8|ee[he+3],he+=4;for(let $t=16;$t<80;$t++){const Hn=J[$t-3]^J[$t-8]^J[$t-14]^J[$t-16];J[$t]=4294967295&(Hn<<1|Hn>>>31)}let ft,hn,H=this.chain_[0],Q=this.chain_[1],Ae=this.chain_[2],We=this.chain_[3],xt=this.chain_[4];for(let $t=0;$t<80;$t++){$t<40?$t<20?(ft=We^Q&(Ae^We),hn=1518500249):(ft=Q^Ae^We,hn=1859775393):$t<60?(ft=Q&Ae|We&(Q|Ae),hn=2400959708):(ft=Q^Ae^We,hn=3395469782);const Hn=(H<<5|H>>>27)+ft+xt+hn+J[$t]&4294967295;xt=We,We=Ae,Ae=4294967295&(Q<<30|Q>>>2),Q=H,H=Hn}this.chain_[0]=this.chain_[0]+H&4294967295,this.chain_[1]=this.chain_[1]+Q&4294967295,this.chain_[2]=this.chain_[2]+Ae&4294967295,this.chain_[3]=this.chain_[3]+We&4294967295,this.chain_[4]=this.chain_[4]+xt&4294967295}update(ee,he){if(null==ee)return;void 0===he&&(he=ee.length);const J=he-this.blockSize;let H=0;const Q=this.buf_;let Ae=this.inbuf_;for(;H<he;){if(0===Ae)for(;H<=J;)this.compress_(ee,H),H+=this.blockSize;if("string"==typeof ee){for(;H<he;)if(Q[Ae]=ee.charCodeAt(H),++Ae,++H,Ae===this.blockSize){this.compress_(Q),Ae=0;break}}else for(;H<he;)if(Q[Ae]=ee[H],++Ae,++H,Ae===this.blockSize){this.compress_(Q),Ae=0;break}}this.inbuf_=Ae,this.total_+=he}digest(){const ee=[];let he=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let H=this.blockSize-1;H>=56;H--)this.buf_[H]=255&he,he/=256;this.compress_(this.buf_);let J=0;for(let H=0;H<5;H++)for(let Q=24;Q>=0;Q-=8)ee[J]=this.chain_[H]>>Q&255,++J;return ee}}function qi(se,ee){const he=new zn(se,ee);return he.subscribe.bind(he)}class zn{constructor(ee,he){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=he,this.task.then(()=>{ee(this)}).catch(J=>{this.error(J)})}next(ee){this.forEachObserver(he=>{he.next(ee)})}error(ee){this.forEachObserver(he=>{he.error(ee)}),this.close(ee)}complete(){this.forEachObserver(ee=>{ee.complete()}),this.close()}subscribe(ee,he,J){let H;if(void 0===ee&&void 0===he&&void 0===J)throw new Error("Missing Observer.");H=function zt(se,ee){if("object"!=typeof se||null===se)return!1;for(const he of ee)if(he in se&&"function"==typeof se[he])return!0;return!1}(ee,["next","error","complete"])?ee:{next:ee,error:he,complete:J},void 0===H.next&&(H.next=At),void 0===H.error&&(H.error=At),void 0===H.complete&&(H.complete=At);const Q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch{}}),this.observers.push(H),Q}unsubscribeOne(ee){void 0===this.observers||void 0===this.observers[ee]||(delete this.observers[ee],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ee){if(!this.finalized)for(let he=0;he<this.observers.length;he++)this.sendOne(he,ee)}sendOne(ee,he){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ee])try{he(this.observers[ee])}catch(J){typeof console<"u"&&console.error&&console.error(J)}})}close(ee){this.finalized||(this.finalized=!0,void 0!==ee&&(this.finalError=ee),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function At(){}const wr=function(se,ee,he,J){let H;if(J<ee?H="at least "+ee:J>he&&(H=0===he?"none":"no more than "+he),H)throw new Error(se+" failed: Was called with "+J+(1===J?" argument.":" arguments.")+" Expects "+H+".")};function Zi(se,ee){return`${se} failed: ${ee} argument `}function Ds(se,ee,he,J){if((!J||he)&&"function"!=typeof he)throw new Error(Zi(se,ee)+"must be a valid function.")}function vi(se,ee,he,J){if((!J||he)&&("object"!=typeof he||null===he))throw new Error(Zi(se,ee)+"must be a valid context object.")}const fi=function(se){const ee=[];let he=0;for(let J=0;J<se.length;J++){let H=se.charCodeAt(J);if(H>=55296&&H<=56319){const Q=H-55296;J++,u(J<se.length,"Surrogate pair missing trail surrogate."),H=65536+(Q<<10)+(se.charCodeAt(J)-56320)}H<128?ee[he++]=H:H<2048?(ee[he++]=H>>6|192,ee[he++]=63&H|128):H<65536?(ee[he++]=H>>12|224,ee[he++]=H>>6&63|128,ee[he++]=63&H|128):(ee[he++]=H>>18|240,ee[he++]=H>>12&63|128,ee[he++]=H>>6&63|128,ee[he++]=63&H|128)}return ee},Nn=function(se){let ee=0;for(let he=0;he<se.length;he++){const J=se.charCodeAt(he);J<128?ee++:J<2048?ee+=2:J>=55296&&J<=56319?(ee+=4,he++):ee+=3}return ee},mn=1e3,rr=2,rt=144e5,Ge=.5;function yt(se,ee=mn,he=rr){const J=ee*Math.pow(he,se),H=Math.round(Ge*J*(Math.random()-.5)*2);return Math.min(rt,J+H)}function Tn(se){return se&&se._delegate?se._delegate:se}},2634:(Te,ye,q)=>{"use strict";var V={};q.r(V),q.d(V,{auth:()=>P});var u=q(4650);let $=null;function ge(){return $}class xe{}const Se=new u.OlP("DocumentToken");let Me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function ve(){return(0,u.LFG)(ie)}()},providedIn:"platform"}),n})();const oe=new u.OlP("Location Initialized");let ie=(()=>{class n extends Me{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ge().getBaseHref(this._doc)}onPopState(t){const i=ge().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=ge().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){fe()?this._history.pushState(t,i,r):this._location.hash=r}replaceState(t,i,r){fe()?this._history.replaceState(t,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Se))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function st(){return new ie((0,u.LFG)(Se))}()},providedIn:"platform"}),n})();function fe(){return!!window.history.pushState}function me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function qe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function te(n){return n&&"?"!==n[0]?"?"+n:n}let re=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(De)},providedIn:"root"}),n})();const pe=new u.OlP("appBaseHref");let De=(()=>{class n extends re{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(Se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return me(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+te(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const c=this.prepareExternalUrl(r+te(o));this._platformLocation.pushState(t,i,c)}replaceState(t,i,r,o){const c=this.prepareExternalUrl(r+te(o));this._platformLocation.replaceState(t,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Me),u.LFG(pe,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Le=(()=>{class n extends re{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=me(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let c=this.prepareExternalUrl(r+te(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,i,c)}replaceState(t,i,r,o){let c=this.prepareExternalUrl(r+te(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Me),u.LFG(pe,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ue=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function _e(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(qe(nt(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+te(i))}normalize(t){return n.stripTrailingSlash(function He(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,nt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+te(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+te(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=te,n.joinWithSlash=me,n.stripTrailingSlash=qe,n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Fe(){return new Ue((0,u.LFG)(re))}()},providedIn:"root"}),n})();function nt(n){return n.replace(/\/index.html$/,"")}function As(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}class Yo{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let On=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,o,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Yo(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===o?void 0:o);else if(null!==o){const p=i.get(o);i.move(p,c),Hl(p,r)}});for(let r=0,o=i.length;r<o;r++){const p=i.get(r).context;p.index=r,p.count=o,p.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Hl(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Hl(n,e){n.context.$implicit=e.item}let qt=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new ju,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$l("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$l("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ju{constructor(){this.$implicit=null,this.ngIf=null}}function $l(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class Gl{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let ds=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const i of this._defaultViews)i.enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),Ui=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new Gl(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(ds,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),Xa=(()=>{class n{constructor(t,i,r){r._addDefault(new Gl(t,i))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(ds,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0}),n})(),Io=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,o]=t.split("."),c=-1===r.indexOf("-")?void 0:u.JOm.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,c):this._renderer.removeStyle(this._ngEl.nativeElement,r,c)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.aQg),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),ms=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const Wl="browser",hh="server";function Ao(n){return n===hh}let Zu=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new il((0,u.LFG)(Se),window)}),n})();class il{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Yl(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const c=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ma(this.window.history)||ma(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ma(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class _a{}class Ih extends xe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ld extends Ih{static makeCurrent(){!function Ie(n){$||($=n)}(new ld)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function nc(){return co=co||document.querySelector("base"),co?co.getAttribute("href"):null}();return null==t?null:function rw(n){hr=hr||document.createElement("a"),hr.setAttribute("href",n);const e=hr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){co=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return As(document.cookie,e)}}let hr,co=null;const ll=new u.OlP("TRANSITION_ID"),Th=[{provide:u.ip1,useFactory:function S_(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const i=ge(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[ll,Se,u.zs3],multi:!0}];let D_=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const pi=new u.OlP("EventManagerPlugins");let ul=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const c=r[o];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pi),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Ca{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=ge().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let ic=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,i){const r=this.usageCount;let o=r.get(t)??0;return o+=i,o>0?r.set(t,o):r.delete(t),o}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),ys=(()=>{class n extends ic{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.forEach(o=>o.remove()),i.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,i){const r=this.doc.createElement("style");r.textContent=i,t.appendChild(r);const o=this.styleRef.get(i);o?o.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const rc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sc=/%COMP%/g,hl=new u.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function ud(n,e){return e.flat(100).map(t=>t.replace(sc,n))}function Lr(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ac=(()=>{class n{constructor(t,i,r,o){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new ho(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(t,i);return r instanceof cd?r.applyToHost(t):r instanceof gl&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const c=this.eventManager,p=this.sharedStylesHost,_=this.removeStylesOnCompDestory;switch(i.encapsulation){case u.ifc.Emulated:o=new cd(c,p,i,this.appId,_);break;case u.ifc.ShadowDom:return new Dh(c,p,t,i);default:o=new gl(c,p,i,_)}o.onDestroy=()=>r.delete(i.id),r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ul),u.LFG(ys),u.LFG(u.AFp),u.LFG(hl))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class ho{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(rc[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(iu(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(iu(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=rc[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=rc[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,i,r&u.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Lr(i)):this.eventManager.addEventListener(e,t,Lr(i))}}function iu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Dh extends ho{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=ud(r.id,r.styles);for(const c of o){const p=document.createElement("style");p.textContent=c,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class gl extends ho{constructor(e,t,i,r,o=i.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=ud(o,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class cd extends gl{constructor(e,t,i,r,o){const c=r+"-"+i.id;super(e,t,i,o,c),this.contentAttr=function Sh(n){return"_ngcontent-%COMP%".replace(sc,n)}(c),this.hostAttr=function fl(n){return"_nghost-%COMP%".replace(sc,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let uc=(()=>{class n extends Ca{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const dd=["alt","control","meta","shift"],ks={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ah={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ml=(()=>{class n extends Ca{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),c=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ge().onAndCancel(t,o.domEventName,c))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let c="",p=i.indexOf("code");if(p>-1&&(i.splice(p,1),c="code."),dd.forEach(E=>{const T=i.indexOf(E);T>-1&&(i.splice(T,1),c+=E+".")}),c+=o,0!=i.length||0===o.length)return null;const _={};return _.domEventName=r,_.fullKey=c,_}static matchEventFullKeyCode(t,i){let r=ks[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),dd.forEach(c=>{c!==r&&(0,Ah[c])(t)&&(o+=c+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const kh=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:Wl},{provide:u.g9A,useValue:function A_(){ld.makeCurrent()},multi:!0},{provide:Se,useFactory:function ru(){return(0,u.RDi)(document),document},deps:[]}]),cc=new u.OlP(""),xo=[{provide:u.rWj,useClass:class nu{addToWindow(e){u.dqk.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(i=>{const r=u.dqk.getAllAngularTestabilities();let o=r.length,c=!1;const p=function(_){c=c||_,o--,0==o&&i(c)};r.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?ge().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],_l=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function xh(){return new u.qLn},deps:[]},{provide:pi,useClass:uc,multi:!0,deps:[Se,u.R0b,u.Lbi]},{provide:pi,useClass:ml,multi:!0,deps:[Se]},{provide:ac,useClass:ac,deps:[ul,ys,u.AFp,hl]},{provide:u.FYo,useExisting:ac},{provide:ic,useExisting:ys},{provide:ys,useClass:ys,deps:[Se]},{provide:ul,useClass:ul,deps:[pi,u.R0b]},{provide:_a,useClass:D_,deps:[]},[]];let Sa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:ll,useExisting:u.AFp},Th]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(cc,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[..._l,...xo],imports:[ms,u.hGG]}),n})(),hd=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Se))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function Ph(){return new hd((0,u.LFG)(Se))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let Ir=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new(t||n):u.LFG(gd),i},providedIn:"root"}),n})(),gd=(()=>{class n extends Ir{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case u.q3G.NONE:return i;case u.q3G.HTML:return(0,u.qzn)(i,"HTML")?(0,u.z3N)(i):(0,u.EiD)(this._doc,String(i)).toString();case u.q3G.STYLE:return(0,u.qzn)(i,"Style")?(0,u.z3N)(i):i;case u.q3G.SCRIPT:if((0,u.qzn)(i,"Script"))return(0,u.z3N)(i);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.qzn)(i,"URL")?(0,u.z3N)(i):(0,u.mCW)(String(i));case u.q3G.RESOURCE_URL:if((0,u.qzn)(i,"ResourceURL"))return(0,u.z3N)(i);throw new Error(`unsafe value used in a resource URL context (see ${u.JZr})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${u.JZr})`)}}bypassSecurityTrustHtml(t){return(0,u.JVY)(t)}bypassSecurityTrustStyle(t){return(0,u.L6k)(t)}bypassSecurityTrustScript(t){return(0,u.eBb)(t)}bypassSecurityTrustUrl(t){return(0,u.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,u.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Se))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function zp(n){return new gd(n.get(Se))}(u.LFG(u.zs3)),i},providedIn:"root"}),n})();var Mt=q(9260),Da=(q(9568),q(4159)),jh=q.n(Da);q(2125),q(5473),q(9812),q(7792),q(2910),function(){(function(){var n,t,e="function"==typeof Object.create?Object.create:function(s){function h(){}return h.prototype=s,new h};if("function"==typeof Object.setPrototypeOf)t=Object.setPrototypeOf;else{var i;e:{var o={};try{o.__proto__={xb:!0},i=o.xb;break e}catch{}i=!1}t=i?function(s,h){if(s.__proto__=h,s.__proto__!==h)throw new TypeError(s+" is not extensible");return s}:null}var c=t;function p(s,h){if(s.prototype=e(h.prototype),s.prototype.constructor=s,c)c(s,h);else for(var m in h)if("prototype"!=m)if(Object.defineProperties){var w=Object.getOwnPropertyDescriptor(h,m);w&&Object.defineProperty(s,m,w)}else s[m]=h[m];s.K=h.prototype}var _="function"==typeof Object.defineProperties?Object.defineProperty:function(s,h,m){s!=Array.prototype&&s!=Object.prototype&&(s[h]=m.value)},E=typeof window<"u"&&window===this?this:typeof global<"u"&&null!=global?global:this;function T(s,h){if(h){var m=E;s=s.split(".");for(var w=0;w<s.length-1;w++){var S=s[w];S in m||(m[S]={}),m=m[S]}(h=h(w=m[s=s[s.length-1]]))!=w&&null!=h&&_(m,s,{configurable:!0,writable:!0,value:h})}}T("Object.is",function(s){return s||function(h,m){return h===m?0!==h||1/h==1/m:h!=h&&m!=m}}),T("Array.prototype.includes",function(s){return s||function(h,m){var w=this;w instanceof String&&(w=String(w));var S=w.length;for(0>(m=m||0)&&(m=Math.max(m+S,0));m<S;m++){var x=w[m];if(x===h||Object.is(x,h))return!0}return!1}});var R=this;function F(s){return void 0!==s}function G(s){return"string"==typeof s}var K=/^[\w+/_-]+[=]{0,2}$/,ue=null;function we(){}function Ke(s){s.W=void 0,s.Xa=function(){return s.W?s.W:s.W=new s}}function ut(s){var h=typeof s;if("object"==h){if(!s)return"null";if(s instanceof Array)return"array";if(s instanceof Object)return h;var m=Object.prototype.toString.call(s);if("[object Window]"==m)return"object";if("[object Array]"==m||"number"==typeof s.length&&typeof s.splice<"u"&&typeof s.propertyIsEnumerable<"u"&&!s.propertyIsEnumerable("splice"))return"array";if("[object Function]"==m||typeof s.call<"u"&&typeof s.propertyIsEnumerable<"u"&&!s.propertyIsEnumerable("call"))return"function"}else if("function"==h&&typeof s.call>"u")return"object";return h}function ct(s){return"array"==ut(s)}function ht(s){var h=ut(s);return"array"==h||"object"==h&&"number"==typeof s.length}function Pt(s){return"function"==ut(s)}function Nt(s){var h=typeof s;return"object"==h&&null!=s||"function"==h}var bn="closure_uid_"+(1e9*Math.random()>>>0),tr=0;function qo(s,h,m){return s.call.apply(s.bind,arguments)}function Au(s,h,m){if(!s)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,w),s.apply(h,S)}}return function(){return s.apply(h,arguments)}}function ni(s,h,m){return(ni=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qo:Au).apply(null,arguments)}function Ga(s,h){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),s.apply(this,w)}}function Jn(s,h){for(var m in h)s[m]=h[m]}var sn,Gc=Date.now||function(){return+new Date};function ki(s,h){s=s.split(".");var w,m=R;s[0]in m||typeof m.execScript>"u"||m.execScript("var "+s[0]);for(;s.length&&(w=s.shift());)!s.length&&F(h)?m[w]=h:m=m[w]&&m[w]!==Object.prototype[w]?m[w]:m[w]={}}function tt(s,h){function m(){}m.prototype=h.prototype,s.K=h.prototype,s.prototype=new m,s.prototype.constructor=s,s.vc=function(w,S,x){for(var j=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)j[ne-2]=arguments[ne];return h.prototype[S].apply(w,j)}}function jt(s){if(Error.captureStackTrace)Error.captureStackTrace(this,jt);else{var h=Error().stack;h&&(this.stack=h)}s&&(this.message=String(s))}function Ln(s,h){for(var m="",w=(s=s.split("%s")).length-1,S=0;S<w;S++)m+=s[S]+(S<h.length?h[S]:"%s");jt.call(this,m+s[w])}function Ci(s,h){throw new Ln("Failure"+(s?": "+s:""),Array.prototype.slice.call(arguments,1))}tt(jt,Error),jt.prototype.name="CustomError",tt(Ln,jt),Ln.prototype.name="AssertionError";var qa=Array.prototype.indexOf?function(s,h){return Array.prototype.indexOf.call(s,h,void 0)}:function(s,h){if(G(s))return G(h)&&1==h.length?s.indexOf(h,0):-1;for(var m=0;m<s.length;m++)if(m in s&&s[m]===h)return m;return-1},Ts=Array.prototype.forEach?function(s,h,m){Array.prototype.forEach.call(s,h,m)}:function(s,h,m){for(var w=s.length,S=G(s)?s.split(""):s,x=0;x<w;x++)x in S&&h.call(m,S[x],x,s)},$i=Array.prototype.filter?function(s,h){return Array.prototype.filter.call(s,h,void 0)}:function(s,h){for(var m=s.length,w=[],S=0,x=G(s)?s.split(""):s,j=0;j<m;j++)if(j in x){var ne=x[j];h.call(void 0,ne,j,s)&&(w[S++]=ne)}return w},XM=Array.prototype.map?function(s,h){return Array.prototype.map.call(s,h,void 0)}:function(s,h){for(var m=s.length,w=Array(m),S=G(s)?s.split(""):s,x=0;x<m;x++)x in S&&(w[x]=h.call(void 0,S[x],x,s));return w},TV=Array.prototype.some?function(s,h){return Array.prototype.some.call(s,h,void 0)}:function(s,h){for(var m=s.length,w=G(s)?s.split(""):s,S=0;S<m;S++)if(S in w&&h.call(void 0,w[S],S,s))return!0;return!1};function _i(s,h){return 0<=qa(s,h)}function Zc(s,h){var m;return(m=0<=(h=qa(s,h)))&&no(s,h),m}function no(s,h){return 1==Array.prototype.splice.call(s,h,1).length}function g7(s){return Array.prototype.concat.apply([],arguments)}function m7(s){var h=s.length;if(0<h){for(var m=Array(h),w=0;w<h;w++)m[w]=s[w];return m}return[]}function Zhe(s,h,m){return 2>=arguments.length?Array.prototype.slice.call(s,h):Array.prototype.slice.call(s,h,m)}var Za=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]},zhe=/&/g,Whe=/</g,Khe=/>/g,Yhe=/"/g,Qhe=/'/g,Jhe=/\x00/g,Xhe=/[\x00&<>"']/;function SV(s,h){return s<h?-1:s>h?1:0}function m0(s){return Xhe.test(s)&&(-1!=s.indexOf("&")&&(s=s.replace(zhe,"&amp;")),-1!=s.indexOf("<")&&(s=s.replace(Whe,"&lt;")),-1!=s.indexOf(">")&&(s=s.replace(Khe,"&gt;")),-1!=s.indexOf('"')&&(s=s.replace(Yhe,"&quot;")),-1!=s.indexOf("'")&&(s=s.replace(Qhe,"&#39;")),-1!=s.indexOf("\0")&&(s=s.replace(Jhe,"&#0;"))),s}function _7(s,h,m){for(var w in s)h.call(m,s[w],w,s)}function DV(s){var m,h={};for(m in s)h[m]=s[m];return h}var y7="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ex(s,h){for(var m,w,S=1;S<arguments.length;S++){for(m in w=arguments[S])s[m]=w[m];for(var x=0;x<y7.length;x++)m=y7[x],Object.prototype.hasOwnProperty.call(w,m)&&(s[m]=w[m])}}var _0="StopIteration"in R?R.StopIteration:{message:"StopIteration",stack:""};function Ym(){}function v7(s){if(s instanceof Ym)return s;if("function"==typeof s.ha)return s.ha(!1);if(ht(s)){var h=0,m=new Ym;return m.next=function(){for(;;){if(h>=s.length)throw _0;if(h in s)return s[h++];h++}},m}throw Error("Not implemented")}function tx(s,h){this.g={},this.a=[],this.j=this.h=0;var m=arguments.length;if(1<m){if(m%2)throw Error("Uneven number of arguments");for(var w=0;w<m;w+=2)this.set(arguments[w],arguments[w+1])}else if(s)if(s instanceof tx)for(m=s.ja(),w=0;w<m.length;w++)this.set(m[w],s.get(m[w]));else for(w in s)this.set(w,s[w])}function nx(s){if(s.h!=s.a.length){for(var h=0,m=0;h<s.a.length;){var w=s.a[h];Qm(s.g,w)&&(s.a[m++]=w),h++}s.a.length=m}if(s.h!=s.a.length){var S={};for(m=h=0;h<s.a.length;)Qm(S,w=s.a[h])||(s.a[m++]=w,S[w]=1),h++;s.a.length=m}}function Qm(s,h){return Object.prototype.hasOwnProperty.call(s,h)}Ym.prototype.next=function(){throw _0},Ym.prototype.ha=function(){return this},(n=tx.prototype).la=function(){nx(this);for(var s=[],h=0;h<this.a.length;h++)s.push(this.g[this.a[h]]);return s},n.ja=function(){return nx(this),this.a.concat()},n.clear=function(){this.g={},this.j=this.h=this.a.length=0},n.get=function(s,h){return Qm(this.g,s)?this.g[s]:h},n.set=function(s,h){Qm(this.g,s)||(this.h++,this.a.push(s),this.j++),this.g[s]=h},n.forEach=function(s,h){for(var m=this.ja(),w=0;w<m.length;w++){var S=m[w],x=this.get(S);s.call(h,x,S,this)}},n.ha=function(s){nx(this);var h=0,m=this.j,w=this,S=new Ym;return S.next=function(){if(m!=w.j)throw Error("The map has changed since the iterator was created");if(h>=w.a.length)throw _0;var x=w.a[h++];return s?x:w.g[x]},S};var nfe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function w7(s,h,m,w){for(var S=m.length;0<=(h=s.indexOf(m,h))&&h<w;){var x=s.charCodeAt(h-1);if(!(38!=x&&63!=x||(x=s.charCodeAt(h+S))&&61!=x&&38!=x&&35!=x))return h;h+=S+1}return-1}var b7=/#|$/;function ix(s,h){var m=s.search(b7),w=w7(s,0,h,m);if(0>w)return null;var S=s.indexOf("&",w);return(0>S||S>m)&&(S=m),w+=h.length+1,decodeURIComponent(s.substr(w,S-w).replace(/\+/g," "))}var rfe=/[?&]($|#)/;function gp(s,h){var m;this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1,s instanceof gp?(this.i=F(h)?h:s.i,AV(this,s.j),this.A=s.A,this.h=s.h,MV(this,s.C),this.g=s.g,xV(this,I7(s.a)),this.s=s.s):s&&(m=String(s).match(nfe))?(this.i=!!h,AV(this,m[1]||"",!0),this.A=bI(m[2]||""),this.h=bI(m[3]||"",!0),MV(this,m[4]),this.g=bI(m[5]||"",!0),xV(this,m[6]||"",!0),this.s=bI(m[7]||"")):(this.i=!!h,this.a=new CI(null,this.i))}function AV(s,h,m){s.j=m?bI(h,!0):h,s.j&&(s.j=s.j.replace(/:$/,""))}function MV(s,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);s.C=h}else s.C=null}function xV(s,h,m){h instanceof CI?(s.a=h,function cfe(s,h){h&&!s.j&&(mp(s),s.h=null,s.a.forEach(function(m,w){var S=w.toLowerCase();w!=S&&(Jm(this,w),Jm(this,S),0<m.length&&(this.h=null,this.a.set(y0(this,S),m7(m)),this.g+=m.length))},s)),s.j=h}(s.a,s.i)):(m||(h=EI(h,lfe)),s.a=new CI(h,s.i))}function kV(s){return s instanceof gp?new gp(s):new gp(s,void 0)}function bI(s,h){return s?h?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function EI(s,h,m){return G(s)?(s=encodeURI(s).replace(h,sfe),m&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function sfe(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}gp.prototype.toString=function(){var s=[],h=this.j;h&&s.push(EI(h,E7,!0),":");var m=this.h;return(m||"file"==h)&&(s.push("//"),(h=this.A)&&s.push(EI(h,E7,!0),"@"),s.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(m=this.C)&&s.push(":",String(m))),(m=this.g)&&(this.h&&"/"!=m.charAt(0)&&s.push("/"),s.push(EI(m,"/"==m.charAt(0)?afe:ofe,!0))),(m=this.a.toString())&&s.push("?",m),(m=this.s)&&s.push("#",EI(m,ufe)),s.join("")};var E7=/[#\/\?@]/g,ofe=/[#\?:]/g,afe=/[#\?]/g,lfe=/[#\?@]/g,ufe=/#/g;function CI(s,h){this.g=this.a=null,this.h=s||null,this.j=!!h}function mp(s){s.a||(s.a=new tx,s.g=0,s.h&&function ife(s,h){if(s){s=s.split("&");for(var m=0;m<s.length;m++){var w=s[m].indexOf("="),S=null;if(0<=w){var x=s[m].substring(0,w);S=s[m].substring(w+1)}else x=s[m];h(x,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}(s.h,function(h,m){s.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}function Jm(s,h){mp(s),h=y0(s,h),Qm(s.a.g,h)&&(s.h=null,s.g-=s.a.get(h).length,Qm((s=s.a).g,h)&&(delete s.g[h],s.h--,s.j++,s.a.length>2*s.h&&nx(s)))}function C7(s,h){return mp(s),h=y0(s,h),Qm(s.a.g,h)}function I7(s){var h=new CI;return h.h=s.h,s.a&&(h.a=new tx(s.a),h.g=s.g),h}function y0(s,h){return h=String(h),s.j&&(h=h.toLowerCase()),h}function Xm(s){this.a=kV(s)}function T7(s){return s.a.a.get(rs.Pa)||null}function S7(s,h){h?s.a.a.set(rs.PROVIDER_ID,h):Jm(s.a.a,rs.PROVIDER_ID)}(n=CI.prototype).add=function(s,h){mp(this),this.h=null,s=y0(this,s);var m=this.a.get(s);return m||this.a.set(s,m=[]),m.push(h),this.g+=1,this},n.clear=function(){this.a=this.h=null,this.g=0},n.forEach=function(s,h){mp(this),this.a.forEach(function(m,w){Ts(m,function(S){s.call(h,S,w,this)},this)},this)},n.ja=function(){mp(this);for(var s=this.a.la(),h=this.a.ja(),m=[],w=0;w<h.length;w++)for(var S=s[w],x=0;x<S.length;x++)m.push(h[w]);return m},n.la=function(s){mp(this);var h=[];if(G(s))C7(this,s)&&(h=g7(h,this.a.get(y0(this,s))));else{s=this.a.la();for(var m=0;m<s.length;m++)h=g7(h,s[m])}return h},n.set=function(s,h){return mp(this),this.h=null,C7(this,s=y0(this,s))&&(this.g-=this.a.get(s).length),this.a.set(s,[h]),this.g+=1,this},n.get=function(s,h){return s&&0<(s=this.la(s)).length?String(s[0]):h},n.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var s=[],h=this.a.ja(),m=0;m<h.length;m++){var w=h[m],S=encodeURIComponent(String(w));w=this.la(w);for(var x=0;x<w.length;x++){var j=S;""!==w[x]&&(j+="="+encodeURIComponent(String(w[x]))),s.push(j)}}return this.h=s.join("&")},Xm.prototype.toString=function(){return this.a.toString()};var v0,rs={Pa:"ui_auid",lc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"};e:{var D7=R.navigator;if(D7){var A7=D7.userAgent;if(A7){v0=A7;break e}}v0=""}function Un(s){return-1!=v0.indexOf(s)}function M7(){return(Un("Chrome")||Un("CriOS"))&&!Un("Edge")}function RV(s){return RV[" "](s),s}RV[" "]=we;var rx,s,x7=Un("Opera"),Mr=Un("Trident")||Un("MSIE"),_p=Un("Edge"),pfe=_p||Mr,Mu=Un("Gecko")&&!(-1!=v0.toLowerCase().indexOf("webkit")&&!Un("Edge"))&&!(Un("Trident")||Un("MSIE"))&&!Un("Edge"),Zo=-1!=v0.toLowerCase().indexOf("webkit")&&!Un("Edge"),gfe=Zo&&Un("Mobile"),yp=Un("Macintosh");function k7(){var s=R.document;return s?s.documentMode:void 0}e:{var PV="",NV=(s=v0,Mu?/rv:([^\);]+)(\)|;)/.exec(s):_p?/Edge\/([\d\.]+)/.exec(s):Mr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Zo?/WebKit\/(\S+)/.exec(s):x7?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(NV&&(PV=NV?NV[1]:""),Mr){var OV=k7();if(null!=OV&&OV>parseFloat(PV)){rx=String(OV);break e}}rx=PV}var mfe={};function e_(s){return function ffe(s,h){var m=mfe;return Object.prototype.hasOwnProperty.call(m,s)?m[s]:m[s]=h(s)}(s,function(){for(var h=0,m=Za(String(rx)).split("."),w=Za(String(s)).split("."),S=Math.max(m.length,w.length),x=0;0==h&&x<S;x++){var j=m[x]||"",ne=w[x]||"";do{if(j=/(\d*)(\D*)(.*)/.exec(j)||["","","",""],ne=/(\d*)(\D*)(.*)/.exec(ne)||["","","",""],0==j[0].length&&0==ne[0].length)break;h=SV(0==j[1].length?0:parseInt(j[1],10),0==ne[1].length?0:parseInt(ne[1],10))||SV(0==j[2].length,0==ne[2].length)||SV(j[2],ne[2]),j=j[3],ne=ne[3]}while(0==h)}return 0<=h})}var II,R7=R.document;function w0(s,h){this.a=s===N7&&h||"",this.g=P7}II=R7&&Mr?k7()||("CSS1Compat"==R7.compatMode?parseInt(rx,10):5):void 0,w0.prototype.ma=!0,w0.prototype.ka=function(){return this.a},w0.prototype.toString=function(){return"Const{"+this.a+"}"};var P7={},N7={};function t_(){this.a="",this.h=F7}function O7(s){return s instanceof t_&&s.constructor===t_&&s.h===F7?s.a:(Ci("expected object of type TrustedResourceUrl, got '"+s+"' of type "+ut(s)),"type_error:TrustedResourceUrl")}t_.prototype.ma=!0,t_.prototype.ka=function(){return this.a.toString()},t_.prototype.g=function(){return 1},t_.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var F7={};function za(){this.a="",this.h=V7}function vp(s){return s instanceof za&&s.constructor===za&&s.h===V7?s.a:(Ci("expected object of type SafeUrl, got '"+s+"' of type "+ut(s)),"type_error:SafeUrl")}za.prototype.ma=!0,za.prototype.ka=function(){return this.a.toString()},za.prototype.g=function(){return 1},za.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var L7=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function sx(s){return s instanceof za?s:(s="object"==typeof s&&s.ma?s.ka():String(s),L7.test(s)||(s="about:invalid#zClosurez"),FV(s))}function U7(s){return s instanceof za?s:(s="object"==typeof s&&s.ma?s.ka():String(s),L7.test(s)||(s="about:invalid#zClosurez"),FV(s))}var V7={};function FV(s){var h=new za;return h.a=s,h}function b0(){this.a="",this.g=B7}FV("about:blank"),b0.prototype.ma=!0;var B7={};function wp(){this.a="",this.j=j7,this.h=null}function ox(s){return s instanceof wp&&s.constructor===wp&&s.j===j7?s.a:(Ci("expected object of type SafeHtml, got '"+s+"' of type "+ut(s)),"type_error:SafeHtml")}b0.prototype.ka=function(){return this.a},b0.prototype.toString=function(){return"SafeStyle{"+this.a+"}"},wp.prototype.g=function(){return this.h},wp.prototype.ma=!0,wp.prototype.ka=function(){return this.a.toString()},wp.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var j7={};function TI(s,h){var m=new wp;return m.a=s,m.h=h,m}TI("<!DOCTYPE html>",0);var yfe=TI("",0);TI("<br>",0);var m,h,vfe=(h=!1,function(){return h||(m=function(){if(typeof document>"u")return!1;var s=document.createElement("div"),h=document.createElement("div");return h.appendChild(document.createElement("div")),s.appendChild(h),!!s.firstChild&&(h=s.firstChild.firstChild,s.innerHTML=ox(yfe),!h.parentElement)}(),h=!0),m});function E0(s,h){h=h instanceof za?h:U7(h),s.assign(vp(h))}function bp(s,h){this.a=F(s)?s:0,this.g=F(h)?h:0}function LV(s,h){this.width=s,this.height=h}function ax(s){return s?new jV(SI(s)):sn||(sn=new jV)}function UV(s,h){var m=h||document;return m.querySelectorAll&&m.querySelector?m.querySelectorAll("."+s):H7(document,s,h)}function VV(s,h){var m=h||document;if(m.getElementsByClassName)s=m.getElementsByClassName(s)[0];else{m=document;var w=h||m;s=w.querySelectorAll&&w.querySelector&&s?w.querySelector(s?"."+s:""):H7(m,s,h)[0]||null}return s||null}function H7(s,h,m){var w;if((s=m||s).querySelectorAll&&s.querySelector&&h)return s.querySelectorAll(h?"."+h:"");if(h&&s.getElementsByClassName){var S=s.getElementsByClassName(h);return S}if(S=s.getElementsByTagName("*"),h){var x={};for(m=w=0;s=S[m];m++){var j=s.className;"function"==typeof j.split&&_i(j.split(/\s+/),h)&&(x[w++]=s)}return x.length=w,x}return S}bp.prototype.toString=function(){return"("+this.a+", "+this.g+")"},bp.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},bp.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},bp.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this},(n=LV.prototype).toString=function(){return"("+this.width+" x "+this.height+")"},n.aspectRatio=function(){return this.width/this.height},n.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},n.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},n.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var $7={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function lx(s){return s.scrollingElement?s.scrollingElement:(Zo||"CSS1Compat"!=s.compatMode)&&s.body||s.documentElement}function n_(s){s&&s.parentNode&&s.parentNode.removeChild(s)}function SI(s){return 9==s.nodeType?s:s.ownerDocument||s.document}function BV(s,h){if("textContent"in s)s.textContent=h;else if(3==s.nodeType)s.data=String(h);else if(s.firstChild&&3==s.firstChild.nodeType){for(;s.lastChild!=s.firstChild;)s.removeChild(s.lastChild);s.firstChild.data=String(h)}else{for(var m;m=s.firstChild;)s.removeChild(m);s.appendChild(SI(s).createTextNode(String(h)))}}function G7(s,h){return h?function Efe(s,h){for(;s;){if(h(s))return s;s=s.parentNode}return null}(s,function(m){return!h||G(m.className)&&_i(m.className.split(/\s+/),h)}):null}function jV(s){this.a=s||R.document||document}jV.prototype.N=function(){return G(void 0)?this.a.getElementById(void 0):void 0};var ux={Fc:!0},q7={Hc:!0},Cfe={Ec:!0},Z7={Gc:!0};function Ep(){throw Error("Do not instantiate directly")}function DI(s,h,m,w){if(s=s(h||Sfe,void 0,m),w=(w||ax()).a.createElement("DIV"),(s=function Ife(s){if(!Nt(s))return m0(String(s));if(s instanceof Ep){if(s.fa===ux)return s.content;if(s.fa===Z7)return m0(s.content)}return Ci("Soy template output is unsafe for use as HTML: "+s),"zSoyz"}(s)).match(Tfe),s=TI(s,null),vfe())for(;w.lastChild;)w.removeChild(w.lastChild);return w.innerHTML=ox(s),1==w.childNodes.length&&1==(s=w.firstChild).nodeType&&(w=s),w}Ep.prototype.va=null,Ep.prototype.toString=function(){return this.content};var Tfe=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,Sfe={};function cx(){Ep.call(this)}function fn(s){return null!=s&&s.fa===ux?s:s instanceof wp?Ut(ox(s).toString(),s.g()):Ut(m0(String(String(s))),function Dfe(s){if(null!=s)switch(s.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}(s))}function dx(){Ep.call(this)}function hx(s,h){this.content=String(s),this.va=h??null}function Xn(s){return new hx(s,void 0)}tt(cx,Ep),cx.prototype.fa=ux,tt(dx,Ep),dx.prototype.fa=q7,dx.prototype.va=1,tt(hx,Ep),hx.prototype.fa=Z7;var Ut=function(s){function h(m){this.content=m}return h.prototype=s.prototype,function(m,w){return m=new h(String(m)),void 0!==w&&(m.va=w),m}}(cx),Afe=function(s){function h(m){this.content=m}return h.prototype=s.prototype,function(m){return new h(String(m))}}(dx);function xr(s){return(s=String(s))?new hx(s,void 0):""}var z7=function(s){function h(m){this.content=m}return h.prototype=s.prototype,function(m,w){return(m=String(m))?(m=new h(m),void 0!==w&&(m.va=w),m):""}}(cx);function zo(s){return null!=s&&s.fa===ux?String(String(s.content).replace(Ffe,"").replace(Lfe,"&lt;")).replace(Pfe,kfe):m0(String(s))}function i_(s){return null!=s&&s.fa===q7?s=String(s).replace($V,HV):s instanceof za?s=String(vp(s).toString()).replace($V,HV):(s=String(s),Ofe.test(s)?s=s.replace($V,HV):(Ci("Bad value `%s` for |filterNormalizeUri",[s]),s="#zSoyz")),s}function W7(s){return null!=s&&s.fa===Cfe?s=s.content:null==s?s="":s instanceof b0?s instanceof b0&&s.constructor===b0&&s.g===B7?s=s.a:(Ci("expected object of type SafeStyle, got '"+s+"' of type "+ut(s)),s="type_error:SafeStyle"):(s=String(s),Nfe.test(s)||(Ci("Bad value `%s` for |filterCssValue",[s]),s="zSoyz")),s}var xfe={"\0":"&#0;","\t":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","\x85":"&#133;","\xa0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function kfe(s){return xfe[s]}var Rfe={"\0":"%00","\x01":"%01","\x02":"%02","\x03":"%03","\x04":"%04","\x05":"%05","\x06":"%06","\x07":"%07","\b":"%08","\t":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","\x0e":"%0E","\x0f":"%0F","\x10":"%10","\x11":"%11","\x12":"%12","\x13":"%13","\x14":"%14","\x15":"%15","\x16":"%16","\x17":"%17","\x18":"%18","\x19":"%19","\x1a":"%1A","\x1b":"%1B","\x1c":"%1C","\x1d":"%1D","\x1e":"%1E","\x1f":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","\x7f":"%7F","\x85":"%C2%85","\xa0":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86","\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D","\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB","\uff3d":"%EF%BC%BD"};function HV(s){return Rfe[s]}var Pfe=/[\x00\x22\x27\x3c\x3e]/g,$V=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,Nfe=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,Ofe=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,Ffe=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,Lfe=/</g;function GV(){return Xn("Enter a valid phone number")}function K7(){return Xn("Unable to send password reset code to specified email")}function Y7(){return Xn("Something went wrong. Please try again.")}function Q7(){return Xn("This email already exists without any means of sign-in. Please reset the password to recover.")}function J7(s){var h="";switch((s=s||{}).code){case"invalid-argument":h+="Client specified an invalid argument.";break;case"invalid-configuration":h+="Client specified an invalid project configuration.";break;case"failed-precondition":h+="Request can not be executed in the current system state.";break;case"out-of-range":h+="Client specified an invalid range.";break;case"unauthenticated":h+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":h+="Client does not have sufficient permission.";break;case"not-found":h+="Specified resource is not found.";break;case"aborted":h+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":h+="The resource that a client tried to create already exists.";break;case"resource-exhausted":h+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":h+="Request cancelled by the client.";break;case"data-loss":h+="Unrecoverable data loss or data corruption.";break;case"unknown":h+="Unknown server error.";break;case"internal":h+="Internal server error.";break;case"not-implemented":h+="API method not implemented by the server.";break;case"unavailable":h+="Service unavailable.";break;case"deadline-exceeded":h+="Request deadline exceeded.";break;case"auth/user-disabled":h+="The user account has been disabled by an administrator.";break;case"auth/timeout":h+="The operation has timed out.";break;case"auth/too-many-requests":h+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":h+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":h+="A network error has occurred. Try again later.";break;case"restart-process":h+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":h+="No sign-in provider is available for the given email, please try with a different email."}return Xn(h)}function AI(s,h,m){var w=Error.call(this);this.message=w.message,"stack"in w&&(this.stack=w.stack),this.code=Ufe+s,(s=h)||("firebaseui/merge-conflict"===(s="",this.code)?s+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.":s+=Y7(),s=Xn(s).toString()),this.message=s||"",this.credential=m||null}p(AI,Error),AI.prototype.toJSON=function(){return{code:this.code,message:this.message}};var Ufe="firebaseui/";function r_(){0!=qV&&(ez[this[bn]||(this[bn]=++tr)]=this),this.T=this.T,this.C=this.C}var qV=0,ez={};function MI(s,h){s.T?F(void 0)?h.call(void 0):h():(s.C||(s.C=[]),s.C.push(F(void 0)?ni(h,void 0):h))}function xI(s){s&&"function"==typeof s.m&&s.m()}r_.prototype.T=!1,r_.prototype.m=function(){if(!this.T&&(this.T=!0,this.o(),0!=qV)){var s=this[bn]||(this[bn]=++tr);if(0!=qV&&this.C&&0<this.C.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ez[s]}},r_.prototype.o=function(){if(this.C)for(;this.C.length;)this.C.shift()()};var Vfe=Object.freeze||function(s){return s},tz=!Mr||9<=Number(II),Bfe=Mr&&!e_("9"),jfe=function(){if(!R.addEventListener||!Object.defineProperty)return!1;var s=!1,h=Object.defineProperty({},"passive",{get:function(){s=!0}});try{R.addEventListener("test",we,h),R.removeEventListener("test",we,h)}catch{}return s}();function oh(s,h){this.type=s,this.g=this.target=h,this.h=!1,this.qb=!0}function Wo(s,h){if(oh.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,s){var m=this.type=s.type,w=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=h,h=s.relatedTarget){if(Mu){e:{try{RV(h.nodeName);var S=!0;break e}catch{}S=!1}S||(h=null)}}else"mouseover"==m?h=s.fromElement:"mouseout"==m&&(h=s.toElement);this.relatedTarget=h,w?(this.clientX=void 0!==w.clientX?w.clientX:w.pageX,this.clientY=void 0!==w.clientY?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.keyCode=s.keyCode||0,this.key=s.key||"",this.j=s.charCode||("keypress"==m?s.keyCode:0),this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=G(s.pointerType)?s.pointerType:Hfe[s.pointerType]||"",this.a=s,s.defaultPrevented&&this.preventDefault()}}oh.prototype.stopPropagation=function(){this.h=!0},oh.prototype.preventDefault=function(){this.qb=!1},tt(Wo,oh);var Hfe=Vfe({2:"touch",3:"pen",4:"mouse"});Wo.prototype.stopPropagation=function(){Wo.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},Wo.prototype.preventDefault=function(){Wo.K.preventDefault.call(this);var s=this.a;if(s.preventDefault)s.preventDefault();else if(s.returnValue=!1,Bfe)try{(s.ctrlKey||112<=s.keyCode&&123>=s.keyCode)&&(s.keyCode=-1)}catch{}};var kI="closure_listenable_"+(1e6*Math.random()|0),$fe=0;function Gfe(s,h,m,w,S){this.listener=s,this.proxy=null,this.src=h,this.type=m,this.capture=!!w,this.La=S,this.key=++$fe,this.sa=this.Ia=!1}function fx(s){s.sa=!0,s.listener=null,s.proxy=null,s.src=null,s.La=null}function px(s){this.src=s,this.a={},this.g=0}function ZV(s,h){var m=h.type;m in s.a&&Zc(s.a[m],h)&&(fx(h),0==s.a[m].length&&(delete s.a[m],s.g--))}function zV(s,h,m,w){for(var S=0;S<s.length;++S){var x=s[S];if(!x.sa&&x.listener==h&&x.capture==!!m&&x.La==w)return S}return-1}px.prototype.add=function(s,h,m,w,S){var x=s.toString();(s=this.a[x])||(s=this.a[x]=[],this.g++);var j=zV(s,h,w,S);return-1<j?(h=s[j],m||(h.Ia=!1)):((h=new Gfe(h,this.src,x,!!w,S)).Ia=m,s.push(h)),h};var WV="closure_lm_"+(1e6*Math.random()|0),KV={};function xu(s,h,m,w,S){if(w&&w.once)return RI(s,h,m,w,S);if(ct(h)){for(var x=0;x<h.length;x++)xu(s,h[x],m,w,S);return null}return m=QV(m),s&&s[kI]?s.J.add(String(h),m,!1,Nt(w)?!!w.capture:!!w,S):iz(s,h,m,!1,w,S)}function iz(s,h,m,w,S,x){if(!h)throw Error("Invalid event type");var j=Nt(S)?!!S.capture:!!S,ne=gx(s);if(ne||(s[WV]=ne=new px(s)),(m=ne.add(h,m,w,j,x)).proxy)return m;if(w=function qfe(){var s=Zfe,h=tz?function(m){return s.call(h.src,h.listener,m)}:function(m){if(!(m=s.call(h.src,h.listener,m)))return m};return h}(),m.proxy=w,w.src=s,w.listener=m,s.addEventListener)jfe||(S=j),void 0===S&&(S=!1),s.addEventListener(h.toString(),w,S);else if(s.attachEvent)s.attachEvent(rz(h.toString()),w);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(w)}return m}function RI(s,h,m,w,S){if(ct(h)){for(var x=0;x<h.length;x++)RI(s,h[x],m,w,S);return null}return m=QV(m),s&&s[kI]?s.J.add(String(h),m,!0,Nt(w)?!!w.capture:!!w,S):iz(s,h,m,!0,w,S)}function s_(s,h,m,w,S){if(ct(h))for(var x=0;x<h.length;x++)s_(s,h[x],m,w,S);else w=Nt(w)?!!w.capture:!!w,m=QV(m),s&&s[kI]?(s=s.J,(h=String(h).toString())in s.a&&-1<(m=zV(x=s.a[h],m,w,S))&&(fx(x[m]),no(x,m),0==x.length&&(delete s.a[h],s.g--))):s&&(s=gx(s))&&(h=s.a[h.toString()],s=-1,h&&(s=zV(h,m,w,S)),(m=-1<s?h[s]:null)&&Cp(m))}function Cp(s){if("number"!=typeof s&&s&&!s.sa){var h=s.src;if(h&&h[kI])ZV(h.J,s);else{var m=s.type,w=s.proxy;h.removeEventListener?h.removeEventListener(m,w,s.capture):h.detachEvent?h.detachEvent(rz(m),w):h.addListener&&h.removeListener&&h.removeListener(w),(m=gx(h))?(ZV(m,s),0==m.g&&(m.src=null,h[WV]=null)):fx(s)}}}function rz(s){return s in KV?KV[s]:KV[s]="on"+s}function sz(s,h,m,w){var S=!0;if((s=gx(s))&&(h=s.a[h.toString()]))for(h=h.concat(),s=0;s<h.length;s++){var x=h[s];x&&x.capture==m&&!x.sa&&(x=oz(x,w),S=S&&!1!==x)}return S}function oz(s,h){var m=s.listener,w=s.La||s.src;return s.Ia&&Cp(s),m.call(w,h)}function Zfe(s,h){if(s.sa)return!0;if(!tz){if(!h)e:{h=["window","event"];for(var m=R,w=0;w<h.length;w++)if(null==(m=m[h[w]])){h=null;break e}h=m}if(h=new Wo(w=h,this),m=!0,!(0>w.keyCode||null!=w.returnValue)){e:{var S=!1;if(0==w.keyCode)try{w.keyCode=-1;break e}catch{S=!0}(S||null==w.returnValue)&&(w.returnValue=!0)}for(w=[],S=h.g;S;S=S.parentNode)w.push(S);for(s=s.type,S=w.length-1;!h.h&&0<=S;S--){h.g=w[S];var x=sz(w[S],s,!0,h);m=m&&x}for(S=0;!h.h&&S<w.length;S++)h.g=w[S],x=sz(w[S],s,!1,h),m=m&&x}return m}return oz(s,new Wo(h,this))}function gx(s){return(s=s[WV])instanceof px?s:null}var YV="__closure_events_fn_"+(1e9*Math.random()>>>0);function QV(s){return Pt(s)?s:(s[YV]||(s[YV]=function(h){return s.handleEvent(h)}),s[YV])}function ss(){r_.call(this),this.J=new px(this),this.wb=this,this.Ha=null}function Ip(s,h){var m,w=s.Ha;if(w)for(m=[];w;w=w.Ha)m.push(w);if(s=s.wb,w=h.type||h,G(h))h=new oh(h,s);else if(h instanceof oh)h.target=h.target||s;else{var S=h;ex(h=new oh(w,s),S)}if(S=!0,m)for(var x=m.length-1;!h.h&&0<=x;x--){var j=h.g=m[x];S=mx(j,w,!0,h)&&S}if(h.h||(S=mx(j=h.g=s,w,!0,h)&&S,h.h||(S=mx(j,w,!1,h)&&S)),m)for(x=0;!h.h&&x<m.length;x++)S=mx(j=h.g=m[x],w,!1,h)&&S;return S}function mx(s,h,m,w){if(!(h=s.J.a[String(h)]))return!0;h=h.concat();for(var S=!0,x=0;x<h.length;++x){var j=h[x];if(j&&!j.sa&&j.capture==m){var ne=j.listener,Ne=j.La||j.src;j.Ia&&ZV(s.J,j),S=!1!==ne.call(Ne,w)&&S}}return S&&0!=w.qb}tt(ss,r_),ss.prototype[kI]=!0,ss.prototype.Za=function(s){this.Ha=s},ss.prototype.removeEventListener=function(s,h,m,w){s_(this,s,h,m,w)},ss.prototype.o=function(){if(ss.K.o.call(this),this.J){var m,s=this.J;for(m in s.a){for(var w=s.a[m],S=0;S<w.length;S++)fx(w[S]);delete s.a[m],s.g--}}this.Ha=null};var Wa={},az=0;function lz(s,h){if(!s)throw Error("Event target element must be provided!");if(s=JV(s),Wa[s]&&Wa[s].length)for(var m=0;m<Wa[s].length;m++)Ip(Wa[s][m],h)}function JV(s){return typeof s.a>"u"&&(s.a=az,az++),s.a}function _x(s){if(!s)throw Error("Event target element must be provided!");ss.call(this),this.a=s}function uz(s){if(!s)return!1;try{return!!s.$goog_Thenable}catch{return!1}}function XV(s,h){this.h=s,this.j=h,this.g=0,this.a=null}function cz(s,h){s.j(h),100>s.g&&(s.g++,h.next=s.a,s.a=h)}function dz(){this.g=this.a=null}p(_x,ss),_x.prototype.N=function(){return this.a},_x.prototype.register=function(){var s=JV(this.N());Wa[s]?_i(Wa[s],this)||Wa[s].push(this):Wa[s]=[this]},XV.prototype.get=function(){if(0<this.g){this.g--;var s=this.a;this.a=s.next,s.next=null}else s=this.h();return s};var t3,yx,hz=new XV(function(){return new e3},function(s){s.reset()});function Wfe(){var s=pz,h=null;return s.a&&(h=s.a,s.a=s.a.next,s.a||(s.g=null),h.next=null),h}function e3(){this.next=this.g=this.a=null}function fz(s){R.setTimeout(function(){throw s},0)}function n3(s,h){yx||function Yfe(){if(R.Promise&&R.Promise.resolve){var s=R.Promise.resolve(void 0);yx=function(){s.then(gz)}}else yx=function(){var h=gz;!Pt(R.setImmediate)||R.Window&&R.Window.prototype&&!Un("Edge")&&R.Window.prototype.setImmediate==R.setImmediate?(t3||(t3=function Kfe(){var s=R.MessageChannel;if(typeof s>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!Un("Presto")&&(s=function(){var S=document.createElement("IFRAME");S.style.display="none",S.src="",document.documentElement.appendChild(S);var x=S.contentWindow;(S=x.document).open(),S.write(""),S.close();var j="callImmediate"+Math.random(),ne="file:"==x.location.protocol?"*":x.location.protocol+"//"+x.location.host;S=ni(function(Ne){("*"==ne||Ne.origin==ne)&&Ne.data==j&&this.port1.onmessage()},this),x.addEventListener("message",S,!1),this.port1={},this.port2={postMessage:function(){x.postMessage(j,ne)}}}),typeof s<"u"&&!Un("Trident")&&!Un("MSIE")){var h=new s,m={},w=m;return h.port1.onmessage=function(){if(F(m.next)){var S=(m=m.next).gb;m.gb=null,S()}},function(S){w.next={gb:S},w=w.next,h.port2.postMessage(0)}}return typeof document<"u"&&"onreadystatechange"in document.createElement("SCRIPT")?function(S){var x=document.createElement("SCRIPT");x.onreadystatechange=function(){x.onreadystatechange=null,x.parentNode.removeChild(x),x=null,S(),S=null},document.documentElement.appendChild(x)}:function(S){R.setTimeout(S,0)}}()),t3(h)):R.setImmediate(h)}}(),r3||(yx(),r3=!0),pz.add(s,h)}dz.prototype.add=function(s,h){var m=hz.get();m.set(s,h),this.g?this.g.next=m:this.a=m,this.g=m},e3.prototype.set=function(s,h){this.a=s,this.g=h,this.next=null},e3.prototype.reset=function(){this.next=this.g=this.a=null};var r3=!1,pz=new dz;function gz(){for(var s;s=Wfe();){try{s.a.call(s.g)}catch(h){fz(h)}cz(hz,s)}r3=!1}function os(s){if(this.a=o_,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,s!=we)try{var h=this;s.call(void 0,function(m){a_(h,PI,m)},function(m){if(!(m instanceof I0))try{throw m instanceof Error?m:Error("Promise rejected.")}catch{}a_(h,ah,m)})}catch(m){a_(this,ah,m)}}var o_=0,PI=2,ah=3;function mz(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}mz.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var _z=new XV(function(){return new mz},function(s){s.reset()});function s3(s,h,m){var w=_z.get();return w.s=s,w.g=h,w.j=m,w}function kr(s){if(s instanceof os)return s;var h=new os(we);return a_(h,PI,s),h}function C0(s){return new os(function(h,m){m(s)})}function yz(s,h){if(s.a==o_)if(s.h){var m=s.h;if(m.g){for(var w=0,S=null,x=null,j=m.g;j&&(j.h||(w++,j.a==s&&(S=j),!(S&&1<w)));j=j.next)S||(x=j);S&&(m.a==o_&&1==w?yz(m,h):(x?((w=x).next==m.j&&(m.j=w),w.next=w.next.next):bz(m),Ez(m,S,ah,h)))}s.h=null}else a_(s,ah,h)}function o3(s,h){s.g||s.a!=PI&&s.a!=ah||wz(s),s.j?s.j.next=h:s.g=h,s.j=h}function vz(s,h,m,w){var S=s3(null,null,null);return S.a=new os(function(x,j){S.s=h?function(ne){try{var Ne=h.call(w,ne);x(Ne)}catch(dt){j(dt)}}:x,S.g=m?function(ne){try{var Ne=m.call(w,ne);!F(Ne)&&ne instanceof I0?j(ne):x(Ne)}catch(dt){j(dt)}}:j}),S.a.h=s,o3(s,S),S.a}function a_(s,h,m){if(s.a==o_){s===m&&(h=ah,m=new TypeError("Promise cannot resolve to itself")),s.a=1;e:{var w=m,S=s.hc,x=s.ic;if(w instanceof os){o3(w,s3(S||we,x||null,s));var j=!0}else if(uz(w))w.then(S,x,s),j=!0;else{if(Nt(w))try{var ne=w.then;if(Pt(ne)){(function Qfe(s,h,m,w,S){function x(Ne){ne||(ne=!0,w.call(S,Ne))}var ne=!1;try{h.call(s,function j(Ne){ne||(ne=!0,m.call(S,Ne))},x)}catch(Ne){x(Ne)}})(w,ne,S,x,s),j=!0;break e}}catch(Ne){x.call(s,Ne),j=!0;break e}j=!1}}j||(s.A=m,s.a=h,s.h=null,wz(s),h!=ah||m instanceof I0||function Jfe(s,h){s.s=!0,n3(function(){s.s&&Iz.call(null,h)})}(s,m))}}function wz(s){s.i||(s.i=!0,n3(s.Hb,s))}function bz(s){var h=null;return s.g&&(s.g=(h=s.g).next,h.next=null),s.g||(s.j=null),h}function Ez(s,h,m,w){if(m==ah&&h.g&&!h.h)for(;s&&s.s;s=s.h)s.s=!1;if(h.a)h.a.h=null,Cz(h,m,w);else try{h.h?h.s.call(h.j):Cz(h,m,w)}catch(S){Iz.call(null,S)}cz(_z,h)}function Cz(s,h,m){h==PI?s.s.call(s.j,m):s.g&&s.g.call(s.j,m)}os.prototype.then=function(s,h,m){return vz(this,Pt(s)?s:null,Pt(h)?h:null,m)},os.prototype.$goog_Thenable=!0,(n=os.prototype).fc=function(s,h){return(s=s3(s,s,h)).h=!0,o3(this,s),this},n.Ca=function(s,h){return vz(this,null,s,h)},n.cancel=function(s){this.a==o_&&n3(function(){yz(this,new I0(s))},this)},n.hc=function(s){this.a=o_,a_(this,PI,s)},n.ic=function(s){this.a=o_,a_(this,ah,s)},n.Hb=function(){for(var s;s=bz(this);)Ez(this,s,this.a,this.A);this.i=!1};var Iz=fz;function I0(s){jt.call(this,s)}function Tz(s,h,m){h||(h={}),m=m||window;var w=s instanceof za?s:sx(typeof s.href<"u"?s.href:String(s));s=h.target||s.target;var S=[];for(x in h)switch(x){case"width":case"height":case"top":case"left":S.push(x+"="+h[x]);break;case"target":case"noopener":case"noreferrer":break;default:S.push(x+"="+(h[x]?1:0))}var x=S.join(",");return(Un("iPhone")&&!Un("iPod")&&!Un("iPad")||Un("iPad")||Un("iPod"))&&m.navigator&&m.navigator.standalone&&s&&"_self"!=s?(x=m.document.createElement("A"),w=w instanceof za?w:U7(w),x.href=vp(w),x.setAttribute("target",s),h.noreferrer&&x.setAttribute("rel","noreferrer"),(h=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,m,1),x.dispatchEvent(h),m={}):h.noreferrer?(m=m.open("",s,x),h=vp(w).toString(),m&&(pfe&&-1!=h.indexOf(";")&&(h="'"+h.replace(/'/g,"%27")+"'"),m.opener=null,h=TI('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+m0(h)+'">',null),m.document.write(ox(h)),m.document.close())):(m=m.open(vp(w).toString(),s,x))&&h.noopener&&(m.opener=null),m}function Sz(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch{}return!1}function T0(s){Tz(s,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function vx(s,h){if(null==(s=Nt(s)&&1==s.nodeType?s:document.querySelector(String(s))))throw Error(h||"Cannot find element.");return s}function lh(){return window.location.href}function Tp(s){var h=rpe;this.s=[],this.T=h,this.O=s||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}function NI(s,h,m){s.a=!0,s.h=m,s.j=!h,Mz(s)}function wx(s){if(s.a){if(!s.J)throw new bx(s);s.J=!1}}function Dz(s,h,m){s.s.push([h,m,void 0]),s.a&&Mz(s)}function Az(s){return TV(s.s,function(h){return Pt(h[1])})}function Mz(s){if(s.i&&s.a&&Az(s)){var h=s.i,m=Ex[h];m&&(R.clearTimeout(m.a),delete Ex[h]),s.i=0}s.g&&(s.g.C--,delete s.g),h=s.h;for(var w=m=!1;s.s.length&&!s.A;){var S=s.s.shift(),x=S[0],j=S[1];if(S=S[2],x=s.j?j:x)try{var ne=x.call(S||s.O,h);F(ne)&&(s.j=s.j&&(ne==h||ne instanceof Error),s.h=h=ne),(uz(h)||"function"==typeof R.Promise&&h instanceof R.Promise)&&(w=!0,s.A=!0)}catch(Ne){h=Ne,s.j=!0,Az(s)||(m=!0)}}s.h=h,w&&(ne=ni(s.L,s,!0),w=ni(s.L,s,!1),h instanceof Tp?(Dz(h,ne,w),h.l=!0):h.then(ne,w)),m&&(h=new xz(h),Ex[h.a]=h,s.i=h.a)}function bx(){jt.call(this)}function OI(){jt.call(this)}function xz(s){this.a=R.setTimeout(ni(this.h,this),0),this.g=s}tt(I0,jt),I0.prototype.name="cancel",Tp.prototype.cancel=function(s){if(this.a)this.h instanceof Tp&&this.h.cancel();else{if(this.g){var h=this.g;delete this.g,s?h.cancel(s):(h.C--,0>=h.C&&h.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(s=new OI(this),wx(this),NI(this,!1,s))}},Tp.prototype.L=function(s,h){this.A=!1,NI(this,s,h)},Tp.prototype.callback=function(s){wx(this),NI(this,!0,s)},Tp.prototype.then=function(s,h,m){var w,S,x=new os(function(j,ne){w=j,S=ne});return Dz(this,w,function(j){j instanceof OI?x.cancel():S(j)}),x.then(s,h,m)},Tp.prototype.$goog_Thenable=!0,tt(bx,jt),bx.prototype.message="Deferred has already fired",bx.prototype.name="AlreadyCalledError",tt(OI,jt),OI.prototype.message="Deferred was canceled",OI.prototype.name="CanceledError",xz.prototype.h=function(){throw delete Ex[this.a],this.g};var Ex={};function rpe(){if(this&&this.rb){var s=this.rb;s&&"SCRIPT"==s.tagName&&Cx(s,!0,this.sb)}}function Cx(s,h,m){null!=m&&R.clearTimeout(m),s.onload=we,s.onerror=we,s.onreadystatechange=we,h&&window.setTimeout(function(){n_(s)},0)}var spe=0,ope=1;function a3(s,h){var m="Jsloader error (code #"+s+")";h&&(m+=": "+h),jt.call(this,m),this.code=s}function FI(){return R.google&&R.google.accounts&&R.google.accounts.id||null}function l3(s){this.a=s||FI(),this.h=!1,this.g=null}function kz(s,h,m){return s.a&&h?(s.h=!0,new os(function(S){s.g=S,s.a.initialize({client_id:h,callback:S,auto_select:!m}),s.a.prompt()})):kr(h?u3.Xa().load().then(function(){return s.a=FI(),kz(s,h,m)}).Ca(function(){return null}):null)}tt(a3,jt),l3.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())},Ke(l3);var ape=new w0(N7,"https://accounts.google.com/gsi/client");function u3(){this.a=null}function c3(s,h){this.a=s,this.g=h||function(m){throw m}}function d3(s,h,m){this.reset(s,h,m,void 0,void 0)}function h3(s){this.s=s,this.a=this.h=this.j=this.g=null}function Ix(s,h){this.name=s,this.value=h}u3.prototype.load=function(){var s=this;if(this.a)return this.a;var h=function _fe(){var s=ape;s instanceof w0&&s.constructor===w0&&s.g===P7?s=s.a:(Ci("expected object of type Const, got '"+s+"'"),s="type_error:Const");var h=new t_;return h.a=s,h}();return FI()?kr():this.a=function Xfe(){var s=null;return new os(function(h){"complete"==R.document.readyState?h():(s=function(){h()},RI(window,"load",s))}).Ca(function(h){throw s_(window,"load",s),h})}().then(function(){if(!FI())return new os(function(m,w){var S=setTimeout(function(){s.a=null,w(Error("Network error!"))},1e4);R.onGoogleLibraryLoad=function(){clearTimeout(S),m()},kr(function npe(s){var h={},m=h.document||document,w=O7(s).toString(),S=document.createElement("SCRIPT"),x={rb:S,sb:void 0},j=new Tp(x),ne=null,Ne=null!=h.timeout?h.timeout:5e3;return 0<Ne&&(ne=window.setTimeout(function(){Cx(S,!0);var dt=new a3(ope,"Timeout reached for loading script "+w);wx(j),NI(j,!1,dt)},Ne),x.sb=ne),S.onload=S.onreadystatechange=function(){S.readyState&&"loaded"!=S.readyState&&"complete"!=S.readyState||(Cx(S,h.xc||!1,ne),j.callback(null))},S.onerror=function(){Cx(S,!0,ne);var dt=new a3(spe,"Error while loading script "+w);wx(j),NI(j,!1,dt)},ex(x=h.attributes||{},{type:"text/javascript",charset:"UTF-8"}),function bfe(s,h){_7(h,function(m,w){m&&"object"==typeof m&&m.ma&&(m=m.ka()),"style"==w?s.style.cssText=m:"class"==w?s.className=m:"for"==w?s.htmlFor=m:$7.hasOwnProperty(w)?s.setAttribute($7[w],m):0==w.lastIndexOf("aria-",0)||0==w.lastIndexOf("data-",0)?s.setAttribute(w,m):s[w]=m})}(S,x),function wfe(s,h){s.src=O7(h),null===ue&&(ue=(h=(h=R.document).querySelector&&h.querySelector("script[nonce]"))&&(h=h.nonce||h.getAttribute("nonce"))&&K.test(h)?h:""),(h=ue)&&s.setAttribute("nonce",h)}(S,s),function ipe(s){var h=(s||document).getElementsByTagName("HEAD");return h&&0!=h.length?h[0]:s.documentElement}(m).appendChild(S),j}(h)).then(function(){FI()&&m()}).Ca(function(x){clearTimeout(S),s.a=null,w(x)})})})},Ke(u3),c3.prototype.confirm=function(s){return kr(this.a.confirm(s)).Ca(this.g)},d3.prototype.a=null,d3.prototype.reset=function(s,h,m,w,S){this.h=w||Gc(),this.j=s,this.s=h,this.g=m,delete this.a},Ix.prototype.toString=function(){return this.name};var Rz=new Ix("SEVERE",1e3),Pz=new Ix("WARNING",900),Nz=new Ix("CONFIG",700);function Oz(s){return s.j?s.j:s.g?Oz(s.g):(Ci("Root logger has no level set."),null)}h3.prototype.log=function(s,h,m){if(s.value>=Oz(this).value)for(Pt(h)&&(h=h()),s=new d3(s,String(h),this.s),m&&(s.a=m),m=this;m;){var w=m,S=s;if(w.a)for(var x=0;h=w.a[x];x++)h(S);m=m.g}};var f3={},LI=null;function Fz(){LI||(LI=new h3(""),f3[""]=LI,LI.j=Nz)}function Tx(){this.a=Gc()}var p3=null;function UI(s){this.j=s||"",p3||(p3=new Tx),this.s=p3}function l_(s){return 10>s?"0"+s:String(s)}function Uz(s){UI.call(this,s)}function Vz(){this.s=ni(this.h,this),this.a=new Uz,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}Tx.prototype.set=function(s){this.a=s},Tx.prototype.reset=function(){this.set(Gc())},Tx.prototype.get=function(){return this.a},UI.prototype.a=!0,UI.prototype.g=!0,UI.prototype.h=!1,tt(Uz,UI),Vz.prototype.h=function(s){if(!this.j[s.g]){var m=function cpe(s,h){var m=[];if(m.push(s.j," "),s.g){var w=new Date(h.h);m.push("[",l_(w.getFullYear()-2e3)+l_(w.getMonth()+1)+l_(w.getDate())+" "+l_(w.getHours())+":"+l_(w.getMinutes())+":"+l_(w.getSeconds())+"."+l_(Math.floor(w.getMilliseconds()/10)),"] ")}return m.push("[",function upe(s,h){h=(s=(s.h-h)/1e3).toFixed(3);var m=0;if(1>s)m=2;else for(;100>s;)m++,s*=10;for(;0<m--;)h=" "+h;return h}(h,s.s.get()),"s] "),m.push("[",h.g,"] "),m.push(h.s),s.h&&(h=h.a)&&m.push("\n",h instanceof Error?h.message:h.toString()),s.a&&m.push("\n"),m.join("")}(this.a,s);dpe&&function hpe(s,h,m,w){s[h]?s[h](m,w||""):s.log(m,w||"")}(dpe,function h(x){if(x){if(x.value>=Rz.value)return"error";if(x.value>=Pz.value)return"warn";if(x.value>=Nz.value)return"log"}return"debug"}(s.j),m,s.a)}};var g3,dpe=R.console;function Ka(s,h){g3&&g3.log(Rz,s,h)}g3=function Lz(s){var h;if(Fz(),!(h=f3[s])){h=new h3(s);var m=s.lastIndexOf("."),w=s.substr(m+1);(m=Lz(s.substr(0,m))).h||(m.h={}),m.h[w]=h,h.g=m,f3[s]=h}return h}("firebaseui");var m3=new Vz;if(1!=m3.g){var Sx;Fz();var fpe=m3.s;(Sx=LI).a||(Sx.a=[]),Sx.a.push(fpe),m3.g=!0}function Sp(s){g3&&g3.log(Pz,s,void 0)}function Bz(){this.a=(typeof document>"u"?null:document)||{cookie:""}}function _3(s){s=(s.a.cookie||"").split(";");for(var w,S,h=[],m=[],x=0;x<s.length;x++)-1==(w=(S=Za(s[x])).indexOf("="))?(h.push(""),m.push(S)):(h.push(S.substring(0,w)),m.push(S.substring(w+1)));return{keys:h,values:m}}(n=Bz.prototype).set=function(s,h,m,w,S,x){if(/[;=\s]/.test(s))throw Error('Invalid cookie name "'+s+'"');if(/[;\r\n]/.test(h))throw Error('Invalid cookie value "'+h+'"');F(m)||(m=-1),S=S?";domain="+S:"",w=w?";path="+w:"",x=x?";secure":"",m=0>m?"":0==m?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(Gc()+1e3*m).toUTCString(),this.a.cookie=s+"="+h+S+w+m+x},n.get=function(s,h){for(var x,m=s+"=",w=(this.a.cookie||"").split(";"),S=0;S<w.length;S++){if(0==(x=Za(w[S])).lastIndexOf(m,0))return x.substr(m.length);if(x==s)return""}return h},n.ja=function(){return _3(this).keys},n.la=function(){return _3(this).values},n.clear=function(){for(var s=_3(this).keys,h=s.length-1;0<=h;h--){var m=s[h];this.get(m),this.set(m,"",0,void 0,void 0)}};var Dx=new Bz;function jz(){}function S0(s,h,m,w){this.h=typeof s<"u"&&null!==s?s:-1,this.g=h||null,this.a=m||null,this.j=!!w}function y3(s,h){this.g=s,this.a=h||null}function Hz(s){return{email:s.g,credential:s.a&&s.a.toJSON()}}function $z(s){if(s&&s.email){var h=s.credential&&Mt.Z.auth.AuthCredential.fromJSON(s.credential);return new y3(s.email,h)}return null}function Gz(s){this.a=s||null}function qz(s){for(var h=[],m=0,w=0;w<s.length;w++){var S=s.charCodeAt(w);255<S&&(h[m++]=255&S,S>>=8),h[m++]=S}return h}function ppe(s){return XM(s,function(h){return 1<(h=h.toString(16)).length?h:"0"+h}).join("")}function Ax(s){for(this.i=s,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(D0*(this.j+1)),s=0;s<this.g;s++)this.a[s]=[this.i[4*s],this.i[4*s+1],this.i[4*s+2],this.i[4*s+3]];var h=Array(4);for(s=this.g;s<D0*(this.j+1);s++){if(h[0]=this.a[s-1][0],h[1]=this.a[s-1][1],h[2]=this.a[s-1][2],h[3]=this.a[s-1][3],s%this.g==0){var m=h,w=m[0];m[0]=m[1],m[1]=m[2],m[2]=m[3],m[3]=w,Yz(h),h[0]^=xx[s/this.g][0],h[1]^=xx[s/this.g][1],h[2]^=xx[s/this.g][2],h[3]^=xx[s/this.g][3]}else 6<this.g&&s%this.g==4&&Yz(h);this.a[s]=Array(4),this.a[s][0]=this.a[s-this.g][0]^h[0],this.a[s][1]=this.a[s-this.g][1]^h[1],this.a[s][2]=this.a[s-this.g][2]^h[2],this.a[s][3]=this.a[s-this.g][3]^h[3]}}p(S0,jz),S0.prototype.set=function(s,h){Dx.set(s,h,this.h,this.g,this.a,this.j)},S0.prototype.get=function(s){return Dx.get(s)||null},S0.prototype.ra=function(s){var h=this.g,m=this.a;Dx.get(s),Dx.set(s,"",0,h,m)};var D0=(Ax.prototype.A=16)/4;function Zz(s,h){for(var w=0;w<D0;w++)for(var S=0;4>S;S++)s.h[w][S]=h[4*S+w]}function zz(s){for(var h=[],m=0;m<D0;m++)for(var w=0;4>w;w++)h[4*w+m]=s.h[m][w];return h}function A0(s,h){for(var m=0;4>m;m++)for(var w=0;4>w;w++)s.h[m][w]^=s.a[4*h+w][m]}function Mx(s,h){for(var m=0;4>m;m++)for(var w=0;4>w;w++)s.h[m][w]=h[s.h[m][w]]}function Wz(s){for(var h=1;4>h;h++)for(var m=0;4>m;m++)s.s[h][m]=s.h[h][m];for(h=1;4>h;h++)for(m=0;4>m;m++)s.h[h][m]=s.s[h][(m+h)%D0]}function Kz(s){for(var h=1;4>h;h++)for(var m=0;4>m;m++)s.s[h][(m+h)%D0]=s.h[h][m];for(h=1;4>h;h++)for(m=0;4>m;m++)s.h[h][m]=s.s[h][m]}function Yz(s){s[0]=M0[s[0]],s[1]=M0[s[1]],s[2]=M0[s[2]],s[3]=M0[s[3]]}var M0=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Qz=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],xx=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],kx=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],Rx=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],Px=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],Nx=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],Ox=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],Fx=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function Jz(s,h){s=new Ax(eW(s));for(var S,m=(h=qz(h)).splice(0,16),w="";m.length;){S=16-m.length;for(var x=0;x<S;x++)m.push(0);for(Zz(S=s,m),A0(S,0),m=1;m<S.j;++m){Mx(S,M0),Wz(S),x=S.h;for(var j=S.s[0],ne=0;4>ne;ne++)j[0]=x[0][ne],j[1]=x[1][ne],j[2]=x[2][ne],j[3]=x[3][ne],x[0][ne]=kx[j[0]]^Rx[j[1]]^j[2]^j[3],x[1][ne]=j[0]^kx[j[1]]^Rx[j[2]]^j[3],x[2][ne]=j[0]^j[1]^kx[j[2]]^Rx[j[3]],x[3][ne]=Rx[j[0]]^j[1]^j[2]^kx[j[3]];A0(S,m)}Mx(S,M0),Wz(S),A0(S,S.j),w+=ppe(zz(S)),m=h.splice(0,16)}return w}function Xz(s,h){s=new Ax(eW(s));for(var m=[],w=0;w<h.length;w+=2)m.push(parseInt(h.substring(w,w+2),16));var S=m.splice(0,16);for(h="";S.length;){for(Zz(w=s,S),A0(w,w.j),S=1;S<w.j;++S){Kz(w),Mx(w,Qz),A0(w,w.j-S);for(var x=w.h,j=w.s[0],ne=0;4>ne;ne++)j[0]=x[0][ne],j[1]=x[1][ne],j[2]=x[2][ne],j[3]=x[3][ne],x[0][ne]=Fx[j[0]]^Nx[j[1]]^Ox[j[2]]^Px[j[3]],x[1][ne]=Px[j[0]]^Fx[j[1]]^Nx[j[2]]^Ox[j[3]],x[2][ne]=Ox[j[0]]^Px[j[1]]^Fx[j[2]]^Nx[j[3]],x[3][ne]=Nx[j[0]]^Ox[j[1]]^Px[j[2]]^Fx[j[3]]}if(Kz(w),Mx(w,Qz),A0(w,0),8192>=(w=zz(w)).length)w=String.fromCharCode.apply(null,w);else{for(S="",x=0;x<w.length;x+=8192)S+=String.fromCharCode.apply(null,Zhe(w,x,x+8192));w=S}h+=w,S=m.splice(0,16)}return h.replace(/(\x00)+$/,"")}function eW(s){for(var h=32-(s=qz(s.substring(0,32))).length,m=0;m<h;m++)s.push(0);return s}function tW(s){var h=[];return v3(new gpe,s,h),h.join("")}function gpe(){}function v3(s,h,m){if(null==h)m.push("null");else{if("object"==typeof h){if(ct(h)){var w=h;h=w.length,m.push("[");for(var S="",x=0;x<h;x++)m.push(S),v3(s,w[x],m),S=",";return void m.push("]")}if(!(h instanceof String||h instanceof Number||h instanceof Boolean)){for(w in m.push("{"),S="",h)Object.prototype.hasOwnProperty.call(h,w)&&"function"!=typeof(x=h[w])&&(m.push(S),iW(w,m),m.push(":"),v3(s,x,m),S=",");return void m.push("}")}h=h.valueOf()}switch(typeof h){case"string":iW(h,m);break;case"number":m.push(isFinite(h)&&!isNaN(h)?String(h):"null");break;case"boolean":m.push(String(h));break;case"function":m.push("null");break;default:throw Error("Unknown type: "+typeof h)}}}var nW={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},mpe=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function iW(s,h){h.push('"',s.replace(mpe,function(m){var w=nW[m];return w||(w="\\u"+(65536|m.charCodeAt(0)).toString(16).substr(1),nW[m]=w),w}),'"')}function VI(s){this.a=s}function Lx(){}function Ux(s){this.a=s}function Vx(s){if(!s.a)return!1;try{return s.a.setItem("__sak","1"),s.a.removeItem("__sak"),!0}catch{return!1}}function w3(){var s=null;try{s=window.localStorage||null}catch{}this.a=s}function b3(){var s=null;try{s=window.sessionStorage||null}catch{}this.a=s}function x0(s,h){this.g=s,this.a=h+"::"}VI.prototype.set=function(s,h){F(h)?this.a.set(s,tW(h)):this.a.ra(s)},VI.prototype.get=function(s){try{var h=this.a.get(s)}catch{return}if(null!==h)try{return JSON.parse(h)}catch{throw"Storage: Invalid value was encountered"}},tt(Lx,jz),Lx.prototype.clear=function(){var s=function tfe(s){if(ht(s))return m7(s);s=v7(s);var h=[];return function efe(s,h){if(ht(s))try{Ts(s,h,void 0)}catch(m){if(m!==_0)throw m}else{s=v7(s);try{for(;;)h.call(void 0,s.next(),void 0,s)}catch(m){if(m!==_0)throw m}}}(s,function(m){h.push(m)}),h}(this.ha(!0)),h=this;Ts(s,function(m){h.ra(m)})},tt(Ux,Lx),(n=Ux.prototype).set=function(s,h){try{this.a.setItem(s,h)}catch{throw 0==this.a.length?"Storage mechanism: Storage disabled":"Storage mechanism: Quota exceeded"}},n.get=function(s){if(!G(s=this.a.getItem(s))&&null!==s)throw"Storage mechanism: Invalid value was encountered";return s},n.ra=function(s){this.a.removeItem(s)},n.ha=function(s){var h=0,m=this.a,w=new Ym;return w.next=function(){if(h>=m.length)throw _0;var S=m.key(h++);if(s)return S;if(!G(S=m.getItem(S)))throw"Storage mechanism: Invalid value was encountered";return S},w},n.clear=function(){this.a.clear()},n.key=function(s){return this.a.key(s)},tt(w3,Ux),tt(b3,Ux),tt(x0,Lx),x0.prototype.set=function(s,h){this.g.set(this.a+s,h)},x0.prototype.get=function(s){return this.g.get(this.a+s)},x0.prototype.ra=function(s){this.g.ra(this.a+s)},x0.prototype.ha=function(s){var h=this.g.ha(!0),m=this,w=new Ym;return w.next=function(){for(var S=h.next();S.substr(0,m.a.length)!=m.a;)S=h.next();return s?S.substr(m.a.length):m.g.get(S)},w},Vx(new w3);var sW=new b3,E3=new VI(Vx(sW)?new x0(sW,"firebaseui"):null),C3={name:"pendingEmailCredential",storage:E3},u_={name:"redirectStatus",storage:E3},BI={name:"redirectUrl",storage:E3},k0={name:"emailForSignIn",storage:new VI(new S0(3600,"/"))},jI={name:"pendingEncryptedCredential",storage:new VI(new S0(3600,"/"))};function R0(s,h){return s.storage.get(h?s.name+":"+h:s.name)}function fa(s,h){s.storage.a.ra(h?s.name+":"+h:s.name)}function P0(s,h,m){s.storage.set(m?s.name+":"+m:s.name,h)}function oW(s){return R0(BI,s)||null}function zc(s){return $z(s=R0(C3,s)||null)}function Wc(s){fa(C3,s)}function aW(s,h){P0(C3,Hz(s),h)}function I3(s){return(s=R0(u_,s)||null)&&typeof s.tenantId<"u"?new Gz(s.tenantId):null}function T3(){this.W={}}function $r(s,h,m){if(h.toLowerCase()in s.W)throw Error("Configuration "+h+" has already been defined.");s.W[h.toLowerCase()]=m}function S3(s,h,m){if(!(h.toLowerCase()in s.W))throw Error("Configuration "+h+" is not defined.");s.W[h.toLowerCase()]=m}function D3(s,h){if(!(s=s.get(h)))throw Error("Configuration "+h+" is required.");return s}function A3(){this.g=void 0,this.a={}}function lW(s,h,m,w){for(var S=0;S<h.length;S++){var x=h.charAt(S);s.a[x]||(s.a[x]=new A3),s=s.a[x]}if(w&&void 0!==s.g)throw Error('The collection already contains the key "'+h+'"');s.g=m}function uW(s,h){for(var m in void 0!==s.g&&h.push(s.g),s.a)uW(s.a[m],h)}function cW(s,h,m){for(var w in void 0!==s.g&&m.push(h),s.a)cW(s.a[w],h+w,m)}function dW(s){for(this.a=s,this.g=new A3,s=0;s<this.a.length;s++){var h=this.g.get("+"+this.a[s].b);h?h.push(this.a[s]):this.g.add("+"+this.a[s].b,[this.a[s]])}}function Bx(s,h){var m={},w=0;for(void 0!==(s=s.g).g&&(m[w]=s.g);w<h.length;w++){var S=h.charAt(w);if(!(S in s.a))break;void 0!==(s=s.a[S]).g&&(m[w]=s.g)}for(var x in m)if(m.hasOwnProperty(x))return m[x];return[]}function c_(s){for(var h=0;h<Ko.length;h++)if(Ko[h].c===s)return Ko[h];return null}function hW(s){s=s.toUpperCase();for(var h=[],m=0;m<Ko.length;m++)Ko[m].f===s&&h.push(Ko[m]);return h}function fW(s){if(0<s.length&&"+"==s.charAt(0)){s=s.substring(1);for(var h=[],m=0;m<Ko.length;m++)Ko[m].b==s&&h.push(Ko[m]);s=h}else s=hW(s);return s}function pW(s){s.sort(function(h,m){return h.name.localeCompare(m.name,"en")})}T3.prototype.get=function(s){if(!(s.toLowerCase()in this.W))throw Error("Configuration "+s+" is not defined.");return this.W[s.toLowerCase()]},(n=A3.prototype).set=function(s,h){lW(this,s,h,!1)},n.add=function(s,h){lW(this,s,h,!0)},n.get=function(s){e:{for(var h=this,m=0;m<s.length;m++)if(!(h=h.a[s.charAt(m)])){s=void 0;break e}s=h}return s?s.g:void 0},n.la=function(){var s=[];return uW(this,s),s},n.ja=function(){var s=[];return cW(this,"",s),s},n.clear=function(){this.a={},this.g=void 0};var Ko=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"\xc5land Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"C\xf4te d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Cura\xe7ao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"R\xe9union",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barth\xe9lemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"S\xe3o Tom\xe9 and Pr\xedncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];pW(Ko);var HI=new dW(Ko);function gW(s,h){this.a=s,this.Aa=h}function mW(s){s=Za(s);var h=Bx(HI,s);return 0<h.length?new gW("1"==h[0].b?"1-US-0":h[0].c,Za(s.substr(h[0].b.length+1))):null}function M3(s){var h=c_(s.a);if(!h)throw Error("Country ID "+s.a+" not found.");return"+"+h.b+s.Aa}function _W(s,h){for(var m=0;m<s.length;m++)if(!_i(yW,s[m])&&(null!==N0&&s[m]in N0||_i(h,s[m])))return s[m];return null}var yW=["emailLink","password","phone"],N0={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function bpe(){this.a=new T3,$r(this.a,"autoUpgradeAnonymousUsers"),$r(this.a,"callbacks"),$r(this.a,"credentialHelper",$x),$r(this.a,"immediateFederatedRedirect",!1),$r(this.a,"popupMode",!1),$r(this.a,"privacyPolicyUrl"),$r(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),$r(this.a,"queryParameterForWidgetMode","mode"),$r(this.a,"signInFlow"),$r(this.a,"signInOptions"),$r(this.a,"signInSuccessUrl"),$r(this.a,"siteName"),$r(this.a,"tosUrl"),$r(this.a,"widgetUrl"),$r(this.a,"adminRestrictedOperation")}function jx(s){var h=!!s.a.get("autoUpgradeAnonymousUsers");return h&&!AW(s)&&Ka('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),h}function Hx(s){s=s.a.get("signInOptions")||[];for(var h=[],m=0;m<s.length;m++){var w=s[m];(w=Nt(w)?w:{provider:w}).provider&&h.push(w)}return h}function Ya(s,h){s=Hx(s);for(var m=0;m<s.length;m++)if(s[m].provider===h)return s[m];return null}function O0(s){return Hx(s).map(function(h){return h.provider})}function $I(s,h){s=vW(s);for(var m=0;m<s.length;m++)if(s[m].providerId===h)return s[m];return null}function vW(s){return Hx(s).map(function(h){if(N0[h.provider]||_i(kpe,h.provider)){for(var m in h={providerId:h.provider,S:h.providerName||null,V:h.fullLabel||null,ta:h.buttonColor||null,za:h.iconUrl?vp(sx(h.iconUrl)).toString():null})null===h[m]&&delete h[m];return h}return{providerId:h.provider,S:h.providerName||null,V:h.fullLabel||null,ta:h.buttonColor||null,za:h.iconUrl?vp(sx(h.iconUrl)).toString():null,Ob:h.loginHintKey||null}})}function wW(s){var m,h=Ya(s,Mt.Z.auth.GoogleAuthProvider.PROVIDER_ID);if(m=h&&h.clientId){e:{if("http:"===(window.location&&window.location.protocol)||"https:"===(window.location&&window.location.protocol))for(w in s=s.a.get("credentialHelper"),N3)if(N3[w]===s){var w=N3[w];break e}w=$x}m=w===P3}return m&&h.clientId||null}function bW(s){return!!((s=Ya(s,Mt.Z.auth.EmailAuthProvider.PROVIDER_ID))&&s.disableSignUp&&s.disableSignUp.status)}function d_(s){return!(!(s=s.a.get("adminRestrictedOperation")||null)||!s.status)}function EW(s,h){return s=(s=Ya(s,h))&&s.scopes,Array.isArray(s)?s:[]}function CW(s,h){return Nt(s=(s=Ya(s,h))&&s.customParameters)?(s=DV(s),h===Mt.Z.auth.GoogleAuthProvider.PROVIDER_ID&&delete s.login_hint,h===Mt.Z.auth.GithubAuthProvider.PROVIDER_ID&&delete s.login,s):null}function x3(s){if(!(s=Ya(s,Mt.Z.auth.PhoneAuthProvider.PROVIDER_ID)))return null;var h=s.whitelistedCountries,m=s.blacklistedCountries;if(typeof h<"u"&&(!Array.isArray(h)||0==h.length))throw Error("WhitelistedCountries must be a non-empty array.");if(typeof m<"u"&&!Array.isArray(m))throw Error("BlacklistedCountries must be an array.");if(h&&m)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!h&&!m)return Ko;if(s=[],h){m={};for(var w=0;w<h.length;w++)for(var S=fW(h[w]),x=0;x<S.length;x++)m[S[x].c]=S[x];for(var j in m)m.hasOwnProperty(j)&&s.push(m[j])}else{for(j={},h=0;h<m.length;h++)for(S=fW(m[h]),w=0;w<S.length;w++)j[S[w].c]=S[w];for(S=0;S<Ko.length;S++)null!==j&&Ko[S].c in j||s.push(Ko[S])}return s}function IW(s){return D3(s.a,"queryParameterForWidgetMode")}function Gr(s){var h=s.a.get("tosUrl")||null;if(s=s.a.get("privacyPolicyUrl")||null,h&&!s&&Sp("Privacy Policy URL is missing, the link will not be displayed."),h&&s){if("function"==typeof h)return h;if("string"==typeof h)return function(){T0(h)}}return null}function qr(s){var h=s.a.get("tosUrl")||null,m=s.a.get("privacyPolicyUrl")||null;if(m&&!h&&Sp("Term of Service URL is missing, the link will not be displayed."),h&&m){if("function"==typeof m)return m;if("string"==typeof m)return function(){T0(m)}}return null}function TW(s){return!((s=Ya(s,Mt.Z.auth.EmailAuthProvider.PROVIDER_ID))&&typeof s.requireDisplayName<"u"&&!s.requireDisplayName)}function F0(s){return!(!(s=Ya(s,Mt.Z.auth.EmailAuthProvider.PROVIDER_ID))||s.signInMethod!==Mt.Z.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function k3(s){var h=!!s.a.get("immediateFederatedRedirect"),m=O0(s);return s=SW(s),h&&1==m.length&&!_i(yW,m[0])&&s==Gx}function SW(s){for(var h in s=s.a.get("signInFlow"),O3)if(O3[h]==s)return O3[h];return Gx}function R3(s){return GI(s).signInSuccess||null}function DW(s){return GI(s).signInSuccessWithAuthResult||null}function AW(s){return GI(s).signInFailure||null}function GI(s){return s.a.get("callbacks")||{}}var qI,L0,L3,MW,P3="googleyolo",$x="none",N3={nc:P3,NONE:$x},Gx="redirect",O3={qc:"popup",rc:Gx},F3={mc:"callback",RECOVER_EMAIL:"recoverEmail",sc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",tc:"select",uc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},kpe=["anonymous"],Rpe=["sitekey","tabindex","callback","expired-callback"],si={};function Gt(s,h,m,w){si[s].apply(null,Array.prototype.slice.call(arguments,1))}function xW(s){return s.classList?s.classList:G(s=s.className)&&s.match(/\S+/g)||[]}function ZI(s,h){return s.classList?s.classList.contains(h):_i(xW(s),h)}function Kc(s,h){s.classList?s.classList.add(h):ZI(s,h)||(s.className+=0<s.className.length?" "+h:h)}function Yc(s,h){s.classList?s.classList.remove(h):ZI(s,h)&&(s.className=$i(xW(s),function(m){return m!=h}).join(" "))}function Hs(s){var h=s.type;switch(G(h)&&h.toLowerCase()){case"checkbox":case"radio":return s.checked?s.value:null;case"select-one":return 0<=(h=s.selectedIndex)?s.options[h].value:null;case"select-multiple":h=[];for(var m,w=0;m=s.options[w];w++)m.selected&&h.push(m.value);return h.length?h:null;default:return null!=s.value?s.value:null}}function kW(s,h){var m=s.type;switch(G(m)&&m.toLowerCase()){case"checkbox":case"radio":s.checked=h;break;case"select-one":if(s.selectedIndex=-1,G(h))for(var w=0;m=s.options[w];w++)if(m.value==h){m.selected=!0;break}break;case"select-multiple":for(G(h)&&(h=[h]),w=0;m=s.options[w];w++)if(m.selected=!1,h)for(var S,x=0;S=h[x];x++)m.value==S&&(m.selected=!0);break;default:s.value=h??""}}function RW(s,h,m,w,S,x){if(Zo&&!e_("525"))return!0;if(yp&&S)return zI(s);if(S&&!w)return!1;if(!Mu&&("number"==typeof h&&(h=U3(h)),(!m||yp)&&(17==h||18==h||yp&&91==h)||yp&&16==h&&(w||x)))return!1;if((Zo||_p)&&w&&m)switch(s){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(Mr&&w&&h==s)return!1;switch(s){case 13:return!(Mu&&(x||S||m&&w));case 27:return!(Zo||_p||Mu)}return(!Mu||!(w||S||x))&&zI(s)}function zI(s){if(48<=s&&57>=s||96<=s&&106>=s||65<=s&&90>=s||(Zo||_p)&&0==s)return!0;switch(s){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return Mu;default:return!1}}function U3(s){return Mu?s=function Npe(s){switch(s){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return s}}(s):yp&&Zo&&93===s&&(s=91),s}function U0(s){ss.call(this),this.a=s,xu(s,"keydown",this.g,!1,this),xu(s,"click",this.h,!1,this)}function PW(s,h){var m=new OW(h);if(Ip(s,m)){m=new NW(h);try{Ip(s,m)}finally{h.stopPropagation()}}}function NW(s){Wo.call(this,s.a),this.type="action"}function OW(s){Wo.call(this,s.a),this.type="beforeaction"}function V0(s){ss.call(this),this.a=s,s=Mr?"focusout":"blur",this.g=xu(this.a,Mr?"focusin":"focus",this,!Mr),this.h=xu(this.a,s,this,!Mr)}function qx(s,h){ss.call(this),this.g=s||1,this.a=h||R,this.h=ni(this.gc,this),this.j=Gc()}function Zx(s){s.Ka=!1,s.aa&&(s.a.clearTimeout(s.aa),s.aa=null)}function B0(s){r_.call(this),this.g=s,this.a={}}tt(U0,ss),U0.prototype.g=function(s){(13==s.keyCode||Zo&&3==s.keyCode)&&PW(this,s)},U0.prototype.h=function(s){PW(this,s)},U0.prototype.o=function(){U0.K.o.call(this),s_(this.a,"keydown",this.g,!1,this),s_(this.a,"click",this.h,!1,this),delete this.a},tt(NW,Wo),tt(OW,Wo),tt(V0,ss),V0.prototype.handleEvent=function(s){var h=new Wo(s.a);h.type="focusin"==s.type||"focus"==s.type?"focusin":"focusout",Ip(this,h)},V0.prototype.o=function(){V0.K.o.call(this),Cp(this.g),Cp(this.h),delete this.a},tt(qx,ss),(n=qx.prototype).Ka=!1,n.aa=null,n.gc=function(){if(this.Ka){var s=Gc()-this.j;0<s&&s<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-s):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),Ip(this,"tick"),this.Ka&&(Zx(this),this.start()))}},n.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=Gc())},n.o=function(){qx.K.o.call(this),Zx(this),delete this.a},tt(B0,r_);var FW=[];function j0(s,h,m,w){ct(m)||(m&&(FW[0]=m.toString()),m=FW);for(var S=0;S<m.length;S++){var x=xu(h,m[S],w||s.handleEvent,!1,s.g||s);if(!x)break;s.a[x.key]=x}}function LW(s){_7(s.a,function(h,m){this.a.hasOwnProperty(m)&&Cp(h)},s),s.a={}}function WI(s){ss.call(this),this.a=null,this.g=s,s=Mr||_p||Zo&&!e_("531")&&"TEXTAREA"==s.tagName,this.h=new B0(this),j0(this.h,this.g,s?["keydown","paste","cut","drop","input"]:"input",this)}function V3(s){null!=s.a&&(R.clearTimeout(s.a),s.a=null)}function UW(s){return(s=new Wo(s.a)).type="input",s}function KI(s,h){ss.call(this),s&&(this.Oa&&$W(this),this.qa=s,this.Na=xu(this.qa,"keypress",this,h),this.Ya=xu(this.qa,"keydown",this.Jb,h,this),this.Oa=xu(this.qa,"keyup",this.Kb,h,this))}B0.prototype.o=function(){B0.K.o.call(this),LW(this)},B0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tt(WI,ss),WI.prototype.handleEvent=function(s){if("input"==s.type)Mr&&e_(10)&&0==s.keyCode&&0==s.j||(V3(this),Ip(this,UW(s)));else if("keydown"!=s.type||function Ppe(s){if(s.altKey&&!s.ctrlKey||s.metaKey||112<=s.keyCode&&123>=s.keyCode)return!1;if(zI(s.keyCode))return!0;switch(s.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!Mu;default:return 166>s.keyCode||183<s.keyCode}}(s)){var h="keydown"==s.type?this.g.value:null;Mr&&229==s.keyCode&&(h=null);var m=UW(s);V3(this),this.a=function Ope(s,h){if(Pt(s))h&&(s=ni(s,h));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=ni(s.handleEvent,s)}return 2147483647<Number(0)?-1:R.setTimeout(s,0)}(function(){this.a=null,this.g.value!=h&&Ip(this,m)},this)}},WI.prototype.o=function(){WI.K.o.call(this),this.h.m(),V3(this),delete this.g},tt(KI,ss),(n=KI.prototype).qa=null,n.Na=null,n.Ya=null,n.Oa=null,n.R=-1,n.X=-1,n.Ua=!1;var VW={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},BW={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},jW=!Zo||e_("525"),HW=yp&&Mu;function $W(s){s.Na&&(Cp(s.Na),Cp(s.Ya),Cp(s.Oa),s.Na=null,s.Ya=null,s.Oa=null),s.qa=null,s.R=-1,s.X=-1}function GW(s,h,m,w){Wo.call(this,w),this.type="key",this.keyCode=s,this.j=h,this.repeat=m}function H0(s,h,m,w){this.top=s,this.right=h,this.bottom=m,this.left=w}function zx(s,h){var m=SI(s);return m.defaultView&&m.defaultView.getComputedStyle&&(s=m.defaultView.getComputedStyle(s,null))&&(s[h]||s.getPropertyValue(h))||""}function qW(s){try{var h=s.getBoundingClientRect()}catch{return{left:0,top:0,right:0,bottom:0}}return Mr&&s.ownerDocument.body&&(h.left-=(s=s.ownerDocument).documentElement.clientLeft+s.body.clientLeft,h.top-=s.documentElement.clientTop+s.body.clientTop),h}function ZW(s){var h=SI(s),m=new bp(0,0),w=h?SI(h):document;return s==(w=!Mr||9<=Number(II)||"CSS1Compat"==ax(w).a.compatMode?w.documentElement:w.body)||(s=qW(s),h=lx(w=ax(h).a),w=w.parentWindow||w.defaultView,h=Mr&&e_("10")&&w.pageYOffset!=h.scrollTop?new bp(h.scrollLeft,h.scrollTop):new bp(w.pageXOffset||h.scrollLeft,w.pageYOffset||h.scrollTop),m.a=s.left+h.a,m.g=s.top+h.g),m}(n=KI.prototype).Jb=function(s){(Zo||_p)&&(17==this.R&&!s.ctrlKey||18==this.R&&!s.altKey||yp&&91==this.R&&!s.metaKey)&&(this.X=this.R=-1),-1==this.R&&(s.ctrlKey&&17!=s.keyCode?this.R=17:s.altKey&&18!=s.keyCode?this.R=18:s.metaKey&&91!=s.keyCode&&(this.R=91)),jW&&!RW(s.keyCode,this.R,s.shiftKey,s.ctrlKey,s.altKey,s.metaKey)?this.handleEvent(s):(this.X=U3(s.keyCode),HW&&(this.Ua=s.altKey))},n.Kb=function(s){this.X=this.R=-1,this.Ua=s.altKey},n.handleEvent=function(s){var h=s.a,m=h.altKey;if(Mr&&"keypress"==s.type)var w=this.X,S=13!=w&&27!=w?h.keyCode:0;else(Zo||_p)&&"keypress"==s.type?(w=this.X,S=0<=h.charCode&&63232>h.charCode&&zI(w)?h.charCode:0):x7&&!Zo?S=zI(w=this.X)?h.keyCode:0:("keypress"==s.type?(HW&&(m=this.Ua),h.keyCode==h.charCode?32>h.keyCode?(w=h.keyCode,S=0):(w=this.X,S=h.charCode):(w=h.keyCode||this.X,S=h.charCode||0)):(w=h.keyCode||this.X,S=h.charCode||0),yp&&63==S&&224==w&&(w=191));var x=w=U3(w);w?63232<=w&&w in VW?x=VW[w]:25==w&&s.shiftKey&&(x=9):h.keyIdentifier&&h.keyIdentifier in BW&&(x=BW[h.keyIdentifier]),Mu&&jW&&"keypress"==s.type&&!RW(x,this.R,s.shiftKey,s.ctrlKey,m,s.metaKey)||(s=x==this.R,this.R=x,(h=new GW(x,S,s,h)).altKey=m,Ip(this,h))},n.N=function(){return this.qa},n.o=function(){KI.K.o.call(this),$W(this)},tt(GW,Wo),H0.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},H0.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},H0.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},H0.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var zW={thin:2,medium:4,thick:6};function Wx(s,h){if("none"==(s.currentStyle?s.currentStyle[h+"Style"]:null))return 0;var m=s.currentStyle?s.currentStyle[h+"Width"]:null;if(m in zW)s=zW[m];else if(/^\d+px?$/.test(m))s=parseInt(m,10);else{h=s.style.left;var w=s.runtimeStyle.left;s.runtimeStyle.left=s.currentStyle.left,s.style.left=m,m=s.style.pixelLeft,s.style.left=h,s.runtimeStyle.left=w,s=+m}return s}function B3(){}function h_(s){ss.call(this),this.s=s||ax(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}function qn(s,h){return s.g?VV(h,s.g||s.s.a):null}function YI(s){return s.L||(s.L=new B0(s)),s.L}function j3(s,h){s.Ea&&Ts(s.Ea,h,void 0)}function Rr(s,h){var m=G7(s,"firebaseui-textfield");h?(Yc(s,"firebaseui-input-invalid"),Kc(s,"firebaseui-input"),m&&Yc(m,"firebaseui-textfield-invalid")):(Yc(s,"firebaseui-input"),Kc(s,"firebaseui-input-invalid"),m&&Kc(m,"firebaseui-textfield-invalid"))}function $0(s,h,m){MI(s,Ga(xI,h=new WI(h))),j0(YI(s),h,"input",m)}function QI(s,h,m){MI(s,Ga(xI,h=new KI(h))),j0(YI(s),h,"key",function(w){13==w.keyCode&&(w.stopPropagation(),w.preventDefault(),m(w))})}function _r(s,h,m){MI(s,Ga(xI,h=new U0(h))),j0(YI(s),h,"action",function(w){w.stopPropagation(),w.preventDefault(),m(w)})}function Qa(s){Kc(s,"firebaseui-hidden")}function $s(s,h){h&&BV(s,h),Yc(s,"firebaseui-hidden")}function G0(s){return!ZI(s,"firebaseui-hidden")&&"none"!=s.style.display}function q0(s){var m=(s=s||{}).disabled,w='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return w=s.wc?w+"Enter new email address":w+"Email",w+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+zo(s.email??"")+'"'+(m?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',Ut(w)}function pa(s){var h='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return h=(s=(s=s||{}).label)?h+fn(s):h+"Next",Ut(h+"</button>")}function H3(){var s=""+pa({label:xr("Sign In")});return Ut(s)}function WW(){var s=""+pa({label:xr("Save")});return Ut(s)}function ku(){var s=""+pa({label:xr("Continue")});return Ut(s)}function KW(s){var h='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return h=(s=(s=s||{}).label)?h+fn(s):h+"Choose password",Ut(h+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function YW(){var h='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return Ut((h={}.current?h+"Current password":h+"Password")+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function QW(){return Ut('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function Ja(s){var h='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return h=(s=(s=s||{}).label)?h+fn(s):h+"Cancel",Ut(h+"</button>")}function io(s){var h="";return s.F&&s.D&&(h+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),Ut(h)}function Z0(s){var h="";return s.F&&s.D&&(h+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),Ut(h)}function JW(s){return s='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+fn(s.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',Ut(s)}function XW(s){var h=s.content;return Ut('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+((s=s.Ab)?" "+zo(s):"")+'">'+fn(h)+"</dialog>")}function eK(s){var h=s.message;return Ut(XW({content:z7('<div class="firebaseui-dialog-icon-wrapper"><div class="'+zo(s.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+fn(h)+"</div>")}))}function tK(s){for(var h='<div class="firebaseui-list-box-actions">',m=(s=s.items).length,w=0;w<m;w++){var S=s[w];h+='<button type="button" data-listboxid="'+zo(S.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(S.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+zo(S.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+fn(S.label)+"</div></button>"}return h=""+XW({Ab:xr("firebaseui-list-box-dialog"),content:z7(h+"</div>")}),Ut(h)}function Kx(s){return Ut((s=s||{}).tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}function Dp(s,h){return Xn((s=(s=s||{}).ga).S?s.S:h.hb[s.providerId]?""+h.hb[s.providerId]:s.providerId&&0==s.providerId.indexOf("saml.")||s.providerId&&0==s.providerId.indexOf("oidc.")?s.providerId.substring(5):""+s.providerId)}function $3(s){nK(s,"upgradeElement")}function G3(s){nK(s,"downgradeElements")}Ke(B3),B3.prototype.a=0,tt(h_,ss),(n=h_.prototype).Lb=B3.Xa(),n.N=function(){return this.g},n.Za=function(s){if(this.Y&&this.Y!=s)throw Error("Method not supported");h_.K.Za.call(this,s)},n.kb=function(){this.g=this.s.a.createElement("DIV")},n.render=function(s){if(this.na)throw Error("Component already rendered");this.g||this.kb(),s?s.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},n.v=function(){this.na=!0,j3(this,function(s){!s.na&&s.N()&&s.v()})},n.ya=function(){j3(this,function(s){s.na&&s.ya()}),this.L&&LW(this.L),this.na=!1},n.o=function(){this.na&&this.ya(),this.L&&(this.L.m(),delete this.L),j3(this,function(s){s.m()}),this.g&&n_(this.g),this.Y=this.g=this.oa=this.Ea=null,h_.K.o.call(this)},n.removeChild=function(s,h){if(s){var m=G(s)?s:s.cb||(s.cb=":"+(s.Lb.a++).toString(36));if(s=this.oa&&m&&(null!==(s=this.oa)&&m in s?s[m]:void 0)||null,m&&s){var w=this.oa;if(m in w&&delete w[m],Zc(this.Ea,s),h&&(s.ya(),s.g&&n_(s.g)),null==(h=s))throw Error("Unable to set parent component");h.Y=null,h_.K.Za.call(h,null)}}if(!s)throw Error("Child is not in parent component");return s},JW.a="firebaseui.auth.soy2.element.infoBar",eK.a="firebaseui.auth.soy2.element.progressDialog",tK.a="firebaseui.auth.soy2.element.listBoxDialog",Kx.a="firebaseui.auth.soy2.element.busyIndicator";var Vpe=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function nK(s,h){s&&window.componentHandler&&window.componentHandler[h]&&Vpe.forEach(function(m){ZI(s,m)&&window.componentHandler[h](s),Ts(UV(m,s),function(w){window.componentHandler[h](w)})})}function iK(s,h,m){if(Yx.call(this),document.body.appendChild(s),s.showModal||window.dialogPolyfill.registerDialog(s),s.showModal(),$3(s),h&&_r(this,s,function(x){var j=s.getBoundingClientRect();(x.clientX<j.left||j.left+j.width<x.clientX||x.clientY<j.top||j.top+j.height<x.clientY)&&Yx.call(this)}),!m){var w=this.N().parentElement||this.N().parentNode;if(w){var S=this;this.da=function(){if(s.open){var x=s.getBoundingClientRect().height,j=w.getBoundingClientRect().height,ne=w.getBoundingClientRect().top-document.body.getBoundingClientRect().top,Ne=w.getBoundingClientRect().left-document.body.getBoundingClientRect().left,dt=s.getBoundingClientRect().width,Yt=w.getBoundingClientRect().width;s.style.top=(ne+(j-x)/2).toString()+"px",s.style.left=(x=Ne+(Yt-dt)/2).toString()+"px",s.style.right=(document.body.getBoundingClientRect().width-x-dt).toString()+"px"}else window.removeEventListener("resize",S.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function Yx(){var s=q3.call(this);s&&(G3(s),s.open&&s.close(),n_(s),this.da&&window.removeEventListener("resize",this.da))}function q3(){return VV("firebaseui-id-dialog")}function rK(){n_(sK.call(this))}function sK(){return qn(this,"firebaseui-id-info-bar")}function oK(){return qn(this,"firebaseui-id-dismiss-info-bar")}var Bpe={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function Z3(s,h,m){for(var w in oh.call(this,s,h),m)this[w]=m[w]}function Qe(s,h,m,w,S){h_.call(this,m),this.fb=s,this.eb=h,this.Fa=!1,this.Ga=w||null,this.A=this.ca=null,this.Z=DV(Bpe),ex(this.Z,S||{})}function nr(s){return s.N().parentElement||s.N().parentNode}function JI(s,h,m){QI(s,h,function(){m.focus()})}function z0(s,h,m){QI(s,h,function(){m()})}function aK(s,h,m){h=(s=s||{}).Va;var w=s.ia;return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+q0(s)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(h?Ja(null):"")+pa(null)+'</div></div><div class="firebaseui-card-footer">'+(w?Z0(m):io(m))+"</div></form></div>",Ut(s)}function lK(s,h,m){return h=(s=s||{}).ia,s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+q0(s)+YW()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+QW()+'</div><div class="firebaseui-form-actions">'+H3()+'</div></div><div class="firebaseui-card-footer">'+(h?Z0(m):io(m))+"</div></form></div>",Ut(s)}function uK(s,h,m){var w=(s=s||{}).Tb;h=s.Ta;var S=s.ia,x='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+q0(s);return w?(s='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+zo((s=(s=s||{}).name)??"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',s=Ut(s)):s="",m=x+s+KW(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(h?Ja(null):"")+WW()+'</div></div><div class="firebaseui-card-footer">'+(S?Z0(m):io(m))+"</div></form></div>",Ut(m)}function cK(s,h,m){return h=(s=s||{}).Ta,s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+q0(s)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(h?Ja(null):"")+pa({label:xr("Send")})+'</div></div><div class="firebaseui-card-footer">'+io(m)+"</div></form></div>",Ut(s)}function dK(s,h,m){h=s.G;var w="";return w+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(s="Follow the instructions sent to <strong>"+fn(s.email)+"</strong> to recover your password")+'</p></div><div class="firebaseui-card-actions">',h&&(w+='<div class="firebaseui-form-actions">'+pa({label:xr("Done")})+"</div>"),w+='</div><div class="firebaseui-card-footer">'+io(m)+"</div></div>",Ut(w)}function hK(s,h,m){return Ut('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+Kx(null)+"</div></div>")}function fK(s,h,m){return Ut('<div class="firebaseui-container firebaseui-id-page-spinner">'+Kx({tb:!0})+"</div>")}function pK(){return Ut('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}function gK(s,h,m){return h="",h+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+(s="A sign-in email with additional instructions was sent to <strong>"+fn(s.email)+"</strong>. Check your email to complete sign-in.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+Ut('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>')+'</div><div class="firebaseui-form-actions">'+Ja({label:xr("Back")})+'</div></div><div class="firebaseui-card-footer">'+io(m)+"</div></form></div>",Ut(h)}function mK(s,h,m){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn\'t work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+Ut('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+Ja({label:xr("Back")})+'</div></div><div class="firebaseui-card-footer">'+io(m)+"</div></form></div>",Ut(s)}function _K(s,h,m){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+q0(s)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ja(null)+pa(null)+'</div></div><div class="firebaseui-card-footer">'+io(m)+"</div></form></div>",Ut(s)}function yK(){var s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ja({label:xr("Dismiss")})+"</div></div></div>";return Ut(s)}function vK(){var s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ja({label:xr("Dismiss")})+"</div></div></div>";return Ut(s)}function wK(s,h,m){return h="",h+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(s="You\u2019ve already used <strong>"+fn(s.email)+"</strong> to sign in. Enter your password for that account.")+"</p>"+YW()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+QW()+'</div><div class="firebaseui-form-actions">'+H3()+'</div></div><div class="firebaseui-card-footer">'+io(m)+"</div></form></div>",Ut(h)}function bK(s,h,m){var w=s.email;return h="",s=xr(s=""+Dp(s,m)),h+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+(w="You\u2019ve already used <strong>"+fn(w)+"</strong>. You can connect your <strong>"+fn(s)+"</strong> account with <strong>"+fn(w)+"</strong> by signing in with email link below.")+'<p class="firebaseui-text firebaseui-text-justify">'+(s="For this flow to successfully connect your "+fn(s)+" account with this email, you have to open the link on the same device or browser.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+H3()+'</div></div><div class="firebaseui-card-footer">'+io(m)+"</div></form></div>",Ut(h)}function EK(s,h,m){h="";var w=""+Dp(s,m);return h+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+(s="You originally intended to connect <strong>"+fn(w=xr(w))+"</strong> to your email account but have opened the link on a different device where you are not signed in.")+'</p><p class="firebaseui-text firebaseui-text-justify">'+(w="If you still want to connect your <strong>"+fn(w)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ku()+'</div></div><div class="firebaseui-card-footer">'+io(m)+"</div></form></div>",Ut(h)}function CK(s,h,m){var w=s.email;return h="",s=xr(s=""+Dp(s,m)),h+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(w="You\u2019ve already used <strong>"+fn(w)+"</strong>. Sign in with "+fn(s)+" to continue.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+pa({label:xr("Sign in with "+s)})+'</div></div><div class="firebaseui-card-footer">'+io(m)+"</div></form></div>",Ut(h)}function IK(s,h,m){var w=(s=s||{}).kc;h=s.yb,s=s.Eb;var S='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return S+=w?w="<strong>"+fn(w)+"</strong> is not authorized to view the requested page.":"User is not authorized to view the requested page.",S+="</p>",h&&(S+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+(h="Please contact <strong>"+fn(h)+"</strong> for authorization.")+"</p>"),S+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',s&&(S+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),S+='</div><div class="firebaseui-form-actions">'+Ja({label:xr("Back")})+'</div></div><div class="firebaseui-card-footer">'+io(m)+"</div></form></div>",Ut(S)}function TK(s,h,m){return h="",h+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(s="To continue sign in with <strong>"+fn(s.email)+"</strong> on this device, you have to recover the password.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ja(null)+pa({label:xr("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+io(m)+"</div></form></div>",Ut(h)}function SK(s){var h="";return h+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">for <strong>'+fn(s.email)+"</strong></p>"+KW(function Mfe(s){function h(){}var m={label:xr("New password")};for(var w in h.prototype=s,s=new h,m)s[w]=m[w];return s}(s))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+WW()+"</div></div></form></div>",Ut(h)}function DK(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+((s=s||{}).G?'<div class="firebaseui-form-actions">'+ku()+"</div>":"")+"</div></div>",Ut(s)}function AK(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((s=s||{}).G?'<div class="firebaseui-form-actions">'+ku()+"</div>":"")+"</div></div>",Ut(s)}function MK(s){var h=s.G,m="";return m+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(s="Your sign-in email address has been changed back to <strong>"+fn(s.email)+"</strong>.")+'</p><p class="firebaseui-text">If you didn\u2019t ask to change your sign-in email, it\u2019s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(h?'<div class="firebaseui-form-actions">'+ku()+"</div>":"")+"</div></form></div>",Ut(m)}function xK(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can\u2019t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+((s=s||{}).G?'<div class="firebaseui-form-actions">'+ku()+"</div>":"")+"</div></div>",Ut(s)}function kK(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+((s=s||{}).G?'<div class="firebaseui-form-actions">'+ku()+"</div>":"")+"</div></div>",Ut(s)}function RK(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((s=s||{}).G?'<div class="firebaseui-form-actions">'+ku()+"</div>":"")+"</div></div>",Ut(s)}function PK(s){var h=s.G,m="";return m+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(s="You can now sign in with your new email <strong>"+fn(s.email)+"</strong>.")+'</p></div><div class="firebaseui-card-actions">'+(h?'<div class="firebaseui-form-actions">'+ku()+"</div>":"")+"</div></div>",Ut(m)}function NK(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+((s=s||{}).G?'<div class="firebaseui-form-actions">'+ku()+"</div>":"")+"</div></div>",Ut(s)}function OK(s){var h=s.factorId,m=s.phoneNumber;s=s.G;var w='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return w+="phone"===h?h="The <strong>"+fn(h)+" "+fn(m)+"</strong> was removed as a second authentication step.":"The device or app was removed as a second authentication step.",w+='</p><p class="firebaseui-text">If you don\'t recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(s?'<div class="firebaseui-form-actions">'+ku()+"</div>":"")+"</div></form></div>",Ut(w)}function FK(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn\'t remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn\'t work, contact support for assistance.</p></div><div class="firebaseui-card-actions">'+((s=s||{}).G?'<div class="firebaseui-form-actions">'+ku()+"</div>":"")+"</div></div>",Ut(s)}function LK(s){var h=s.zb;return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+fn(s.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',h&&(s+=pa({label:xr("Retry")})),Ut(s+"</div></div></div>")}function UK(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+fn(s.errorMessage)+"</p></div></div>",Ut(s)}function VK(s,h,m){var w=s.Qb;return h="",h+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+(s="Continue with "+fn(s.jc)+"?")+'</h2><p class="firebaseui-text">'+(w="You originally wanted to sign in with "+fn(w))+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ja(null)+pa({label:xr("Continue")})+'</div></div><div class="firebaseui-card-footer">'+io(m)+"</div></form></div>",Ut(h)}function BK(s,h,m){var w='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';h=(s=s.Sb).length;for(var S=0;S<h;S++){var x={ga:s[S]},j=m,ne=(x=x||{}).ga,Ne=x,dt="";switch((Ne=Ne||{}).ga.providerId){case"google.com":dt+="firebaseui-idp-google";break;case"github.com":dt+="firebaseui-idp-github";break;case"facebook.com":dt+="firebaseui-idp-facebook";break;case"twitter.com":dt+="firebaseui-idp-twitter";break;case"phone":dt+="firebaseui-idp-phone";break;case"anonymous":dt+="firebaseui-idp-anonymous";break;case"password":dt+="firebaseui-idp-password";break;default:dt+="firebaseui-idp-generic"}Ne=(Ne='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+zo(Xn(dt))+' firebaseui-id-idp-button" data-provider-id="'+zo(ne.providerId)+'" style="background-color:')+zo(W7(Xn((dt=(dt=(dt=x)||{}).ga).ta?dt.ta:j.wa[dt.providerId]?""+j.wa[dt.providerId]:0==dt.providerId.indexOf("saml.")?""+j.wa.saml:0==dt.providerId.indexOf("oidc.")?""+j.wa.oidc:""+j.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var Yt=x;dt=j,dt=Afe((Yt=(Yt=Yt||{}).ga).za?i_(Yt.za):dt.xa[Yt.providerId]?i_(dt.xa[Yt.providerId]):0==Yt.providerId.indexOf("saml.")?i_(dt.xa.saml):0==Yt.providerId.indexOf("oidc.")?i_(dt.xa.oidc):i_(dt.xa.password)),Ne=Ne+zo(i_(dt))+'"></span>',"password"==ne.providerId?(Ne+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',Ne+=ne.V?fn(ne.V):ne.S?x="Sign in with "+fn(Dp(x,j)):"Sign in with email",Ne+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Ne=ne.S?Ne+fn(ne.S):Ne+"Email",Ne+="</span>"):"phone"==ne.providerId?(Ne+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',Ne+=ne.V?fn(ne.V):ne.S?x="Sign in with "+fn(Dp(x,j)):"Sign in with phone",Ne+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Ne=ne.S?Ne+fn(ne.S):Ne+"Phone",Ne+="</span>"):"anonymous"==ne.providerId?(Ne+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',Ne+=ne.V?fn(ne.V):ne.S?x="Sign in with "+fn(Dp(x,j)):"Continue as guest",Ne+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Ne=ne.S?Ne+fn(ne.S):Ne+"Guest",Ne+="</span>"):(Ne+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',Ne+=ne.V?fn(ne.V):dt="Sign in with "+fn(Dp(x,j)),Ne+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+fn(ne.S?ne.S:Dp(x,j))+"</span>"),w+='<li class="firebaseui-list-item">'+(ne=Ut(Ne+"</button>"))+"</li>"}return w+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+Z0(m)+"</div></div>",Ut(w)}function jK(s,h,m){var x,w=(s=s||{}).Gb,S=s.Va;return h=s.ia,s='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+zo((s=(s=s||{}).Aa)??"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',x=(s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Ut(s))+(x=w?Ut('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):"")+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(S?Ja(null):"")+pa({label:xr("Verify")})+'</div></div><div class="firebaseui-card-footer">',h?(h='<p class="firebaseui-tos firebaseui-phone-tos">',m=Ut((h=m.F&&m.D?h+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':h+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.")+"</p>")):m=Ut('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+io(m),Ut(x+m+"</div></form></div>")}function HK(s,h,m){var w="";return s='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+fn(h=(s=s||{}).phoneNumber)+"</a>",fn(h),h=w,m='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+s+"</p>"+(w=Ut('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ja(null)+pa({label:xr("Continue")})+'</div></div><div class="firebaseui-card-footer">'+io(m)+"</div></form>",s=Ut('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),Ut(h+(m+s+"</div>"))}function $K(){return Ut('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}function GK(s,h,m){var w='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';h=(s=s.ec).length;for(var S=0;S<h;S++){var x=s[S],j="",ne=fn(x.displayName),Ne=x.tenantId?x.tenantId:"top-level-project";j+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+zo(Ne=xr(Ne))+' firebaseui-id-tenant-selection-button"'+(x.tenantId?'data-tenant-id="'+zo(x.tenantId)+'"':"")+'style="background-color:'+zo(W7(x.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+zo(i_(x.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',j+=x.V?fn(x.V):x="Sign in to "+fn(x.displayName),w+='<li class="firebaseui-list-item">'+(j=Ut(j+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+ne+"</span></button>"))+"</li>"}return w+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+Z0(m)+"</div></div>",Ut(w)}function qK(s,h,m){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+q0(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+pa(null)+'</div></div><div class="firebaseui-card-footer">'+Z0(m)+"</div></form></div>",Ut(s)}function Ss(){return qn(this,"firebaseui-id-submit")}function as(){return qn(this,"firebaseui-id-secondary-link")}function Gs(s,h){_r(this,Ss.call(this),function(w){s(w)});var m=as.call(this);m&&h&&_r(this,m,function(w){h(w)})}function Qx(){return qn(this,"firebaseui-id-password")}function Jx(){return qn(this,"firebaseui-id-password-error")}function ZK(){var s=Qx.call(this),h=Jx.call(this);$0(this,s,function(){G0(h)&&(Rr(s,!0),Qa(h))})}function zK(){var s=Qx.call(this),h=Jx.call(this);return Hs(s)?(Rr(s,!0),Qa(h),h=!0):(Rr(s,!1),$s(h,Xn("Enter your password").toString()),h=!1),h?Hs(s):null}function W0(s,h,m,w,S,x){Qe.call(this,wK,{email:s},x,"passwordLinking",{F:w,D:S}),this.w=h,this.H=m}tt(Z3,oh),tt(Qe,h_),(n=Qe.prototype).kb=function(){var s=DI(this.fb,this.eb,this.Z,this.s);$3(s),this.g=s},n.v=function(){if(Qe.K.v.call(this),lz(nr(this),new Z3("pageEnter",nr(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var s=this.Z.F;_r(this,this.bb(),function(){s()})}if(this.ab()&&this.Z.D){var h=this.Z.D;_r(this,this.ab(),function(){h()})}},n.ya=function(){lz(nr(this),new Z3("pageExit",nr(this),{pageId:this.Ga})),Qe.K.ya.call(this)},n.o=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,G3(this.N()),Qe.K.o.call(this)},n.I=function(s,h,m,w){function S(){if(x.T)return null;x.Fa=!1,window.clearTimeout(x.ca),x.ca=null,x.A&&(G3(x.A),n_(x.A),x.A=null)}var x=this;return x.Fa?null:(function jpe(s){s.Fa=!0;var h=ZI(s.N(),"firebaseui-use-spinner");s.ca=window.setTimeout(function(){s.N()&&null===s.A&&(s.A=DI(Kx,{tb:h},null,s.s),s.N().appendChild(s.A),$3(s.A))},500)}(x),s.apply(null,h).then(m,w).then(S,S))},Jn(Qe.prototype,{a:function(s){rK.call(this);var h=DI(JW,{message:s},null,this.s);this.N().appendChild(h),_r(this,oK.call(this),function(){n_(h)})},yc:rK,Ac:sK,zc:oK,$:function(s,h){s=DI(eK,{Ma:s,message:h},null,this.s),iK.call(this,s)},h:Yx,Cb:q3,Cc:function(){return qn(this,"firebaseui-tos")},bb:function(){return qn(this,"firebaseui-tos-link")},ab:function(){return qn(this,"firebaseui-pp-link")},Dc:function(){return qn(this,"firebaseui-tos-list")}}),aK.a="firebaseui.auth.soy2.page.signIn",lK.a="firebaseui.auth.soy2.page.passwordSignIn",uK.a="firebaseui.auth.soy2.page.passwordSignUp",cK.a="firebaseui.auth.soy2.page.passwordRecovery",dK.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent",hK.a="firebaseui.auth.soy2.page.callback",fK.a="firebaseui.auth.soy2.page.spinner",pK.a="firebaseui.auth.soy2.page.blank",gK.a="firebaseui.auth.soy2.page.emailLinkSignInSent",mK.a="firebaseui.auth.soy2.page.emailNotReceived",_K.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation",yK.a="firebaseui.auth.soy2.page.differentDeviceError",vK.a="firebaseui.auth.soy2.page.anonymousUserMismatch",wK.a="firebaseui.auth.soy2.page.passwordLinking",bK.a="firebaseui.auth.soy2.page.emailLinkSignInLinking",EK.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice",CK.a="firebaseui.auth.soy2.page.federatedLinking",IK.a="firebaseui.auth.soy2.page.unauthorizedUser",TK.a="firebaseui.auth.soy2.page.unsupportedProvider",SK.a="firebaseui.auth.soy2.page.passwordReset",DK.a="firebaseui.auth.soy2.page.passwordResetSuccess",AK.a="firebaseui.auth.soy2.page.passwordResetFailure",MK.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess",xK.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure",kK.a="firebaseui.auth.soy2.page.emailVerificationSuccess",RK.a="firebaseui.auth.soy2.page.emailVerificationFailure",PK.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess",NK.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure",OK.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess",FK.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure",LK.a="firebaseui.auth.soy2.page.recoverableError",UK.a="firebaseui.auth.soy2.page.unrecoverableError",VK.a="firebaseui.auth.soy2.page.emailMismatch",BK.a="firebaseui.auth.soy2.page.providerSignIn",jK.a="firebaseui.auth.soy2.page.phoneSignInStart",HK.a="firebaseui.auth.soy2.page.phoneSignInFinish",$K.a="firebaseui.auth.soy2.page.signOut",GK.a="firebaseui.auth.soy2.page.selectTenant",qK.a="firebaseui.auth.soy2.page.providerMatchByEmail",p(W0,Qe),W0.prototype.v=function(){this.P(),this.M(this.w,this.H),z0(this,this.i(),this.w),this.i().focus(),Qe.prototype.v.call(this)},W0.prototype.o=function(){this.w=null,Qe.prototype.o.call(this)},W0.prototype.j=function(){return Hs(qn(this,"firebaseui-id-email"))},Jn(W0.prototype,{i:Qx,B:Jx,P:ZK,u:zK,ea:Ss,ba:as,M:Gs});var Hpe=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function uh(){return qn(this,"firebaseui-id-email")}function Ap(){return qn(this,"firebaseui-id-email-error")}function K0(s){var h=uh.call(this),m=Ap.call(this);$0(this,h,function(){G0(m)&&(Rr(h,!0),Qa(m))}),s&&QI(this,h,function(){s()})}function Y0(){return Za(Hs(uh.call(this))||"")}function Q0(){var s=uh.call(this),h=Ap.call(this),m=Hs(s)||"";return m?Hpe.test(m)?(Rr(s,!0),Qa(h),h=!0):(Rr(s,!1),$s(h,Xn("That email address isn't correct").toString()),h=!1):(Rr(s,!1),$s(h,Xn("Enter your email address to continue").toString()),h=!1),h?Za(Hs(s)):null}function XI(s,h,m,w,S,x,j){Qe.call(this,lK,{email:m,ia:!!x},j,"passwordSignIn",{F:w,D:S}),this.w=s,this.H=h}function di(s,h,m,w,S,x){Qe.call(this,s,h,w,S||"notice",x),this.i=m||null}function Xx(s,h,m,w,S){di.call(this,dK,{email:s,G:!!h},h,S,"passwordRecoveryEmailSent",{F:m,D:w})}function WK(s,h){di.call(this,kK,{G:!!s},s,h,"emailVerificationSuccess")}function KK(s,h){di.call(this,RK,{G:!!s},s,h,"emailVerificationFailure")}function YK(s,h,m){di.call(this,PK,{email:s,G:!!h},h,m,"verifyAndChangeEmailSuccess")}function QK(s,h){di.call(this,NK,{G:!!s},s,h,"verifyAndChangeEmailFailure")}function JK(s,h){di.call(this,FK,{G:!!s},s,h,"revertSecondFactorAdditionFailure")}function XK(s){di.call(this,$K,void 0,void 0,s,"signOut")}function eY(s,h){di.call(this,DK,{G:!!s},s,h,"passwordResetSuccess")}function tY(s,h){di.call(this,AK,{G:!!s},s,h,"passwordResetFailure")}function nY(s,h){di.call(this,xK,{G:!!s},s,h,"emailChangeRevokeFailure")}function iY(s,h,m){di.call(this,LK,{errorMessage:s,zb:!!h},h,m,"recoverableError")}function rY(s,h){di.call(this,UK,{errorMessage:s},void 0,h,"unrecoverableError")}function eT(s){if("auth/invalid-credential"===s.code&&s.message&&-1!==s.message.indexOf("error=consent_required"))return{code:"auth/user-cancelled"};if(s.message&&-1!==s.message.indexOf("HTTP Cloud Function returned an error:")){var h=JSON.parse(s.message.substring(s.message.indexOf("{"),s.message.lastIndexOf("}")+1));return{code:s.code,message:h&&h.error&&h.error.message||s.message}}return s}function ch(s,h,m,w){function S(j){if(!j.name||"cancel"!=j.name){e:{var ne=j.message;try{var Ne=((JSON.parse(ne).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(Ne&&Ne.length){var dt=!0;break e}}catch{}dt=!1}if(dt)j=nr(h),h.m(),Ri(s,j,void 0,Xn("Your sign-in session has expired. Please try again.").toString());else{if(dt=j&&j.message||"",j.code){if("auth/email-already-in-use"==j.code||"auth/credential-already-in-use"==j.code)return;dt=yi(j)}h.a(dt)}}}if(SY(s),w)return sY(s,m),kr();if(!m.credential)throw Error("No credential found!");if(!Vn(s).currentUser&&!m.user)throw Error("User not logged in.");try{var x=function wge(s,h){return Zn(s),dh(s,function(m){if(s.j&&!s.j.isAnonymous&&jx(et(s))&&!Vn(s).currentUser)return Mp(s).then(function(){return"password"==h.credential.providerId&&(h.credential=null),h});if(m)return Mp(s).then(function(){return m.linkWithCredential(h.credential)}).then(function(w){return h.user=w.user,h.credential=w.credential,h.operationType=w.operationType,h.additionalUserInfo=w.additionalUserInfo,h},function(w){if(w&&"auth/email-already-in-use"==w.code&&w.email&&w.credential)throw w;return xp(s,w,h.credential)});if(!h.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return Mp(s).then(function(){return Ru(s).updateCurrentUser(h.user)}).then(function(){return h.user=Ru(s).currentUser,h.operationType="signIn",h.credential&&h.credential.providerId&&"password"==h.credential.providerId&&(h.credential=null),h})})}(s,m)}catch(j){return Ka(j.code||j.message,j),h.a(j.code||j.message),kr()}return m=x.then(function(j){sY(s,j)},S).then(void 0,S),In(s,x),kr(m)}function sY(s,h){if(!h.user)throw Error("No user found");var m=DW(et(s));if(R3(et(s))&&m&&Sp("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),m){m=DW(et(s));var w=oW(dn(s))||void 0;fa(BI,dn(s));var S=!1;Sz()?((!m||m(h,w))&&(S=!0,E0(window.opener.location,ek(s,w))),m||window.close()):(!m||m(h,w))&&(S=!0,E0(window.location,ek(s,w))),S||s.reset()}else{m=h.user,h=h.credential,w=R3(et(s)),S=oW(dn(s))||void 0,fa(BI,dn(s));var x=!1;Sz()?((!w||w(m,h,S))&&(x=!0,E0(window.opener.location,ek(s,S))),w||window.close()):(!w||w(m,h,S))&&(x=!0,E0(window.location,ek(s,S))),x||s.reset()}}function ek(s,h){if(!(s=h||et(s).a.get("signInSuccessUrl")))throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return s}function yi(s){var h={code:s.code},m="";switch((h=h||{}).code){case"auth/email-already-in-use":m+="The email address is already used by another account";break;case"auth/requires-recent-login":case"auth/user-token-expired":m+=function X7(){return Xn("Please login again to perform this operation")}();break;case"auth/too-many-requests":m+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":m+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":m+="That email address doesn't match an existing account";break;case"auth/weak-password":m+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":m+="The email and password you entered don't match";break;case"auth/network-request-failed":m+="A network error has occurred";break;case"auth/invalid-phone-number":m+=GV();break;case"auth/invalid-verification-code":m+=Xn("Wrong code. Try again.");break;case"auth/code-expired":m+="This code is no longer valid";break;case"auth/expired-action-code":m+="This code has expired.";break;case"auth/invalid-action-code":m+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(h=Xn(m).toString())return h;try{return JSON.parse(s.message),Ka("Internal error: "+s.message,void 0),Y7().toString()}catch{return s.message}}function tT(s,h,m,w){function S(){(function _pe(s,h){P0(u_,{tenantId:s.a},h)})(new Gz(s.h.tenantId||null),dn(s)),In(s,h.I(ni(s.dc,s),[Ne],function(){if("file:"===(window.location&&window.location.protocol))return In(s,bY(s).then(function(dt){h.m(),fa(u_,dn(s)),Gt("callback",s,ne,kr(dt))},x))},j))}function x(dt){if(fa(u_,dn(s)),!dt.name||"cancel"!=dt.name)switch(dt=eT(dt),dt.code){case"auth/popup-blocked":S();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":h.a(yi(dt));break;case"auth/admin-restricted-operation":h.m(),d_(et(s))?Gt("handleUnauthorizedUser",s,ne,null,m):Gt("callback",s,ne,C0(dt));break;default:h.m(),Gt("callback",s,ne,C0(dt))}}function j(dt){fa(u_,dn(s)),dt.name&&"cancel"==dt.name||(Ka("signInWithRedirect: "+dt.code,void 0),dt=yi(dt),"blank"==h.Ga&&k3(et(s))?(h.m(),Gt("providerSignIn",s,ne,dt)):h.a(dt))}var ne=nr(h),Ne=function $pe(s,h,m){var w=N0[h]&&Mt.Z.auth[N0[h]]?new Mt.Z.auth[N0[h]]:0==h.indexOf("saml.")?new Mt.Z.auth.SAMLAuthProvider(h):new Mt.Z.auth.OAuthProvider(h);if(!w)throw Error("Invalid Firebase Auth provider!");var S=EW(et(s),h);if(w.addScope)for(var x=0;x<S.length;x++)w.addScope(S[x]);return S=CW(et(s),h)||{},m&&(s=h==Mt.Z.auth.GoogleAuthProvider.PROVIDER_ID?"login_hint":h==Mt.Z.auth.GithubAuthProvider.PROVIDER_ID?"login":(s=$I(et(s),h))&&s.Ob)&&(S[s]=m),w.setCustomParameters&&w.setCustomParameters(S),w}(s,m,w);SW(et(s))==Gx?S():In(s,function vge(s,h){return Zn(s),dh(s,function(m){return m&&!zc(dn(s))?m.linkWithPopup(h).then(function(w){return w},function(w){if(w&&"auth/email-already-in-use"==w.code&&w.email&&w.credential)throw w;return xp(s,w)}):Vn(s).signInWithPopup(h)})}(s,Ne).then(function(dt){h.m(),Gt("callback",s,ne,kr(dt))},x))}function tk(s){return 1==(s=O0(et(s))).length&&s[0]==Mt.Z.auth.EmailAuthProvider.PROVIDER_ID}function oY(s){return 1==(s=O0(et(s))).length&&s[0]==Mt.Z.auth.PhoneAuthProvider.PROVIDER_ID}function Ri(s,h,m,w){tk(s)?w?Gt("signIn",s,h,m,w):W3(s,h,m):s&&oY(s)&&!w?Gt("phoneSignInStart",s,h):s&&k3(et(s))&&!w?Gt("federatedRedirect",s,h,m):Gt("providerSignIn",s,h,w,m)}function aY(s,h,m,w){var S=nr(h);In(s,h.I(ni(Vn(s).fetchSignInMethodsForEmail,Vn(s)),[m],function(x){h.m(),lY(s,S,x,m,w)},function(x){x=yi(x),h.a(x)}))}function lY(s,h,m,w,S,x){m.length||F0(et(s))&&!F0(et(s))?_i(m,Mt.Z.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?Gt("passwordSignIn",s,h,w,x):1==m.length&&m[0]===Mt.Z.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?F0(et(s))?Gt("sendEmailLinkForSignIn",s,h,w,function(){Gt("signIn",s,h)}):Gt("unsupportedProvider",s,h,w):(m=_W(m,O0(et(s))))?(aW(new y3(w),dn(s)),Gt("federatedSignIn",s,h,w,m,S)):Gt("unsupportedProvider",s,h,w):bW(et(s))?Gt("handleUnauthorizedUser",s,h,w,Mt.Z.auth.EmailAuthProvider.PROVIDER_ID):F0(et(s))?Gt("sendEmailLinkForSignIn",s,h,w,function(){Gt("signIn",s,h)}):Gt("passwordSignUp",s,h,w,void 0,void 0,x)}function z3(s,h,m,w,S,x){var j=nr(h);In(s,h.I(ni(s.Ib,s),[m,x],function(){h.m(),Gt("emailLinkSignInSent",s,j,m,w,x)},S))}function W3(s,h,m){m?Gt("prefilledEmailSignIn",s,h,m):Gt("signIn",s,h)}function nT(){return ix(lh(),"oobCode")}function K3(){var s=ix(lh(),"continueUrl");return s?function(){E0(window.location,s)}:null}function iT(s,h){Qe.call(this,vK,void 0,h,"anonymousUserMismatch"),this.i=s}function nk(s){Qe.call(this,hK,void 0,s,"callback")}function uY(s,h,m){if(m.user){var w={user:m.user,credential:m.credential,operationType:m.operationType,additionalUserInfo:m.additionalUserInfo},S=zc(dn(s)),x=S&&S.g;if(x&&!function Wpe(s,h){if(h==s.email)return!0;if(s.providerData)for(var m=0;m<s.providerData.length;m++)if(h==s.providerData[m].email)return!0;return!1}(m.user,x))!function zpe(s,h,m){var w=nr(h);In(s,Mp(s).then(function(){h.m(),Gt("emailMismatch",s,w,m)},function(S){S.name&&"cancel"==S.name||(S=yi(S.code),h.a(S))}))}(s,h,w);else{var j=S&&S.a;j?In(s,m.user.linkWithCredential(j).then(function(ne){cY(s,h,w={user:ne.user,credential:j,operationType:ne.operationType,additionalUserInfo:ne.additionalUserInfo})},function(ne){ik(s,h,ne)})):cY(s,h,w)}}else m=nr(h),h.m(),Wc(dn(s)),Ri(s,m)}function cY(s,h,m){Wc(dn(s)),ch(s,h,m)}function ik(s,h,m){var w=nr(h);Wc(dn(s)),m=yi(m),h.m(),Ri(s,w,void 0,m)}function dY(s,h,m,w){var S=nr(h);In(s,Vn(s).fetchSignInMethodsForEmail(m).then(function(x){h.m(),x.length?_i(x,Mt.Z.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?Gt("passwordLinking",s,S,m):1==x.length&&x[0]===Mt.Z.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Gt("emailLinkSignInLinking",s,S,m):(x=_W(x,O0(et(s))))?Gt("federatedLinking",s,S,m,x,w):(Wc(dn(s)),Gt("unsupportedProvider",s,S,m)):(Wc(dn(s)),Gt("passwordRecovery",s,S,m,!1,Q7().toString()))},function(x){ik(s,h,x)}))}function rT(s,h){Qe.call(this,yK,void 0,h,"differentDeviceError"),this.i=s}function sT(s,h,m,w){Qe.call(this,MK,{email:s,G:!!m},w,"emailChangeRevoke"),this.l=h,this.i=m||null}function oT(){return qn(this,"firebaseui-id-new-password")}function rk(){return qn(this,"firebaseui-id-password-toggle")}function Kpe(){this.Ra=!this.Ra;var s=rk.call(this),h=oT.call(this);this.Ra?(h.type="text",Kc(s,"firebaseui-input-toggle-off"),Yc(s,"firebaseui-input-toggle-on")):(h.type="password",Kc(s,"firebaseui-input-toggle-on"),Yc(s,"firebaseui-input-toggle-off")),h.focus()}function sk(){return qn(this,"firebaseui-id-new-password-error")}function hY(){this.Ra=!1;var s=oT.call(this);s.type="password";var h=sk.call(this);$0(this,s,function(){G0(h)&&(Rr(s,!0),Qa(h))});var m=rk.call(this);Kc(m,"firebaseui-input-toggle-on"),Yc(m,"firebaseui-input-toggle-off"),function Lpe(s,h,m){MI(s,Ga(xI,h=new V0(h))),j0(YI(s),h,"focusin",m)}(this,s,function(){Kc(m,"firebaseui-input-toggle-focus"),Yc(m,"firebaseui-input-toggle-blur")}),function Upe(s,h,m){MI(s,Ga(xI,h=new V0(h))),j0(YI(s),h,"focusout",m)}(this,s,function(){Kc(m,"firebaseui-input-toggle-blur"),Yc(m,"firebaseui-input-toggle-focus")}),_r(this,m,ni(Kpe,this))}function fY(){var s=oT.call(this),h=sk.call(this);return Hs(s)?(Rr(s,!0),Qa(h),h=!0):(Rr(s,!1),$s(h,Xn("Enter your password").toString()),h=!1),h?Hs(s):null}function aT(s,h,m){Qe.call(this,SK,{email:s},m,"passwordReset"),this.l=h}function lT(s,h,m,w,S){Qe.call(this,OK,{factorId:s,phoneNumber:m||null,G:!!w},S,"revertSecondFactorAdditionSuccess"),this.l=h,this.i=w||null}function pY(s,h,m,w){"auth/weak-password"==(w&&w.code)?(s=yi(w),Rr(m.i(),!1),$s(m.w(),s),m.i().focus()):(m&&m.m(),(m=new tY).render(h),Dn(s,m))}function ok(s,h){try{var m="number"==typeof s.selectionStart}catch{m=!1}m?(s.selectionStart=h,s.selectionEnd=h):Mr&&!e_("9")&&("textarea"==s.type&&(h=s.value.substring(0,h).replace(/(\r\n|\r|\n)/g,"\n").length),(s=s.createTextRange()).collapse(!0),s.move("character",h),s.select())}function uT(s,h,m,w,S,x){Qe.call(this,_K,{email:m},x,"emailLinkSignInConfirmation",{F:w,D:S}),this.l=s,this.u=h}function cT(s,h,m,w,S){Qe.call(this,EK,{ga:s},S,"emailLinkSignInLinkingDifferentDevice",{F:m,D:w}),this.i=h}function ak(s){Qe.call(this,pK,void 0,s,"blank")}function Y3(s,h,m,w,S){var x=new ak,j=new Xm(m),ne=j.a.a.get(rs.$a)||"",Ne=j.a.a.get(rs.Sa)||"",dt="1"===j.a.a.get(rs.Qa),Yt=T7(j),hi=j.a.a.get(rs.PROVIDER_ID)||null;j=j.a.a.get(rs.vb)||null,DY(s,j);var Nu=!R0(k0,dn(s)),RY=w||function ype(s,h){var m=null;if(h=R0(k0,h))try{var w=Xz(s,h),S=JSON.parse(w);m=S&&S.email||null}catch{}return m}(Ne,dn(s)),CT=(w=function vpe(s,h){var m=null;if(h=R0(jI,h))try{var w=Xz(s,h);m=JSON.parse(w)}catch{}return $z(m||null)}(Ne,dn(s)))&&w.a;hi&&CT&&CT.providerId!==hi&&(CT=null),x.render(h),Dn(s,x),In(s,x.I(function(){var Bl=kr(null);Bl=Yt&&Nu||Nu&&dt?C0(Error("anonymous-user-not-found")):function mge(s,h){var m=T7(new Xm(h));return m?(h=new os(function(w,S){var x=Ru(s).onAuthStateChanged(function(j){x(),j&&j.isAnonymous&&j.uid===m?w(j):S(j&&j.isAnonymous&&j.uid!==m?Error("anonymous-user-mismatch"):Error("anonymous-user-not-found"))});In(s,x)}),In(s,h),h):kr(null)}(s,m).then(function(aB){if(hi&&!CT)throw Error("pending-credential-not-found");return aB});var IT=null;return Bl.then(function(aB){return IT=aB,S?null:Vn(s).checkActionCode(ne)}).then(function(){return IT})},[],function(Bl){RY?function ege(s,h,m,w,S,x){var j=nr(h);h.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",Xn("Signing in...").toString());var ne=null;S=(x?function _ge(s,h,m,w,S){Zn(s);var x=S||null,j=Mt.Z.auth.EmailAuthProvider.credentialWithLink(m,w);return m=x?Vn(s).signInWithEmailLink(m,w).then(function(ne){return ne.user.linkWithCredential(x)}).then(function(){return Mp(s)}).then(function(){return xp(s,{code:"auth/email-already-in-use"},x)}):Vn(s).fetchSignInMethodsForEmail(m).then(function(ne){return ne.length?xp(s,{code:"auth/email-already-in-use"},j):h.linkWithCredential(j)}),In(s,m),m}(s,x,m,w,S):function yge(s,h,m,w){Zn(s);var x,S=w||null;return h=Vn(s).signInWithEmailLink(h,m).then(function(j){if(x={user:j.user,credential:null,operationType:j.operationType,additionalUserInfo:j.additionalUserInfo},S)return j.user.linkWithCredential(S).then(function(ne){x={user:ne.user,credential:S,operationType:x.operationType,additionalUserInfo:ne.additionalUserInfo}})}).then(function(){Mp(s)}).then(function(){return Ru(s).updateCurrentUser(x.user)}).then(function(){return x.user=Ru(s).currentUser,x}),In(s,h),h}(s,m,w,S)).then(function(Ne){fa(jI,dn(s)),fa(k0,dn(s)),h.h(),h.$("firebaseui-icon-done",Xn("Signed in!").toString()),ne=setTimeout(function(){h.h(),ch(s,h,Ne,!0)},1e3),In(s,function(){h&&(h.h(),h.m()),clearTimeout(ne)})},function(Ne){if(h.h(),h.m(),!Ne.name||"cancel"!=Ne.name){var dt=yi(Ne=eT(Ne));"auth/email-already-in-use"==Ne.code||"auth/credential-already-in-use"==Ne.code?(fa(jI,dn(s)),fa(k0,dn(s))):"auth/invalid-email"==Ne.code?(dt=Xn("The email provided does not match the current sign-in session.").toString(),Gt("emailLinkConfirmation",s,j,w,gY,null,dt)):Ri(s,j,m,dt)}}),In(s,S)}(s,x,RY,m,CT,Bl):dt?(x.m(),Gt("differentDeviceError",s,h)):(x.m(),Gt("emailLinkConfirmation",s,h,m,gY))},function(Bl){var IT=void 0;if(!Bl||!Bl.name||"cancel"!=Bl.name)switch(x.m(),Bl&&Bl.message){case"anonymous-user-not-found":Gt("differentDeviceError",s,h);break;case"anonymous-user-mismatch":Gt("anonymousUserMismatch",s,h);break;case"pending-credential-not-found":Gt("emailLinkNewDeviceLinking",s,h,m,Xpe);break;default:Bl&&(IT=yi(Bl)),Ri(s,h,void 0,IT)}}))}function gY(s,h,m,w){Y3(s,h,w,m,!0)}function Xpe(s,h,m){Y3(s,h,m)}function dT(s,h,m,w,S,x){Qe.call(this,bK,{email:s,ga:h},x,"emailLinkSignInLinking",{F:w,D:S}),this.i=m}function hT(s,h,m,w,S,x){Qe.call(this,gK,{email:s},x,"emailLinkSignInSent",{F:w,D:S}),this.u=h,this.i=m}function fT(s,h,m,w,S,x,j){Qe.call(this,VK,{jc:s,Qb:h},j,"emailMismatch",{F:S,D:x}),this.l=m,this.i=w}function J0(s,h,m,w,S){Qe.call(this,mK,void 0,S,"emailNotReceived",{F:m,D:w}),this.l=s,this.i=h}function X0(s,h,m,w,S,x){Qe.call(this,CK,{email:s,ga:h},x,"federatedLinking",{F:w,D:S}),this.i=m}function pT(s,h,m,w,S,x){Qe.call(this,cK,{email:m,Ta:!!h},x,"passwordRecovery",{F:w,D:S}),this.l=s,this.u=h}function Q3(){return qn(this,"firebaseui-id-name")}function J3(){return qn(this,"firebaseui-id-name-error")}function gT(s,h,m,w,S,x,j,ne,Ne){Qe.call(this,uK,{email:w,Tb:s,name:S,Ta:!!m,ia:!!ne},Ne,"passwordSignUp",{F:x,D:j}),this.w=h,this.H=m,this.B=s}function X3(){return qn(this,"firebaseui-id-phone-confirmation-code")}function mY(){return qn(this,"firebaseui-id-phone-confirmation-code-error")}function _Y(){return qn(this,"firebaseui-id-resend-countdown")}function ew(s,h,m,w,S,x,j,ne,Ne){Qe.call(this,HK,{phoneNumber:S},Ne,"phoneSignInFinish",{F:j,D:ne}),this.jb=x,this.i=new qx(1e3),this.B=x,this.P=s,this.l=h,this.H=m,this.M=w}p(XI,Qe),XI.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),JI(this,this.l(),this.i()),z0(this,this.i(),this.w),Hs(this.l())?this.i().focus():this.l().focus(),Qe.prototype.v.call(this)},XI.prototype.o=function(){this.H=this.w=null,Qe.prototype.o.call(this)},Jn(XI.prototype,{l:uh,U:Ap,P:K0,M:Y0,j:Q0,i:Qx,B:Jx,ea:ZK,u:zK,ua:Ss,pa:as,ba:Gs}),tt(di,Qe),di.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),di.K.v.call(this)},di.prototype.o=function(){this.i=null,di.K.o.call(this)},Jn(di.prototype,{l:Ss,w:as,u:Gs}),tt(Xx,di),tt(WK,di),tt(KK,di),tt(YK,di),tt(QK,di),tt(JK,di),tt(XK,di),tt(eY,di),tt(tY,di),tt(nY,di),tt(iY,di),tt(rY,di),p(iT,Qe),iT.prototype.v=function(){var s=this;_r(this,this.l(),function(){s.i()}),this.l().focus(),Qe.prototype.v.call(this)},iT.prototype.o=function(){this.i=null,Qe.prototype.o.call(this)},Jn(iT.prototype,{l:as}),si.anonymousUserMismatch=function(s,h){var m=new iT(function(){m.m(),Ri(s,h)});m.render(h),Dn(s,m)},p(nk,Qe),nk.prototype.I=function(s,h,m,w){return s.apply(null,h).then(m,w)},si.callback=function(s,h,m){var w=new nk;w.render(h),Dn(s,w),m=m||bY(s),In(s,m.then(function(S){uY(s,w,S)},function(S){if((S=eT(S))&&("auth/account-exists-with-different-credential"==S.code||"auth/email-already-in-use"==S.code)&&S.email&&S.credential)aW(new y3(S.email,S.credential),dn(s)),dY(s,w,S.email);else if(S&&"auth/user-cancelled"==S.code){var x=zc(dn(s)),j=yi(S);x&&x.a?dY(s,w,x.g,j):x?aY(s,w,x.g,j):ik(s,w,S)}else S&&"auth/credential-already-in-use"==S.code||(S&&"auth/operation-not-supported-in-this-environment"==S.code&&tk(s)?uY(s,w,{user:null,credential:null}):S&&"auth/admin-restricted-operation"==S.code&&d_(et(s))?(w.m(),Wc(dn(s)),Gt("handleUnauthorizedUser",s,h,null,null)):ik(s,w,S))}))},p(rT,Qe),rT.prototype.v=function(){var s=this;_r(this,this.l(),function(){s.i()}),this.l().focus(),Qe.prototype.v.call(this)},rT.prototype.o=function(){this.i=null,Qe.prototype.o.call(this)},Jn(rT.prototype,{l:as}),si.differentDeviceError=function(s,h){var m=new rT(function(){m.m(),Ri(s,h)});m.render(h),Dn(s,m)},p(sT,Qe),sT.prototype.v=function(){var s=this;_r(this,qn(this,"firebaseui-id-reset-password-link"),function(){s.l()}),this.i&&(this.w(this.i),this.u().focus()),Qe.prototype.v.call(this)},sT.prototype.o=function(){this.l=this.i=null,Qe.prototype.o.call(this)},Jn(sT.prototype,{u:Ss,B:as,w:Gs}),p(aT,Qe),aT.prototype.v=function(){this.H(),this.B(this.l),z0(this,this.i(),this.l),this.i().focus(),Qe.prototype.v.call(this)},aT.prototype.o=function(){this.l=null,Qe.prototype.o.call(this)},Jn(aT.prototype,{i:oT,w:sk,M:rk,H:hY,u:fY,U:Ss,P:as,B:Gs}),p(lT,Qe),lT.prototype.v=function(){var s=this;_r(this,qn(this,"firebaseui-id-reset-password-link"),function(){s.l()}),this.i&&(this.w(this.i),this.u().focus()),Qe.prototype.v.call(this)},lT.prototype.o=function(){this.l=this.i=null,Qe.prototype.o.call(this)},Jn(lT.prototype,{u:Ss,B:as,w:Gs}),si.passwordReset=function(s,h,m,w){In(s,Vn(s).verifyPasswordResetCode(m).then(function(S){var x=new aT(S,function(){!function Ype(s,h,m,w,S){var x=m.u();x&&In(s,m.I(ni(Vn(s).confirmPasswordReset,Vn(s)),[w,x],function(){m.m();var j=new eY(S);j.render(h),Dn(s,j)},function(j){pY(s,h,m,j)}))}(s,h,x,m,w)});x.render(h),Dn(s,x)},function(){pY(s,h)}))},si.emailChangeRevocation=function(s,h,m){var w=null;In(s,Vn(s).checkActionCode(m).then(function(S){return w=S.data.email,Vn(s).applyActionCode(m)}).then(function(){!function Qpe(s,h,m){var w=new sT(m,function(){In(s,w.I(ni(Vn(s).sendPasswordResetEmail,Vn(s)),[m],function(){w.m(),(w=new Xx(m,void 0,Gr(et(s)),qr(et(s)))).render(h),Dn(s,w)},function(){w.a(K7().toString())}))});w.render(h),Dn(s,w)}(s,h,w)},function(){var S=new nY;S.render(h),Dn(s,S)}))},si.emailVerification=function(s,h,m,w){In(s,Vn(s).applyActionCode(m).then(function(){var S=new WK(w);S.render(h),Dn(s,S)},function(){var S=new KK;S.render(h),Dn(s,S)}))},si.revertSecondFactorAddition=function(s,h,m){var w=null,S=null;In(s,Vn(s).checkActionCode(m).then(function(x){return w=x.data.email,S=x.data.multiFactorInfo,Vn(s).applyActionCode(m)}).then(function(){!function Jpe(s,h,m,w){var S=new lT(w.factorId,function(){S.I(ni(Vn(s).sendPasswordResetEmail,Vn(s)),[m],function(){S.m(),(S=new Xx(m,void 0,Gr(et(s)),qr(et(s)))).render(h),Dn(s,S)},function(){S.a(K7().toString())})},w.phoneNumber);S.render(h),Dn(s,S)}(s,h,w,S)},function(){var x=new JK;x.render(h),Dn(s,x)}))},si.verifyAndChangeEmail=function(s,h,m,w){var S=null;In(s,Vn(s).checkActionCode(m).then(function(x){return S=x.data.email,Vn(s).applyActionCode(m)}).then(function(){var x=new YK(S,w);x.render(h),Dn(s,x)},function(){var x=new QK;x.render(h),Dn(s,x)}))},p(uT,Qe),uT.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),ok(this.i(),(this.i().value||"").length),Qe.prototype.v.call(this)},uT.prototype.o=function(){this.u=this.l=null,Qe.prototype.o.call(this)},Jn(uT.prototype,{i:uh,M:Ap,w:K0,H:Y0,j:Q0,U:Ss,P:as,B:Gs}),si.emailLinkConfirmation=function(s,h,m,w,S,x){var j=new uT(function(){var ne=j.j();ne?(j.m(),w(s,h,ne,m)):j.i().focus()},function(){j.m(),Ri(s,h,S||void 0)},S||void 0,Gr(et(s)),qr(et(s)));j.render(h),Dn(s,j),x&&j.a(x)},p(cT,Qe),cT.prototype.v=function(){this.u(this.i),this.l().focus(),Qe.prototype.v.call(this)},cT.prototype.o=function(){this.i=null,Qe.prototype.o.call(this)},Jn(cT.prototype,{l:Ss,u:Gs}),si.emailLinkNewDeviceLinking=function(s,h,m,w){var S=new Xm(m);if(m=S.a.a.get(rs.PROVIDER_ID)||null,S7(S,null),m){var x=new cT($I(et(s),m),function(){x.m(),w(s,h,S.toString())},Gr(et(s)),qr(et(s)));x.render(h),Dn(s,x)}else Ri(s,h)},p(ak,Qe),si.emailLinkSignInCallback=Y3,p(dT,Qe),dT.prototype.v=function(){this.u(this.i),this.l().focus(),Qe.prototype.v.call(this)},dT.prototype.o=function(){this.i=null,Qe.prototype.o.call(this)},Jn(dT.prototype,{l:Ss,u:Gs}),si.emailLinkSignInLinking=function(s,h,m){var w=zc(dn(s));if(Wc(dn(s)),w){var S=w.a.providerId,x=new dT(m,$I(et(s),S),function(){!function tge(s,h,m,w){var S=nr(h);z3(s,h,m,function(){Ri(s,S,m)},function(x){if(!x.name||"cancel"!=x.name){var j=yi(x);x&&"auth/network-request-failed"==x.code?h.a(j):(h.m(),Ri(s,S,m,j))}},w)}(s,x,m,w)},Gr(et(s)),qr(et(s)));x.render(h),Dn(s,x)}else Ri(s,h)},p(hT,Qe),hT.prototype.v=function(){var s=this;_r(this,this.l(),function(){s.i()}),_r(this,qn(this,"firebaseui-id-trouble-getting-email-link"),function(){s.u()}),this.l().focus(),Qe.prototype.v.call(this)},hT.prototype.o=function(){this.i=this.u=null,Qe.prototype.o.call(this)},Jn(hT.prototype,{l:as}),si.emailLinkSignInSent=function(s,h,m,w,S){var x=new hT(m,function(){x.m(),Gt("emailNotReceived",s,h,m,w,S)},function(){x.m(),w()},Gr(et(s)),qr(et(s)));x.render(h),Dn(s,x)},p(fT,Qe),fT.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Qe.prototype.v.call(this)},fT.prototype.o=function(){this.i=null,Qe.prototype.o.call(this)},Jn(fT.prototype,{u:Ss,B:as,w:Gs}),si.emailMismatch=function(s,h,m){var w=zc(dn(s));if(w){var S=new fT(m.user.email,w.g,function(){var x=S;Wc(dn(s)),ch(s,x,m)},function(){var x=m.credential.providerId,j=nr(S);S.m(),Gt(w.a?"federatedLinking":"federatedSignIn",s,j,w.g,x)},Gr(et(s)),qr(et(s)));S.render(h),Dn(s,S)}else Ri(s,h)},p(J0,Qe),J0.prototype.v=function(){var s=this;_r(this,this.u(),function(){s.i()}),_r(this,this.Da(),function(){s.l()}),this.u().focus(),Qe.prototype.v.call(this)},J0.prototype.Da=function(){return qn(this,"firebaseui-id-resend-email-link")},J0.prototype.o=function(){this.i=this.l=null,Qe.prototype.o.call(this)},Jn(J0.prototype,{u:as}),si.emailNotReceived=function(s,h,m,w,S){var x=new J0(function(){z3(s,x,m,w,function(j){j=yi(j),x.a(j)},S)},function(){x.m(),Ri(s,h,m)},Gr(et(s)),qr(et(s)));x.render(h),Dn(s,x)},p(X0,Qe),X0.prototype.v=function(){this.u(this.i),this.l().focus(),Qe.prototype.v.call(this)},X0.prototype.o=function(){this.i=null,Qe.prototype.o.call(this)},Jn(X0.prototype,{l:Ss,u:Gs}),si.federatedLinking=function(s,h,m,w,S){var x=zc(dn(s));if(x&&x.a){var j=new X0(m,$I(et(s),w),function(){tT(s,j,w,m)},Gr(et(s)),qr(et(s)));j.render(h),Dn(s,j),S&&j.a(S)}else Ri(s,h)},si.federatedRedirect=function(s,h,m){var w=new ak;w.render(h),Dn(s,w),tT(s,w,h=O0(et(s))[0],m)},si.federatedSignIn=function(s,h,m,w,S){var x=new X0(m,$I(et(s),w),function(){tT(s,x,w,m)},Gr(et(s)),qr(et(s)));x.render(h),Dn(s,x),S&&x.a(S)},si.passwordLinking=function(s,h,m){var w=zc(dn(s));Wc(dn(s));var S=w&&w.a;if(S){var x=new W0(m,function(){!function nge(s,h,m,w){var S=h.u();S?In(s,h.I(ni(s.Xb,s),[m,S],function(x){return x=x.user.linkWithCredential(w).then(function(j){return ch(s,h,{user:j.user,credential:w,operationType:j.operationType,additionalUserInfo:j.additionalUserInfo})}),In(s,x),x},function(x){if(!x.name||"cancel"!=x.name)switch(x.code){case"auth/wrong-password":Rr(h.i(),!1),$s(h.B(),yi(x));break;case"auth/too-many-requests":h.a(yi(x));break;default:Ka("signInWithEmailAndPassword: "+x.message,void 0),h.a(yi(x))}})):h.i().focus()}(s,x,m,S)},function(){x.m(),Gt("passwordRecovery",s,h,m)},Gr(et(s)),qr(et(s)));x.render(h),Dn(s,x)}else Ri(s,h)},p(pT,Qe),pT.prototype.v=function(){this.B(),this.H(this.l,this.u),Hs(this.i())||this.i().focus(),z0(this,this.i(),this.l),Qe.prototype.v.call(this)},pT.prototype.o=function(){this.u=this.l=null,Qe.prototype.o.call(this)},Jn(pT.prototype,{i:uh,w:Ap,B:K0,M:Y0,j:Q0,U:Ss,P:as,H:Gs}),si.passwordRecovery=function(s,h,m,w,S){var x=new pT(function(){!function ige(s,h){var m=h.j();if(m){var w=nr(h);In(s,h.I(ni(Vn(s).sendPasswordResetEmail,Vn(s)),[m],function(){h.m();var S=new Xx(m,function(){S.m(),Ri(s,w)},Gr(et(s)),qr(et(s)));S.render(w),Dn(s,S)},function(S){Rr(h.i(),!1),$s(h.w(),yi(S))}))}else h.i().focus()}(s,x)},w?void 0:function(){x.m(),Ri(s,h)},m,Gr(et(s)),qr(et(s)));x.render(h),Dn(s,x),S&&x.a(S)},si.passwordSignIn=function(s,h,m,w){var S=new XI(function(){!function Zpe(s,h){var m=h.j(),w=h.u();if(m)if(w){var S=Mt.Z.auth.EmailAuthProvider.credential(m,w);In(s,h.I(ni(s.bc,s),[m,w],function(x){return ch(s,h,{user:x.user,credential:S,operationType:x.operationType,additionalUserInfo:x.additionalUserInfo})},function(x){if(!x.name||"cancel"!=x.name)switch(x.code){case"auth/email-already-in-use":break;case"auth/email-exists":Rr(h.l(),!1),$s(h.U(),yi(x));break;case"auth/too-many-requests":case"auth/wrong-password":Rr(h.i(),!1),$s(h.B(),yi(x));break;default:Ka("verifyPassword: "+x.message,void 0),h.a(yi(x))}}))}else h.i().focus();else h.l().focus()}(s,S)},function(){var x=S.M();S.m(),Gt("passwordRecovery",s,h,x)},m,Gr(et(s)),qr(et(s)),w);S.render(h),Dn(s,S)},p(gT,Qe),gT.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(JI(this,this.i(),this.u()),JI(this,this.u(),this.l())):JI(this,this.i(),this.l()),this.w&&z0(this,this.l(),this.w),Hs(this.i())?this.B&&!Hs(this.u())?this.u().focus():this.l().focus():this.i().focus(),Qe.prototype.v.call(this)},gT.prototype.o=function(){this.H=this.w=null,Qe.prototype.o.call(this)},Jn(gT.prototype,{i:uh,U:Ap,ea:K0,jb:Y0,j:Q0,u:Q3,Bc:J3,Ja:function(){var s=Q3.call(this),h=J3.call(this);$0(this,s,function(){G0(h)&&(Rr(s,!0),Qa(h))})},M:function(){var s=Q3.call(this),h=J3.call(this),m=Hs(s);return Rr(s,m=!/^[\s\xa0]*$/.test(null==m?"":String(m))),m?(Qa(h),h=!0):($s(h,Xn("Enter your account name").toString()),h=!1),h?Za(Hs(s)):null},l:oT,ba:sk,lb:rk,ua:hY,P:fY,Nb:Ss,Mb:as,pa:Gs}),si.passwordSignUp=function(s,h,m,w,S,x){var ne=new gT(TW(et(s)),function(){!function rge(s,h){var m=TW(et(s)),w=h.j(),S=null;m&&(S=h.M());var x=h.P();if(w){if(m){if(!S)return void h.u().focus();S=m0(S)}if(x){var j=Mt.Z.auth.EmailAuthProvider.credential(w,x);In(s,h.I(ni(s.Yb,s),[w,x],function(ne){var Ne={user:ne.user,credential:j,operationType:ne.operationType,additionalUserInfo:ne.additionalUserInfo};return m?(ne=ne.user.updateProfile({displayName:S}).then(function(){return ch(s,h,Ne)}),In(s,ne),ne):ch(s,h,Ne)},function(ne){if(!ne.name||"cancel"!=ne.name){var Ne=eT(ne);switch(ne=yi(Ne),Ne.code){case"auth/email-already-in-use":return function sge(s,h,m,w){function S(){var j=yi(w);Rr(h.i(),!1),$s(h.U(),j),h.i().focus()}var x=Vn(s).fetchSignInMethodsForEmail(m).then(function(j){j.length?S():(j=nr(h),h.m(),Gt("passwordRecovery",s,j,m,!1,Q7().toString()))},function(){S()});return In(s,x),x}(s,h,w,Ne);case"auth/too-many-requests":ne=Xn("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Rr(h.l(),!1),$s(h.ba(),ne);break;case"auth/admin-restricted-operation":d_(et(s))?(ne=nr(h),h.m(),Gt("handleUnauthorizedUser",s,ne,w,Mt.Z.auth.EmailAuthProvider.PROVIDER_ID)):h.a(ne);break;default:Ka(Ne="setAccountInfo: "+tW(Ne),void 0),h.a(ne)}}}))}else h.l().focus()}else h.i().focus()}(s,ne)},S?void 0:function j(){ne.m(),Ri(s,h)},m,w,Gr(et(s)),qr(et(s)),x);ne.render(h),Dn(s,ne)},p(ew,Qe),ew.prototype.v=function(){var s=this;this.U(this.jb),xu(this.i,"tick",this.w,!1,this),this.i.start(),_r(this,qn(this,"firebaseui-id-change-phone-number-link"),function(){s.P()}),_r(this,this.Da(),function(){s.M()}),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),Qe.prototype.v.call(this)},ew.prototype.o=function(){this.M=this.H=this.l=this.P=null,Zx(this.i),s_(this.i,"tick",this.w),this.i=null,Qe.prototype.o.call(this)},ew.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(Zx(this.i),s_(this.i,"tick",this.w),this.ua(),this.lb())},Jn(ew.prototype,{u:X3,pa:mY,Ja:function(s){var h=X3.call(this),m=mY.call(this);$0(this,h,function(){G0(m)&&(Rr(h,!0),Qa(m))}),s&&QI(this,h,function(){s()})},ba:function(){var s=Za(Hs(X3.call(this))||"");return/^\d{6}$/.test(s)?s:null},Fb:_Y,U:function(s){BV(_Y.call(this),Xn("Resend code in "+(9<s?"0:":"0:0")+s).toString())},ua:function(){Qa(this.Fb())},Da:function(){return qn(this,"firebaseui-id-resend-link")},lb:function(){$s(this.Da())},Nb:Ss,Mb:as,ea:Gs}),si.phoneSignInFinish=function(s,h,m,w,S,x){var j=new ew(function(){j.m(),Gt("phoneSignInStart",s,h,m)},function(){!function oge(s,h,m,w){function S(j){h.u().focus(),Rr(h.u(),!1),$s(h.pa(),j)}var x=h.ba();x?(h.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",Xn("Verifying...").toString()),In(s,h.I(ni(w.confirm,w),[x],function(j){h.h(),h.$("firebaseui-icon-done",Xn("Verified!").toString());var ne=setTimeout(function(){h.h(),h.m();var Ne={user:Ru(s).currentUser,credential:null,operationType:j.operationType,additionalUserInfo:j.additionalUserInfo};ch(s,h,Ne,!0)},1e3);In(s,function(){h&&h.h(),clearTimeout(ne)})},function(j){if(j.name&&"cancel"==j.name)h.h();else{var ne=eT(j);switch(j=yi(ne),ne.code){case"auth/credential-already-in-use":h.h();break;case"auth/code-expired":ne=nr(h),h.h(),h.m(),Gt("phoneSignInStart",s,ne,m,j);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":h.h(),S(j);break;default:h.h(),h.a(j)}}}))):S(Xn("Wrong code. Try again.").toString())}(s,j,m,S)},function(){j.m(),Ri(s,h)},function(){j.m(),Gt("phoneSignInStart",s,h,m)},M3(m),w,Gr(et(s)),qr(et(s)));j.render(h),Dn(s,j),x&&j.a(x)};var age=!(Mr||Un("Safari")&&!(M7()||Un("Coast")||Un("Opera")||Un("Edge")||Un("Firefox")||Un("FxiOS")||Un("Silk")||Un("Android")));function lk(s,h){return/-[a-z]/.test(h)?null:age&&s.dataset?!Un("Android")||M7()||Un("Firefox")||Un("FxiOS")||Un("Opera")||Un("Silk")||h in s.dataset?void 0===(s=s.dataset[h])?null:s:null:s.getAttribute("data-"+String(h).replace(/([A-Z])/g,"-$1").toLowerCase())}function lge(s,h,m){var w=this;s=DI(tK,{items:s},null,this.s),iK.call(this,s,!0,!0),m&&(m=function uge(s,h){s=(s||document).getElementsByTagName("BUTTON");for(var m=0;m<s.length;m++)if(lk(s[m],"listboxid")===h)return s[m];return null}(s,m))&&(m.focus(),function Fpe(s,h){var m=(h=h||lx(document))||lx(document),w=ZW(s),S=ZW(m);if(!Mr||9<=Number(II)){j=zx(m,"borderLeftWidth");var x=zx(m,"borderRightWidth");ne=zx(m,"borderTopWidth"),Ne=zx(m,"borderBottomWidth"),x=new H0(parseFloat(ne),parseFloat(x),parseFloat(Ne),parseFloat(j))}else{var j=Wx(m,"borderLeft");x=Wx(m,"borderRight");var ne=Wx(m,"borderTop"),Ne=Wx(m,"borderBottom");x=new H0(ne,x,Ne,j)}m==lx(document)?(j=w.a-m.scrollLeft,w=w.g-m.scrollTop,!Mr||10<=Number(II)||(j+=x.left,w+=x.top)):(j=w.a-S.a-x.left,w=w.g-S.g-x.top),S=s.offsetWidth,x=s.offsetHeight,ne=Zo&&!S&&!x,s=F(S)&&!ne||!s.getBoundingClientRect?new LV(S,x):new LV((s=qW(s)).right-s.left,s.bottom-s.top),S=m.clientHeight-s.height,x=m.scrollLeft,ne=m.scrollTop,m=new bp(x+=Math.min(j,Math.max(j-(m.clientWidth-s.width),0)),ne+=Math.min(w,Math.max(w-S,0))),h.scrollLeft=m.a,h.scrollTop=m.g}(m,s)),_r(this,s,function(S){(S=(S=G7(S.target,"firebaseui-id-list-box-dialog-button"))&&lk(S,"listboxid"))&&(Yx.call(w),h(S))})}function f_(){return qn(this,"firebaseui-id-phone-number")}function yY(){return qn(this,"firebaseui-id-country-selector")}function eB(){return qn(this,"firebaseui-id-phone-number-error")}function cge(s,h){var S,m=s.a,w=tB("1-US-0",m);if(!(S=h&&tB(h,m)?h:w?"1-US-0":0<m.length?m[0].c:null))throw Error("No available default country");uk.call(this,S,s)}function tB(s,h){return!(!(s=c_(s))||!_i(h,s))}function nB(s){return"firebaseui-flag-"+s.f}function hge(s){var h=this;lge.call(this,function dge(s){return s.map(function(h){return{id:h.c,Ma:"firebaseui-flag "+nB(h),label:h.name+" \u200e+"+h.b}})}(s.a),function(m){uk.call(h,m,s,!0),h.O().focus()},this.Ba)}function uk(s,h,m){var w=c_(s);w&&(m&&(h=Bx(h,m=Za(Hs(f_.call(this))||""))).length&&h[0].b!=w.b&&(m="+"+w.b+m.substr(h[0].b.length+1),kW(f_.call(this),m)),h=c_(this.Ba),this.Ba=s,s=qn(this,"firebaseui-id-country-selector-flag"),h&&Yc(s,nB(h)),Kc(s,nB(w)),BV(qn(this,"firebaseui-id-country-selector-code"),"\u200e+"+w.b))}function mT(s,h,m,w,S,x,j,ne,Ne,dt){Qe.call(this,jK,{Gb:h,Aa:Ne||null,Va:!!m,ia:!!x},dt,"phoneSignInStart",{F:w,D:S}),this.H=ne||null,this.M=h,this.l=s,this.w=m||null,this.pa=j||null}function vY(s,h,m,w){try{var S=h.U(L3)}catch{return}S?qI?(h.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",Xn("Verifying...").toString()),In(s,h.I(ni(s.cc,s),[M3(S),m],function(x){var j=nr(h);h.$("firebaseui-icon-done",Xn("Code sent!").toString());var ne=setTimeout(function(){h.h(),h.m(),Gt("phoneSignInFinish",s,j,S,15,x)},1e3);In(s,function(){h&&h.h(),clearTimeout(ne)})},function(x){if(h.h(),!x.name||"cancel"!=x.name){grecaptcha.reset(MW),qI=null;var j=x&&x.message||"";if(x.code)switch(x.code){case"auth/too-many-requests":j=Xn("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":return h.O().focus(),void $s(h.B(),GV().toString());case"auth/admin-restricted-operation":if(d_(et(s)))return x=nr(h),h.m(),void Gt("handleUnauthorizedUser",s,x,M3(S),Mt.Z.auth.PhoneAuthProvider.PROVIDER_ID);j=yi(x);break;default:j=yi(x)}h.a(j)}}))):L0?$s(h.u(),Xn("Solve the reCAPTCHA").toString()):!L0&&w&&h.i().click():(h.O().focus(),$s(h.B(),GV().toString()))}function _T(s,h,m,w,S){Qe.call(this,BK,{Sb:h},S,"providerSignIn",{F:m,D:w}),this.i=s}function yT(s,h,m,w,S,x,j){Qe.call(this,aK,{email:m,Va:!!h,ia:!!x},j,"signIn",{F:w,D:S}),this.i=s,this.u=h}function vT(s,h,m,w,S,x,j){Qe.call(this,IK,{kc:s,yb:m,Eb:!!w},j,"unauthorizedUser",{F:S,D:x}),this.l=h,this.i=w}function wT(s,h,m,w,S,x){Qe.call(this,TK,{email:s},x,"unsupportedProvider",{F:w,D:S}),this.l=h,this.i=m}function Qc(s,h){this.$=!1;var m=iB(h);if(bT[m])throw Error('An AuthUI instance already exists for the key "'+m+'"');bT[m]=this,this.a=s,this.u=null,this.Y=!1,wY(this.a),this.h=Mt.Z.initializeApp({apiKey:s.app.options.apiKey,authDomain:s.app.options.authDomain},s.app.name+"-firebaseui-temp").auth(),(s=s.emulatorConfig)&&this.h.useEmulator(s.protocol+"://"+s.host+(null===(m=s.port)?"":":"+m),s.options),wY(this.h),this.h.setPersistence&&this.h.setPersistence(Mt.Z.auth.Auth.Persistence.SESSION),this.oa=h,this.ca=new bpe,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=l3.Xa(),this.j=this.C=null,this.da=this.A=!1}function wY(s){s&&s.INTERNAL&&s.INTERNAL.logFramework&&s.INTERNAL.logFramework("FirebaseUI-web")}p(mT,Qe),mT.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||JI(this,this.O(),this.i()),z0(this,this.i(),this.l),this.O().focus(),ok(this.O(),(this.O().value||"").length),Qe.prototype.v.call(this)},mT.prototype.o=function(){this.w=this.l=null,Qe.prototype.o.call(this)},Jn(mT.prototype,{Cb:q3,O:f_,B:eB,ea:function(s,h,m){var w=this,S=f_.call(this),x=yY.call(this),j=eB.call(this),ne=s||HI,Ne=ne.a;if(0==Ne.length)throw Error("No available countries provided.");cge.call(w,ne,h),_r(this,x,function(){hge.call(w,ne)}),$0(this,S,function(){G0(j)&&(Rr(S,!0),Qa(j));var dt=Za(Hs(S)||""),Yt=c_(this.Ba),hi=Bx(ne,dt);dt=tB("1-US-0",Ne),hi.length&&hi[0].b!=Yt.b&&uk.call(w,"1"==(Yt=hi[0]).b&&dt?"1-US-0":Yt.c,ne)}),m&&QI(this,S,function(){m()})},U:function(s){var h=Za(Hs(f_.call(this))||""),m=(s=s||HI).a,w=Bx(HI,h);if(w.length&&!_i(m,w[0]))throw kW(f_.call(this)),f_.call(this).focus(),$s(eB.call(this),Xn("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return m=c_(this.Ba),w.length&&w[0].b!=m.b&&uk.call(this,w[0].c,s),w.length&&(h=h.substr(w[0].b.length+1)),h?new gW(this.Ba,h):null},Ja:yY,ba:function(){return qn(this,"firebaseui-recaptcha-container")},u:function(){return qn(this,"firebaseui-id-recaptcha-error")},i:Ss,ua:as,P:Gs}),si.phoneSignInStart=function(s,h,m,w){var S=function Epe(s){var h=null;if(Hx(s).forEach(function(w){w.provider==Mt.Z.auth.PhoneAuthProvider.PROVIDER_ID&&Nt(w.recaptchaParameters)&&!Array.isArray(w.recaptchaParameters)&&(h=DV(w.recaptchaParameters))}),h){var m=[];Rpe.forEach(function(w){typeof h[w]<"u"&&(m.push(w),delete h[w])}),m.length&&Sp('The following provided "recaptchaParameters" keys are not allowed: '+m.join(", "))}return h}(et(s))||{};qI=null,L0=!(S&&"invisible"===S.size);var x=oY(s),j=function Ape(s){var h=(s=Ya(s,Mt.Z.auth.PhoneAuthProvider.PROVIDER_ID))&&s.defaultCountry||null;h=h&&hW(h);var m=null;return s&&"string"==typeof s.loginHint&&(m=mW(s.loginHint)),h&&h[0]||m&&c_(m.a)||null}(et(s)),ne=x?function Dpe(s){var h=null;return(s=Ya(s,Mt.Z.auth.PhoneAuthProvider.PROVIDER_ID))&&"string"==typeof s.loginHint&&(h=mW(s.loginHint)),s&&s.defaultNationalNumber||h&&h.Aa||null}(et(s)):null;j=m&&m.a||j&&j.c||null,m=m&&m.Aa||ne,(ne=x3(et(s)))&&pW(ne),L3=ne?new dW(x3(et(s))):HI;var Ne=new mT(function(Yt){vY(s,Ne,dt,!(!Yt||!Yt.keyCode))},L0,x?null:function(){dt.clear(),Ne.m(),Ri(s,h)},Gr(et(s)),qr(et(s)),x,L3,j,m);Ne.render(h),Dn(s,Ne),w&&Ne.a(w),S.callback=function(Yt){Ne.u()&&Qa(Ne.u()),qI=Yt,L0||vY(s,Ne,dt)},S["expired-callback"]=function(){qI=null};var dt=new Mt.Z.auth.RecaptchaVerifier(L0?Ne.ba():Ne.i(),S,Ru(s).app);In(s,Ne.I(ni(dt.render,dt),[],function(Yt){MW=Yt},function(Yt){Yt.name&&"cancel"==Yt.name||(Yt=yi(Yt),Ne.m(),Ri(s,h,void 0,Yt))}))},si.prefilledEmailSignIn=function(s,h,m){var w=new ak;w.render(h),Dn(s,w),In(s,w.I(ni(Vn(s).fetchSignInMethodsForEmail,Vn(s)),[m],function(S){w.m();var x=!(!tk(s)||!EY(s));lY(s,h,S,m,void 0,x)},function(S){S=yi(S),w.m(),Gt("signIn",s,h,m,S)}))},p(_T,Qe),_T.prototype.v=function(){this.l(this.i),Qe.prototype.v.call(this)},_T.prototype.o=function(){this.i=null,Qe.prototype.o.call(this)},Jn(_T.prototype,{l:function(s){function h(j){s(j)}for(var m=this.g?UV("firebaseui-id-idp-button",this.g||this.s.a):[],w=0;w<m.length;w++){var S=m[w];_r(this,S,Ga(h,lk(S,"providerId")))}}}),si.providerSignIn=function(s,h,m,w){var S=new _T(function(x){x==Mt.Z.auth.EmailAuthProvider.PROVIDER_ID?(S.m(),W3(s,h,w)):x==Mt.Z.auth.PhoneAuthProvider.PROVIDER_ID?(S.m(),Gt("phoneSignInStart",s,h)):"anonymous"==x?function Gpe(s,h){In(s,h.I(ni(s.$b,s),[],function(m){return h.m(),ch(s,h,m,!0)},function(m){m.name&&"cancel"==m.name||(Ka("ContinueAsGuest: "+m.code,void 0),m=yi(m),h.a(m))}))}(s,S):tT(s,S,x,w),Zn(s),s.l.cancel()},vW(et(s)),Gr(et(s)),qr(et(s)));S.render(h),Dn(s,S),m&&S.a(m),function gge(s){Zn(s);try{kz(s.l,wW(et(s)),function fge(s){var h;return Zn(s),(h=s.Z)||(h=!(!(s=CW(s=et(s),Mt.Z.auth.GoogleAuthProvider.PROVIDER_ID))||"select_account"!==s.prompt)),h}(s)).then(function(h){return!!s.g&&function qpe(s,h,m){if(m&&m.credential&&m.clientId===wW(et(s))){if(EW(et(s),Mt.Z.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var S=JSON.parse(atob(m.credential.split(".")[1])).email}catch{}return tT(s,h,Mt.Z.auth.GoogleAuthProvider.PROVIDER_ID,S),kr(!0)}return function w(x){var j=!1;return x=h.I(ni(s.ac,s),[x],function(ne){var Ne=nr(h);h.m(),Gt("callback",s,Ne,kr(ne)),j=!0},function(ne){if(!(ne.name&&"cancel"==ne.name||ne&&"auth/credential-already-in-use"==ne.code))if(ne&&"auth/email-already-in-use"==ne.code&&ne.email&&ne.credential){var Ne=nr(h);h.m(),Gt("callback",s,Ne,C0(ne))}else ne&&"auth/admin-restricted-operation"==ne.code&&d_(et(s))?(ne=nr(h),h.m(),Gt("handleUnauthorizedUser",s,ne,null,Mt.Z.auth.GoogleAuthProvider.PROVIDER_ID)):(ne=yi(ne),h.a(ne))}),In(s,x),x.then(function(){return j},function(){return!1})}(Mt.Z.auth.GoogleAuthProvider.credential(m.credential))}return m&&h.a(Xn("The selected credential for the authentication provider is not supported!").toString()),kr(!1)}(s,s.g,h)})}catch{}}(s)},si.sendEmailLinkForSignIn=function(s,h,m,w){var S=new nk;S.render(h),Dn(s,S),z3(s,S,m,w,function(x){S.m(),x&&"auth/admin-restricted-operation"==x.code&&d_(et(s))?Gt("handleUnauthorizedUser",s,h,m,Mt.Z.auth.EmailAuthProvider.PROVIDER_ID):(x=yi(x),Gt("signIn",s,h,m,x))})},p(yT,Qe),yT.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),ok(this.l(),(this.l().value||"").length),Qe.prototype.v.call(this)},yT.prototype.o=function(){this.u=this.i=null,Qe.prototype.o.call(this)},Jn(yT.prototype,{l:uh,M:Ap,w:K0,H:Y0,j:Q0,U:Ss,P:as,B:Gs}),si.signIn=function(s,h,m,w){var S=tk(s),x=new yT(function(){var j=x,ne=j.j()||"";ne&&aY(s,j,ne)},S?null:function(){x.m(),Ri(s,h,m)},m,Gr(et(s)),qr(et(s)),S);x.render(h),Dn(s,x),w&&x.a(w)},p(vT,Qe),vT.prototype.v=function(){var s=this,h=qn(this,"firebaseui-id-unauthorized-user-help-link");this.i&&h&&_r(this,h,function(){s.i()}),_r(this,this.u(),function(){s.l()}),this.u().focus(),Qe.prototype.v.call(this)},vT.prototype.o=function(){this.i=this.l=null,Qe.prototype.o.call(this)},Jn(vT.prototype,{u:as}),si.handleUnauthorizedUser=function(s,h,m,w){function S(){Ri(s,h)}w===Mt.Z.auth.EmailAuthProvider.PROVIDER_ID?S=function(){W3(s,h)}:w===Mt.Z.auth.PhoneAuthProvider.PROVIDER_ID&&(S=function(){Gt("phoneSignInStart",s,h)});var x=null,j=null;w===Mt.Z.auth.EmailAuthProvider.PROVIDER_ID&&bW(et(s))?(x=function Tpe(s){return(s=Ya(s,Mt.Z.auth.EmailAuthProvider.PROVIDER_ID))&&s.disableSignUp&&s.disableSignUp.adminEmail||null}(et(s)),j=function Spe(s){if((s=Ya(s,Mt.Z.auth.EmailAuthProvider.PROVIDER_ID))&&s.disableSignUp){var h=s.disableSignUp.helpLink||null;if(h&&"string"==typeof h)return function(){T0(h)}}return null}(et(s))):d_(et(s))&&(x=function Cpe(s){return(s=s.a.get("adminRestrictedOperation"))&&s.adminEmail?s.adminEmail:null}(et(s)),j=function Ipe(s){if(s=s.a.get("adminRestrictedOperation")||null){var h=s.helpLink||null;if(h&&"string"==typeof h)return function(){T0(h)}}return null}(et(s)));var ne=new vT(m,function(){ne.m(),S()},x,j,Gr(et(s)),qr(et(s)));ne.render(h),Dn(s,ne)},p(wT,Qe),wT.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Qe.prototype.v.call(this)},wT.prototype.o=function(){this.i=this.l=null,Qe.prototype.o.call(this)},Jn(wT.prototype,{u:Ss,B:as,w:Gs}),si.unsupportedProvider=function(s,h,m){var w=new wT(m,function(){w.m(),Gt("passwordRecovery",s,h,m)},function(){w.m(),Ri(s,h,m)},Gr(et(s)),qr(et(s)));w.render(h),Dn(s,w)};var bT={};function iB(s){return s||"[DEFAULT]"}function bY(s){return Zn(s),s.i||(s.i=dh(s,function(h){return h&&!zc(dn(s))?kr(Ru(s).getRedirectResult().then(function(m){return m},function(m){if(m&&"auth/email-already-in-use"==m.code&&m.email&&m.credential)throw m;return xp(s,m)})):kr(Vn(s).getRedirectResult().then(function(m){return jx(et(s))&&!m.user&&s.j&&!s.j.isAnonymous?Ru(s).getRedirectResult():m}))})),s.i}function Dn(s,h){Zn(s),s.g=h}var tw=null;function Vn(s){return Zn(s),s.h}function Ru(s){return Zn(s),s.a}function dn(s){return Zn(s),s.oa}function EY(s){return Zn(s),s.O?s.O.emailHint:void 0}function CY(s){return"signIn"===((s=new Xm(s)).a.a.get(rs.ub)||null)&&!!s.a.a.get(rs.$a)}function IY(s,h,m,w){Zn(s),typeof s.a.languageCode<"u"&&(s.u=s.a.languageCode);var S="en".replace(/_/g,"-");s.a.languageCode=S,s.h.languageCode=S,s.Y=!0,typeof s.a.tenantId<"u"&&(s.h.tenantId=s.a.tenantId),s.ib(m),s.O=w||null;var x=R.document;s.C?s.C.then(function(){"complete"==x.readyState?ck(s,h):RI(window,"load",function(){ck(s,h)})}):"complete"==x.readyState?ck(s,h):RI(window,"load",function(){ck(s,h)})}function ck(s,h){var m=vx(h,"Could not find the FirebaseUI widget element on the page.");if(m.setAttribute("lang","en".replace(/_/g,"-")),tw){var w=tw;Zn(w),zc(dn(w))&&Sp("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),tw.reset()}if(tw=s,s.T=m,function pge(s,h){s.L=null,s.J=new _x(h),s.J.register(),xu(s.J,"pageEnter",function(m){if(s.L!=(m=m&&m.pageId)){var w=et(s);(w=GI(w).uiChanged||null)&&w(s.L,m),s.L=m}})}(s,m),Vx(new w3)&&Vx(new b3)){h=vx(h,"Could not find the FirebaseUI widget element on the page."),m=(m=ix(m=lh(),w=D3(et(s).a,"queryParameterForSignInSuccessUrl")))?vp(sx(m)).toString():null;e:{w=lh();var S=IW(et(s));for(x in w=ix(w,S)||"",F3)if(F3[x].toLowerCase()==w.toLowerCase()){var x=F3[x];break e}x="callback"}switch(x){case"callback":m&&(x=dn(s),P0(BI,m,x)),s.nb()?Gt("callback",s,h):Ri(s,h,EY(s));break;case"resetPassword":Gt("passwordReset",s,h,nT(),K3());break;case"recoverEmail":Gt("emailChangeRevocation",s,h,nT());break;case"revertSecondFactorAddition":Gt("revertSecondFactorAddition",s,h,nT());break;case"verifyEmail":Gt("emailVerification",s,h,nT(),K3());break;case"verifyAndChangeEmail":Gt("verifyAndChangeEmail",s,h,nT(),K3());break;case"signIn":Gt("emailLinkSignInCallback",s,h,lh()),AY();break;case"select":m&&(x=dn(s),P0(BI,m,x)),Ri(s,h);break;default:throw Error("Unhandled widget operation.")}(h=GI(h=et(s)).uiShown||null)&&h()}else h=vx(h,"Could not find the FirebaseUI widget element on the page."),(x=new rY(Xn("The browser you are using does not support Web Storage. Please try again in a different browser.").toString())).render(h),Dn(s,x);h=s.g&&"blank"==s.g.Ga&&k3(et(s)),I3(dn(s))&&!h&&(DY(s,(h=I3(dn(s))).a),fa(u_,dn(s)))}function dh(s,h){if(s.A)return h(TY(s));if(In(s,function(){s.A=!1}),jx(et(s))){var m=new os(function(w){In(s,s.a.onAuthStateChanged(function(S){s.j=S,s.A||(s.A=!0,w(h(TY(s))))}))});return In(s,m),m}return s.A=!0,h(null)}function TY(s){return Zn(s),jx(et(s))&&s.j&&s.j.isAnonymous?s.j:null}function In(s,h){if(Zn(s),h){s.s.push(h);var m=function(){!function wI(s,h){!function qc(s,h){for(var m=G(s)?s.split(""):s,w=s.length-1;0<=w;--w)w in m&&h.call(void 0,m[w],w,s)}(s,function(w,S){h.call(void 0,w,S,s)&&no(s,S)})}(s.s,function(w){return w==h})};"function"!=typeof h&&h.then(m,m)}}function SY(s){typeof s.a.languageCode<"u"&&s.Y&&(s.Y=!1,s.a.languageCode=s.u)}function DY(s,h){s.a.tenantId=h,s.h.tenantId=h}function et(s){return Zn(s),s.ca}function Zn(s){if(s.$)throw Error("AuthUI instance is deleted!")}function AY(){var s=lh();if(CY(s)){for(var h in s=new Xm(s),rs)rs.hasOwnProperty(h)&&Jm(s.a.a,rs[h]);h={state:"signIn",mode:"emailLink",operation:"clear"},R.history&&R.history.replaceState&&R.history.replaceState(h,R.document.title,s.toString())}}function Mp(s){return Zn(s),Vn(s).signOut()}function xp(s,h,m){if(Zn(s),h&&h.code&&("auth/email-already-in-use"==h.code||"auth/credential-already-in-use"==h.code)){var w=AW(et(s));return kr().then(function(){return w(new AI("anonymous-upgrade-merge-conflict",null,m||h.credential))}).then(function(){throw s.g&&(s.g.m(),s.g=null),h})}return C0(h)}function ET(s,h,m,w){Qe.call(this,qK,void 0,w,"providerMatchByEmail",{F:h,D:m}),this.i=s}function dk(s,h,m,w,S){Qe.call(this,GK,{ec:h},S,"selectTenant",{F:m,D:w}),this.i=s}function rB(s){Qe.call(this,fK,void 0,s,"spinner")}function Ege(s){for(var h in this.a=new T3,$r(this.a,"authDomain"),$r(this.a,"displayMode",fk),$r(this.a,"tenants"),$r(this.a,"callbacks"),$r(this.a,"tosUrl"),$r(this.a,"privacyPolicyUrl"),s)if(s.hasOwnProperty(h))try{S3(this.a,h,s[h])}catch{Ka('Invalid config: "'+h+'"',void 0)}}function hk(s){return s.a.get("callbacks")||{}}function MY(s){var h=s.a.get("tosUrl")||null;if(s=s.a.get("privacyPolicyUrl")||null,h&&!s&&Sp("Privacy Policy URL is missing, the link will not be displayed."),h&&s){if("function"==typeof h)return h;if("string"==typeof h)return function(){T0(h)}}return null}function xY(s){var h=s.a.get("tosUrl")||null,m=s.a.get("privacyPolicyUrl")||null;if(m&&!h&&Sp("Terms of Service URL is missing, the link will not be displayed."),h&&m){if("function"==typeof m)return m;if("string"==typeof m)return function(){T0(m)}}return null}function sB(s,h){if(!(s=s.a.get("tenants"))||!s.hasOwnProperty(h)&&!s.hasOwnProperty(pk))throw Error("Invalid tenant configuration!")}function kY(s,h,m){if(!(s=s.a.get("tenants")))throw Error("Invalid tenant configuration!");var w=[];if(!(s=s[h]||s[pk]))return Ka("Invalid tenant configuration: "+h+" is not configured!",void 0),w;if(!(h=s.signInOptions))throw Error("Invalid tenant configuration: signInOptions are invalid!");return h.forEach(function(S){if("string"==typeof S)w.push(S);else if("string"==typeof S.provider){var x=S.hd;x&&m?(x instanceof RegExp?x:new RegExp("@"+x.replace(".","\\.")+"$")).test(m)&&w.push(S.provider):w.push(S.provider)}else Ka(S="Invalid tenant configuration: signInOption "+JSON.stringify(S)+" is invalid!",void 0)}),w}(n=Qc.prototype).nb=function(){return Zn(this),!!I3(dn(this))||CY(lh())},n.start=function(s,h){IY(this,s,h)},n.Db=function(){Zn(this),this.Z=!0},n.reset=function(){Zn(this);var s=this;this.T&&this.T.removeAttribute("lang"),this.J&&function zfe(s){var h=JV(s.N());Wa[h]&&Wa[h].length&&(function g0(s,h){e:{for(var m=s.length,w=G(s)?s.split(""):s,S=0;S<m;S++)if(S in w&&h.call(void 0,w[S],S,s)){h=S;break e}h=-1}0<=h&&no(s,h)}(Wa[h],function(m){return m==s}),Wa[h].length||delete Wa[h])}(this.J),SY(this),this.O=null,AY(),fa(u_,dn(this)),Zn(this),this.l.cancel(),this.i=kr({user:null,credential:null}),tw==this&&(tw=null),this.T=null;for(var h=0;h<this.s.length;h++)"function"==typeof this.s[h]?this.s[h]():this.s[h].cancel&&this.s[h].cancel();this.s=[],Wc(dn(this)),this.g&&(this.g.m(),this.g=null),this.L=null,this.h&&(this.C=Mp(this).then(function(){s.C=null},function(){s.C=null}))},n.ib=function(s){Zn(this);var m,h=this.ca;for(m in s)try{S3(h.a,m,s[m])}catch{Ka('Invalid config: "'+m+'"',void 0)}gfe&&S3(h.a,"popupMode",!1),x3(h),!this.da&&R3(et(this))&&(Sp("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)},n.Wb=function(){Zn(this);var s=et(this),h=D3(s.a,"widgetUrl");s=IW(s);for(var S,m=h.search(b7),w=0,x=[];0<=(S=w7(h,w,s,m));)x.push(h.substring(w,S)),w=Math.min(h.indexOf("&",S)+1||m,m);x.push(h.substr(w)),h=x.join("").replace(rfe,"$1"),(s+=m="="+encodeURIComponent("select"))?(0>(m=h.indexOf("#"))&&(m=h.length),0>(w=h.indexOf("?"))||w>m?(w=m,S=""):S=h.substring(w+1,m),m=(h=[h.substr(0,w),S,h.substr(m)])[1],h[1]=s?m?m+"&"+s:s:m,m=h[0]+(h[1]?"?"+h[1]:"")+h[2]):m=h,et(this).a.get("popupMode")?(m=m||"about:blank",(s={width:500,height:600,top:0<(s=(window.screen.availHeight-600)/2)?s:0,left:0<(h=(window.screen.availWidth-500)/2)?h:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1}).target=s.target||m.target||"google_popup",s.width=s.width||690,s.height=s.height||500,(s=Tz(m,s))&&s.focus()):E0(window.location,m)},n.Wa=function(){var s=this;return Zn(this),this.h.app.delete().then(function(){var h=iB(dn(s));delete bT[h],s.reset(),s.$=!0})},n.Ib=function(s,h){Zn(this);var m=this,w=function epe(){for(var s=32,h=[];0<s;)h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),s--;return h.join("")}();if(!F0(et(this)))return C0(Error("Email link sign-in should be enabled to trigger email sending."));var S=function xpe(s){if(F0(s)){var h={url:lh(),handleCodeInApp:!0};(s=Ya(s,Mt.Z.auth.EmailAuthProvider.PROVIDER_ID))&&"function"==typeof s.emailLinkSignIn&&ex(h,s.emailLinkSignIn()),s=h.url;var m=lh();m instanceof gp||(m=kV(m)),s instanceof gp||(s=kV(s));var w=m;m=new gp(w);var S=!!s.j;S?AV(m,s.j):S=!!s.A,S?m.A=s.A:S=!!s.h,S?m.h=s.h:S=null!=s.C;var x=s.g;if(S)MV(m,s.C);else if(S=!!s.g)if("/"!=x.charAt(0)&&(w.h&&!w.g?x="/"+x:-1!=(w=m.g.lastIndexOf("/"))&&(x=m.g.substr(0,w+1)+x)),".."==x||"."==x)x="";else if(-1!=x.indexOf("./")||-1!=x.indexOf("/.")){w=0==x.lastIndexOf("/",0),x=x.split("/");for(var j=[],ne=0;ne<x.length;){var Ne=x[ne++];"."==Ne?w&&ne==x.length&&j.push(""):".."==Ne?((1<j.length||1==j.length&&""!=j[0])&&j.pop(),w&&ne==x.length&&j.push("")):(j.push(Ne),w=!0)}x=j.join("/")}return S?m.g=x:S=""!==s.a.toString(),S?xV(m,I7(s.a)):S=!!s.s,S&&(m.s=s.s),h.url=m.toString(),h}return null}(et(this)),x=new Xm(S.url);return function dfe(s,h){h?s.a.a.set(rs.Sa,h):Jm(s.a.a,rs.Sa)}(x,w),h&&h.a&&(function wpe(s,h,m){P0(jI,Jz(s,JSON.stringify(Hz(h))),m)}(w,h,dn(this)),S7(x,h.a.providerId)),function hfe(s,h){null!==h?s.a.a.set(rs.Qa,h?"1":"0"):Jm(s.a.a,rs.Qa)}(x,function Mpe(s){return!(!(s=Ya(s,Mt.Z.auth.EmailAuthProvider.PROVIDER_ID))||!s.forceSameDevice)}(et(this))),dh(this,function(j){return j&&((j=j.uid)?x.a.a.set(rs.Pa,j):Jm(x.a.a,rs.Pa)),S.url=x.toString(),Vn(m).sendSignInLinkToEmail(s,S)}).then(function(){var j=dn(m),ne={};ne.email=s,P0(k0,Jz(w,JSON.stringify(ne)),j)},function(j){throw fa(jI,dn(m)),fa(k0,dn(m)),j})},n.bc=function(s,h){Zn(this);var m=this;return Vn(this).signInWithEmailAndPassword(s,h).then(function(w){return dh(m,function(S){return S?Mp(m).then(function(){return xp(m,{code:"auth/email-already-in-use"},Mt.Z.auth.EmailAuthProvider.credential(s,h))}):w})})},n.Yb=function(s,h){Zn(this);var m=this;return dh(this,function(w){if(w){var S=Mt.Z.auth.EmailAuthProvider.credential(s,h);return w.linkWithCredential(S)}return Vn(m).createUserWithEmailAndPassword(s,h)})},n.ac=function(s){Zn(this);var h=this;return dh(this,function(m){return m?m.linkWithCredential(s).then(function(w){return w},function(w){if(w&&"auth/email-already-in-use"==w.code&&w.email&&w.credential)throw w;return xp(h,w,s)}):Vn(h).signInWithCredential(s)})},n.dc=function(s){Zn(this);var h=this,m=this.i;return this.i=null,dh(this,function(w){return w&&!zc(dn(h))?w.linkWithRedirect(s):Vn(h).signInWithRedirect(s)}).then(function(){},function(w){throw h.i=m,w})},n.cc=function(s,h){Zn(this);var m=this;return dh(this,function(w){return w?w.linkWithPhoneNumber(s,h).then(function(S){return new c3(S,function(x){if("auth/credential-already-in-use"==x.code)return xp(m,x);throw x})}):Ru(m).signInWithPhoneNumber(s,h).then(function(S){return new c3(S)})})},n.$b=function(){return Zn(this),Ru(this).signInAnonymously()},n.Xb=function(s,h){return Zn(this),Vn(this).signInWithEmailAndPassword(s,h)},p(ET,Qe),ET.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),ok(this.l(),(this.l().value||"").length),Qe.prototype.v.call(this)},ET.prototype.o=function(){this.i=null,Qe.prototype.o.call(this)},Jn(ET.prototype,{l:uh,H:Ap,u:K0,B:Y0,j:Q0,M:Ss,w:Gs}),p(dk,Qe),dk.prototype.v=function(){(function bge(s,h){function m(ne){h(ne)}for(var w=s.g?UV("firebaseui-id-tenant-selection-button",s.g||s.s.a):[],S=0;S<w.length;S++){var x=w[S];_r(s,x,Ga(m,lk(x,"tenantId")))}})(this,this.i),Qe.prototype.v.call(this)},dk.prototype.o=function(){this.i=null,Qe.prototype.o.call(this)},p(rB,Qe);var Sge=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],fk="optionFirst",oB={pc:fk,oc:"identifierFirst"},pk="*";function Pu(s,h){var m=this;this.s=vx(s),this.a={},Object.keys(h).forEach(function(w){m.a[w]=new Ege(h[w])}),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(w){this.ob=w||null},enumerable:!1})}function kp(s){s.j&&s.j.reset(),s.mb(),s.g&&s.g.m()}(n=Pu.prototype).Ub=function(s,h){var m=this;kp(this);var w=s.apiKey;return new os(function(S,x){if(m.a.hasOwnProperty(w)){var j=hk(m.a[w]).selectTenantUiHidden||null;if(function Cge(s){for(var h in s=s.a.get("displayMode"),oB)if(oB[h]===s)return oB[h];return fk}(m.a[w])===fk){var ne=[];h.forEach(function(Yt){Yt=Yt||"_";var hi=m.a[w].a.get("tenants");if(!hi)throw Error("Invalid tenant configuration!");(hi=hi[Yt]||hi[pk])?Yt={tenantId:"_"!==Yt?Yt:null,V:hi.fullLabel||null,displayName:hi.displayName,za:hi.iconUrl,ta:hi.buttonColor}:(Ka("Invalid tenant configuration: "+Yt+" is not configured!",void 0),Yt=null),Yt&&ne.push(Yt)});var Ne=function(Yt){Yt={tenantId:Yt,providerIds:kY(m.a[w],Yt||"_")},S(Yt)};if(1===ne.length)return void Ne(ne[0].tenantId);m.g=new dk(function(Yt){kp(m),j&&j(),Ne(Yt)},ne,MY(m.a[w]),xY(m.a[w]))}else m.g=new ET(function(){var Yt=m.g.j();if(Yt){for(var hi=0;hi<h.length;hi++){var Nu=kY(m.a[w],h[hi]||"_",Yt);if(0!==Nu.length)return Yt={tenantId:h[hi],providerIds:Nu,email:Yt},kp(m),j&&j(),void S(Yt)}m.g.a(J7({code:"no-matching-tenant-for-email"}).toString())}},MY(m.a[w]),xY(m.a[w]));m.g.render(m.s),(x=hk(m.a[w]).selectTenantUiShown||null)&&x()}else{var dt=Error("Invalid project configuration: API key is invalid!");dt.code="invalid-configuration",m.pb(dt),x(dt)}})},n.Pb=function(s,h){if(!this.a.hasOwnProperty(s))throw Error("Invalid project configuration: API key is invalid!");var m=h||void 0;sB(this.a[s],h||"_");try{this.i=Mt.Z.app(m).auth()}catch{var w=this.a[s].a.get("authDomain");if(!w)throw Error("Invalid project configuration: authDomain is required!");(s=Mt.Z.initializeApp({apiKey:s,authDomain:w},m)).auth().tenantId=h,this.i=s.auth()}return this.i},n.Zb=function(s,h){var m=this;return new os(function(w,S){function x(hi,Nu){m.j=new Qc(s),IY(m.j,m.s,hi,Nu)}var j=s.app.options.apiKey;m.a.hasOwnProperty(j)||S(Error("Invalid project configuration: API key is invalid!"));var ne=function Ige(s,h,m){return s=function Tge(s,h){var m=Sge,w=void 0===w?{}:w;return sB(s,h),function tpe(s,h,m){return m=void 0===m?{}:m,Object.keys(s).filter(function(w){return h.includes(w)}).reduce(function(w,S){return w[S]=s[S],w},m)}((s=s.a.get("tenants"))[h]||s[pk],m,w)}(s,h),(h=s.signInOptions)&&m&&(h=h.filter(function(w){return m.includes("string"==typeof w?w:w.provider)}),s.signInOptions=h),s}(m.a[j],s.tenantId||"_",h&&h.providerIds);kp(m),S={signInSuccessWithAuthResult:function(hi){return w(hi),!1}};var Yt,Ne=hk(m.a[j]).signInUiShown||null,dt=!1;S.uiChanged=function(hi,Nu){null===hi&&"callback"===Nu?((hi=VV("firebaseui-id-page-callback",m.s))&&Qa(hi),m.h=new rB,m.h.render(m.s)):dt||null===hi&&"spinner"===Nu||"blank"===Nu||(m.h&&(m.h.m(),m.h=null),dt=!0,Ne&&Ne(s.tenantId))},ne.callbacks=S,ne.credentialHelper="none",h&&h.email&&(Yt={emailHint:h.email}),m.j?m.j.Wa().then(function(){x(ne,Yt)}):x(ne,Yt)})},n.reset=function(){var s=this;return kr().then(function(){s.j&&s.j.Wa()}).then(function(){s.j=null,kp(s)})},n.Vb=function(){var s=this;this.h||this.A||(this.A=window.setTimeout(function(){kp(s),s.h=new rB,s.g=s.h,s.h.render(s.s),s.A=null},500))},n.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.m(),this.h=null)},n.Bb=function(){return kp(this),this.g=new XK,this.g.render(this.s),kr()},n.pb=function(s){var w,h=this,m=J7({code:s.code}).toString()||s.message;kp(this),s.retry&&"function"==typeof s.retry&&(w=function(){h.reset(),s.retry()}),this.g=new iY(m,w),this.g.render(this.s)},n.Rb=function(s){var h=this;return kr().then(function(){var m=h.i&&h.i.app.options.apiKey;if(!h.a.hasOwnProperty(m))throw Error("Invalid project configuration: API key is invalid!");if(sB(h.a[m],s.tenantId||"_"),!h.i.currentUser||h.i.currentUser.uid!==s.uid)throw Error("The user being processed does not match the signed in user!");return(m=hk(h.a[m]).beforeSignInSuccess||null)?m(s):s}).then(function(m){if(m.uid!==s.uid)throw Error("User with mismatching UID returned.");return m})},ki("firebaseui.auth.FirebaseUiHandler",Pu),ki("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",Pu.prototype.Ub),ki("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",Pu.prototype.Pb),ki("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",Pu.prototype.Zb),ki("firebaseui.auth.FirebaseUiHandler.prototype.reset",Pu.prototype.reset),ki("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",Pu.prototype.Vb),ki("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",Pu.prototype.mb),ki("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",Pu.prototype.Bb),ki("firebaseui.auth.FirebaseUiHandler.prototype.handleError",Pu.prototype.pb),ki("firebaseui.auth.FirebaseUiHandler.prototype.processUser",Pu.prototype.Rb),ki("firebaseui.auth.AuthUI",Qc),ki("firebaseui.auth.AuthUI.getInstance",function(s){return s=iB(s),bT[s]?bT[s]:null}),ki("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",Qc.prototype.Db),ki("firebaseui.auth.AuthUI.prototype.start",Qc.prototype.start),ki("firebaseui.auth.AuthUI.prototype.setConfig",Qc.prototype.ib),ki("firebaseui.auth.AuthUI.prototype.signIn",Qc.prototype.Wb),ki("firebaseui.auth.AuthUI.prototype.reset",Qc.prototype.reset),ki("firebaseui.auth.AuthUI.prototype.delete",Qc.prototype.Wa),ki("firebaseui.auth.AuthUI.prototype.isPendingRedirect",Qc.prototype.nb),ki("firebaseui.auth.AuthUIError",AI),ki("firebaseui.auth.AuthUIError.prototype.toJSON",AI.prototype.toJSON),ki("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",P3),ki("firebaseui.auth.CredentialHelper.NONE",$x),ki("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),os.prototype.catch=os.prototype.Ca,os.prototype.finally=os.prototype.fc}).apply(typeof global<"u"?global:typeof self<"u"?self:window)}.apply(typeof global<"u"?global:typeof self<"u"?self:window),typeof window<"u"&&(window.dialogPolyfill=jh());var P=firebaseui.auth,N=q(2011),L=q(7579),X=q(7669),le=q(8996);function ae(...n){const e=(0,X.yG)(n);return(0,le.D)(n,e)}var $e=q(9751),St=q(6451),Vt=q(5363),kt=q(8421),Ht=q(4482),Dt=q(5403);function Fn(n,e){return(0,Ht.e)((t,i)=>{let r=null,o=0,c=!1;const p=()=>c&&!r&&i.complete();t.subscribe((0,Dt.x)(i,_=>{r?.unsubscribe();let E=0;const T=o++;(0,kt.Xf)(n(_,T)).subscribe(r=(0,Dt.x)(i,R=>i.next(e?e(_,R,T,E++):R),()=>{r=null,p()}))},()=>{c=!0,p()}))})}var pt=q(4004),uu=q(6063);class _d extends L.x{constructor(e=1/0,t=1/0,i=uu.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:c}=this;t||(i.push(e),!r&&i.push(o.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let c=0;c<o.length&&!e.closed;c+=i?1:2)e.next(o[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const c=t.now();let p=0;for(let _=1;_<i.length&&i[_]<=c;_+=2)p=_;p&&i.splice(0,p+1)}}}var yl=q(3099);function ws(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,(0,yl.B)({connector:()=>new _d(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const ia=(0,q(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Rs(n,e){return(0,Ht.e)((t,i)=>{let r=0;t.subscribe((0,Dt.x)(i,o=>n.call(e,o,r++)&&i.next(o)))})}var vl=q(515);function Aa(n){return n<=0?()=>vl.E:(0,Ht.e)((e,t)=>{let i=0;e.subscribe((0,Dt.x)(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Wp(n){return(0,Ht.e)((e,t)=>{let i=!1;e.subscribe((0,Dt.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Kp(n=aw){return(0,Ht.e)((e,t)=>{let i=!1;e.subscribe((0,Dt.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function aw(){return new ia}var fc=q(4671);function go(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Rs((r,o)=>n(r,o,i)):fc.y,Aa(1),t?Wp(e):Kp(()=>new ia))}var yd=q(576);function lw(n,e){return(0,yd.m)(e)?Fn(()=>n,e):Fn(()=>n)}var N_=q(9468),kn=q(2122);q(259);var Ce=q(5861),Jr=q(9681),mo=q(4859),W=q(2090),Po=q(1877);const Vr=new Map,vd={activated:!1,tokenObservers:[]},H_={initialized:!1,enabled:!1};function fr(n){return Vr.get(n)||Object.assign({},vd)}function wl(){return H_}const $h="https://content-firebaseappcheck.googleapis.com/v1",hw="exchangeDebugToken",I={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class b{constructor(e,t,i,r,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new W.BH,yield function M(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new W.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const z=new W.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function _n(n,e){return li.apply(this,arguments)}function li(){return(li=(0,Ce.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const R=yield r.getHeartbeatsHeader();R&&(i["X-Firebase-Client"]=R)}const o={method:"POST",body:JSON.stringify(e),headers:i};let c,p;try{c=yield fetch(n,o)}catch(R){throw z.create("fetch-network-error",{originalErrorMessage:R?.message})}if(200!==c.status)throw z.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(R){throw z.create("fetch-parse-error",{originalErrorMessage:R?.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw z.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const E=1e3*Number(_[1]),T=Date.now();return{token:p.token,expireTimeMillis:T+E,issuedAtTimeMillis:T}})).apply(this,arguments)}const cu="firebase-app-check-database",bd=1,du="firebase-app-check-store";let bl=null;function Gh(n,e){return qh.apply(this,arguments)}function qh(){return(qh=(0,Ce.Z)(function*(n,e){const i=(yield function tg(){return bl||(bl=new Promise((n,e)=>{try{const t=indexedDB.open(cu,bd);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(z.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(du,{keyPath:"compositeKey"})}}catch(t){e(z.create("storage-open",{originalErrorMessage:t?.message}))}}),bl)}()).transaction(du,"readwrite"),o=i.objectStore(du).put({compositeKey:n,value:e});return new Promise((c,p)=>{o.onsuccess=_=>{c()},i.onerror=_=>{var E;p(z.create("storage-set",{originalErrorMessage:null===(E=_.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const ig=new Po.Yd("@firebase/app-check");function K_(n,e){return(0,W.hl)()?function ng(n,e){return Gh(function z_(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ig.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function xT(){return kT.apply(this,arguments)}function kT(){return(kT=(0,Ce.Z)(function*(){const n=wl();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const _k={error:"UNKNOWN_ERROR"};function RT(n){return W.US.encodeString(JSON.stringify(n),!1)}function rg(n){return J_.apply(this,arguments)}function J_(){return(J_=(0,Ce.Z)(function*(n,e=!1){const t=n.app;!function Ze(n){if(!fr(n).activated)throw z.create("use-before-activation",{appName:n.name})}(t);const i=fr(t);let o,r=i.token;if(r&&!pc(r)&&(i.token=void 0,r=void 0),!r){const _=yield i.cachedTokenPromise;_&&(pc(_)?r=_:yield K_(t,void 0))}if(!e&&r&&pc(r))return{token:r.token};let p,c=!1;if(function pw(){return wl().enabled}()){i.exchangeTokenPromise||(i.exchangeTokenPromise=_n(function wd(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${$h}/projects/${t}/apps/${i}:${hw}?key=${r}`,body:{debug_token:e}}}(t,yield xT()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);const _=yield i.exchangeTokenPromise;return yield K_(t,_),i.token=_,{token:_.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),r=yield fr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?ig.warn(_.message):ig.error(_),o=_}return r?o?p=pc(r)?{token:r.token,internalError:o}:ty(o):(p={token:r.token},i.token=r,yield K_(t,r)):p=ty(o),c&&function gw(n,e){const t=fr(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}(t,p),p})).apply(this,arguments)}function X_(n,e){const t=fr(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function og(n){const{app:e}=n,t=fr(e);let i=t.tokenRefresher;i||(i=function ey(n){const{app:e}=n;return new b((0,Ce.Z)(function*(){let i;if(i=fr(e).token?yield rg(n,!0):yield rg(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=fr(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},I.RETRIAL_MIN_WAIT,I.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function pc(n){return n.expireTimeMillis-Date.now()>0}function ty(n){return{token:RT(_k),error:n}}class mw{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=fr(this.app);for(const t of e)X_(this.app,t.next);return Promise.resolve()}}const UT="app-check-internal";!function Dk(){(0,Jr._registerComponent)(new mo.wA("app-check",n=>function ag(n,e){return new mw(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(UT).initialize()})),(0,Jr._registerComponent)(new mo.wA(UT,n=>function yk(n){return{getToken:e=>rg(n,e),addTokenListener:e=>function sg(n,e,t,i){const{app:r}=n,o=fr(r);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:i,type:e}],o.token&&pc(o.token)){const p=o.token;Promise.resolve().then(()=>{t({token:p.token}),og(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>og(n))}(n,"INTERNAL",e),removeTokenListener:e=>X_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Jr.registerVersion)("@firebase/app-check","0.6.3")}();class ug{constructor(){return(0,kn.vb)("app-check")}}typeof window<"u"&&window;const Ew=new u.OlP("angularfire2.auth.use-emulator"),jT=new u.OlP("angularfire2.auth.settings"),HT=new u.OlP("angularfire2.auth.tenant-id"),cg=new u.OlP("angularfire2.auth.langugage-code"),dg=new u.OlP("angularfire2.auth.use-device-language"),$T=new u.OlP("angularfire.auth.persistence"),GT=(n,e,t,i,r,o,c,p)=>(0,N.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),i&&(_.tenantId=i),_.languageCode=r,o&&_.useDeviceLanguage(),c)for(const[E,T]of Object.entries(c))_.settings[E]=T;return p&&_.setPersistence(p),_},[t,i,r,o,c,p]);let Cl=(()=>{class n{constructor(t,i,r,o,c,p,_,E,T,R,F,G){const K=new L.x,ue=ae(void 0).pipe((0,Vt.Q)(c.outsideAngular),Fn(()=>o.runOutsideAngular(()=>Promise.resolve().then(q.bind(q,9568)))),(0,pt.U)(()=>(0,N.on)(t,o,i)),(0,pt.U)(we=>GT(we,o,p,E,T,R,_,F)),ws({bufferSize:1,refCount:!1}));if(Ao(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ae(null);else{ue.pipe(go()).subscribe();const Ke=ue.pipe(Fn(ht=>ht.getRedirectResult().then(Pt=>Pt,()=>null)),kn.iC,ws({bufferSize:1,refCount:!1})),ut=ue.pipe(Fn(ht=>new $e.y(Pt=>({unsubscribe:o.runOutsideAngular(()=>ht.onAuthStateChanged(Nt=>Pt.next(Nt),Nt=>Pt.error(Nt),()=>Pt.complete()))})))),ct=ue.pipe(Fn(ht=>new $e.y(Pt=>({unsubscribe:o.runOutsideAngular(()=>ht.onIdTokenChanged(Nt=>Pt.next(Nt),Nt=>Pt.error(Nt),()=>Pt.complete()))}))));this.authState=Ke.pipe(lw(ut),(0,N_.R)(c.outsideAngular),(0,Vt.Q)(c.insideAngular)),this.user=Ke.pipe(lw(ct),(0,N_.R)(c.outsideAngular),(0,Vt.Q)(c.insideAngular)),this.idToken=this.user.pipe(Fn(ht=>ht?(0,le.D)(ht.getIdToken()):ae(null))),this.idTokenResult=this.user.pipe(Fn(ht=>ht?(0,le.D)(ht.getIdTokenResult()):ae(null))),this.credential=(0,St.T)(Ke,K,this.authState.pipe(Rs(ht=>!ht))).pipe((0,pt.U)(ht=>ht?.user?ht:null),(0,N_.R)(c.outsideAngular),(0,Vt.Q)(c.insideAngular))}return(0,N.pX)(this,ue,o,{spy:{apply:(we,Ke,ut)=>{(we.startsWith("signIn")||we.startsWith("createUser"))&&ut.then(ct=>K.next(ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(N.Dh),u.LFG(N.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(kn.HU),u.LFG(Ew,8),u.LFG(jT,8),u.LFG(HT,8),u.LFG(cg,8),u.LFG(dg,8),u.LFG($T,8),u.LFG(ug,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Pk=(()=>{class n{constructor(){Mt.Z.registerVersion("angularfire",kn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Cl]}),n})(),Nk=(()=>{class n{constructor(t,i,r,o){const c=(0,N.on)(t,o,i),p=r;if(!window.firebaseUiInstance){const _=c.auth();if(p){const E=p[0].startsWith("http")?p[0]:`http://${p.join(":")}`;_.useEmulator(E)}window.firebaseUiInstance=new P.AuthUI(_)}this.firebaseUiInstance=window.firebaseUiInstance}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(N.Dh),u.LFG(N.xv,8),u.LFG(Ew,8),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ok=Mt.Z,qT=V;let Iw=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:"firebaseUIAuthConfig",useValue:t},{provide:"firebaseUIAuthConfigFeature",useValue:{}}]}}static forFeature(t){return{ngModule:n,providers:[{provide:"firebaseUIAuthConfigFeature",useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Nk],imports:[ms]}),n})();var Zs=q(5577);function ui(n,e){return(0,yd.m)(e)?(0,Zs.z)(n,e,1):(0,Zs.z)(n,1)}class hg{}class Tw{}class xa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),c=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(c):this.headers.set(o,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof xa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new xa;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof xa?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let c=this.headers.get(t);if(!c)return;c=c.filter(p=>-1===o.indexOf(p)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Uk{encodeKey(e){return Sw(e)}encodeValue(e){return Sw(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Bk=/%(\d[a-f0-9])/gi,jk={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Sw(n){return encodeURIComponent(n).replace(Bk,(e,t)=>jk[t]??e)}function Dw(n){return`${n}`}class Td{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Uk,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Vk(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[c,p]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],_=t.get(c)||[];_.push(p),t.set(c,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(Dw):[Dw(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Td({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Dw(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(Dw(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Aw{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Mw(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function xw(n){return typeof Blob<"u"&&n instanceof Blob}function zT(n){return typeof FormData<"u"&&n instanceof FormData}class zh{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function ZT(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new xa),this.context||(this.context=new Aw),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+c}}else this.params=new Td,this.urlWithParams=t}serializeBody(){return null===this.body?null:Mw(this.body)||xw(this.body)||zT(this.body)||function Hk(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Td?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||zT(this.body)?null:xw(this.body)?this.body.type||null:Mw(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Td?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,E=e.params||this.params;const T=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((R,F)=>R.set(F,e.setHeaders[F]),_)),e.setParams&&(E=Object.keys(e.setParams).reduce((R,F)=>R.set(F,e.setParams[F]),E)),new zh(t,i,o,{params:E,headers:_,context:T,reportProgress:p,responseType:r,withCredentials:c})}}var pr=(()=>((pr=pr||{})[pr.Sent=0]="Sent",pr[pr.UploadProgress=1]="UploadProgress",pr[pr.ResponseHeader=2]="ResponseHeader",pr[pr.DownloadProgress=3]="DownloadProgress",pr[pr.Response=4]="Response",pr[pr.User=5]="User",pr))();class fg{constructor(e,t=200,i="OK"){this.headers=e.headers||new xa,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class WT extends fg{constructor(e={}){super(e),this.type=pr.ResponseHeader}clone(e={}){return new WT({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Wh extends fg{constructor(e={}){super(e),this.type=pr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Wh({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class KT extends fg{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function pg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let YT=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof zh)o=t;else{let _,E;_=r.headers instanceof xa?r.headers:new xa(r.headers),r.params&&(E=r.params instanceof Td?r.params:new Td({fromObject:r.params})),o=new zh(t,i,void 0!==r.body?r.body:null,{headers:_,context:r.context,params:E,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=ae(o).pipe(ui(_=>this.handler.handle(_)));if(t instanceof zh||"events"===r.observe)return c;const p=c.pipe(Rs(_=>_ instanceof Wh));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return p.pipe((0,pt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return p.pipe((0,pt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return p.pipe((0,pt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return p.pipe((0,pt.U)(_=>_.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Td).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,pg(r,i))}post(t,i,r={}){return this.request("POST",t,pg(r,i))}put(t,i,r={}){return this.request("PUT",t,pg(r,i))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(hg))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function kw(n,e){return e(n)}function Sd(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const Rw=new u.OlP("HTTP_INTERCEPTORS"),_c=new u.OlP("HTTP_INTERCEPTOR_FNS");function Gk(){let n=null;return(e,t)=>(null===n&&(n=((0,u.f3M)(Rw,{optional:!0})??[]).reduceRight(Sd,kw)),n(e,t))}let ay=(()=>{class n extends hg{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=Array.from(new Set(this.injector.get(_c)));this.chain=i.reduceRight((r,o)=>function $k(n,e,t){return(i,r)=>t.runInContext(()=>e(i,o=>n(o,r)))}(r,o,this.injector),kw)}return this.chain(t,i=>this.backend.handle(i))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Tw),u.LFG(u.lqb))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Nw=/^\)\]\}',?\n/;let Ow=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new $e.y(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((G,K)=>r.setRequestHeader(G,K.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const G=t.detectContentTypeHeader();null!==G&&r.setRequestHeader("Content-Type",G)}if(t.responseType){const G=t.responseType.toLowerCase();r.responseType="json"!==G?G:"text"}const o=t.serializeBody();let c=null;const p=()=>{if(null!==c)return c;const G=r.statusText||"OK",K=new xa(r.getAllResponseHeaders()),ue=function zk(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return c=new WT({headers:K,status:r.status,statusText:G,url:ue}),c},_=()=>{let{headers:G,status:K,statusText:ue,url:we}=p(),Ke=null;204!==K&&(Ke=typeof r.response>"u"?r.responseText:r.response),0===K&&(K=Ke?200:0);let ut=K>=200&&K<300;if("json"===t.responseType&&"string"==typeof Ke){const ct=Ke;Ke=Ke.replace(Nw,"");try{Ke=""!==Ke?JSON.parse(Ke):null}catch(ht){Ke=ct,ut&&(ut=!1,Ke={error:ht,text:Ke})}}ut?(i.next(new Wh({body:Ke,headers:G,status:K,statusText:ue,url:we||void 0})),i.complete()):i.error(new KT({error:Ke,headers:G,status:K,statusText:ue,url:we||void 0}))},E=G=>{const{url:K}=p(),ue=new KT({error:G,status:r.status||0,statusText:r.statusText||"Unknown Error",url:K||void 0});i.error(ue)};let T=!1;const R=G=>{T||(i.next(p()),T=!0);let K={type:pr.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(K.total=G.total),"text"===t.responseType&&r.responseText&&(K.partialText=r.responseText),i.next(K)},F=G=>{let K={type:pr.UploadProgress,loaded:G.loaded};G.lengthComputable&&(K.total=G.total),i.next(K)};return r.addEventListener("load",_),r.addEventListener("error",E),r.addEventListener("timeout",E),r.addEventListener("abort",E),t.reportProgress&&(r.addEventListener("progress",R),null!==o&&r.upload&&r.upload.addEventListener("progress",F)),r.send(o),i.next({type:pr.Sent}),()=>{r.removeEventListener("error",E),r.removeEventListener("abort",E),r.removeEventListener("load",_),r.removeEventListener("timeout",E),t.reportProgress&&(r.removeEventListener("progress",R),null!==o&&r.upload&&r.upload.removeEventListener("progress",F)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(_a))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Fw=new u.OlP("XSRF_ENABLED"),Wk=new u.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Qh=new u.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class tS{}let Jh=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=As(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Se),u.LFG(u.Lbi),u.LFG(Wk))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function gg(n,e){const t=n.url.toLowerCase();if(!(0,u.f3M)(Fw)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=(0,u.f3M)(tS).getToken(),r=(0,u.f3M)(Qh);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var Ki=(()=>((Ki=Ki||{})[Ki.Interceptors=0]="Interceptors",Ki[Ki.LegacyInterceptors=1]="LegacyInterceptors",Ki[Ki.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Ki[Ki.NoXsrfProtection=3]="NoXsrfProtection",Ki[Ki.JsonpSupport=4]="JsonpSupport",Ki[Ki.RequestsMadeViaParent=5]="RequestsMadeViaParent",Ki))();function Xh(n,e){return{\u0275kind:n,\u0275providers:e}}function Yk(...n){const e=[YT,Ow,ay,{provide:hg,useExisting:ay},{provide:Tw,useExisting:Ow},{provide:_c,useValue:gg,multi:!0},{provide:Fw,useValue:!0},{provide:tS,useClass:Jh}];for(const t of n)e.push(...t.\u0275providers);return(0,u.MR2)(e)}const Lw=new u.OlP("LEGACY_INTERCEPTOR_FN");let Qk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Yk(Xh(Ki.LegacyInterceptors,[{provide:Lw,useFactory:Gk},{provide:_c,useExisting:Lw,multi:!0}]))]}),n})();const{isArray:Jk}=Array,{getPrototypeOf:Xk,prototype:eR,keys:tR}=Object;function Dd(n){if(1===n.length){const e=n[0];if(Jk(e))return{args:e,keys:null};if(function hu(n){return n&&"object"==typeof n&&Xk(n)===eR}(e)){const t=tR(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:nR}=Array;function rR(n){return(0,pt.U)(e=>function iR(n,e){return nR(e)?n(...e):n(e)}(n,e))}function sR(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}let oR=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),yc=(()=>{class n extends oR{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const ka=new u.OlP("NgValueAccessor"),lR={provide:ka,useExisting:(0,u.Gpc)(()=>ef),multi:!0},Ra=new u.OlP("CompositionEventMode");let ef=(()=>{class n extends oR{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function uR(){const n=ge()?ge().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Ra,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&u.NdJ("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[u._Bn([lR]),u.qOj]}),n})();const aS=!1,Ps=new u.OlP("NgValidators"),wc=new u.OlP("NgAsyncValidators");function pS(n){return null!=n}function Hw(n){const e=(0,u.QGY)(n)?(0,le.D)(n):n;if(aS&&!(0,u.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new u.vHH(-1101,t)}return e}function gS(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function mS(n,e){return e.map(t=>t(n))}function $w(n){return n.map(e=>function TB(n){return!n.validate}(e)?e:t=>e.validate(t))}function fu(n){return null!=n?function Gw(n){if(!n)return null;const e=n.filter(pS);return 0==e.length?null:function(t){return gS(mS(t,e))}}($w(n)):null}function _g(n){return null!=n?function _S(n){if(!n)return null;const e=n.filter(pS);return 0==e.length?null:function(t){return function oS(...n){const e=(0,X.jO)(n),{args:t,keys:i}=Dd(n),r=new $e.y(o=>{const{length:c}=t;if(!c)return void o.complete();const p=new Array(c);let _=c,E=c;for(let T=0;T<c;T++){let R=!1;(0,kt.Xf)(t[T]).subscribe((0,Dt.x)(o,F=>{R||(R=!0,E--),p[T]=F},()=>_--,void 0,()=>{(!_||!R)&&(E||o.next(i?sR(i,p):p),o.complete())}))}});return e?r.pipe(rR(e)):r}(mS(t,e).map(Hw)).pipe((0,pt.U)(gS))}}($w(n)):null}function uy(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function vS(n){return n?Array.isArray(n)?n:[n]:[]}function qw(n,e){return Array.isArray(n)?n.includes(e):n===e}function wS(n,e){const t=vS(e);return vS(n).forEach(r=>{qw(t,r)||t.push(r)}),t}function Zw(n,e){return vS(e).filter(t=>!qw(n,t))}class dR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=fu(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_g(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class zs extends dR{get formDirective(){return null}get path(){return null}}class No extends dR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class bS{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let cy=(()=>{class n extends bS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(No,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[u.qOj]}),n})();const yg="VALID",fy="INVALID",pu="PENDING",Il="DISABLED";function Eg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class _y{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===yg}get invalid(){return this.status===fy}get pending(){return this.status==pu}get disabled(){return this.status===Il}get enabled(){return this.status!==Il}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Zw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Zw(e,this._rawAsyncValidators))}hasValidator(e){return qw(this._rawValidators,e)}hasAsyncValidator(e){return qw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=pu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Il,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yg,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yg||this.status===pu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Il:yg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=pu,this._hasOwnPendingAsyncValidator=!0;const t=Hw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Il:this.errors?fy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pu)?pu:this._anyControlsHaveStatus(fy)?fy:yg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Eg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function wg(n){return Array.isArray(n)?fu(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function py(n){return Array.isArray(n)?_g(n):n||null}(this._rawAsyncValidators)}}const Ad=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>nf}),nf="always";function Ig(n,e,t=nf){(function Yw(n,e){const t=function yS(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(uy(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function cR(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(uy(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Ns(e._rawValidators,r),Ns(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Jw(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&MS(n,e)})}(n,e),function CR(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function AS(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&MS(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function DS(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ns(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function MS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function PS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function NS(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const wy=class extends _y{constructor(e=null,t,i){super(function vg(n){return(Eg(n)?n.validators:n)||null}(t),function bg(n,e){return(Eg(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Eg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=NS(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){PS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){PS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){NS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},LS={provide:No,useExisting:(0,u.Gpc)(()=>sf)},rb=(()=>Promise.resolve())();let sf=(()=>{class n extends No{constructor(t,i,r,o,c,p){super(),this._changeDetectorRef=c,this.callSetDisabledState=p,this.control=new wy,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function sa(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===ef?t=o:function TR(n){return Object.getPrototypeOf(n.constructor)===yc}(o)?i=o:r=o}),r||i||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Xw(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ig(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){rb.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&(0,u.D6c)(i);rb.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Cg(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(zs,9),u.Y36(Ps,10),u.Y36(wc,10),u.Y36(ka,10),u.Y36(u.sBO,8),u.Y36(Ad,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([LS]),u.qOj,u.TTD]}),n})(),US=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const Md=new u.OlP("NgModelWithFormControlWarning");let Dy,Rd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[US]}),n})(),zS=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ad,useValue:t.callSetDisabledState??nf}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Rd]}),n})(),WS=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Md,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ad,useValue:t.callSetDisabledState??nf}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Rd]}),n})();try{Dy=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Dy=!1}let Nd,KS=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Np(n){return n===Wl}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Dy)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ay(n){return function fb(){if(null==Nd&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Nd=!0}))}finally{Nd=Nd||!1}return Nd}()?n:!!n.capture}function vb(n){return Array.isArray(n)?n:[n]}function tn(n){return n instanceof u.SBq?n.nativeElement:n}var jP=q(9672);function wb(...n){const e=(0,X.yG)(n),t=(0,X.jO)(n),{args:i,keys:r}=Dd(n);if(0===i.length)return(0,le.D)([],e);const o=new $e.y(function pf(n,e,t=fc.y){return i=>{gD(e,()=>{const{length:r}=n,o=new Array(r);let c=r,p=r;for(let _=0;_<r;_++)gD(e,()=>{const E=(0,le.D)(n[_],e);let T=!1;E.subscribe((0,Dt.x)(i,R=>{o[_]=R,T||(T=!0,p--),p||i.next(t(o.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,e,r?c=>sR(r,c):fc.y));return t?o.pipe(rR(t)):o}function gD(n,e,t){n?(0,jP.f)(t,n,e):e()}var Cc=q(8189);function Ai(...n){return function ky(){return(0,Cc.J)(1)}()((0,le.D)(n,(0,X.yG)(n)))}var Ry=q(4986);function bb(n,e=Ry.z){return(0,Ht.e)((t,i)=>{let r=null,o=null,c=null;const p=()=>{if(r){r.unsubscribe(),r=null;const E=o;o=null,i.next(E)}};function _(){const E=c+n,T=e.now();if(T<E)return r=this.schedule(void 0,E-T),void i.add(r);p()}t.subscribe((0,Dt.x)(i,E=>{o=E,c=e.now(),r||(r=e.schedule(_,n),i.add(r))},()=>{p(),i.complete()},void 0,()=>{o=r=null}))})}function Ng(...n){const e=(0,X.yG)(n);return(0,Ht.e)((t,i)=>{(e?Ai(n,t,e):Ai(n,t)).subscribe(i)})}var Eb=q(5032);function mD(n){return(0,Ht.e)((e,t)=>{(0,kt.Xf)(n).subscribe((0,Dt.x)(t,()=>t.complete(),Eb.Z)),!t.closed&&e.subscribe(t)})}const Cb=new Set;let gf,$P=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Og}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function GP(n){if(!Cb.has(n))try{gf||(gf=document.createElement("style"),gf.setAttribute("type","text/css"),document.head.appendChild(gf)),gf.sheet&&(gf.sheet.insertRule(`@media ${n} {body{ }}`,0),Cb.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(KS))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Og(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let qP=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new L.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return _D(vb(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let o=wb(_D(vb(t)).map(c=>this._registerQuery(c).observable));return o=Ai(o.pipe(Aa(1)),o.pipe(function Aj(n){return Rs((e,t)=>n<=t)}(1),bb(0))),o.pipe((0,pt.U)(c=>{const p={matches:!1,breakpoints:{}};return c.forEach(({matches:_,query:E})=>{p.matches=p.matches||_,p.breakpoints[E]=_}),p}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),o={observable:new $e.y(c=>{const p=_=>this._zone.run(()=>c.next(_));return i.addListener(p),()=>{i.removeListener(p)}}).pipe(Ng(i),(0,pt.U)(({matches:c})=>({query:t,matches:c})),mD(this._destroySubject)),mql:i};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(u.LFG($P),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _D(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const Sb="cdk-high-contrast-black-on-white",bD="cdk-high-contrast-white-on-black",Db="cdk-high-contrast-active";let aN=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=(0,u.f3M)(qP).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Db,Sb,bD),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(Db,Sb):2===i&&t.add(Db,bD)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(KS),u.LFG(Se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ED=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const MD=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function pN(){return!0}});let mf=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function JS(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(aN),u.LFG(MD,8),u.LFG(Se))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[ED,ED]}),n})();class CN{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Ab=Ay({passive:!0,capture:!0});class ND{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function pb(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){const o=this._events.get(t);if(o){const c=o.get(i);c?c.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Ab)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const o=r.get(t);o&&(o.delete(i),0===o.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Ab)))}}const OD={enterDuration:225,exitDuration:150},FD=Ay({passive:!0,capture:!0}),LD=["mousedown","touchstart"],UD=["mouseup","mouseleave","touchend","touchcancel"];class Ly{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=tn(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...OD,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const c=i.radius||function TN(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),p=e-r.left,_=t-r.top,E=o.enterDuration,T=document.createElement("div");T.classList.add("mat-ripple-element"),T.style.left=p-c+"px",T.style.top=_-c+"px",T.style.height=2*c+"px",T.style.width=2*c+"px",null!=i.color&&(T.style.backgroundColor=i.color),T.style.transitionDuration=`${E}ms`,this._containerElement.appendChild(T);const R=window.getComputedStyle(T),G=R.transitionDuration,K="none"===R.transitionProperty||"0s"===G||"0s, 0s"===G||0===r.width&&0===r.height,ue=new CN(this,T,i,K);T.style.transform="scale3d(1, 1, 1)",ue.state=0,i.persistent||(this._mostRecentTransientRipple=ue);let we=null;return!K&&(E||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ke=()=>this._finishRippleTransition(ue),ut=()=>this._destroyRipple(ue);T.addEventListener("transitionend",Ke),T.addEventListener("transitioncancel",ut),we={onTransitionEnd:Ke,onTransitionCancel:ut}}),this._activeRipples.set(ue,we),(K||!E)&&this._finishRippleTransition(ue),ue}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...OD,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=tn(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,LD.forEach(i=>{Ly._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{UD.forEach(t=>{this._triggerElement.addEventListener(t,this,FD)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function Ug(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function tN(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(LD.forEach(t=>Ly._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&UD.forEach(t=>e.removeEventListener(t,this,FD)))}}Ly._eventManager=new ND;let kN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[mf]}),n})();class yo extends L.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Vg(n){return new $e.y(e=>{(0,kt.Xf)(n()).subscribe(e)})}var RN=q(9635);function Bg(n,e){const t=(0,yd.m)(n)?n:()=>n,i=r=>r.error(t());return new $e.y(e?r=>e.schedule(i,0,r):i)}var xb=q(727);function jy(){return(0,Ht.e)((n,e)=>{let t=null;n._refCount++;const i=(0,Dt.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class Hy extends $e.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ht.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xb.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Dt.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xb.w0.EMPTY)}return e}refCount(){return jy()(this)}}var bs=q(8505);function Al(n){return(0,Ht.e)((e,t)=>{let o,i=null,r=!1;i=e.subscribe((0,Dt.x)(t,void 0,void 0,c=>{o=(0,kt.Xf)(n(c,Al(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function Ic(n,e){return(0,Ht.e)(function kb(n,e,t,i,r){return(o,c)=>{let p=t,_=e,E=0;o.subscribe((0,Dt.x)(c,T=>{const R=E++;_=p?n(_,T,R):(p=!0,T),i&&c.next(_)},r&&(()=>{p&&c.next(_),c.complete()})))}}(n,e,arguments.length>=2,!0))}function jg(n){return n<=0?()=>vl.E:(0,Ht.e)((e,t)=>{let i=[];e.subscribe((0,Dt.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function $y(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Rs((r,o)=>n(r,o,i)):fc.y,jg(1),t?Wp(e):Kp(()=>new ia))}function Rb(n){return(0,Ht.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const yn="primary",_f=Symbol("RouteTitle");class Pb{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ld(n){return new Pb(n)}function ON(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const c=i[o],p=n[o];if(c.startsWith(":"))r[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Pa(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!jD(n[r],e[r]))return!1;return!0}function jD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}return n===e}function Nb(n){return Array.prototype.concat.apply([],n)}function Ob(n){return n.length>0?n[n.length-1]:null}function ts(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Tc(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,le.D)(Promise.resolve(n)):ae(n)}const ns=!1,yf={exact:function FN(n,e,t){if(!Ud(n.segments,e.segments)||!qy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!FN(n.children[i],e.children[i],t))return!1;return!0},subset:Gy},HD={exact:function k6(n,e){return Pa(n,e)},subset:function GD(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>jD(n[t],e[t]))},ignored:()=>!0};function $D(n,e,t){return yf[t.paths](n.root,e.root,t.matrixParams)&&HD[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Gy(n,e,t){return vf(n,e,e.segments,t)}function vf(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Ud(r,t)||e.hasChildren()||!qy(r,t,i))}if(n.segments.length===t.length){if(!Ud(n.segments,t)||!qy(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!Gy(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Ud(n.segments,r)&&qy(n.segments,r,i)&&n.children[yn])&&vf(n.children[yn],e,o,i)}}function qy(n,e,t){return e.every((i,r)=>HD[t](n[r].parameters,i.parameters))}class Ml{constructor(e=new Sn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ld(this.queryParams)),this._queryParamMap}toString(){return qD.serialize(this)}}class Sn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ts(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bd(this)}}class wf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ld(this.parameters)),this._parameterMap}toString(){return Fb(this)}}function Ud(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Vd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new Zy},providedIn:"root"}),n})();class Zy{parse(e){const t=new WD(e);return new Ml(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${jd(e.root,!0)}`,i=function R6(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Hg(t)}=${Hg(r)}`).join("&"):`${Hg(t)}=${Hg(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function BN(n){return encodeURI(n)}(e.fragment)}`:""}`}}const qD=new Zy;function Bd(n){return n.segments.map(e=>Fb(e)).join("/")}function jd(n,e){if(!n.hasChildren())return Bd(n);if(e){const t=n.children[yn]?jd(n.children[yn],!1):"",i=[];return ts(n.children,(r,o)=>{o!==yn&&i.push(`${o}:${jd(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function UN(n,e){let t=[];return ts(n.children,(i,r)=>{r===yn&&(t=t.concat(e(i,r)))}),ts(n.children,(i,r)=>{r!==yn&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===yn?[jd(n.children[yn],!1)]:[`${r}:${jd(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[yn]?`${Bd(n)}/${t[0]}`:`${Bd(n)}/(${t.join("//")})`}}function VN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hg(n){return VN(n).replace(/%3B/gi,";")}function zy(n){return VN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vu(n){return decodeURIComponent(n)}function ZD(n){return vu(n.replace(/\+/g,"%20"))}function Fb(n){return`${zy(n.path)}${function Lb(n){return Object.keys(n).map(e=>`;${zy(e)}=${zy(n[e])}`).join("")}(n.parameters)}`}const jN=/^[^\/()?;=#]+/;function Ub(n){const e=n.match(jN);return e?e[0]:""}const HN=/^[^=?&#]+/,GN=/^[^&#]+/;class WD{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Sn([],{}):new Sn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[yn]=new Sn(e,t)),i}parseSegment(){const e=Ub(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,ns);return this.capture(e),new wf(vu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ub(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Ub(this.remaining);r&&(i=r,this.capture(i))}e[vu(t)]=vu(i)}parseQueryParam(e){const t=function $N(n){const e=n.match(HN);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const c=function zD(n){const e=n.match(GN);return e?e[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=ZD(t),o=ZD(i);if(e.hasOwnProperty(r)){let c=e[r];Array.isArray(c)||(c=[c],e[r]=c),c.push(o)}else e[r]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Ub(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new u.vHH(4010,ns);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=yn);const c=this.parseChildren();t[o]=1===Object.keys(c).length?c[yn]:new Sn([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,ns)}}function Vb(n){return n.segments.length>0?new Sn([],{[yn]:n}):n}function $g(n){const e={};for(const i of Object.keys(n.children)){const o=$g(n.children[i]);(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function KD(n){if(1===n.numberOfChildren&&n.children[yn]){const e=n.children[yn];return new Sn(n.segments.concat(e.segments),e.children)}return n}(new Sn(n.segments,e))}function Hd(n){return n instanceof Ml}const Bb=!1;function QD(n,e,t,i,r){if(0===t.length)return Cf(e.root,e.root,e.root,i,r);const o=function Hb(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ZN(!0,0,n);let e=0,t=!1;const i=n.reduce((r,o,c)=>{if("object"==typeof o&&null!=o){if(o.outlets){const p={};return ts(o.outlets,(_,E)=>{p[E]="string"==typeof _?_.split("/"):_}),[...r,{outlets:p}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===c?(o.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&r.push(p))}),r):[...r,o]},[]);return new ZN(t,e,i)}(t);return o.toRoot()?Cf(e.root,e.root,new Sn([],{}),i,r):function c(_){const E=function N6(n,e,t,i){if(n.isAbsolute)return new Gg(e.root,!0,0);if(-1===i)return new Gg(t,t===e.root,0);return function zN(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new u.vHH(4005,Bb&&"Invalid number of '../'");r=i.segments.length}return new Gg(i,!1,r-o)}(t,i+(bf(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,_),T=E.processChildren?qg(E.segmentGroup,E.index,o.commands):XD(E.segmentGroup,E.index,o.commands);return Cf(e.root,E.segmentGroup,T,i,r)}(n.snapshot?._lastPathIndex)}function bf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ef(n){return"object"==typeof n&&null!=n&&n.outlets}function Cf(n,e,t,i,r){let c,o={};i&&ts(i,(_,E)=>{o[E]=Array.isArray(_)?_.map(T=>`${T}`):`${_}`}),c=n===e?t:JD(n,e,t);const p=Vb($g(c));return new Ml(p,o,r)}function JD(n,e,t){const i={};return ts(n.children,(r,o)=>{i[o]=r===e?t:JD(r,e,t)}),new Sn(n.segments,i)}class ZN{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&bf(i[0]))throw new u.vHH(4003,Bb&&"Root segment cannot have matrix parameters");const r=i.find(Ef);if(r&&r!==Ob(i))throw new u.vHH(4004,Bb&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gg{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function XD(n,e,t){if(n||(n=new Sn([],{})),0===n.segments.length&&n.hasChildren())return qg(n,e,t);const i=function F6(n,e,t){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;const c=n.segments[r],p=t[i];if(Ef(p))break;const _=`${p}`,E=i<t.length-1?t[i+1]:null;if(r>0&&void 0===_)break;if(_&&E&&"object"==typeof E&&void 0===E.outlets){if(!Zg(_,E,c))return o;i+=2}else{if(!Zg(_,{},c))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new Sn(n.segments.slice(0,i.pathIndex),{});return o.children[yn]=new Sn(n.segments.slice(i.pathIndex),n.children),qg(o,0,r)}return i.match&&0===r.length?new Sn(n.segments,{}):i.match&&!n.hasChildren()?If(n,e,t):i.match?qg(n,0,r):If(n,e,t)}function qg(n,e,t){if(0===t.length)return new Sn(n.segments,{});{const i=function O6(n){return Ef(n[0])?n[0].outlets:{[yn]:n}}(t),r={};return!i[yn]&&n.children[yn]&&1===n.numberOfChildren&&0===n.children[yn].segments.length?qg(n.children[yn],e,t):(ts(i,(o,c)=>{"string"==typeof o&&(o=[o]),null!==o&&(r[c]=XD(n.children[c],e,o))}),ts(n.children,(o,c)=>{void 0===i[c]&&(r[c]=o)}),new Sn(n.segments,r))}}function If(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const o=t[r];if(Ef(o)){const _=L6(o.outlets);return new Sn(i,_)}if(0===r&&bf(t[0])){i.push(new wf(n.segments[e].path,$b(t[0]))),r++;continue}const c=Ef(o)?o.outlets[yn]:`${o}`,p=r<t.length-1?t[r+1]:null;c&&p&&bf(p)?(i.push(new wf(c,$b(p))),r+=2):(i.push(new wf(c,{})),r++)}return new Sn(i,{})}function L6(n){const e={};return ts(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=If(new Sn([],{}),0,t))}),e}function $b(n){const e={};return ts(n,(t,i)=>e[i]=`${t}`),e}function Zg(n,e,t){return n==t.path&&Pa(e,t.parameters)}const Tf="imperative";class Na{constructor(e,t){this.id=e,this.url=t}}class e1 extends Na{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xl extends Na{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zg extends Na{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wy extends Na{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class Ky extends Na{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class U6 extends Na{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WN extends Na{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KN extends Na{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class YN extends Na{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yy extends Na{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QN{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class V6{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class B6{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class j6{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JN{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XN{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t1{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let n1=(()=>{class n{createUrlTree(t,i,r,o,c,p){return QD(t||i.root,r,o,c,p)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),$6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(e){return n1.\u0275fac(e)},providedIn:"root"}),n})();class aa{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Gb(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Gb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Wg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Wg(e,this._root).map(t=>t.value)}}function Gb(n,e){if(n===e.value)return e;for(const t of e.children){const i=Gb(n,t);if(i)return i}return null}function Wg(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Wg(n,t);if(i.length)return i.unshift(e),i}return[]}class wu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Kg(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Fo extends aa{constructor(e,t){super(e),this.snapshot=t,Wb(this,e)}toString(){return this.snapshot.toString()}}function s1(n,e){const t=function qb(n,e){const c=new Yg([],{},{},"",{},yn,e,null,n.root,-1,{});return new zb("",new wu(c,[]))}(n,e),i=new yo([new wf("",{})]),r=new yo({}),o=new yo({}),c=new yo({}),p=new yo(""),_=new Sc(i,r,c,p,o,yn,e,t.root);return _.snapshot=t.root,new Fo(new wu(_,[]),t)}class Sc{constructor(e,t,i,r,o,c,p,_){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=c,this.component=p,this.title=this.data?.pipe((0,pt.U)(E=>E[_f]))??ae(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>Ld(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>Ld(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function o1(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],o=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function Zb(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Yg{get title(){return this.data?.[_f]}constructor(e,t,i,r,o,c,p,_,E,T,R){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=c,this.component=p,this.routeConfig=_,this._urlSegment=E,this._lastPathIndex=T,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ld(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ld(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zb extends aa{constructor(e,t){super(t),this.url=e,Wb(this,t)}toString(){return Kb(this._root)}}function Wb(n,e){e.value._routerState=n,e.children.forEach(t=>Wb(n,t))}function Kb(n){const e=n.children.length>0?` { ${n.children.map(Kb).join(", ")} } `:"";return`${n.value}${e}`}function Qy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Pa(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Pa(e.params,t.params)||n.params.next(t.params),function BD(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Pa(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Pa(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Yb(n,e){const t=Pa(n.params,e.params)&&function LN(n,e){return Ud(n,e)&&n.every((t,i)=>Pa(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Yb(n.parent,e.parent))}function Qg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Qb(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Qg(n,i,r);return Qg(n,i)})}(n,e,t);return new wu(i,r)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const c=o.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>Qg(n,p)),c}}const i=function Dc(n){return new Sc(new yo(n.url),new yo(n.params),new yo(n.queryParams),new yo(n.fragment),new yo(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(o=>Qg(n,o));return new wu(i,r)}}const Jy="ngNavigationCancelingError";function Xy(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Hd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=kl(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function kl(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[Jy]=!0,i.cancellationCode=e,t&&(i.url=t),i}function l1(n){return tO(n)&&Hd(n.url)}function tO(n){return n&&n[Jy]}class nO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Jg,this.attachRef=null}}let Jg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new nO,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ev=!1;let Jb=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=yn,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(Jg),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,ev);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,ev);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,ev);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new u.vHH(4013,ev);this._activatedRoute=t;const r=this.location,c=t.snapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,_=new u1(t,p,r.injector);if(i&&function G6(n){return!!n.resolveComponentFactory}(i)){const E=i.resolveComponentFactory(c);this.activated=r.createComponent(E,r.length,_)}else this.activated=r.createComponent(c,{index:r.length,injector:_,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]}),n})();class u1{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Sc?this.route:e===Jg?this.childContexts:this.parent.get(e,t)}}let tv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(t,i){1&t&&u._UZ(0,"router-outlet")},dependencies:[Jb],encapsulation:2}),n})();function c1(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Sf(n){const e=n.children&&n.children.map(Sf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==yn&&(t.component=tv),t}function Ws(n){return n.outlet||yn}function Xb(n,e){const t=n.filter(i=>Ws(i)===e);return t.push(...n.filter(i=>Ws(i)!==e)),t}function Xg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class q6{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Qy(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Kg(t);e.children.forEach(o=>{const c=o.value.outlet;this.deactivateRoutes(o,r[c],i),delete r[c]}),ts(r,(o,c)=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(r===o)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Kg(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],r);if(i&&i.outlet){const c=i.outlet.detach(),p=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Kg(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Kg(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new XN(o.value.snapshot))}),e.children.length&&this.forwardEvent(new j6(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(Qy(r),r===o)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const p=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),Qy(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=Xg(r.snapshot),_=p?.get(u._Vd)??null;c.attachRef=null,c.route=r,c.resolver=_,c.injector=p,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,i)}}class oO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class eE{constructor(e,t){this.component=e,this.route=t}}function g1(n,e,t){const i=n._root;return em(i,e?e._root:null,t,[i.value])}function Df(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:i}function em(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Kg(e);return n.children.forEach(c=>{(function Z6(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){const _=function z6(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ud(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ud(n.url,e.url)||!Pa(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yb(n,e)||!Pa(n.queryParams,e.queryParams);default:return!Yb(n,e)}}(c,o,o.routeConfig.runGuardsAndResolvers);_?r.canActivateChecks.push(new oO(i)):(o.data=c.data,o._resolvedData=c._resolvedData),em(n,e,o.component?p?p.children:null:t,i,r),_&&p&&p.outlet&&p.outlet.isActivated&&r.canDeactivateChecks.push(new eE(p.outlet.component,c))}else c&&iv(e,p,r),r.canActivateChecks.push(new oO(i)),em(n,null,o.component?p?p.children:null:t,i,r)})(c,o[c.value.outlet],t,i.concat([c.value]),r),delete o[c.value.outlet]}),ts(o,(c,p)=>iv(c,t.getContext(p),r)),r}function iv(n,e,t){const i=Kg(n),r=n.value;ts(i,(o,c)=>{iv(o,r.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new eE(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function rv(n){return"function"==typeof n}function tm(n){return n instanceof ia||"EmptyError"===n?.name}const Mf=Symbol("INITIAL_VALUE");function xf(){return Fn(n=>wb(n.map(e=>e.pipe(Aa(1),Ng(Mf)))).pipe((0,pt.U)(e=>{for(const t of e)if(!0!==t){if(t===Mf)return Mf;if(!1===t||t instanceof Ml)return t}return!0}),Rs(e=>e!==Mf),Aa(1)))}function v1(n){return(0,RN.z)((0,bs.b)(e=>{if(Hd(e))throw Xy(0,e)}),(0,pt.U)(e=>!0===e))}const iE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rE(n,e,t,i,r){const o=av(n,e,t);return o.matched?function hO(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?ae(r.map(c=>{const p=Df(c,n);return Tc(function m1(n){return n&&rv(n.canMatch)}(p)?p.canMatch(e,t):n.runInContext(()=>p(e,t)))})).pipe(xf(),v1()):ae(!0)}(i=c1(e,i),e,t).pipe((0,pt.U)(c=>!0===c?o:{...iE})):ae(o)}function av(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...iE}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||ON)(t,n,e);if(!r)return{...iE};const o={};ts(r.posParams,(p,_)=>{o[_]=p.path});const c=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function nm(n,e,t,i){if(t.length>0&&function w1(n,e,t){return t.some(i=>oE(n,e,i)&&Ws(i)!==yn)}(n,t,i)){const o=new Sn(e,function pO(n,e,t,i){const r={};r[yn]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&Ws(o)!==yn){const c=new Sn([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,r[Ws(o)]=c}return r}(n,e,i,new Sn(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function sE(n,e,t){return t.some(i=>oE(n,e,i))}(n,t,i)){const o=new Sn(n.segments,function fO(n,e,t,i,r){const o={};for(const c of i)if(oE(n,t,c)&&!r[Ws(c)]){const p=new Sn([],{});p._sourceSegment=n,p._segmentIndexShift=e.length,o[Ws(c)]=p}return{...r,...o}}(n,e,t,i,n.children));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const r=new Sn(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function oE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function aE(n,e,t,i){return!!(Ws(n)===i||i!==yn&&oE(e,t,n))&&("**"===n.path||av(e,n,t).matched)}function lv(n,e,t){return 0===e.length&&!n.children[t]}const uv=!1;class cv{constructor(e){this.segmentGroup=e||null}}class gO{constructor(e){this.urlTree=e}}function dv(n){return Bg(new cv(n))}function b1(n){return Bg(new gO(n))}class eH{constructor(e,t,i,r,o){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0}apply(){const e=nm(this.urlTree.root,[],[],this.config).segmentGroup,t=new Sn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,yn).pipe((0,pt.U)(o=>this.createUrlTree($g(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Al(o=>{if(o instanceof gO)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof cv?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,yn).pipe((0,pt.U)(r=>this.createUrlTree($g(r),e.queryParams,e.fragment))).pipe(Al(r=>{throw r instanceof cv?this.noMatchError(r):r}))}noMatchError(e){return new u.vHH(4002,uv)}createUrlTree(e,t,i){const r=Vb(e);return new Ml(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,pt.U)(o=>new Sn([],o))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return(0,le.D)(r).pipe(ui(o=>{const c=i.children[o],p=Xb(t,o);return this.expandSegmentGroup(e,p,c,o).pipe((0,pt.U)(_=>({segment:_,outlet:o})))}),Ic((o,c)=>(o[c.outlet]=c.segment,o),{}),$y())}expandSegment(e,t,i,r,o,c){return(0,le.D)(i).pipe(ui(p=>this.expandSegmentAgainstRoute(e,t,i,p,r,o,c).pipe(Al(E=>{if(E instanceof cv)return ae(null);throw E}))),go(p=>!!p),Al((p,_)=>{if(tm(p))return lv(t,r,o)?ae(new Sn([],{})):dv(t);throw p}))}expandSegmentAgainstRoute(e,t,i,r,o,c,p){return aE(r,t,o,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,o,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,c):dv(t):dv(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const o=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?b1(o):this.lineralizeSegments(i,o).pipe((0,Zs.z)(c=>{const p=new Sn(c,{});return this.expandSegment(e,p,t,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,c){const{matched:p,consumedSegments:_,remainingSegments:E,positionalParamSegments:T}=av(t,r,o);if(!p)return dv(t);const R=this.applyRedirectCommands(_,r.redirectTo,T);return r.redirectTo.startsWith("/")?b1(R):this.lineralizeSegments(r,R).pipe((0,Zs.z)(F=>this.expandSegment(e,t,i,F.concat(E),c,!1)))}matchSegmentAgainstRoute(e,t,i,r,o){return"**"===i.path?(e=c1(i,e),i.loadChildren?(i._loadedRoutes?ae({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe((0,pt.U)(p=>(i._loadedRoutes=p.routes,i._loadedInjector=p.injector,new Sn(r,{})))):ae(new Sn(r,{}))):rE(t,i,r,e).pipe(Fn(({matched:c,consumedSegments:p,remainingSegments:_})=>c?this.getChildConfig(e=i._injector??e,i,r).pipe((0,Zs.z)(T=>{const R=T.injector??e,F=T.routes,{segmentGroup:G,slicedSegments:K}=nm(t,p,_,F),ue=new Sn(G.segments,G.children);if(0===K.length&&ue.hasChildren())return this.expandChildren(R,F,ue).pipe((0,pt.U)(ct=>new Sn(p,ct)));if(0===F.length&&0===K.length)return ae(new Sn(p,{}));const we=Ws(i)===o;return this.expandSegment(R,ue,F,K,we?yn:o,!0).pipe((0,pt.U)(ut=>new Sn(p.concat(ut.segments),ut.children)))})):dv(t)))}getChildConfig(e,t,i){return t.children?ae({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ae({routes:t._loadedRoutes,injector:t._loadedInjector}):function dO(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?ae(!0):ae(r.map(c=>{const p=Df(c,n);return Tc(function lO(n){return n&&rv(n.canLoad)}(p)?p.canLoad(e,t):n.runInContext(()=>p(e,t)))})).pipe(xf(),v1())}(e,t,i).pipe((0,Zs.z)(r=>r?this.configLoader.loadChildren(e,t).pipe((0,bs.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function _O(n){return Bg(kl(uv,3))}())):ae({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ae(i);if(r.numberOfChildren>1||!r.children[yn])return e.redirectTo,Bg(new u.vHH(4e3,uv));r=r.children[yn]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const o=this.createSegmentGroup(e,t.root,i,r);return new Ml(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return ts(e,(r,o)=>{if("string"==typeof r&&r.startsWith(":")){const p=r.substring(1);i[o]=t[p]}else i[o]=r}),i}createSegmentGroup(e,t,i,r){const o=this.createSegments(e,t.segments,i,r);let c={};return ts(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,i,r)}),new Sn(o,c)}createSegments(e,t,i,r){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new u.vHH(4001,uv);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class nH{}class rH{constructor(e,t,i,r,o,c,p){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=c,this.urlSerializer=p}recognize(){const e=nm(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,yn).pipe((0,pt.U)(t=>{if(null===t)return null;const i=new Yg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},yn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new wu(i,t),o=new zb(this.url,r);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,i=o1(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return(0,le.D)(Object.keys(i.children)).pipe(ui(r=>{const o=i.children[r],c=Xb(t,r);return this.processSegmentGroup(e,c,o,r)}),Ic((r,o)=>r&&o?(r.push(...o),r):null),function PN(n,e=!1){return(0,Ht.e)((t,i)=>{let r=0;t.subscribe((0,Dt.x)(i,o=>{const c=n(o,r++);(c||e)&&i.next(o),!c&&i.complete()}))})}(r=>null!==r),Wp(null),$y(),(0,pt.U)(r=>{if(null===r)return null;const o=wO(r);return function sH(n){n.sort((e,t)=>e.value.outlet===yn?-1:t.value.outlet===yn?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,i,r,o){return(0,le.D)(t).pipe(ui(c=>this.processSegmentAgainstRoute(c._injector??e,c,i,r,o)),go(c=>!!c),Al(c=>{if(tm(c))return lv(i,r,o)?ae([]):ae(null);throw c}))}processSegmentAgainstRoute(e,t,i,r,o){if(t.redirectTo||!aE(t,i,r,o))return ae(null);let c;if("**"===t.path){const p=r.length>0?Ob(r).parameters:{},_=d(i)+r.length;c=ae({snapshot:new Yg(r,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,g(t),Ws(t),t.component??t._loadedComponent??null,t,l(i),_,y(t)),consumedSegments:[],remainingSegments:[]})}else c=rE(i,t,r,e).pipe((0,pt.U)(({matched:p,consumedSegments:_,remainingSegments:E,parameters:T})=>{if(!p)return null;const R=d(i)+_.length;return{snapshot:new Yg(_,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,g(t),Ws(t),t.component??t._loadedComponent??null,t,l(i),R,y(t)),consumedSegments:_,remainingSegments:E}}));return c.pipe(Fn(p=>{if(null===p)return ae(null);const{snapshot:_,consumedSegments:E,remainingSegments:T}=p;e=t._injector??e;const R=t._loadedInjector??e,F=function oH(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:G,slicedSegments:K}=nm(i,E,T,F.filter(we=>void 0===we.redirectTo));if(0===K.length&&G.hasChildren())return this.processChildren(R,F,G).pipe((0,pt.U)(we=>null===we?null:[new wu(_,we)]));if(0===F.length&&0===K.length)return ae([new wu(_,[])]);const ue=Ws(t)===o;return this.processSegment(R,F,G,K,ue?yn:o).pipe((0,pt.U)(we=>null===we?null:[new wu(_,we)]))}))}}function aH(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function wO(n){const e=[],t=new Set;for(const i of n){if(!aH(i)){e.push(i);continue}const r=e.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=wO(i.children);e.push(new wu(i.value,r))}return e.filter(i=>!t.has(i))}function l(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function d(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function g(n){return n.data||{}}function y(n){return n.resolve||{}}function de(n){return"string"==typeof n.title||null===n.title}function Ee(n){return Fn(e=>{const t=n(e);return t?(0,le.D)(t).pipe((0,pt.U)(()=>e)):ae(e)})}const mt=new u.OlP("ROUTES");let Rt=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ae(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Tc(t.loadComponent()).pipe((0,pt.U)(Xe),(0,bs.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Rb(()=>{this.componentLoaders.delete(t)})),r=new Hy(i,()=>new L.x).pipe(jy());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ae({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,pt.U)(p=>{this.onLoadEndListener&&this.onLoadEndListener(i);let _,E,T=!1;Array.isArray(p)?E=p:(_=p.create(t).injector,E=Nb(_.get(mt,[],u.XFs.Self|u.XFs.Optional)));return{routes:E.map(Sf),injector:_}}),Rb(()=>{this.childrenLoaders.delete(i)})),c=new Hy(o,()=>new L.x).pipe(jy());return this.childrenLoaders.set(i,c),c}loadModuleFactoryOrRoutes(t){return Tc(t()).pipe((0,pt.U)(Xe),(0,Zs.z)(r=>r instanceof u.YKP||Array.isArray(r)?ae(r):(0,le.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3),u.LFG(u.Sil))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Xe(n){return function rn(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let gi=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new L.x,this.configLoader=(0,u.f3M)(Rt),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(Vd),this.rootContexts=(0,u.f3M)(Jg),this.navigationId=0,this.afterPreactivation=()=>ae(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new V6(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new QN(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new yo({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Tf,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Rs(i=>0!==i.id),(0,pt.U)(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),Fn(i=>{let r=!1,o=!1;return ae(i).pipe((0,bs.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Fn(c=>{const p=t.browserUrlTree.toString(),_=!t.navigated||c.extractedUrl.toString()!==p||p!==t.currentUrlTree.toString();if(!_&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const T="";return this.events.next(new Wy(c.id,t.serializeUrl(i.rawUrl),T,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),vl.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Yi(c.source)&&(t.browserUrlTree=c.extractedUrl),ae(c).pipe(Fn(T=>{const R=this.transitions?.getValue();return this.events.next(new e1(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),R!==this.transitions?.getValue()?vl.E:Promise.resolve(T)}),function tH(n,e,t,i){return Fn(r=>function X6(n,e,t,i,r){return new eH(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe((0,pt.U)(o=>({...r,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,bs.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},i.urlAfterRedirects=T.urlAfterRedirects}),function C(n,e,t,i,r){return(0,Zs.z)(o=>function iH(n,e,t,i,r,o,c="emptyOnly"){return new rH(n,e,t,i,r,c,o).recognize().pipe(Fn(p=>null===p?function vO(n){return new $e.y(e=>e.error(n))}(new nH):ae(p)))}(n,e,t,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,r).pipe((0,pt.U)(c=>({...o,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,bs.b)(T=>{if(i.targetSnapshot=T.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!T.extras.skipLocationChange){const F=t.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);t.setBrowserUrl(F,T)}t.browserUrlTree=T.urlAfterRedirects}const R=new U6(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(R)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:T,extractedUrl:R,source:F,restoredState:G,extras:K}=c,ue=new e1(T,this.urlSerializer.serialize(R),F,G);this.events.next(ue);const we=s1(R,this.rootComponentType).snapshot;return ae(i={...c,targetSnapshot:we,urlAfterRedirects:R,extras:{...K,skipLocationChange:!1,replaceUrl:!1}})}{const T="";return this.events.next(new Wy(c.id,t.serializeUrl(i.extractedUrl),T,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),vl.E}}),(0,bs.b)(c=>{const p=new WN(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(p)}),(0,pt.U)(c=>i={...c,guards:g1(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function tE(n,e){return(0,Zs.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:c}}=t;return 0===c.length&&0===o.length?ae({...t,guardsResult:!0}):function nE(n,e,t,i){return(0,le.D)(n).pipe((0,Zs.z)(r=>function y1(n,e,t,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?ae(o.map(p=>{const _=Xg(e)??r,E=Df(p,_);return Tc(function cO(n){return n&&rv(n.canDeactivate)}(E)?E.canDeactivate(n,e,t,i):_.runInContext(()=>E(n,e,t,i))).pipe(go())})).pipe(xf()):ae(!0)}(r.component,r.route,t,e,i)),go(r=>!0!==r,!0))}(c,i,r,n).pipe((0,Zs.z)(p=>p&&function W6(n){return"boolean"==typeof n}(p)?function ov(n,e,t,i){return(0,le.D)(e).pipe(ui(r=>Ai(function Y6(n,e){return null!==n&&e&&e(new B6(n)),ae(!0)}(r.route.parent,i),function K6(n,e){return null!==n&&e&&e(new JN(n)),ae(!0)}(r.route,i),function J6(n,e,t){const i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(c=>function aO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Vg(()=>ae(c.guards.map(_=>{const E=Xg(c.node)??t,T=Df(_,E);return Tc(function uO(n){return n&&rv(n.canActivateChild)}(T)?T.canActivateChild(i,n):E.runInContext(()=>T(i,n))).pipe(go())})).pipe(xf())));return ae(o).pipe(xf())}(n,r.path,t),function Q6(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return ae(!0);const r=i.map(o=>Vg(()=>{const c=Xg(e)??t,p=Df(o,c);return Tc(function sv(n){return n&&rv(n.canActivate)}(p)?p.canActivate(e,n):c.runInContext(()=>p(e,n))).pipe(go())}));return ae(r).pipe(xf())}(n,r.route,t))),go(r=>!0!==r,!0))}(i,o,n,e):ae(p)),(0,pt.U)(p=>({...t,guardsResult:p})))})}(this.environmentInjector,c=>this.events.next(c)),(0,bs.b)(c=>{if(i.guardsResult=c.guardsResult,Hd(c.guardsResult))throw Xy(0,c.guardsResult);const p=new KN(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(p)}),Rs(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),Ee(c=>{if(c.guards.canActivateChecks.length)return ae(c).pipe((0,bs.b)(p=>{const _=new YN(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}),Fn(p=>{let _=!1;return ae(p).pipe(function D(n,e){return(0,Zs.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ae(t);let o=0;return(0,le.D)(r).pipe(ui(c=>function k(n,e,t,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!de(r)&&(o[_f]=r.title),function O(n,e,t,i){const r=function B(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return ae({});const o={};return(0,le.D)(r).pipe((0,Zs.z)(c=>function Y(n,e,t,i){const r=Xg(e)??i,o=Df(n,r);return Tc(o.resolve?o.resolve(e,t):r.runInContext(()=>o(e,t)))}(n[c],e,t,i).pipe(go(),(0,bs.b)(p=>{o[c]=p}))),jg(1),function NN(n){return(0,pt.U)(()=>n)}(o),Al(c=>tm(c)?vl.E:Bg(c)))}(o,n,e,i).pipe((0,pt.U)(c=>(n._resolvedData=c,n.data=o1(n,t).resolve,r&&de(r)&&(n.data[_f]=r.title),null)))}(c.route,i,n,e)),(0,bs.b)(()=>o++),jg(1),(0,Zs.z)(c=>o===r.length?ae(t):vl.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,bs.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,bs.b)(p=>{const _=new Yy(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}))}),Ee(c=>{const p=_=>{const E=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,bs.b)(T=>{_.component=T}),(0,pt.U)(()=>{})));for(const T of _.children)E.push(...p(T));return E};return wb(p(c.targetSnapshot.root)).pipe(Wp(),Aa(1))}),Ee(()=>this.afterPreactivation()),(0,pt.U)(c=>{const p=function a1(n,e,t){const i=Qg(n,e._root,t?t._root:void 0);return new Fo(i,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return i={...c,targetRouterState:p}}),(0,bs.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(i=>(new q6(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c)),(0,bs.b)({next:c=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new xl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{r=!0}}),Rb(()=>{r||o||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Al(c=>{if(o=!0,tO(c)){l1(c)||(t.navigated=!0,t.restoreHistory(i,!0));const p=new zg(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode);if(this.events.next(p),l1(c)){const _=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),E={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Yi(i.source)};t.scheduleNavigation(_,Tf,null,E,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const p=new Ky(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0);this.events.next(p);try{i.resolve(t.errorHandler(c))}catch(_){i.reject(_)}}return vl.E}))}))}cancelNavigationTransition(t,i,r){const o=new zg(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Yi(n){return n!==Tf}let bO=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===yn);return i}getResolvedTitleForRoute(t){return t.data[_f]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(zY)},providedIn:"root"}),n})(),zY=(()=>{class n extends bO{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(hd))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(YY)},providedIn:"root"}),n})();class KY{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let YY=(()=>{class n extends KY{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const E1=new u.OlP("",{providedIn:"root",factory:()=>({})});let JY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(XY)},providedIn:"root"}),n})(),XY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eQ(n){throw n}function tQ(n,e,t){return e.parse("/")}const nQ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iQ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ks=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this.options=(0,u.f3M)(E1,{optional:!0})||{},this.errorHandler=this.options.errorHandler||eQ,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||tQ,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(JY),this.routeReuseStrategy=(0,u.f3M)(WY),this.urlCreationStrategy=(0,u.f3M)($6),this.titleStrategy=(0,u.f3M)(bO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Nb((0,u.f3M)(mt,{optional:!0})??[]),this.navigationTransitions=(0,u.f3M)(gi),this.urlSerializer=(0,u.f3M)(Vd),this.location=(0,u.f3M)(Ue),this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ml,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=s1(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Tf,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const o={replaceUrl:!0},c=r?.navigationId?r:null;if(r){const _={...r};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(o.state=_)}const p=this.parseUrl(t);this.scheduleNavigation(p,i,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Sf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:o,fragment:c,queryParamsHandling:p,preserveFragment:_}=i,E=_?this.currentUrlTree.fragment:c;let T=null;switch(p){case"merge":T={...this.currentUrlTree.queryParams,...o};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=o||null}return null!==T&&(T=this.removeEmptyProps(T)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,T,E??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Hd(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Tf,null,i)}navigate(t,i={skipLocationChange:!1}){return function rQ(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new u.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...nQ}:!1===i?{...iQ}:i,Hd(t))return $D(this.currentUrlTree,t,r);const o=this.parseUrl(t);return $D(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const o=t[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(t,i,r,o,c){if(this.disposed)return Promise.resolve(!1);let p,_,E,T;return c?(p=c.resolve,_=c.reject,E=c.promise):E=new Promise((R,F)=>{p=R,_=F}),T="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:T,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:p,reject:_,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(R=>Promise.reject(R))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),o={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",o):this.location.go(r,"",o)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bu=(()=>{class n{constructor(t,i,r,o,c,p){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=c,this.locationStrategy=p,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new L.x;const _=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(E=>{E instanceof xl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,u.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,u.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,u.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,o,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||o||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,u.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,o=this.el.nativeElement;null!==i?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ks),u.Y36(Sc),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(re))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,i){1&t&&u.NdJ("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&u.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[u.TTD]}),n})();class lH{}let aQ=(()=>{class n{constructor(t,i,r,o,c){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Rs(t=>t instanceof xl),ui(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=(0,u.MMx)(o.providers,t,`Route: ${o.path}`));const c=o._injector??t,p=o._loadedInjector??c;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?r.push(this.preloadConfig(c,o)):(o.children||o._loadedRoutes)&&r.push(this.processRoutes(p,o.children??o._loadedRoutes))}return(0,le.D)(r).pipe((0,Cc.J)())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):ae(null);const o=r.pipe((0,Zs.z)(c=>null===c?ae(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(i.loadComponent&&!i._loadedComponent){const c=this.loader.loadComponent(i);return(0,le.D)([o,c]).pipe((0,Cc.J)())}return o})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ks),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(lH),u.LFG(Rt))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CO=new u.OlP("");let uH=(()=>{class n{constructor(t,i,r,o,c={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof e1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof t1&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new t1(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();var Oa=(()=>((Oa=Oa||{})[Oa.COMPLETE=0]="COMPLETE",Oa[Oa.FAILED=1]="FAILED",Oa[Oa.REDIRECTING=2]="REDIRECTING",Oa))();const hv=!1;function kf(n,e){return{\u0275kind:n,\u0275providers:e}}const IO=new u.OlP("",{providedIn:"root",factory:()=>!1});function dH(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const i=n.get(Ks),r=n.get(hH);1===n.get(TO)&&i.initialNavigation(),n.get(fH,null,u.XFs.Optional)?.setUpPreloading(),n.get(CO,null,u.XFs.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const hH=new u.OlP(hv?"bootstrap done indicator":"",{factory:()=>new L.x}),TO=new u.OlP(hv?"initial navigation":"",{providedIn:"root",factory:()=>1});function hQ(){let n=[];return n=hv?[{provide:u.Xts,multi:!0,useFactory:()=>{const e=(0,u.f3M)(Ks);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function H6(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],kf(1,n)}const fH=new u.OlP(hv?"router preloader":"");function fQ(n){return kf(0,[{provide:fH,useExisting:aQ},{provide:lH,useExisting:n}])}const lE=!1,pH=new u.OlP(lE?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),pQ=[Ue,{provide:Vd,useClass:Zy},Ks,Jg,{provide:Sc,useFactory:function cH(n){return n.routerState.root},deps:[Ks]},Rt,lE?{provide:IO,useValue:!0}:[]];function gQ(){return new u.PXZ("Router",Ks)}let SO=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[pQ,lE&&i?.enableTracing?hQ().\u0275providers:[],{provide:mt,multi:!0,useValue:t},{provide:pH,useFactory:vQ,deps:[[Ks,new u.FiY,new u.tp0]]},{provide:E1,useValue:i||{}},i?.useHash?{provide:re,useClass:Le}:{provide:re,useClass:De},{provide:CO,useFactory:()=>{const n=(0,u.f3M)(Zu),e=(0,u.f3M)(u.R0b),t=(0,u.f3M)(E1),i=(0,u.f3M)(gi),r=(0,u.f3M)(Vd);return t.scrollOffset&&n.setOffset(t.scrollOffset),new uH(r,i,n,e,t)}},i?.preloadingStrategy?fQ(i.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:gQ},i?.initialNavigation?wQ(i):[],[{provide:gH,useFactory:dH},{provide:u.tb,multi:!0,useExisting:gH}]]}}static forChild(t){return{ngModule:n,providers:[{provide:mt,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pH,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[tv]}),n})();function vQ(n){if(lE&&n)throw new u.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function wQ(n){return["disabled"===n.initialNavigation?kf(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(Ks);return()=>{e.setUpLocationChangeListener()}}},{provide:TO,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?kf(2,[{provide:TO,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(oe,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(Ks),o=e.get(hH);(function lQ(n,e){n.events.pipe(Rs(t=>t instanceof xl||t instanceof zg||t instanceof Ky||t instanceof Wy),(0,pt.U)(t=>t instanceof xl||t instanceof Wy?Oa.COMPLETE:t instanceof zg&&(0===t.code||1===t.code)?Oa.REDIRECTING:Oa.FAILED),Rs(t=>t!==Oa.REDIRECTING),Aa(1)).subscribe(()=>{e()})})(r,()=>{i(!0)}),e.get(gi).afterPreactivation=()=>(i(!0),o.closed?ae(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const gH=new u.OlP(lE?"Router Initializer":"");var DO=q(3942);const mH="firebasestorage.googleapis.com",_H="storageBucket";class gr extends W.ZR{constructor(e,t,i=0){super(AO(e),`Firebase Storage: ${t} (${AO(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return AO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Pi=(()=>{return(n=Pi||(Pi={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Pi;var n})();function AO(n){return"storage/"+n}function MO(){return new gr(Pi.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function yH(){return new gr(Pi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vH(){return new gr(Pi.CANCELED,"User canceled the upload/download.")}function wH(){return new gr(Pi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fv(n){return new gr(Pi.INVALID_ARGUMENT,n)}function bH(){return new gr(Pi.APP_DELETED,"The Firebase app was deleted.")}function EH(n){return new gr(Pi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uE(n,e){return new gr(Pi.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function cE(n){throw new gr(Pi.INTERNAL_ERROR,"Internal error: "+n)}class vo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=vo.makeFromUrl(e,t)}catch{return new vo(e,"")}if(""===i.path)return i;throw function RQ(n){return new gr(Pi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+r+"(/(.*))?$","i");function E(ht){ht.path_=decodeURIComponent(ht.path)}const R=t.replace(/[.]/g,"\\."),ct=[{regex:p,indices:{bucket:1,path:3},postModify:function o(ht){"/"===ht.path.charAt(ht.path.length-1)&&(ht.path_=ht.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${R}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===mH?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let ht=0;ht<ct.length;ht++){const Pt=ct[ht],Nt=Pt.regex.exec(e);if(Nt){let tr=Nt[Pt.indices.path];tr||(tr=""),i=new vo(Nt[Pt.indices.bucket],tr),Pt.postModify(i);break}}if(null==i)throw function kQ(n){return new gr(Pi.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return i}}class LQ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function C1(n){return"string"==typeof n||n instanceof String}function CH(n){return xO()&&n instanceof Blob}function xO(){return typeof Blob<"u"&&!(0,W.UG)()}function kO(n,e,t,i){if(i<e)throw fv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw fv(`Invalid value for '${n}'. Expected ${t} or less.`)}function $d(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function IH(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var Rf=(()=>{return(n=Rf||(Rf={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Rf;var n})();function TH(n,e){const t=n>=500&&n<600,r=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||r||o}class $Q{constructor(e,t,i,r,o,c,p,_,E,T,R,F=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=_,this.timeout_=E,this.progressCallback_=T,this.connectionFactory_=R,this.retry=F,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((G,K)=>{this.resolve_=G,this.reject_=K,this.start_()})}start_(){const t=(i,r)=>{const o=this.resolve_,c=this.reject_,p=r.connection;if(r.wasSuccessCode)try{const _=this.callback_(p,p.getResponse());!function BQ(n){return void 0!==n}(_)?o():o(_)}catch(_){c(_)}else if(null!==p){const _=MO();_.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,_):_)}else c(r.canceled?this.appDelete_?bH():vH():yH())};this.canceled_?t(0,new I1(!1,null,!0)):this.backoffId_=function UQ(n,e,t){let i=1,r=null,o=null,c=!1,p=0;function _(){return 2===p}let E=!1;function T(...we){E||(E=!0,e.apply(null,we))}function R(we){r=setTimeout(()=>{r=null,n(G,_())},we)}function F(){o&&clearTimeout(o)}function G(we,...Ke){if(E)return void F();if(we)return F(),void T.call(null,we,...Ke);if(_()||c)return F(),void T.call(null,we,...Ke);let ct;i<64&&(i*=2),1===p?(p=2,ct=0):ct=1e3*(i+Math.random()),R(ct)}let K=!1;function ue(we){K||(K=!0,F(),!E&&(null!==r?(we||(p=2),clearTimeout(r),R(0)):we||(p=1)))}return R(0),o=setTimeout(()=>{c=!0,ue(!0)},t),ue}((i,r)=>{if(r)return void i(!1,new I1(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const p=o.getErrorCode()===Rf.NO_ERROR,_=o.getStatus();if(!p||TH(_,this.additionalRetryCodes_)&&this.retry){const T=o.getErrorCode()===Rf.ABORT;return void i(!1,new I1(!1,null,T))}const E=-1!==this.successCodes_.indexOf(_);i(!0,new I1(E,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function VQ(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class I1{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function YQ(...n){const e=function KQ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(xO())return new Blob(n);throw new gr(Pi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Fa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class RO{constructor(e,t){this.data=e,this.contentType=t||null}}function PO(n,e){switch(n){case Fa.RAW:return new RO(SH(e));case Fa.BASE64:case Fa.BASE64URL:return new RO(DH(n,e));case Fa.DATA_URL:return new RO(function eJ(n){const e=new AH(n);return e.base64?DH(Fa.BASE64,e.rest):function XQ(n){let e;try{e=decodeURIComponent(n)}catch{throw uE(Fa.DATA_URL,"Malformed data URL.")}return SH(e)}(e.rest)}(e),function tJ(n){return new AH(n).contentType}(e))}throw MO()}function SH(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function DH(n,e){switch(n){case Fa.BASE64:{const r=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(r||o)throw uE(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Fa.BASE64URL:{const r=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(r||o)throw uE(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function JQ(n){if(typeof atob>"u")throw function FQ(n){return new gr(Pi.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(r){throw r.message.includes("polyfill")?r:uE(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class AH{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw uE(Fa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function nJ(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class Ac{constructor(e,t){let i=0,r="";CH(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(CH(this.data_)){const r=function QQ(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new Ac(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ac(i,!0)}}static getBlob(...e){if(xO()){const t=e.map(i=>i instanceof Ac?i.data_:i);return new Ac(YQ.apply(null,t))}{const t=e.map(c=>C1(c)?PO(Fa.RAW,c).data:c.data_);let i=0;t.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let o=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)r[o++]=c[p]}),new Ac(r,!0)}}uploadData(){return this.data_}}function NO(n){let e;try{e=JSON.parse(n)}catch{return null}return function HQ(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function MH(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function sJ(n,e){return e}class Lo{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||sJ}}let T1=null;function dE(){if(T1)return T1;const n=[];n.push(new Lo("bucket")),n.push(new Lo("generation")),n.push(new Lo("metageneration")),n.push(new Lo("name","fullPath",!0));const t=new Lo("name");t.xform=function e(o,c){return function oJ(n){return!C1(n)||n.length<2?n:MH(n)}(c)},n.push(t);const r=new Lo("size");return r.xform=function i(o,c){return void 0!==c?Number(c):c},n.push(r),n.push(new Lo("timeCreated")),n.push(new Lo("updated")),n.push(new Lo("md5Hash",null,!0)),n.push(new Lo("cacheControl",null,!0)),n.push(new Lo("contentDisposition",null,!0)),n.push(new Lo("contentEncoding",null,!0)),n.push(new Lo("contentLanguage",null,!0)),n.push(new Lo("contentType",null,!0)),n.push(new Lo("metadata","customMetadata",!0)),T1=n,T1}function xH(n,e,t){const i=NO(e);return null===i?null:function lJ(n,e,t){const i={type:"file"},r=t.length;for(let o=0;o<r;o++){const c=t[o];i[c.local]=c.xform(i,e[c.server])}return function aJ(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new vo(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(i,n),i}(n,i,t)}function OO(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const kH="prefixes",RH="items";class Mc{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xc(n){if(!n)throw MO()}function S1(n,e){return function t(i,r){const o=xH(n,r,e);return xc(null!==o),o}}function pv(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function MQ(){return new gr(Pi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function AQ(){return new gr(Pi.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function DQ(n){return new gr(Pi.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function xQ(n){return new gr(Pi.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}}function hE(n){const e=pv(n);return function t(i,r){let o=e(i,r);return 404===i.getStatus()&&(o=function SQ(n){return new gr(Pi.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=r.serverResponse,o}}function PH(n,e,t){const r=$d(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Mc(r,"GET",S1(n,t),c);return p.errorHandler=hE(e),p}function pJ(n,e,t,i,r){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),i&&(o.pageToken=i),r&&(o.maxResults=r);const p=$d(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,T=new Mc(p,"GET",function hJ(n,e){return function t(i,r){const o=function dJ(n,e,t){const i=NO(t);return null===i?null:function cJ(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[kH])for(const r of t[kH]){const o=r.replace(/\/$/,""),c=n._makeStorageReference(new vo(e,o));i.prefixes.push(c)}if(t[RH])for(const r of t[RH]){const o=n._makeStorageReference(new vo(e,r.name));i.items.push(o)}return i}(n,e,i)}(n,e,r);return xc(null!==o),o}}(n,e.bucket),E);return T.urlParams=o,T.errorHandler=pv(e),T}function OH(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function yJ(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class D1{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function FO(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{xc(!1)}return xc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const EJ={STATE_CHANGED:"state_changed"},Uo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function LO(n){switch(n){case"running":case"pausing":case"canceling":return Uo.RUNNING;case"paused":return Uo.PAUSED;case"success":return Uo.SUCCESS;case"canceled":return Uo.CANCELED;default:return Uo.ERROR}}class CJ{constructor(e,t,i){if(function jQ(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function gv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let UH=null;class IJ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Rf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Rf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Rf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw cE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class TJ extends IJ{initXhr(){this.xhr_.responseType="text"}}function Eu(){return UH?UH():new TJ}class VH{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=dE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Pi.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(TH(r.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=yH()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Pi.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function vJ(n,e,t,i,r){const o=e.bucketOnlyServerUrl(),c=OH(e,i,r),p={name:c.fullPath},_=$d(o,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},R=OO(c,t),K=new Mc(_,"POST",function G(ue){let we;FO(ue);try{we=ue.getResponseHeader("X-Goog-Upload-URL")}catch{xc(!1)}return xc(C1(we)),we},n.maxUploadRetryTime);return K.urlParams=p,K.headers=T,K.body=R,K.errorHandler=pv(e),K}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Eu,e,t);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function wJ(n,e,t,i){const _=new Mc(t,"POST",function o(E){const T=FO(E,["active","final"]);let R=null;try{R=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch{xc(!1)}R||xc(!1);const F=Number(R);return xc(!isNaN(F)),new D1(F,i.size(),"final"===T)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=pv(e),_}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(r,Eu,t,i);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new D1(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let c;try{c=function bJ(n,e,t,i,r,o,c,p){const _=new D1(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=i.size()),i.size()!==_.total)throw function NQ(){return new gr(Pi.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const E=_.total-_.current;let T=E;r>0&&(T=Math.min(T,r));const R=_.current;let G="";G=0===T?"finalize":E===T?"upload, finalize":"upload";const K={"X-Goog-Upload-Command":G,"X-Goog-Upload-Offset":`${_.current}`},ue=i.slice(R,R+T);if(null===ue)throw wH();const ct=new Mc(t,"POST",function we(ht,Pt){const Nt=FO(ht,["active","final"]),bn=_.current+T,tr=i.size();let qo;return qo="final"===Nt?S1(e,o)(ht,Pt):null,new D1(bn,tr,"final"===Nt,qo)},e.maxUploadRetryTime);return ct.headers=K,ct.body=ue.uploadData(),ct.progressCallback=p||null,ct.errorHandler=pv(n),ct}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const p=this._ref.storage._makeRequest(c,Eu,r,o,!1);this._request=p,p.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=PH(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Eu,e,t);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function FH(n,e,t,i,r){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function p(){let ct="";for(let ht=0;ht<2;ht++)ct+=Math.random().toString().slice(2);return ct}();c["Content-Type"]="multipart/related; boundary="+_;const E=OH(e,i,r),T=OO(E,t),G=Ac.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+_+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",i,"\r\n--"+_+"--");if(null===G)throw wH();const K={name:E.fullPath},ue=$d(o,n.host,n._protocol),Ke=n.maxUploadRetryTime,ut=new Mc(ue,"POST",S1(n,t),Ke);return ut.urlParams=K,ut.headers=c,ut.body=G.uploadData(),ut.errorHandler=pv(e),ut}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Eu,e,t);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=vH(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=LO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const o=new CJ(t||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(LO(this._state)){case Uo.SUCCESS:gv(this._resolve.bind(null,this.snapshot))();break;case Uo.CANCELED:case Uo.ERROR:gv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(LO(this._state)){case Uo.RUNNING:case Uo.PAUSED:e.next&&gv(e.next.bind(e,this.snapshot))();break;case Uo.SUCCESS:e.complete&&gv(e.complete.bind(e))();break;default:e.error&&gv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class im{constructor(e,t){this._service=e,this._location=t instanceof vo?t:vo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new im(e,t)}get root(){const e=new vo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return MH(this._location.path)}get storage(){return this._service}get parent(){const e=function iJ(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new vo(this._location.bucket,e);return new im(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw EH(e)}}function jH(n,e,t){return UO.apply(this,arguments)}function UO(){return(UO=(0,Ce.Z)(function*(n,e,t){const r=yield HH(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield jH(n,e,r.nextPageToken))})).apply(this,arguments)}function HH(n,e){null!=e&&"number"==typeof e.maxResults&&kO("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=pJ(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,Eu)}function LJ(n){n._throwIfRoot("getDownloadURL");const e=function gJ(n,e,t){const r=$d(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Mc(r,"GET",function fJ(n,e){return function t(i,r){const o=xH(n,r,e);return xc(null!==o),function uJ(n,e,t,i){const r=NO(e);if(null===r||!C1(r.downloadTokens))return null;const o=r.downloadTokens;if(0===o.length)return null;const c=encodeURIComponent;return o.split(",").map(E=>{const R=n.fullPath;return $d("/b/"+c(n.bucket)+"/o/"+c(R),t,i)+IH({alt:"media",token:E})})[0]}(o,r,n.host,n._protocol)}}(n,t),c);return p.errorHandler=hE(e),p}(n.storage,n._location,dE());return n.storage.makeRequestWithTokens(e,Eu).then(t=>{if(null===t)throw function OQ(){return new gr(Pi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function $H(n,e){const t=function rJ(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new vo(n._location.bucket,t);return new im(n.storage,i)}function GH(n,e){if(n instanceof VO){const t=n;if(null==t._bucket)throw function PQ(){return new gr(Pi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_H+"' property when initializing the app?")}();const i=new im(t,t._bucket);return null!=e?GH(i,e):i}return void 0!==e?$H(n,e):n}function jJ(n,e){if(e&&function VJ(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof VO)return function BJ(n,e){return new im(n,e)}(n,e);throw fv("To use ref(service, url), the first argument must be a Storage instance.")}return GH(n,e)}function qH(n,e){const t=e?.[_H];return null==t?null:vo.makeFromBucketSpec(t,n)}class VO{constructor(e,t,i,r,o){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=mH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?vo.makeFromBucketSpec(r,this._host):qH(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?vo.makeFromBucketSpec(this._url,e):qH(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new im(this,e)}_makeRequest(e,t,i,r,o=!0){if(this._deleted)return new LQ(bH());{const c=function WQ(n,e,t,i,r,o,c=!0){const p=IH(n.urlParams),_=n.url+p,E=Object.assign({},n.headers);return function ZQ(n,e){e&&(n["X-Firebase-GMPID"]=e)}(E,e),function GQ(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(E,t),function qQ(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(E,o),function zQ(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(E,i),new $Q(_,n.method,E,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,c)}(e,this._appId,i,r,t,this._firebaseVersion,o);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var i=this;return(0,Ce.Z)(function*(){const[r,o]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,o).getPromise()})()}}const ZH="@firebase/storage";function KH(n,e){return jJ(n=(0,W.m9)(n),e)}function QJ(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new VO(t,i,r,e,Jr.SDK_VERSION)}!function JJ(){(0,Jr._registerComponent)(new mo.wA("storage",QJ,"PUBLIC").setMultipleInstances(!0)),(0,Jr.registerVersion)(ZH,"0.11.1",""),(0,Jr.registerVersion)(ZH,"0.11.1","esm2017")}();class A1{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class QH{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new A1(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new A1(i,this,this._ref))},t)}on(e,t,i,r){let o;return t&&(o="function"==typeof t?c=>t(new A1(c,this,this._ref)):{next:t.next?c=>t.next(new A1(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,i||void 0,r||void 0)}}class JH{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Gd(e,this._service))}get items(){return this._delegate.items.map(e=>new Gd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Gd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function YJ(n,e){return $H(n,e)}(this._delegate,e);return new Gd(t,this.storage)}get root(){return new Gd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Gd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new QH(function $J(n,e,t){return function RJ(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new VH(n,new Ac(e),t)}(n=(0,W.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Fa.RAW,i){this._throwIfRoot("putString");const r=PO(t,e),o=Object.assign({},i);return null==o.contentType&&null!=r.contentType&&(o.contentType=r.contentType),new QH(new VH(this._delegate,new Ac(r.data,!0),o),this)}listAll(){return function zJ(n){return function NJ(n){const e={prefixes:[],items:[]};return jH(n,e).then(()=>e)}(n=(0,W.m9)(n))}(this._delegate).then(e=>new JH(e,this.storage))}list(e){return function ZJ(n,e){return HH(n=(0,W.m9)(n),e)}(this._delegate,e||void 0).then(t=>new JH(t,this.storage))}getMetadata(){return function GJ(n){return function OJ(n){n._throwIfRoot("getMetadata");const e=PH(n.storage,n._location,dE());return n.storage.makeRequestWithTokens(e,Eu)}(n=(0,W.m9)(n))}(this._delegate)}updateMetadata(e){return function qJ(n,e){return function FJ(n,e){n._throwIfRoot("updateMetadata");const t=function mJ(n,e,t,i){const o=$d(e.fullServerUrl(),n.host,n._protocol),p=OO(t,i),E=n.maxOperationRetryTime,T=new Mc(o,"PATCH",S1(n,i),E);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=p,T.errorHandler=hE(e),T}(n.storage,n._location,e,dE());return n.storage.makeRequestWithTokens(t,Eu)}(n=(0,W.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function WJ(n){return LJ(n=(0,W.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function KJ(n){return function UJ(n){n._throwIfRoot("deleteObject");const e=function _J(n,e){const i=$d(e.fullServerUrl(),n.host,n._protocol),p=new Mc(i,"DELETE",function c(_,E){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=hE(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Eu)}(n=(0,W.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw EH(e)}}class XH{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(e4(e))throw fv("ref() expected a child path but got a URL, use refFromURL instead.");return new Gd(KH(this._delegate,e),this)}refFromURL(e){if(!e4(e))throw fv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{vo.makeFromUrl(e,this._delegate.host)}catch{throw fv("refFromUrl() expected a valid full URL but got an invalid one.")}return new Gd(KH(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function YH(n,e,t,i={}){!function HJ(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,W.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function e4(n){return/^[A-Za-z]+:\/\//.test(n)}function nX(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new XH(t,i)}function t4(n){const e=function rX(n){return new $e.y(e=>{const t=c=>e.next(c);t(n.snapshot);const o=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){o()}}).pipe(bb(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,pt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function M1(n){return{getDownloadURL:()=>ae(void 0).pipe(kn.fc,Fn(()=>n.getDownloadURL()),kn.iC),getMetadata:()=>ae(void 0).pipe(kn.fc,Fn(()=>n.getMetadata()),kn.iC),delete:()=>(0,le.D)(n.delete()),child:e=>M1(n.child(e)),updateMetadata:e=>(0,le.D)(n.updateMetadata(e)),put:(e,t)=>t4(n.put(e,t)),putString:(e,t,i)=>t4(n.putString(e,t,i)),list:e=>(0,le.D)(n.list(e)),listAll:()=>(0,le.D)(n.listAll())}}!function iX(n){const e={TaskState:Uo,TaskEvent:EJ,StringFormat:Fa,Storage:XH,Reference:Gd};n.INTERNAL.registerComponent(new mo.wA("storage-compat",nX,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.1")}(DO.Z);const sX=new u.OlP("angularfire2.storageBucket"),oX=new u.OlP("angularfire2.storage.maxUploadRetryTime"),aX=new u.OlP("angularfire2.storage.maxOperationRetryTime"),lX=new u.OlP("angularfire2.storage.use-emulator");let n4=(()=>{class n{constructor(t,i,r,o,c,p,_,E,T,R){const F=(0,N.on)(t,c,i);this.storage=(0,N.cc)(`${F.name}.storage.${r}`,"AngularFireStorage",F.name,()=>{const G=c.runOutsideAngular(()=>F.storage(r||void 0)),K=T;return K&&G.useEmulator(...K),_&&G.setMaxUploadRetryTime(_),E&&G.setMaxOperationRetryTime(E),G},[_,E])}ref(t){return M1(this.storage.ref(t))}refFromURL(t){return M1(this.storage.refFromURL(t))}upload(t,i,r){return M1(this.storage.ref(t)).put(i,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(N.Dh),u.LFG(N.xv,8),u.LFG(sX,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(kn.HU),u.LFG(oX,8),u.LFG(aX,8),u.LFG(lX,8),u.LFG(ug,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),cX=(()=>{class n{constructor(){Mt.Z.registerVersion("angularfire",kn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[n4],imports:[uX]}),n})();function BO(){return(0,Ht.e)((n,e)=>{let t,i=!1;n.subscribe((0,Dt.x)(e,r=>{const o=t;t=r,i&&e.next([o,r]),i=!0}))})}function i4(n,e=fc.y){return n=n??dX,(0,Ht.e)((t,i)=>{let r,o=!0;t.subscribe((0,Dt.x)(i,c=>{const p=e(c);(o||!n(r,p))&&(o=!1,r=p,i.next(c))}))})}function dX(n,e){return n===e}var Qt,hX=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qd={},jO=jO||{},vn=hX||self;function x1(){}function k1(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function fE(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var HO="closure_uid_"+(1e9*Math.random()>>>0),pX=0;function gX(n,e,t){return n.call.apply(n.bind,arguments)}function mX(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function wo(n,e,t){return(wo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gX:mX).apply(null,arguments)}function R1(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Ys(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,r,o){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[r].apply(i,c)}}function Pf(){this.s=this.s,this.o=this.o}Pf.prototype.s=!1,Pf.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function fX(n){Object.prototype.hasOwnProperty.call(n,HO)&&n[HO]||(n[HO]=++pX)}(this)},Pf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const r4=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function $O(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function s4(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(k1(i)){const r=n.length||0,o=i.length||0;n.length=r+o;for(let c=0;c<o;c++)n[r+c]=i[c]}else n.push(i)}}function bo(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}bo.prototype.h=function(){this.defaultPrevented=!0};var yX=function(){if(!vn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{vn.addEventListener("test",x1,e),vn.removeEventListener("test",x1,e)}catch{}return n}();function P1(n){return/^[\s\xa0]*$/.test(n)}var o4=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function GO(n,e){return n<e?-1:n>e?1:0}function N1(){var n=vn.navigator;return n&&(n=n.userAgent)?n:""}function kc(n){return-1!=N1().indexOf(n)}function qO(n){return qO[" "](n),n}qO[" "]=x1;var O1,n,wX=kc("Opera"),mv=kc("Trident")||kc("MSIE"),a4=kc("Edge"),ZO=a4||mv,l4=kc("Gecko")&&!(-1!=N1().toLowerCase().indexOf("webkit")&&!kc("Edge"))&&!(kc("Trident")||kc("MSIE"))&&!kc("Edge"),bX=-1!=N1().toLowerCase().indexOf("webkit")&&!kc("Edge");function u4(){var n=vn.document;return n?n.documentMode:void 0}e:{var zO="",WO=(n=N1(),l4?/rv:([^\);]+)(\)|;)/.exec(n):a4?/Edge\/([\d\.]+)/.exec(n):mv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):bX?/WebKit\/(\S+)/.exec(n):wX?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(WO&&(zO=WO?WO[1]:""),mv){var KO=u4();if(null!=KO&&KO>parseFloat(zO)){O1=String(KO);break e}}O1=zO}var EX={};var IX=vn.document&&mv&&(u4()||parseInt(O1,10))||void 0;function pE(n,e){if(bo.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(l4){e:{try{qO(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:TX[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&pE.X.h.call(this)}}Ys(pE,bo);var TX={2:"touch",3:"pen",4:"mouse"};pE.prototype.h=function(){pE.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var gE="closure_listenable_"+(1e6*Math.random()|0),SX=0;function DX(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=r,this.key=++SX,this.ba=this.ea=!1}function F1(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function QO(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function d4(n){const e={};for(const t in n)e[t]=n[t];return e}const h4="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function f4(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let o=0;o<h4.length;o++)t=h4[o],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function L1(n){this.src=n,this.g={},this.h=0}function JO(n,e){var t=e.type;if(t in n.g){var o,i=n.g[t],r=r4(i,e);(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(F1(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function XO(n,e,t,i){for(var r=0;r<n.length;++r){var o=n[r];if(!o.ba&&o.listener==e&&o.capture==!!t&&o.ha==i)return r}return-1}L1.prototype.add=function(n,e,t,i,r){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var c=XO(n,e,i,r);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new DX(e,this.src,o,!!i,r)).ea=t,n.push(e)),e};var eF="closure_lm_"+(1e6*Math.random()|0),tF={};function p4(n,e,t,i,r){if(i&&i.once)return m4(n,e,t,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)p4(n,e[o],t,i,r);return null}return t=sF(t),n&&n[gE]?n.N(e,t,fE(i)?!!i.capture:!!i,r):g4(n,e,t,!1,i,r)}function g4(n,e,t,i,r,o){if(!e)throw Error("Invalid event type");var c=fE(r)?!!r.capture:!!r,p=iF(n);if(p||(n[eF]=p=new L1(n)),(t=p.add(e,t,i,c,o)).proxy)return t;if(i=function AX(){const e=MX;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)yX||(r=c),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(y4(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function m4(n,e,t,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)m4(n,e[o],t,i,r);return null}return t=sF(t),n&&n[gE]?n.O(e,t,fE(i)?!!i.capture:!!i,r):g4(n,e,t,!0,i,r)}function _4(n,e,t,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)_4(n,e[o],t,i,r);else i=fE(i)?!!i.capture:!!i,t=sF(t),n&&n[gE]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=XO(o=n.g[e],t,i,r))&&(F1(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=iF(n))&&(e=n.g[e.toString()],n=-1,e&&(n=XO(e,t,i,r)),(t=-1<n?e[n]:null)&&nF(t))}function nF(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[gE])JO(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(y4(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=iF(e))?(JO(t,n),0==t.h&&(t.src=null,e[eF]=null)):F1(n)}}}function y4(n){return n in tF?tF[n]:tF[n]="on"+n}function MX(n,e){if(n.ba)n=!0;else{e=new pE(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&nF(n),n=t.call(i,e)}return n}function iF(n){return(n=n[eF])instanceof L1?n:null}var rF="__closure_events_fn_"+(1e9*Math.random()>>>0);function sF(n){return"function"==typeof n?n:(n[rF]||(n[rF]=function(e){return n.handleEvent(e)}),n[rF])}function Fs(){Pf.call(this),this.i=new L1(this),this.P=this,this.I=null}function Qs(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new bo(e,n);else if(e instanceof bo)e.target=e.target||n;else{var r=e;f4(e=new bo(i,n),r)}if(r=!0,t)for(var o=t.length-1;0<=o;o--){var c=e.g=t[o];r=U1(c,i,!0,e)&&r}if(r=U1(c=e.g=n,i,!0,e)&&r,r=U1(c,i,!1,e)&&r,t)for(o=0;o<t.length;o++)r=U1(c=e.g=t[o],i,!1,e)&&r}function U1(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var c=e[o];if(c&&!c.ba&&c.capture==t){var p=c.listener,_=c.ha||c.src;c.ea&&JO(n.i,c),r=!1!==p.call(_,i)&&r}}return r&&!i.defaultPrevented}Ys(Fs,Pf),Fs.prototype[gE]=!0,Fs.prototype.removeEventListener=function(n,e,t,i){_4(this,n,e,t,i)},Fs.prototype.M=function(){if(Fs.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)F1(t[i]);delete n.g[e],n.h--}}this.I=null},Fs.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Fs.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var oF=vn.JSON.stringify;function xX(){var n=b4;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var aF,v4=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new RX,n=>n.reset());class RX{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function PX(n){vn.setTimeout(()=>{throw n},0)}function w4(n,e){aF||function NX(){var n=vn.Promise.resolve(void 0);aF=function(){n.then(OX)}}(),lF||(aF(),lF=!0),b4.add(n,e)}var lF=!1,b4=new class kX{constructor(){this.h=this.g=null}add(e,t){const i=v4.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function OX(){for(var n;n=xX();){try{n.h.call(n.g)}catch(t){PX(t)}var e=v4;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}lF=!1}function V1(n,e){Fs.call(this),this.h=n||1,this.g=e||vn,this.j=wo(this.lb,this),this.l=Date.now()}function uF(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function cF(n,e,t){if("function"==typeof n)t&&(n=wo(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=wo(n.handleEvent,n)}return 2147483647<Number(e)?-1:vn.setTimeout(n,e||0)}function E4(n){n.g=cF(()=>{n.g=null,n.i&&(n.i=!1,E4(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ys(V1,Fs),(Qt=V1.prototype).ca=!1,Qt.R=null,Qt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Qs(this,"tick"),this.ca&&(uF(this),this.start()))}},Qt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qt.M=function(){V1.X.M.call(this),uF(this),delete this.g};class FX extends Pf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:E4(this)}M(){super.M(),this.g&&(vn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mE(n){Pf.call(this),this.h=n,this.g={}}Ys(mE,Pf);var C4=[];function I4(n,e,t,i){Array.isArray(t)||(t&&(C4[0]=t.toString()),t=C4);for(var r=0;r<t.length;r++){var o=p4(e,t[r],i||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function T4(n){QO(n.g,function(e,t){this.g.hasOwnProperty(t)&&nF(e)},n),n.g={}}function B1(){this.g=!0}function _v(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function BX(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var c=1;c<r.length;c++)r[c]=""}}}return oF(t)}catch{return e}}(n,t)+(i?" "+i:"")})}mE.prototype.M=function(){mE.X.M.call(this),T4(this)},mE.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},B1.prototype.Aa=function(){this.g=!1},B1.prototype.info=function(){};var rm={},S4=null;function j1(){return S4=S4||new Fs}function D4(n){bo.call(this,rm.Pa,n)}function _E(n){const e=j1();Qs(e,new D4(e))}function A4(n,e){bo.call(this,rm.STAT_EVENT,n),this.stat=e}function Vo(n){const e=j1();Qs(e,new A4(e,n))}function M4(n,e){bo.call(this,rm.Qa,n),this.size=e}function yE(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return vn.setTimeout(function(){n()},e)}rm.Pa="serverreachability",Ys(D4,bo),rm.STAT_EVENT="statevent",Ys(A4,bo),rm.Qa="timingevent",Ys(M4,bo);var H1={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},x4={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function dF(){}function R4(){}dF.prototype.h=null;var pF,vE={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function hF(){bo.call(this,"d")}function fF(){bo.call(this,"c")}function $1(){}function wE(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new mE(this),this.O=jX,this.T=new V1(n=ZO?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new P4}function P4(){this.i=null,this.g="",this.h=!1}Ys(hF,bo),Ys(fF,bo),Ys($1,dF),$1.prototype.g=function(){return new XMLHttpRequest},$1.prototype.i=function(){return{}},pF=new $1;var jX=45e3,gF={},G1={};function mF(n,e,t){n.K=1,n.v=W1(Zd(e)),n.s=t,n.P=!0,N4(n,null)}function N4(n,e){n.F=Date.now(),bE(n),n.A=Zd(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),G4(t.i,"t",i),n.C=0,t=n.l.H,n.h=new P4,n.g=p5(n.l,t?e:null,!n.s),0<n.N&&(n.L=new FX(wo(n.La,n,n.g),n.N)),I4(n.S,n.g,"readystatechange",n.ib),e=n.H?d4(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),_E(),function LX(n,e,t,i,r,o){n.info(function(){if(n.g)if(o)for(var c="",p=o.split("&"),_=0;_<p.length;_++){var E=p[_].split("=");if(1<E.length){var T=E[0];E=E[1];var R=T.split("_");c=2<=R.length&&"type"==R[1]?c+(T+"=")+E+"&":c+(T+"=redacted&")}}else c=null;else c=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function O4(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function F4(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=HX(n,t),r==G1){4==e&&(n.o=4,Vo(14),i=!1),_v(n.j,n.m,null,"[Incomplete Response]");break}if(r==gF){n.o=4,Vo(15),_v(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}_v(n.j,n.m,r,null),_F(n,r)}O4(n)&&r!=G1&&r!=gF&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Vo(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),TF(e),e.K=!0,Vo(11))):(_v(n.j,n.m,t,"[Invalid Chunked Response]"),sm(n),EE(n))}function HX(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?G1:(t=Number(e.substring(t,i)),isNaN(t)?gF:(i+=1)+t>e.length?G1:(e=e.substr(i,t),n.C=i+t,e))}function bE(n){n.V=Date.now()+n.O,L4(n,n.O)}function L4(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=yE(wo(n.gb,n),e)}function q1(n){n.B&&(vn.clearTimeout(n.B),n.B=null)}function EE(n){0==n.l.G||n.I||c5(n.l,n)}function sm(n){q1(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,uF(n.T),T4(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function _F(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||yF(t.h,n)))if(!n.J&&yF(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;eA(t),J1(t)}IF(t),Vo(18)}}else t.Ba=r[1],0<t.Ba-t.T&&37500>r[2]&&t.L&&0==t.A&&!t.v&&(t.v=yE(wo(t.cb,t),6e3));if(1>=z4(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else am(t,11)}else if((n.J||t.g==n)&&eA(t),!P1(e))for(r=t.Fa.g.parse(e),e=0;e<r.length;e++){let E=r[e];if(t.T=E[0],E=E[1],2==t.G)if("c"==E[0]){t.I=E[1],t.ka=E[2];const T=E[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const R=E[4];null!=R&&(t.Ca=R,t.j.info("SVER="+t.Ca));const F=E[5];null!=F&&"number"==typeof F&&0<F&&(t.J=i=1.5*F,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const G=n.g;if(G){const K=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(K){var o=i.h;o.g||-1==K.indexOf("spdy")&&-1==K.indexOf("quic")&&-1==K.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(vF(o,o.h),o.h=null))}if(i.D){const ue=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(i.za=ue,Qi(i.F,i.D,ue))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((i=t).sa=f5(i,i.H?i.ka:null,i.V),c.J){W4(i.h,c);var p=c,_=i.J;_&&p.setTimeout(_),p.B&&(q1(p),bE(p)),i.g=c}else l5(i);0<t.i.length&&X1(t)}else"stop"!=E[0]&&"close"!=E[0]||am(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?am(t,7):CF(t):"noop"!=E[0]&&t.l&&t.l.wa(E),t.A=0)}_E()}catch{}}function U4(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(k1(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function GX(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(k1(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function $X(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(k1(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],t&&t[o],n)}(Qt=wE.prototype).setTimeout=function(n){this.O=n},Qt.ib=function(n){n=n.target;const e=this.L;e&&3==zd(n)?e.l():this.La(n)},Qt.La=function(n){try{if(n==this.g)e:{const T=zd(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>T)&&(3!=T||ZO||this.g&&(this.h.h||this.g.fa()||n5(this.g)))){this.I||4!=T||7==e||_E(),q1(this);var t=this.g.aa();this.Y=t;t:if(O4(this)){var i=n5(this.g);n="";var r=i.length,o=4==zd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){sm(this),EE(this);var c="";break t}this.h.i=new vn.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function UX(n,e,t,i,r,o,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+o+" "+c})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P1(p)){var E=p;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Vo(12),sm(this),EE(this);break e}_v(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_F(this,t)}this.P?(F4(this,T,c),ZO&&this.i&&3==T&&(I4(this.S,this.T,"tick",this.hb),this.T.start())):(_v(this.j,this.m,c,null),_F(this,c)),4==T&&sm(this),this.i&&!this.I&&(4==T?c5(this.l,this):(this.i=!1,bE(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Vo(12)):(this.o=0,Vo(13)),sm(this),EE(this)}}}catch{}},Qt.hb=function(){if(this.g){var n=zd(this.g),e=this.g.fa();this.C<e.length&&(q1(this),F4(this,n,e),this.i&&4!=n&&bE(this))}},Qt.cancel=function(){this.I=!0,sm(this)},Qt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function VX(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(_E(),Vo(17)),sm(this),this.o=2,EE(this)):L4(this,this.V-n)};var V4=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function om(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof om){this.h=void 0!==e?e:n.h,Z1(this,n.j),this.s=n.s,this.g=n.g,z1(this,n.m),this.l=n.l,e=n.i;var t=new TE;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),B4(this,t),this.o=n.o}else n&&(t=String(n).match(V4))?(this.h=!!e,Z1(this,t[1]||"",!0),this.s=CE(t[2]||""),this.g=CE(t[3]||"",!0),z1(this,t[4]),this.l=CE(t[5]||"",!0),B4(this,t[6]||"",!0),this.o=CE(t[7]||"")):(this.h=!!e,this.i=new TE(null,this.h))}function Zd(n){return new om(n)}function Z1(n,e,t){n.j=t?CE(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function z1(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function B4(n,e,t){e instanceof TE?(n.i=e,function QX(n,e){e&&!n.j&&(Nf(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(H4(this,i),G4(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=IE(e,KX)),n.i=new TE(e,n.h))}function Qi(n,e,t){n.i.set(e,t)}function W1(n){return Qi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function CE(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function IE(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ZX),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ZX(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}om.prototype.toString=function(){var n=[],e=this.j;e&&n.push(IE(e,j4,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(IE(e,j4,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(IE(t,"/"==t.charAt(0)?WX:zX,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",IE(t,YX)),n.join("")};var j4=/[#\/\?@]/g,zX=/[#\?:]/g,WX=/[#\?]/g,KX=/[#\?@]/g,YX=/#/g;function TE(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Nf(n){n.g||(n.g=new Map,n.h=0,n.i&&function qX(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var o=n[t].substring(0,i);r=n[t].substring(i+1)}else o=n[t];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function H4(n,e){Nf(n),e=yv(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function $4(n,e){return Nf(n),e=yv(n,e),n.g.has(e)}function G4(n,e,t){H4(n,e),0<t.length&&(n.i=null,n.g.set(yv(n,e),$O(t)),n.h+=t.length)}function yv(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function q4(n){this.l=n||XX,n=vn.PerformanceNavigationTiming?0<(n=vn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(vn.g&&vn.g.Ga&&vn.g.Ga()&&vn.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qt=TE.prototype).add=function(n,e){Nf(this),this.i=null,n=yv(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Qt.forEach=function(n,e){Nf(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},Qt.oa=function(){Nf(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let o=0;o<r.length;o++)t.push(e[i])}return t},Qt.W=function(n){Nf(this);let e=[];if("string"==typeof n)$4(this,n)&&(e=e.concat(this.g.get(yv(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Qt.set=function(n,e){return Nf(this),this.i=null,$4(this,n=yv(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Qt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Qt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const o=encodeURIComponent(String(i)),c=this.W(i);for(i=0;i<c.length;i++){var r=o;""!==c[i]&&(r+="="+encodeURIComponent(String(c[i]))),n.push(r)}}return this.i=n.join("&")};var XX=10;function Z4(n){return!!n.h||!!n.g&&n.g.size>=n.j}function z4(n){return n.h?1:n.g?n.g.size:0}function yF(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function vF(n,e){n.g?n.g.add(e):n.h=e}function W4(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function K4(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return $O(n.i)}function wF(){}function eee(){this.g=new wF}function tee(n,e,t){const i=t||"";try{U4(n,function(r,o){let c=r;fE(r)&&(c=oF(r)),e.push(i+o+"="+encodeURIComponent(c))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function K1(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function SE(n){this.l=n.ac||null,this.j=n.jb||!1}function Y1(n,e){Fs.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=bF,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}q4.prototype.cancel=function(){if(this.i=K4(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},wF.prototype.stringify=function(n){return vn.JSON.stringify(n,void 0)},wF.prototype.parse=function(n){return vn.JSON.parse(n,void 0)},Ys(SE,dF),SE.prototype.g=function(){return new Y1(this.l,this.j)},SE.prototype.i=function(n){return function(){return n}}({}),Ys(Y1,Fs);var bF=0;function Y4(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function DE(n){n.readyState=4,n.l=null,n.j=null,n.A=null,AE(n)}function AE(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Qt=Y1.prototype).open=function(n,e){if(this.readyState!=bF)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,AE(this)},Qt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||vn).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Qt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,DE(this)),this.readyState=bF},Qt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,AE(this)),this.g&&(this.readyState=3,AE(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof vn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Y4(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Qt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?DE(this):AE(this),3==this.readyState&&Y4(this)}},Qt.Va=function(n){this.g&&(this.response=this.responseText=n,DE(this))},Qt.Ua=function(n){this.g&&(this.response=n,DE(this))},Qt.ga=function(){this.g&&DE(this)},Qt.setRequestHeader=function(n,e){this.v.append(n,e)},Qt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Qt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Y1.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var iee=vn.JSON.parse;function Tr(n){Fs.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Q4,this.K=this.L=!1}Ys(Tr,Fs);var Q4="",ree=/^https?$/i,see=["POST","PUT"];function J4(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,X4(n),Q1(n)}function X4(n){n.D||(n.D=!0,Qs(n,"complete"),Qs(n,"error"))}function e5(n){if(n.h&&typeof jO<"u"&&(!n.C[1]||4!=zd(n)||2!=n.aa()))if(n.v&&4==zd(n))cF(n.Ha,0,n);else if(Qs(n,"readystatechange"),4==zd(n)){n.h=!1;try{const p=n.aa();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===p){var r=String(n.H).match(V4)[1]||null;if(!r&&vn.self&&vn.self.location){var o=vn.self.location.protocol;r=o.substr(0,o.length-1)}i=!ree.test(r?r.toLowerCase():"")}t=i}if(t)Qs(n,"complete"),Qs(n,"success");else{n.m=6;try{var c=2<zd(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",X4(n)}}finally{Q1(n)}}}function Q1(n,e){if(n.g){t5(n);const t=n.g,i=n.C[0]?x1:null;n.g=null,n.C=null,e||Qs(n,"ready");try{t.onreadystatechange=i}catch{}}}function t5(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(vn.clearTimeout(n.A),n.A=null)}function zd(n){return n.g?n.g.readyState:0}function n5(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Q4:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function i5(n){let e="";return QO(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function EF(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=i5(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Qi(n,e,t))}function ME(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function r5(n){this.Ca=0,this.i=[],this.j=new B1,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ME("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ME("baseRetryDelayMs",5e3,n),this.bb=ME("retryDelaySeedMs",1e4,n),this.$a=ME("forwardChannelMaxRetries",2,n),this.ta=ME("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new q4(n&&n.concurrentRequestLimit),this.Fa=new eee,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function CF(n){if(s5(n),3==n.G){var e=n.U++,t=Zd(n.F);Qi(t,"SID",n.I),Qi(t,"RID",e),Qi(t,"TYPE","terminate"),xE(n,t),(e=new wE(n,n.j,e,void 0)).K=2,e.v=W1(Zd(t)),t=!1,vn.navigator&&vn.navigator.sendBeacon&&(t=vn.navigator.sendBeacon(e.v.toString(),"")),!t&&vn.Image&&((new Image).src=e.v,t=!0),t||(e.g=p5(e.l,null),e.g.da(e.v)),e.F=Date.now(),bE(e)}h5(n)}function J1(n){n.g&&(TF(n),n.g.cancel(),n.g=null)}function s5(n){J1(n),n.u&&(vn.clearTimeout(n.u),n.u=null),eA(n),n.h.cancel(),n.m&&("number"==typeof n.m&&vn.clearTimeout(n.m),n.m=null)}function X1(n){Z4(n.h)||n.m||(n.m=!0,w4(n.Ja,n),n.C=0)}function o5(n,e){var t;t=e?e.m:n.U++;const i=Zd(n.F);Qi(i,"SID",n.I),Qi(i,"RID",t),Qi(i,"AID",n.T),xE(n,i),n.o&&n.s&&EF(i,n.o,n.s),t=new wE(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=a5(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),vF(n.h,t),mF(t,i,e)}function xE(n,e){n.ia&&QO(n.ia,function(t,i){Qi(e,i,t)}),n.l&&U4({},function(t,i){Qi(e,i,t)})}function a5(n,e,t){t=Math.min(n.i.length,t);var i=n.l?wo(n.l.Ra,n.l,n):null;e:{var r=n.i;let o=-1;for(;;){const c=["count="+t];-1==o?0<t?(o=r[0].h,c.push("ofs="+o)):o=0:c.push("ofs="+o);let p=!0;for(let _=0;_<t;_++){let E=r[_].h;const T=r[_].g;if(E-=o,0>E)o=Math.max(0,r[_].h-100),p=!1;else try{tee(T,c,"req"+E+"_")}catch{i&&i(T)}}if(p){i=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function l5(n){n.g||n.u||(n.Z=1,w4(n.Ia,n),n.A=0)}function IF(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=yE(wo(n.Ia,n),d5(n,n.A)),n.A++,0))}function TF(n){null!=n.B&&(vn.clearTimeout(n.B),n.B=null)}function u5(n){n.g=new wE(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Zd(n.sa);Qi(e,"RID","rpc"),Qi(e,"SID",n.I),Qi(e,"CI",n.L?"0":"1"),Qi(e,"AID",n.T),Qi(e,"TYPE","xmlhttp"),xE(n,e),n.o&&n.s&&EF(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=W1(Zd(e)),t.s=null,t.P=!0,N4(t,n)}function eA(n){null!=n.v&&(vn.clearTimeout(n.v),n.v=null)}function c5(n,e){var t=null;if(n.g==e){eA(n),TF(n),n.g=null;var i=2}else{if(!yF(n.h,e))return;t=e.D,W4(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;Qs(i=j1(),new M4(i,t)),X1(n)}else l5(n);else if(3==(r=e.o)||0==r&&0<n.pa||!(1==i&&function aee(n,e){return!(z4(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=yE(wo(n.Ja,n,e),d5(n,n.C)),n.C++,0)))}(n,e)||2==i&&IF(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),r){case 1:am(n,5);break;case 4:am(n,10);break;case 3:am(n,6);break;default:am(n,2)}}function d5(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function am(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=wo(n.kb,n);t||(t=new om("//www.google.com/images/cleardot.gif"),vn.location&&"http"==vn.location.protocol||Z1(t,"https"),W1(t)),function nee(n,e){const t=new B1;if(vn.Image){const i=new Image;i.onload=R1(K1,t,i,"TestLoadImage: loaded",!0,e),i.onerror=R1(K1,t,i,"TestLoadImage: error",!1,e),i.onabort=R1(K1,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=R1(K1,t,i,"TestLoadImage: timeout",!1,e),vn.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Vo(2);n.G=0,n.l&&n.l.va(e),h5(n),s5(n)}function h5(n){if(n.G=0,n.la=[],n.l){const e=K4(n.h);(0!=e.length||0!=n.i.length)&&(s4(n.la,e),s4(n.la,n.i),n.h.i.length=0,$O(n.i),n.i.length=0),n.l.ua()}}function f5(n,e,t){var i=t instanceof om?Zd(t):new om(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),z1(i,i.m);else{var r=vn.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new om(null,void 0);i&&Z1(o,i),e&&(o.g=e),r&&z1(o,r),t&&(o.l=t),i=o}return e=n.za,(t=n.D)&&e&&Qi(i,t,e),Qi(i,"VER",n.ma),xE(n,i),i}function p5(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Tr(t&&n.Da&&!n.ra?new SE({jb:!0}):n.ra)).Ka(n.H),e}function g5(){}function tA(){if(mv&&!(10<=Number(IX)))throw Error("Environmental error: no available transport.")}function La(n,e){Fs.call(this),this.g=new r5(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!P1(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!P1(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new vv(this)}function m5(n){hF.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function _5(){fF.call(this),this.status=1}function vv(n){this.g=n}(Qt=Tr.prototype).Ka=function(n){this.L=n},Qt.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():pF.g(),this.C=function k4(n){return n.h||(n.h=n.i())}(this.u?this.u:pF),this.g.onreadystatechange=wo(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void J4(this,o)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const o of i.keys())t.set(o,i.get(o))}i=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),r=vn.FormData&&n instanceof vn.FormData,!(0<=r4(see,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,c]of t)this.g.setRequestHeader(o,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{t5(this),0<this.B&&((this.K=function oee(n){return mv&&function CX(){return function vX(n){var e=EX;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=o4(String(O1)).split("."),t=o4("9").split("."),i=Math.max(e.length,t.length);for(let c=0;0==n&&c<i;c++){var r=e[c]||"",o=t[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==r[0].length&&0==o[0].length)break;n=GO(0==r[1].length?0:parseInt(r[1],10),0==o[1].length?0:parseInt(o[1],10))||GO(0==r[2].length,0==o[2].length)||GO(r[2],o[2]),r=r[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wo(this.qa,this)):this.A=cF(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){J4(this,o)}},Qt.qa=function(){typeof jO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qs(this,"timeout"),this.abort(8))},Qt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Qs(this,"complete"),Qs(this,"abort"),Q1(this))},Qt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Q1(this,!0)),Tr.X.M.call(this)},Qt.Ha=function(){this.s||(this.F||this.v||this.l?e5(this):this.fb())},Qt.fb=function(){e5(this)},Qt.aa=function(){try{return 2<zd(this)?this.g.status:-1}catch{return-1}},Qt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Qt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),iee(e)}},Qt.Ea=function(){return this.m},Qt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qt=r5.prototype).ma=8,Qt.G=1,Qt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new wE(this,this.j,n,void 0);let o=this.s;if(this.S&&(o?(o=d4(o),f4(o,this.S)):o=this.S),null!==this.o||this.N||(r.H=o,o=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=a5(this,r,e),Qi(t=Zd(this.F),"RID",n),Qi(t,"CVER",22),this.D&&Qi(t,"X-HTTP-Session-Id",this.D),xE(this,t),o&&(this.N?e="headers="+encodeURIComponent(String(i5(o)))+"&"+e:this.o&&EF(t,this.o,o)),vF(this.h,r),this.Ya&&Qi(t,"TYPE","init"),this.O?(Qi(t,"$req",e),Qi(t,"SID","null"),r.Z=!0,mF(r,t,null)):mF(r,t,e),this.G=2}}else 3==this.G&&(n?o5(this,n):0==this.i.length||Z4(this.h)||o5(this))},Qt.Ia=function(){if(this.u=null,u5(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=yE(wo(this.eb,this),n)}},Qt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Vo(10),J1(this),u5(this))},Qt.cb=function(){null!=this.v&&(this.v=null,J1(this),IF(this),Vo(19))},Qt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Vo(2)):(this.j.info("Failed to ping google.com"),Vo(1))},(Qt=g5.prototype).xa=function(){},Qt.wa=function(){},Qt.va=function(){},Qt.ua=function(){},Qt.Ra=function(){},tA.prototype.g=function(n,e){return new La(n,e)},Ys(La,Fs),La.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Vo(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=f5(n,null,n.V),X1(n)},La.prototype.close=function(){CF(this.g)},La.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=oF(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&X1(e)},La.prototype.M=function(){this.g.l=null,delete this.j,CF(this.g),delete this.g,La.X.M.call(this)},Ys(m5,hF),Ys(_5,fF),Ys(vv,g5),vv.prototype.xa=function(){Qs(this.g,"a")},vv.prototype.wa=function(n){Qs(this.g,new m5(n))},vv.prototype.va=function(n){Qs(this.g,new _5)},vv.prototype.ua=function(){Qs(this.g,"b")},tA.prototype.createWebChannel=tA.prototype.g,La.prototype.send=La.prototype.u,La.prototype.open=La.prototype.m,La.prototype.close=La.prototype.close,H1.NO_ERROR=0,H1.TIMEOUT=8,H1.HTTP_ERROR=6,x4.COMPLETE="complete",R4.EventType=vE,vE.OPEN="a",vE.CLOSE="b",vE.ERROR="c",vE.MESSAGE="d",Fs.prototype.listen=Fs.prototype.N,Tr.prototype.listenOnce=Tr.prototype.O,Tr.prototype.getLastError=Tr.prototype.Oa,Tr.prototype.getLastErrorCode=Tr.prototype.Ea,Tr.prototype.getStatus=Tr.prototype.aa,Tr.prototype.getResponseJson=Tr.prototype.Sa,Tr.prototype.getResponseText=Tr.prototype.fa,Tr.prototype.send=Tr.prototype.da,Tr.prototype.setWithCredentials=Tr.prototype.Ka;var lee=qd.createWebChannelTransport=function(){return new tA},uee=qd.getStatEventTarget=function(){return j1()},SF=qd.ErrorCode=H1,cee=qd.EventType=x4,dee=qd.Event=rm,y5=qd.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},hee=qd.FetchXmlHttpFactory=SE,nA=qd.WebChannel=R4,fee=qd.XhrIo=Tr;const v5="@firebase/firestore";class Ls{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ls.UNAUTHENTICATED=new Ls(null),Ls.GOOGLE_CREDENTIALS=new Ls("google-credentials-uid"),Ls.FIRST_PARTY=new Ls("first-party-uid"),Ls.MOCK_USER=new Ls("mock-user");let wv="9.17.1";const Of=new Po.Yd("@firebase/firestore");function DF(){return Of.logLevel}function at(n,...e){if(Of.logLevel<=Po.in.DEBUG){const t=e.map(AF);Of.debug(`Firestore (${wv}): ${n}`,...t)}}function Br(n,...e){if(Of.logLevel<=Po.in.ERROR){const t=e.map(AF);Of.error(`Firestore (${wv}): ${n}`,...t)}}function lm(n,...e){if(Of.logLevel<=Po.in.WARN){const t=e.map(AF);Of.warn(`Firestore (${wv}): ${n}`,...t)}}function AF(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Lt(n="Unexpected state"){const e=`FIRESTORE (${wv}) INTERNAL ASSERTION FAILED: `+n;throw Br(e),new Error(e)}function Kt(n,e){n||Lt()}function Et(n,e){return n}const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Je extends W.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Es{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class w5{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mee{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ls.UNAUTHENTICATED))}shutdown(){}}class _ee{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yee{constructor(e){this.t=e,this.currentUser=Ls.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const o=E=>this.i!==r?(r=this.i,t(E)):Promise.resolve();let c=new Es;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Es,e.enqueueRetryable(()=>o(this.currentUser))};const p=()=>{const E=c;e.enqueueRetryable((0,Ce.Z)(function*(){yield E.promise,yield o(i.currentUser)}))},_=E=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(E=>_(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?_(E):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Es)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Kt("string"==typeof i.accessToken),new w5(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Kt(null===e||"string"==typeof e),new Ls(e)}}class vee{constructor(e,t,i,r){this.h=e,this.l=t,this.m=i,this.g=r,this.type="FirstParty",this.user=Ls.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Kt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class wee{constructor(e,t,i,r){this.h=e,this.l=t,this.m=i,this.g=r}getToken(){return Promise.resolve(new vee(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ls.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class b5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bee{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=o=>{null!=o.error&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.A;return this.A=o.token,at("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.T.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.T.getImmediate({optional:!0});o?r(o):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Kt("string"==typeof t.token),this.A=t.token,new b5(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Eee(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class E5{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=Eee(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%e.length))}return i}}function wn(n,e){return n<e?-1:n>e?1:0}function bv(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function C5(n){return n+"\0"}class Ji{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Je(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Je(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Je(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Je(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ji.fromMillis(Date.now())}static fromDate(e){return Ji.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Ji(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?wn(this.nanoseconds,e.nanoseconds):wn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class en{constructor(e){this.timestamp=e}static fromTimestamp(e){return new en(e)}static min(){return new en(new Ji(0,0))}static max(){return new en(new Ji(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class kE{constructor(e,t,i){void 0===t?t=0:t>e.length&&Lt(),void 0===i?i=e.length-t:i>e.length-t&&Lt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===kE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kE?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const o=e.get(r),c=t.get(r);if(o<c)return-1;if(o>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wn extends kE{construct(e,t,i){return new Wn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Je(Pe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Wn(t)}static emptyPath(){return new Wn([])}}const Cee=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sr extends kE{construct(e,t,i){return new Sr(e,t,i)}static isValidIdentifier(e){return Cee.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sr(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const o=()=>{if(0===i.length)throw new Je(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;r<e.length;){const p=e[r];if("\\"===p){if(r+1===e.length)throw new Je(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[r+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Je(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=_,r+=2}else"`"===p?(c=!c,r++):"."!==p||c?(i+=p,r++):(o(),r++)}if(o(),c)throw new Je(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sr(t)}static emptyPath(){return new Sr([])}}class vt{constructor(e){this.path=e}static fromPath(e){return new vt(Wn.fromString(e))}static fromName(e){return new vt(Wn.fromString(e).popFirst(5))}static empty(){return new vt(Wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vt(new Wn(e.slice()))}}class iA{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function MF(n){return n.fields.find(e=>2===e.kind)}function um(n){return n.fields.filter(e=>2!==e.kind)}iA.UNKNOWN_ID=-1;class rA{constructor(e,t){this.fieldPath=e,this.kind=t}}class RE{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new RE(0,Ua.min())}}function I5(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=en.fromTimestamp(1e9===i?new Ji(t+1,0):new Ji(t,i));return new Ua(r,vt.empty(),e)}function T5(n){return new Ua(n.readTime,n.key,-1)}class Ua{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ua(en.min(),vt.empty(),-1)}static max(){return new Ua(en.max(),vt.empty(),-1)}}function xF(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=vt.comparator(n.documentKey,e.documentKey),0!==t?t:wn(n.largestBatchId,e.largestBatchId))}const S5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ff(n){return kF.apply(this,arguments)}function kF(){return kF=(0,Ce.Z)(function*(n){if(n.code!==Pe.FAILED_PRECONDITION||n.message!==S5)throw n;at("LocalStore","Unexpectedly lost primary lease")}),kF.apply(this,arguments)}class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ke((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ke?t:ke.resolve(t)}catch(t){return ke.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ke.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ke.reject(t)}static resolve(e){return new ke((t,i)=>{t(e)})}static reject(e){return new ke((t,i)=>{i(e)})}static waitFor(e){return new ke((t,i)=>{let r=0,o=0,c=!1;e.forEach(p=>{++r,p.next(()=>{++o,c&&o===r&&t()},_=>i(_))}),c=!0,o===r&&t()})}static or(e){let t=ke.resolve(!1);for(const i of e)t=t.next(r=>r?ke.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new ke((i,r)=>{const o=e.length,c=new Array(o);let p=0;for(let _=0;_<o;_++){const E=_;t(e[E]).next(T=>{c[E]=T,++p,p===o&&i(c)},T=>r(T))}})}static doWhile(e,t){return new ke((i,r)=>{const o=()=>{!0===e()?t().next(()=>{o()},r):i()};o()})}}class sA{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Es,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new PE(e,t.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=RF(i.target.error);this.P.reject(new PE(e,r))}}static open(e,t,i,r){try{return new sA(t,e.transaction(r,i))}catch(o){throw new PE(t,o)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(at("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Dee(t)}}class Cu{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===Cu.D((0,W.z$)())&&Br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return at("SimpleDb","Removing database:",e),cm(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,W.hl)())return!1;if(Cu.N())return!0;const e=(0,W.z$)(),t=Cu.D(e),i=0<t&&t<10,r=Cu.k(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(at("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=c=>{i(c.target.result)},o.onblocked=()=>{r(new PE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=c=>{const p=c.target.error;r("VersionError"===p.name?new Je(Pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Je(Pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new PE(e,p))},o.onupgradeneeded=c=>{at("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,o.transaction,c.oldVersion,t.version).next(()=>{at("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var o=this;return(0,Ce.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{o.db=yield o.F(e);const _=sA.open(o.db,e,c?"readonly":"readwrite",i),E=r(_).next(T=>(_.V(),T)).catch(T=>(_.abort(T),ke.reject(T))).toPromise();return E.catch(()=>{}),yield _.v,E}catch(_){const E=_,T="FirebaseError"!==E.name&&p<3;if(at("SimpleDb","Transaction failed with error:",E.message,"Retrying:",T),o.close(),!T)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class See{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return cm(this.q.delete())}}class PE extends Je{constructor(e,t){super(Pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Lf(n){return"IndexedDbTransactionError"===n.name}class Dee{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(at("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(at("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),cm(i)}add(e){return at("SimpleDb","ADD",this.store.name,e,e),cm(this.store.add(e))}get(e){return cm(this.store.get(e)).next(t=>(void 0===t&&(t=null),at("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return at("SimpleDb","DELETE",this.store.name,e),cm(this.store.delete(e))}count(){return at("SimpleDb","COUNT",this.store.name),cm(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),o=[];return this.H(r,(c,p)=>{o.push(p)}).next(()=>o)}{const r=this.store.getAll(i.range);return new ke((o,c)=>{r.onerror=p=>{c(p.target.error)},r.onsuccess=p=>{o(p.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new ke((r,o)=>{i.onerror=c=>{o(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}Y(e,t){at("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const r=this.cursor(i);return this.H(r,(o,c,p)=>p.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.H(r,t)}tt(e){const t=this.cursor({});return new ke((i,r)=>{t.onerror=o=>{const c=RF(o.target.error);r(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():i()}):i()}})}H(e,t){const i=[];return new ke((r,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void r();const _=new See(p),E=t(p.primaryKey,p.value,_);if(E instanceof ke){const T=E.catch(R=>(_.done(),ke.reject(R)));i.push(T)}_.isDone?r():null===_.G?p.continue():p.continue(_.G)}}).next(()=>ke.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cm(n){return new ke((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=RF(i.target.error);t(r)}})}let A5=!1;function RF(n){const e=Cu.D((0,W.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Je("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return A5||(A5=!0,setTimeout(()=>{throw i},0)),i}}return n}class Aee{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;at("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ce.Z)(function*(){t.task=null;try{at("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){Lf(i)?at("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Ff(i)}yield t.nt(6e4)}))}}class Mee{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ce.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let r=t,o=!0;return ke.doWhile(()=>!0===o&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!i.has(c))return at("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,r).next(p=>{r-=p,i.add(c)});o=!1})).next(()=>t-r)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(r,o)).next(p=>(at("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>c.size)}))}ot(e,t){let i=e;return t.changes.forEach((r,o)=>{const c=T5(o);xF(c,i)>0&&(i=c)}),new Ua(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Va=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>i.writeSequenceNumber(r))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class xee{constructor(e,t,i,r,o,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class Uf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Uf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Uf&&e.projectId===this.projectId&&e.database===this.database}}function M5(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function dm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function x5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function NE(n){return null==n}function OE(n){return 0===n&&1/n==-1/0}function k5(n){return"number"==typeof n&&Number.isInteger(n)&&!OE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Cs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Cs(t)}static fromUint8Array(e){const t=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new Cs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return wn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cs.EMPTY_BYTE_STRING=new Cs("");const Ree=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vf(n){if(Kt(!!n),"string"==typeof n){let e=0;const t=Ree.exec(n);if(Kt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Dr(n.seconds),nanos:Dr(n.nanos)}}function Dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function hm(n){return"string"==typeof n?Cs.fromBase64String(n):Cs.fromUint8Array(n)}function PF(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function R5(n){const e=n.mapValue.fields.__previous_value__;return PF(e)?R5(e):e}function FE(n){const e=Vf(n.mapValue.fields.__local_write_time__.timestampValue);return new Ji(e.seconds,e.nanos)}const Bf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},oA={nullValue:"NULL_VALUE"};function fm(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?PF(n)?4:F5(n)?9007199254740991:10:Lt()}function Rc(n,e){if(n===e)return!0;const t=fm(n);if(t!==fm(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return FE(n).isEqual(FE(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Vf(i.timestampValue),c=Vf(r.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,hm(n.bytesValue).isEqual(hm(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Dr(i.geoPointValue.latitude)===Dr(r.geoPointValue.latitude)&&Dr(i.geoPointValue.longitude)===Dr(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Dr(i.integerValue)===Dr(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Dr(i.doubleValue),c=Dr(r.doubleValue);return o===c?OE(o)===OE(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return bv(n.arrayValue.values||[],e.arrayValue.values||[],Rc);case 10:return function(i,r){const o=i.mapValue.fields||{},c=r.mapValue.fields||{};if(M5(o)!==M5(c))return!1;for(const p in o)if(o.hasOwnProperty(p)&&(void 0===c[p]||!Rc(o[p],c[p])))return!1;return!0}(n,e);default:return Lt()}var r}function LE(n,e){return void 0!==(n.values||[]).find(t=>Rc(t,e))}function jf(n,e){if(n===e)return 0;const t=fm(n),i=fm(e);if(t!==i)return wn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return wn(n.booleanValue,e.booleanValue);case 2:return function(r,o){const c=Dr(r.integerValue||r.doubleValue),p=Dr(o.integerValue||o.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return P5(n.timestampValue,e.timestampValue);case 4:return P5(FE(n),FE(e));case 5:return wn(n.stringValue,e.stringValue);case 6:return function(r,o){const c=hm(r),p=hm(o);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(r,o){const c=r.split("/"),p=o.split("/");for(let _=0;_<c.length&&_<p.length;_++){const E=wn(c[_],p[_]);if(0!==E)return E}return wn(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,o){const c=wn(Dr(r.latitude),Dr(o.latitude));return 0!==c?c:wn(Dr(r.longitude),Dr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,o){const c=r.values||[],p=o.values||[];for(let _=0;_<c.length&&_<p.length;++_){const E=jf(c[_],p[_]);if(E)return E}return wn(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,o){if(r===Bf.mapValue&&o===Bf.mapValue)return 0;if(r===Bf.mapValue)return 1;if(o===Bf.mapValue)return-1;const c=r.fields||{},p=Object.keys(c),_=o.fields||{},E=Object.keys(_);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const R=wn(p[T],E[T]);if(0!==R)return R;const F=jf(c[p[T]],_[E[T]]);if(0!==F)return F}return wn(p.length,E.length)}(n.mapValue,e.mapValue);default:throw Lt()}}function P5(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return wn(n,e);const t=Vf(n),i=Vf(e),r=wn(t.seconds,i.seconds);return 0!==r?r:wn(t.nanos,i.nanos)}function Ev(n){return NF(n)}function NF(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Vf(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?hm(n.bytesValue).toBase64():"referenceValue"in n?vt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",o=!0;for(const c of i.values||[])o?o=!1:r+=",",r+=NF(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",c=!0;for(const p of r)c?c=!1:o+=",",o+=`${p}:${NF(i.fields[p])}`;return o+"}"}(n.mapValue):Lt();var e}function pm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function OF(n){return!!n&&"integerValue"in n}function UE(n){return!!n&&"arrayValue"in n}function N5(n){return!!n&&"nullValue"in n}function O5(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function aA(n){return!!n&&"mapValue"in n}function VE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return dm(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=VE(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=VE(n.arrayValue.values[t]);return e}return Object.assign({},n)}function F5(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Pee(n){return"nullValue"in n?oA:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?pm(Uf.empty(),vt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Lt()}function Nee(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?pm(Uf.empty(),vt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Bf:Lt()}function L5(n,e){const t=jf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function U5(n,e){const t=jf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Hf{constructor(e,t){this.position=e,this.inclusive=t}}function V5(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const o=e[r],c=n.position[r];if(i=o.field.isKeyField()?vt.comparator(vt.fromName(c.referenceValue),t.key):jf(c,t.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function B5(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Rc(n.position[t],e.position[t]))return!1;return!0}class j5{}class Bn extends j5{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new Oee(e,t,i):"array-contains"===t?new Uee(e,i):"in"===t?new z5(e,i):"not-in"===t?new Vee(e,i):"array-contains-any"===t?new Bee(e,i):new Bn(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new Fee(e,i):new Lee(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(jf(t,this.value)):null!==t&&fm(this.value)===fm(t)&&this.matchesComparison(jf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class mi extends j5{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new mi(e,t)}matches(e){return Cv(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Cv(n){return"and"===n.op}function FF(n){return"or"===n.op}function LF(n){return H5(n)&&Cv(n)}function H5(n){for(const e of n.filters)if(e instanceof mi)return!1;return!0}function UF(n){if(n instanceof Bn)return n.field.canonicalString()+n.op.toString()+Ev(n.value);if(LF(n))return n.filters.map(e=>UF(e)).join(",");{const e=n.filters.map(t=>UF(t)).join(",");return`${n.op}(${e})`}}function $5(n,e){return n instanceof Bn?(t=n,(i=e)instanceof Bn&&t.op===i.op&&t.field.isEqual(i.field)&&Rc(t.value,i.value)):n instanceof mi?function(t,i){return i instanceof mi&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((r,o,c)=>r&&$5(o,i.filters[c]),!0)}(n,e):void Lt();var t,i}function G5(n,e){const t=n.filters.concat(e);return mi.create(t,n.op)}function q5(n){return n instanceof Bn?`${(e=n).field.canonicalString()} ${e.op} ${Ev(e.value)}`:n instanceof mi?function(e){return e.op.toString()+" {"+e.getFilters().map(q5).join(" ,")+"}"}(n):"Filter";var e}class Oee extends Bn{constructor(e,t,i){super(e,t,i),this.key=vt.fromName(i.referenceValue)}matches(e){const t=vt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Fee extends Bn{constructor(e,t){super(e,"in",t),this.keys=Z5(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Lee extends Bn{constructor(e,t){super(e,"not-in",t),this.keys=Z5(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Z5(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>vt.fromName(i.referenceValue))}class Uee extends Bn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return UE(t)&&LE(t.arrayValue,this.value)}}class z5 extends Bn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&LE(this.value.arrayValue,t)}}class Vee extends Bn{constructor(e,t){super(e,"not-in",t)}matches(e){if(LE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!LE(this.value.arrayValue,t)}}class Bee extends Bn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!UE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>LE(this.value.arrayValue,i))}}class Iv{constructor(e,t="asc"){this.field=e,this.dir=t}}function jee(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Ar{constructor(e,t){this.comparator=e,this.root=t||Js.EMPTY}insert(e,t){return new Ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Js.BLACK,null,null))}remove(e){return new Ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Js.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lA(this.root,e,this.comparator,!1)}getReverseIterator(){return new lA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lA(this.root,e,this.comparator,!0)}}class lA{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Js{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??Js.RED,this.left=r??Js.EMPTY,this.right=o??Js.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new Js(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Js.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Js.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Js.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Js.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Lt();const e=this.left.check();if(e!==this.right.check())throw Lt();return e+(this.isRed()?0:1)}}Js.EMPTY=null,Js.RED=!0,Js.BLACK=!1,Js.EMPTY=new class{constructor(){this.size=0}get key(){throw Lt()}get value(){throw Lt()}get color(){throw Lt()}get left(){throw Lt()}get right(){throw Lt()}copy(n,e,t,i,r){return this}insert(n,e,t){return new Js(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bi{constructor(e){this.comparator=e,this.data=new Ar(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new W5(this.data.getIterator())}getIteratorFrom(e){return new W5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof bi)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(0!==this.comparator(r,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bi(this.comparator);return t.data=e,t}}class W5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tv(n){return n.hasNext()?n.getNext():void 0}class la{constructor(e){this.fields=e,e.sort(Sr.comparator)}static empty(){return new la([])}unionWith(e){let t=new bi(Sr.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new la(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bv(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class Xs{constructor(e){this.value=e}static empty(){return new Xs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!aA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=VE(t)}setAll(e){let t=Sr.emptyPath(),i={},r=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,i,r),i={},r=[],t=p.popLast()}c?i[p.lastSegment()]=VE(c):r.push(p.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){const t=this.field(e.popLast());aA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];aA(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){dm(t,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Xs(VE(this.value))}}function K5(n){const e=[];return dm(n.fields,(t,i)=>{const r=new Sr([t]);if(aA(i)){const o=K5(i.mapValue).fields;if(0===o.length)e.push(r);else for(const c of o)e.push(r.child(c))}else e.push(r)}),new la(e)}class Bi{constructor(e,t,i,r,o,c,p){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=c,this.documentState=p}static newInvalidDocument(e){return new Bi(e,0,en.min(),en.min(),en.min(),Xs.empty(),0)}static newFoundDocument(e,t,i,r){return new Bi(e,1,t,en.min(),i,r,0)}static newNoDocument(e,t){return new Bi(e,2,t,en.min(),en.min(),Xs.empty(),0)}static newUnknownDocument(e,t){return new Bi(e,3,t,en.min(),en.min(),Xs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(en.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=en.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hee{constructor(e,t=null,i=[],r=[],o=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=c,this.endAt=p,this.ft=null}}function VF(n,e=null,t=[],i=[],r=null,o=null,c=null){return new Hee(n,e,t,i,r,o,c)}function gm(n){const e=Et(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>UF(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),NE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Ev(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Ev(i)).join(",")),e.ft=t}return e.ft}function BE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jee(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$5(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!B5(n.startAt,e.startAt)&&B5(n.endAt,e.endAt)}function uA(n){return vt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function cA(n,e){return n.filters.filter(t=>t instanceof Bn&&t.field.isEqual(e))}function Y5(n,e,t){let i=oA,r=!0;for(const o of cA(n,e)){let c=oA,p=!0;switch(o.op){case"<":case"<=":c=Pee(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,p=!1;break;case"!=":case"not-in":c=oA}L5({value:i,inclusive:r},{value:c,inclusive:p})<0&&(i=c,r=p)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];L5({value:i,inclusive:r},{value:c,inclusive:t.inclusive})<0&&(i=c,r=t.inclusive);break}return{value:i,inclusive:r}}function Q5(n,e,t){let i=Bf,r=!0;for(const o of cA(n,e)){let c=Bf,p=!0;switch(o.op){case">=":case">":c=Nee(o.value),p=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,p=!1;break;case"!=":case"not-in":c=Bf}U5({value:i,inclusive:r},{value:c,inclusive:p})>0&&(i=c,r=p)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];U5({value:i,inclusive:r},{value:c,inclusive:t.inclusive})>0&&(i=c,r=t.inclusive);break}return{value:i,inclusive:r}}class Wd{constructor(e,t=null,i=[],r=[],o=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=c,this.startAt=p,this.endAt=_,this.dt=null,this._t=null}}function J5(n,e,t,i,r,o,c,p){return new Wd(n,e,t,i,r,o,c,p)}function Sv(n){return new Wd(n)}function X5(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function BF(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function dA(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function jF(n){return null!==n.collectionGroup}function mm(n){const e=Et(n);if(null===e.dt){e.dt=[];const t=dA(e),i=BF(e);if(null!==t&&null===i)t.isKeyField()||e.dt.push(new Iv(t)),e.dt.push(new Iv(Sr.keyField(),"asc"));else{let r=!1;for(const o of e.explicitOrderBy)e.dt.push(o),o.field.isKeyField()&&(r=!0);if(!r){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Iv(Sr.keyField(),o))}}}return e.dt}function Bo(n){const e=Et(n);if(!e._t)if("F"===e.limitType)e._t=VF(e.path,e.collectionGroup,mm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of mm(e))t.push(new Iv(o.field,"desc"===o.dir?"asc":"desc"));const i=e.endAt?new Hf(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Hf(e.startAt.position,e.startAt.inclusive):null;e._t=VF(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e._t}function HF(n,e){e.getFirstInequalityField(),dA(n);const t=n.filters.concat([e]);return new Wd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function hA(n,e,t){return new Wd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jE(n,e){return BE(Bo(n),Bo(e))&&n.limitType===e.limitType}function e$(n){return`${gm(Bo(n))}|lt:${n.limitType}`}function $F(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>q5(i)).join(", ")}]`),NE(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Ev(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Ev(i)).join(",")),`Target(${t})`}(Bo(n))}; limitType=${n.limitType})`}function HE(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):vt.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of mm(t))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,o,c){const p=V5(r,o,c);return r.inclusive?p<=0:p<0}(t.startAt,mm(t),i)||t.endAt&&!function(r,o,c){const p=V5(r,o,c);return r.inclusive?p>=0:p>0}(t.endAt,mm(t),i)));var t,i}function t$(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function n$(n){return(e,t)=>{let i=!1;for(const r of mm(n)){const o=$ee(r,e,t);if(0!==o)return o;i=i||r.field.isKeyField()}return 0}}function $ee(n,e,t){const i=n.field.isKeyField()?vt.comparator(e.key,t.key):function(r,o,c){const p=o.data.field(r),_=c.data.field(r);return null!==p&&null!==_?jf(p,_):Lt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Lt()}}function i$(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:OE(e)?"-0":e}}function r$(n){return{integerValue:""+n}}function s$(n,e){return k5(e)?r$(e):i$(n,e)}class fA{constructor(){this._=void 0}}function Gee(n,e,t){return n instanceof Dv?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(o.fields.__previous_value__=r),{mapValue:o}}(t,e):n instanceof _m?a$(n,e):n instanceof ym?l$(n,e):function(i,r){const o=o$(i,r),c=u$(o)+u$(i.gt);return OF(o)&&OF(i.gt)?r$(c):i$(i.yt,c)}(n,e)}function qee(n,e,t){return n instanceof _m?a$(n,e):n instanceof ym?l$(n,e):t}function o$(n,e){return n instanceof Av?OF(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class Dv extends fA{}class _m extends fA{constructor(e){super(),this.elements=e}}function a$(n,e){const t=c$(e);for(const i of n.elements)t.some(r=>Rc(r,i))||t.push(i);return{arrayValue:{values:t}}}class ym extends fA{constructor(e){super(),this.elements=e}}function l$(n,e){let t=c$(e);for(const i of n.elements)t=t.filter(r=>!Rc(r,i));return{arrayValue:{values:t}}}class Av extends fA{constructor(e,t){super(),this.yt=e,this.gt=t}}function u$(n){return Dr(n.integerValue||n.doubleValue)}function c$(n){return UE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $E{constructor(e,t){this.field=e,this.transform=t}}class zee{constructor(e,t){this.version=e,this.transformResults=t}}class Xi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xi}static exists(e){return new Xi(void 0,e)}static updateTime(e){return new Xi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pA(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class gA{}function d$(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new xv(n.key,Xi.none()):new Mv(n.key,n.data,Xi.none());{const t=n.data,i=Xs.empty();let r=new bi(Sr.comparator);for(let o of e.fields)if(!r.has(o)){let c=t.field(o);null===c&&o.length>1&&(o=o.popLast(),c=t.field(o)),null===c?i.delete(o):i.set(o,c),r=r.add(o)}return new Kd(n.key,i,new la(r.toArray()),Xi.none())}}function Wee(n,e,t){n instanceof Mv?function(i,r,o){const c=i.value.clone(),p=p$(i.fieldTransforms,r,o.transformResults);c.setAll(p),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Kd?function(i,r,o){if(!pA(i.precondition,r))return void r.convertToUnknownDocument(o.version);const c=p$(i.fieldTransforms,r,o.transformResults),p=r.data;p.setAll(f$(i)),p.setAll(c),r.convertToFoundDocument(o.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function GE(n,e,t,i){return n instanceof Mv?function(r,o,c,p){if(!pA(r.precondition,o))return c;const _=r.value.clone(),E=g$(r.fieldTransforms,p,o);return _.setAll(E),o.convertToFoundDocument(o.version,_).setHasLocalMutations(),null}(n,e,t,i):n instanceof Kd?function(r,o,c,p){if(!pA(r.precondition,o))return c;const _=g$(r.fieldTransforms,p,o),E=o.data;return E.setAll(f$(r)),E.setAll(_),o.convertToFoundDocument(o.version,E).setHasLocalMutations(),null===c?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(T=>T.field))}(n,e,t,i):(c=t,pA(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c);var o,c}function Kee(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),o=o$(i.transform,r||null);null!=o&&(null===t&&(t=Xs.empty()),t.set(i.field,o))}return t||null}function h$(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&bv(t,i,(r,o)=>function Zee(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof _m&&i instanceof _m||t instanceof ym&&i instanceof ym?bv(t.elements,i.elements,Rc):t instanceof Av&&i instanceof Av?Rc(t.gt,i.gt):t instanceof Dv&&i instanceof Dv);var t,i}(r,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class Mv extends gA{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Kd extends gA{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function f$(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function p$(n,e,t){const i=new Map;Kt(n.length===t.length);for(let r=0;r<t.length;r++){const o=n[r],c=o.transform,p=e.data.field(o.field);i.set(o.field,qee(c,p,t[r]))}return i}function g$(n,e,t){const i=new Map;for(const r of n){const o=r.transform,c=t.data.field(r.field);i.set(r.field,Gee(o,c,e))}return i}class xv extends gA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GF extends gA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Yee{constructor(e){this.count=e}}var is,Kn;function m$(n){switch(n){default:return Lt();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0}}function _$(n){if(void 0===n)return Br("GRPC error has no .code"),Pe.UNKNOWN;switch(n){case is.OK:return Pe.OK;case is.CANCELLED:return Pe.CANCELLED;case is.UNKNOWN:return Pe.UNKNOWN;case is.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case is.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case is.INTERNAL:return Pe.INTERNAL;case is.UNAVAILABLE:return Pe.UNAVAILABLE;case is.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case is.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case is.NOT_FOUND:return Pe.NOT_FOUND;case is.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case is.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case is.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case is.ABORTED:return Pe.ABORTED;case is.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case is.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case is.DATA_LOSS:return Pe.DATA_LOSS;default:return Lt()}}(Kn=is||(is={}))[Kn.OK=0]="OK",Kn[Kn.CANCELLED=1]="CANCELLED",Kn[Kn.UNKNOWN=2]="UNKNOWN",Kn[Kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kn[Kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kn[Kn.NOT_FOUND=5]="NOT_FOUND",Kn[Kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kn[Kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kn[Kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kn[Kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kn[Kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kn[Kn.ABORTED=10]="ABORTED",Kn[Kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kn[Kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kn[Kn.INTERNAL=13]="INTERNAL",Kn[Kn.UNAVAILABLE=14]="UNAVAILABLE",Kn[Kn.DATA_LOSS=15]="DATA_LOSS";class $f{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,o]of i)if(this.equalsFn(r,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){dm(this.inner,(t,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return x5(this.inner)}size(){return this.innerSize}}const Qee=new Ar(vt.comparator);function ua(){return Qee}const y$=new Ar(vt.comparator);function qE(...n){let e=y$;for(const t of n)e=e.insert(t.key,t);return e}function v$(n){let e=y$;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Pc(){return ZE()}function w$(){return ZE()}function ZE(){return new $f(n=>n.toString(),(n,e)=>n.isEqual(e))}const Jee=new Ar(vt.comparator),Xee=new bi(vt.comparator);function Cn(...n){let e=Xee;for(const t of n)e=e.add(t);return e}const ete=new bi(wn);function mA(){return ete}class zE{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,WE.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new zE(en.min(),r,mA(),ua(),Cn())}}class WE{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new WE(i,t,Cn(),Cn(),Cn())}}class _A{constructor(e,t,i,r){this.It=e,this.removedTargetIds=t,this.key=i,this.Tt=r}}class b${constructor(e,t){this.targetId=e,this.Et=t}}class E${constructor(e,t,i=Cs.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class C${constructor(){this.At=0,this.Rt=T$(),this.bt=Cs.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Cn(),t=Cn(),i=Cn();return this.Rt.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Lt()}}),new WE(this.bt,this.Pt,e,t,i)}xt(){this.vt=!1,this.Rt=T$()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class tte{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=ua(),this.qt=I$(),this.Ut=new bi(wn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const i=this.Wt(t);switch(e.state){case 0:this.zt(t)&&i.Dt(e.resumeToken);break;case 1:i.Mt(),i.Vt||i.xt(),i.Dt(e.resumeToken);break;case 2:i.Mt(),i.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(i.Ft(),i.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),i.Dt(e.resumeToken));break;default:Lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((i,r)=>{this.zt(r)&&t(r)})}Jt(e){const t=e.targetId,i=e.Et.count,r=this.Yt(t);if(r){const o=r.target;if(uA(o))if(0===i){const c=new vt(o.path);this.Qt(t,c,Bi.newNoDocument(c,en.min()))}else Kt(1===i);else this.Xt(t)!==i&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((o,c)=>{const p=this.Yt(c);if(p){if(o.current&&uA(p.target)){const _=new vt(p.target.path);null!==this.Lt.get(_)||this.te(c,_)||this.Qt(c,_,Bi.newNoDocument(_,e))}o.St&&(t.set(c,o.Ct()),o.xt())}});let i=Cn();this.qt.forEach((o,c)=>{let p=!0;c.forEachWhile(_=>{const E=this.Yt(_);return!E||2===E.purpose||(p=!1,!1)}),p&&(i=i.add(o))}),this.Lt.forEach((o,c)=>c.setReadTime(e));const r=new zE(e,t,this.Ut,this.Lt,i);return this.Lt=ua(),this.qt=I$(),this.Ut=new bi(wn),r}Gt(e,t){if(!this.zt(e))return;const i=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,i),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,i){if(!this.zt(e))return;const r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),i&&(this.Lt=this.Lt.insert(t,i))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new C$,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new bi(wn),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||at("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new C$),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function I$(){return new Ar(vt.comparator)}function T$(){return new Ar(vt.comparator)}const nte={asc:"ASCENDING",desc:"DESCENDING"},ite={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rte={and:"AND",or:"OR"};class ste{constructor(e,t){this.databaseId=e,this.wt=t}}function kv(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function S$(n,e){return n.wt?e.toBase64():e.toUint8Array()}function ote(n,e){return kv(n,e.toTimestamp())}function jr(n){return Kt(!!n),en.fromTimestamp(function(e){const t=Vf(e);return new Ji(t.seconds,t.nanos)}(n))}function qF(n,e){return(t=n,new Wn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function D$(n){const e=Wn.fromString(n);return Kt(F$(e)),e}function KE(n,e){return qF(n.databaseId,e.path)}function Nc(n,e){const t=D$(e);if(t.get(1)!==n.databaseId.projectId)throw new Je(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Je(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new vt(M$(t))}function ZF(n,e){return qF(n.databaseId,e)}function A$(n){const e=D$(n);return 4===e.length?Wn.emptyPath():M$(e)}function YE(n){return new Wn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function M$(n){return Kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function x$(n,e,t){return{name:KE(n,e),fields:t.value.mapValue.fields}}function k$(n,e,t){const i=Nc(n,e.name),r=jr(e.updateTime),o=e.createTime?jr(e.createTime):en.min(),c=new Xs({mapValue:{fields:e.fields}}),p=Bi.newFoundDocument(i,r,o,c);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function QE(n,e){let t;if(e instanceof Mv)t={update:x$(n,e.key,e.value)};else if(e instanceof xv)t={delete:KE(n,e.key)};else if(e instanceof Kd)t={update:x$(n,e.key,e.data),updateMask:pte(e.fieldMask)};else{if(!(e instanceof GF))return Lt();t={verify:KE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const c=o.transform;if(c instanceof Dv)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof _m)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ym)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Av)return{fieldPath:o.field.canonicalString(),increment:c.gt};throw Lt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:ote(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:Lt()),t;var r}function zF(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?Xi.updateTime(jr(r.updateTime)):void 0!==r.exists?Xi.exists(r.exists):Xi.none():Xi.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,c){let p=null;"setToServerValue"in c?(Kt("REQUEST_TIME"===c.setToServerValue),p=new Dv):"appendMissingElements"in c?p=new _m(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new ym(c.removeAllFromArray.values||[]):"increment"in c?p=new Av(o,c.increment):Lt();const _=Sr.fromServerFormat(c.fieldPath);return new $E(_,p)}(n,r)):[];var r;if(e.update){const r=Nc(n,e.update.name),o=new Xs({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new la((e.updateMask.fieldPaths||[]).map(E=>Sr.fromServerFormat(E)));return new Kd(r,o,c,t,i)}return new Mv(r,o,t,i)}if(e.delete){const r=Nc(n,e.delete);return new xv(r,t)}if(e.verify){const r=Nc(n,e.verify);return new GF(r,t)}return Lt()}function R$(n,e){return{documents:[ZF(n,e.path)]}}function WF(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=ZF(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ZF(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(_){if(0!==_.length)return O$(mi.create(_,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const o=function(_){if(0!==_.length)return _.map(E=>{return{field:Rv((T=E).field),direction:dte(T.dir)};var T})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=(E=e.limit,n.wt||NE(E)?E:{value:E});var E,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function P$(n){let e=A$(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Kt(1===i);const T=t.from[0];T.allDescendants?r=T.collectionId:e=e.child(T.collectionId)}let o=[];t.where&&(o=function(T){const R=N$(T);return R instanceof mi&&LF(R)?R.getFilters():[R]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(T=>{return new Iv(Pv((R=T).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let p=null;t.limit&&(p=function(T){let R;return R="object"==typeof T?T.value:T,NE(R)?null:R}(t.limit));let _=null;var T;t.startAt&&(_=new Hf((T=t.startAt).values||[],!!T.before));let E=null;return t.endAt&&(E=function(T){return new Hf(T.values||[],!T.before)}(t.endAt)),J5(e,r,c,o,p,"F",_,E)}function N$(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Pv(e.unaryFilter.field);return Bn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=Pv(e.unaryFilter.field);return Bn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Pv(e.unaryFilter.field);return Bn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pv(e.unaryFilter.field);return Bn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Lt()}}(n):void 0!==n.fieldFilter?Bn.create(Pv((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Lt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return mi.create(e.compositeFilter.filters.map(t=>N$(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Lt()}}(e.compositeFilter.op))}(n):Lt();var e}function dte(n){return nte[n]}function hte(n){return ite[n]}function fte(n){return rte[n]}function Rv(n){return{fieldPath:n.canonicalString()}}function Pv(n){return Sr.fromServerFormat(n.fieldPath)}function O$(n){return n instanceof Bn?function(e){if("=="===e.op){if(O5(e.value))return{unaryFilter:{field:Rv(e.field),op:"IS_NAN"}};if(N5(e.value))return{unaryFilter:{field:Rv(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(O5(e.value))return{unaryFilter:{field:Rv(e.field),op:"IS_NOT_NAN"}};if(N5(e.value))return{unaryFilter:{field:Rv(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rv(e.field),op:hte(e.op),value:e.value}}}(n):n instanceof mi?function(e){const t=e.getFilters().map(i=>O$(i));return 1===t.length?t[0]:{compositeFilter:{op:fte(e.op),filters:t}}}(n):Lt()}function pte(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function F$(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function jo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=L$(e)),e=gte(n.get(t),e);return L$(e)}function gte(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function L$(n){return n+"\x01\x01"}function Oc(n){const e=n.length;if(Kt(e>=2),2===e)return Kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Wn.emptyPath();const t=e-2,i=[];let r="";for(let o=0;o<e;){const c=n.indexOf("\x01",o);switch((c<0||c>t)&&Lt(),n.charAt(c+1)){case"\x01":const p=n.substring(o,c);let _;0===r.length?_=p:(r+=p,_=r,r=""),i.push(_);break;case"\x10":r+=n.substring(o,c),r+="\0";break;case"\x11":r+=n.substring(o,c+1);break;default:Lt()}o=c+2}return new Wn(i)}const U$=["userId","batchId"];function yA(n,e){return[n,jo(e)]}function V$(n,e,t){return[n,jo(e),t]}const mte={},_te=["prefixPath","collectionGroup","readTime","documentId"],yte=["prefixPath","collectionGroup","documentId"],vte=["collectionGroup","readTime","prefixPath","documentId"],wte=["canonicalId","targetId"],bte=["targetId","path"],Ete=["path","targetId"],Cte=["collectionId","parent"],Ite=["indexId","uid"],Tte=["uid","sequenceNumber"],Ste=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Dte=["indexId","uid","orderedDocumentKey"],Ate=["userId","collectionPath","documentId"],Mte=["userId","collectionPath","largestBatchId"],xte=["userId","collectionGroup","largestBatchId"],B$=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],kte=[...B$,"documentOverlays"],j$=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],H$=j$,Rte=[...H$,"indexConfiguration","indexState","indexEntries"];class KF extends D5{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Us(n,e){const t=Et(n);return Cu.M(t.se,e)}class YF{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&Wee(o,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=GE(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=GE(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=w$();return this.mutations.forEach(r=>{const o=e.get(r.key),c=o.overlayedDocument;let p=this.applyToLocalView(c,o.mutatedFields);p=t.has(r.key)?null:p;const _=d$(c,p);null!==_&&i.set(r.key,_),c.isValidDocument()||c.convertToNoDocument(en.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Cn())}isEqual(e){return this.batchId===e.batchId&&bv(this.mutations,e.mutations,(t,i)=>h$(t,i))&&bv(this.baseMutations,e.baseMutations,(t,i)=>h$(t,i))}}class QF{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Kt(e.mutations.length===i.length);let r=Jee;const o=e.mutations;for(let c=0;c<o.length;c++)r=r.insert(o[c].key,i[c].version);return new QF(e,t,i,r)}}class JF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Gf{constructor(e,t,i,r,o=en.min(),c=en.min(),p=Cs.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new Gf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Gf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Gf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class $${constructor(e){this.ie=e}}function G$(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vA(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:KE(r=n.ie,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:kv(r,o.version.toTimestamp()),createTime:kv(r,o.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:vm(e.version)};else{if(!e.isUnknownDocument())return Lt();i.unknownDocument={path:t.path.toArray(),version:vm(e.version)}}var r,o;return i}function vA(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function vm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wm(n){const e=new Ji(n.seconds,n.nanoseconds);return en.fromTimestamp(e)}function bm(n,e){const t=(e.baseMutations||[]).map(o=>zF(n.ie,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const i=e.mutations.map(o=>zF(n.ie,o)),r=Ji.fromMillis(e.localWriteTimeMs);return new YF(e.batchId,r,t,i)}function JE(n){const e=wm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?wm(n.lastLimboFreeSnapshotVersion):en.min();let i;var r;return void 0!==n.query.documents?(Kt(1===(r=n.query).documents.length),i=Bo(Sv(A$(r.documents[0])))):i=Bo(P$(n.query)),new Gf(i,n.targetId,0,n.lastListenSequenceNumber,e,t,Cs.fromBase64String(n.resumeToken))}function q$(n,e){const t=vm(e.snapshotVersion),i=vm(e.lastLimboFreeSnapshotVersion);let r;r=uA(e.target)?R$(n.ie,e.target):WF(n.ie,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:gm(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function XF(n){const e=P$({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?hA(e,e.limit,"L"):e}function eL(n,e){return new JF(e.largestBatchId,zF(n.ie,e.overlayMutation))}function Z$(n,e){const t=e.path.lastSegment();return[n,jo(e.path.popLast()),t]}function z$(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:vm(i.readTime),documentKey:jo(i.documentKey.path),largestBatchId:i.largestBatchId}}class Nte{getBundleMetadata(e,t){return W$(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:wm(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return W$(e).put({bundleId:(i=t).id,createTime:vm(jr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return K$(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:XF(r.bundledQuery),readTime:wm(r.readTime)};var r})}saveNamedQuery(e,t){return K$(e).put({name:(i=t).name,readTime:vm(jr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function W$(n){return Us(n,"bundles")}function K$(n){return Us(n,"namedQueries")}class wA{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new wA(e,t.uid||"")}getOverlay(e,t){return XE(e).get(Z$(this.userId,t)).next(i=>i?eL(this.yt,i):null)}getOverlays(e,t){const i=Pc();return ke.forEach(t,r=>this.getOverlay(e,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((o,c)=>{const p=new JF(t,c);r.push(this.oe(e,p))}),ke.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(c=>r.add(jo(c.getCollectionPath())));const o=[];return r.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);o.push(XE(e).Y("collectionPathOverlayIndex",p))}),ke.waitFor(o)}getOverlaysForCollection(e,t,i){const r=Pc(),o=jo(t),c=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return XE(e).W("collectionPathOverlayIndex",c).next(p=>{for(const _ of p){const E=eL(this.yt,_);r.set(E.getKey(),E)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const o=Pc();let c;const p=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return XE(e).Z({index:"collectionGroupOverlayIndex",range:p},(_,E,T)=>{const R=eL(this.yt,E);o.size()<r||R.largestBatchId===c?(o.set(R.getKey(),R),c=R.largestBatchId):T.done()}).next(()=>o)}oe(e,t){return XE(e).put(function(i,r,o){const[c,p,_]=Z$(r,o.mutation.key);return{userId:r,collectionPath:p,documentId:_,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:QE(i.ie,o.mutation)}}(this.yt,this.userId,t))}}function XE(n){return Us(n,"documentOverlays")}class Em{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Dr(e.integerValue));else if("doubleValue"in e){const i=Dr(e.doubleValue);isNaN(i)?this.he(t,13):(this.he(t,15),OE(i)?t.le(0):t.le(i))}else if("timestampValue"in e){const i=e.timestampValue;this.he(t,20),"string"==typeof i?t.fe(i):(t.fe(`${i.seconds||""}`),t.le(i.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(hm(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?F5(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Lt()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const i=e.fields||{};this.he(t,55);for(const r of Object.keys(i))this.de(r,t),this.ce(i[r],t)}ye(e,t){const i=e.values||[];this.he(t,50);for(const r of i)this.ce(r,t)}me(e,t){this.he(t,37),vt.fromName(e).path.forEach(i=>{this.he(t,60),this.pe(i,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function Ote(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Y$(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const o=Ote(255&t[r]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Em.Ie=new Em;class Fte{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ee(i.value),i=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.be(i.value),i=t.next();this.Pe()}ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{const r=t.codePointAt(0);this.Ee(240|r>>>18),this.Ee(128|63&r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r)}}this.Ae()}Ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{const r=t.codePointAt(0);this.be(240|r>>>18),this.be(128|63&r>>>12),this.be(128|63&r>>>6),this.be(128|63&r)}}this.Pe()}Se(e){const t=this.De(e),i=Y$(t);this.Ce(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}xe(e){const t=this.De(e),i=Y$(t);this.Ce(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(r){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,r,!1),new Uint8Array(o.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class Lte{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class Ute{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class eC{constructor(){this.$e=new Fte,this.Be=new Lte(this.$e),this.Le=new Ute(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Cm{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Cm(this.indexId,this.documentKey,this.arrayValue,i)}}function qf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Q$(n.arrayValue,e.arrayValue),0!==t?t:(t=Q$(n.directionalValue,e.directionalValue),0!==t?t:vt.comparator(n.documentKey,e.documentKey)))}function Q$(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class Vte{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const i=t;i.isInequality()?this.Qe=i:this.Ge.push(i)}}je(e){Kt(e.collectionGroup===this.collectionId);const t=MF(e);if(void 0!==t&&!this.We(t))return!1;const i=um(e);let r=0,o=0;for(;r<i.length&&this.We(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Qe){const c=i[r];if(!this.ze(this.Qe,c)||!this.He(this.Ke[o++],c))return!1;++r}for(;r<i.length;++r)if(o>=this.Ke.length||!this.He(this.Ke[o++],i[r]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function J$(n){var e,t;if(Kt(n instanceof Bn||n instanceof mi),n instanceof Bn){if(n instanceof z5){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>Bn.create(n.field,"==",o)))||[];return mi.create(r,"or")}return n}const i=n.filters.map(r=>J$(r));return mi.create(i,n.op)}function Bte(n){if(0===n.getFilters().length)return[];const e=iL(J$(n));return Kt(X$(e)),tL(e)||nL(e)?[e]:e.getFilters()}function tL(n){return n instanceof Bn}function nL(n){return n instanceof mi&&LF(n)}function X$(n){return tL(n)||nL(n)||function(e){if(e instanceof mi&&FF(e)){for(const t of e.getFilters())if(!tL(t)&&!nL(t))return!1;return!0}return!1}(n)}function iL(n){if(Kt(n instanceof Bn||n instanceof mi),n instanceof Bn)return n;if(1===n.filters.length)return iL(n.filters[0]);const e=n.filters.map(i=>iL(i));let t=mi.create(e,n.op);return t=bA(t),X$(t)?t:(Kt(t instanceof mi),Kt(Cv(t)),Kt(t.filters.length>1),t.filters.reduce((i,r)=>rL(i,r)))}function rL(n,e){let t;return Kt(n instanceof Bn||n instanceof mi),Kt(e instanceof Bn||e instanceof mi),t=n instanceof Bn?e instanceof Bn?mi.create([n,e],"and"):eG(n,e):e instanceof Bn?eG(e,n):function(i,r){if(Kt(i.filters.length>0&&r.filters.length>0),Cv(i)&&Cv(r))return G5(i,r.getFilters());const o=FF(i)?i:r,c=FF(i)?r:i,p=o.filters.map(_=>rL(_,c));return mi.create(p,"or")}(n,e),bA(t)}function eG(n,e){if(Cv(e))return G5(e,n.getFilters());{const t=e.filters.map(i=>rL(n,i));return mi.create(t,"or")}}function bA(n){if(Kt(n instanceof Bn||n instanceof mi),n instanceof Bn)return n;const e=n.getFilters();if(1===e.length)return bA(e[0]);if(H5(n))return n;const t=e.map(r=>bA(r)),i=[];return t.forEach(r=>{r instanceof Bn?i.push(r):r instanceof mi&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:mi.create(i,n.op)}class jte{constructor(){this.Je=new sL}addToCollectionParentIndex(e,t){return this.Je.add(t),ke.resolve()}getCollectionParents(e,t){return ke.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ke.resolve()}deleteFieldIndex(e,t){return ke.resolve()}getDocumentsMatchingTarget(e,t){return ke.resolve(null)}getIndexType(e,t){return ke.resolve(0)}getFieldIndexes(e,t){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,t){return ke.resolve(Ua.min())}getMinOffsetFromCollectionGroup(e,t){return ke.resolve(Ua.min())}updateCollectionGroup(e,t,i){return ke.resolve()}updateIndexEntries(e,t){return ke.resolve()}}class sL{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new bi(Wn.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new bi(Wn.comparator)).toArray()}}const EA=new Uint8Array(0);class Hte{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new sL,this.Xe=new $f(i=>gm(i),(i,r)=>BE(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const o={collectionId:i,parent:jo(r)};return tG(e).put(o)}return ke.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[C5(t),""],!1,!0);return tG(e).W(r).next(o=>{for(const c of o){if(c.collectionId!==t)break;i.push(Oc(c.parent))}return i})}addFieldIndex(e,t){const i=CA(e),r={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var c;delete r.indexId;const o=i.add(r);if(t.indexState){const c=nC(e);return o.next(p=>{c.put(z$(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const i=CA(e),r=nC(e),o=tC(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=tC(e);let r=!0;const o=new Map;return ke.forEach(this.Ze(t),c=>this.tn(e,c).next(p=>{r&&(r=!!p),o.set(c,p)})).next(()=>{if(r){let c=Cn();const p=[];return ke.forEach(o,(_,E)=>{var T;at("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(ct=>`${ct.fieldPath}:${ct.kind}`).join(",")}`} to execute ${gm(t)}`);const R=function(ct,ht){const Pt=MF(ht);if(void 0===Pt)return null;for(const Nt of cA(ct,Pt.fieldPath))switch(Nt.op){case"array-contains-any":return Nt.value.arrayValue.values||[];case"array-contains":return[Nt.value]}return null}(E,_),F=function(ct,ht){const Pt=new Map;for(const Nt of um(ht))for(const bn of cA(ct,Nt.fieldPath))switch(bn.op){case"==":case"in":Pt.set(Nt.fieldPath.canonicalString(),bn.value);break;case"not-in":case"!=":return Pt.set(Nt.fieldPath.canonicalString(),bn.value),Array.from(Pt.values())}return null}(E,_),G=function(ct,ht){const Pt=[];let Nt=!0;for(const bn of um(ht)){const tr=0===bn.kind?Y5(ct,bn.fieldPath,ct.startAt):Q5(ct,bn.fieldPath,ct.startAt);Pt.push(tr.value),Nt&&(Nt=tr.inclusive)}return new Hf(Pt,Nt)}(E,_),K=function(ct,ht){const Pt=[];let Nt=!0;for(const bn of um(ht)){const tr=0===bn.kind?Q5(ct,bn.fieldPath,ct.endAt):Y5(ct,bn.fieldPath,ct.endAt);Pt.push(tr.value),Nt&&(Nt=tr.inclusive)}return new Hf(Pt,Nt)}(E,_),ue=this.en(_,E,G),we=this.en(_,E,K),Ke=this.nn(_,E,F),ut=this.sn(_.indexId,R,ue,G.inclusive,we,K.inclusive,Ke);return ke.forEach(ut,ct=>i.J(ct,t.limit).next(ht=>{ht.forEach(Pt=>{const Nt=vt.fromSegments(Pt.documentKey);c.has(Nt)||(c=c.add(Nt),p.push(Nt))})}))}).next(()=>p)}return ke.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:Bte(mi.create(e.filters,"and")).map(i=>VF(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,i,r,o,c,p){const _=(null!=t?t.length:1)*Math.max(i.length,o.length),E=_/(null!=t?t.length:1),T=[];for(let R=0;R<_;++R){const F=t?this.rn(t[R/E]):EA,G=this.on(e,F,i[R%E],r),K=this.un(e,F,o[R%E],c),ue=p.map(we=>this.on(e,F,we,!0));T.push(...this.createRange(G,K,ue))}return T}on(e,t,i,r){const o=new Cm(e,vt.empty(),t,i);return r?o:o.Ue()}un(e,t,i,r){const o=new Cm(e,vt.empty(),t,i);return r?o.Ue():o}tn(e,t){const i=new Vte(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let c=null;for(const p of o)i.je(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let i=2;const r=this.Ze(t);return ke.forEach(r,o=>this.tn(e,o).next(c=>{c?0!==i&&c.fields.length<function(p){let _=new bi(Sr.comparator),E=!1;for(const T of p.filters)for(const R of T.getFlattenedFilters())R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?E=!0:_=_.add(R.field));for(const T of p.orderBy)T.field.isKeyField()||(_=_.add(T.field));return _.size+(E?1:0)}(o)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}cn(e,t){const i=new eC;for(const r of um(e)){const o=t.data.field(r.fieldPath);if(null==o)return null;const c=i.qe(r.kind);Em.Ie.ue(o,c)}return i.Fe()}rn(e){const t=new eC;return Em.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const i=new eC;return Em.Ie.ue(pm(this.databaseId,t),i.qe(function(r){const o=um(r);return 0===o.length?0:o[o.length-1].kind}(e))),i.Fe()}nn(e,t,i){if(null===i)return[];let r=[];r.push(new eC);let o=0;for(const c of um(e)){const p=i[o++];for(const _ of r)if(this.hn(t,c.fieldPath)&&UE(p))r=this.ln(r,c,p);else{const E=_.qe(c.kind);Em.Ie.ue(p,E)}}return this.fn(r)}en(e,t,i){return this.nn(e,t,i.position)}fn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Fe();return t}ln(e,t,i){const r=[...e],o=[];for(const c of i.arrayValue.values||[])for(const p of r){const _=new eC;_.seed(p.Fe()),Em.Ie.ue(c,_.qe(t.kind)),o.push(_)}return o}hn(e,t){return!!e.filters.find(i=>i instanceof Bn&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=CA(e),r=nC(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(o=>{const c=[];return ke.forEach(o,p=>r.get([p.indexId,this.uid]).next(_=>{c.push(function(E,T){const R=T?new RE(T.sequenceNumber,new Ua(wm(T.readTime),new vt(Oc(T.documentKey)),T.largestBatchId)):RE.empty(),F=E.fields.map(([G,K])=>new rA(Sr.fromServerFormat(G),K));return new iA(E.indexId,E.collectionGroup,F,R)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==o?o:wn(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=CA(e),o=nC(e);return this.dn(e).next(c=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>ke.forEach(p,_=>o.put(z$(_.indexId,this.user,c,i)))))}updateIndexEntries(e,t){const i=new Map;return ke.forEach(t,(r,o)=>{const c=i.get(r.collectionGroup);return(c?ke.resolve(c):this.getFieldIndexes(e,r.collectionGroup)).next(p=>(i.set(r.collectionGroup,p),ke.forEach(p,_=>this._n(e,r,_).next(E=>{const T=this.wn(o,_);return E.isEqual(T)?ke.resolve():this.mn(e,o,_,E,T)}))))})}gn(e,t,i,r){return tC(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(i,t.key),documentKey:t.key.path.toArray()})}yn(e,t,i,r){return tC(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(i,t.key),t.key.path.toArray()])}_n(e,t,i){const r=tC(e);let o=new bi(qf);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.an(i,t)])},(c,p)=>{o=o.add(new Cm(i.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>o)}wn(e,t){let i=new bi(qf);const r=this.cn(t,e);if(null==r)return i;const o=MF(t);if(null!=o){const c=e.data.field(o.fieldPath);if(UE(c))for(const p of c.arrayValue.values||[])i=i.add(new Cm(t.indexId,e.key,this.rn(p),r))}else i=i.add(new Cm(t.indexId,e.key,EA,r));return i}mn(e,t,i,r,o){at("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,_,E,T,R){const F=p.getIterator(),G=_.getIterator();let K=Tv(F),ue=Tv(G);for(;K||ue;){let we=!1,Ke=!1;if(K&&ue){const ut=E(K,ue);ut<0?Ke=!0:ut>0&&(we=!0)}else null!=K?Ke=!0:we=!0;we?(T(ue),ue=Tv(G)):Ke?(R(K),K=Tv(F)):(K=Tv(F),ue=Tv(G))}}(r,o,qf,p=>{c.push(this.gn(e,t,i,p))},p=>{c.push(this.yn(e,t,i,p))}),ke.waitFor(c)}dn(e){let t=1;return nC(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((c,p)=>qf(c,p)).filter((c,p,_)=>!p||0!==qf(c,_[p-1]));const r=[];r.push(e);for(const c of i){const p=qf(c,e),_=qf(c,t);if(0===p)r[0]=e.Ue();else if(p>0&&_<0)r.push(c),r.push(c.Ue());else if(_>0)break}r.push(t);const o=[];for(let c=0;c<r.length;c+=2){if(this.pn(r[c],r[c+1]))return[];o.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,EA,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,EA,[]]))}return o}pn(e,t){return qf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nG)}getMinOffset(e,t){return ke.mapArray(this.Ze(t),i=>this.tn(e,i).next(r=>r||Lt())).next(nG)}}function tG(n){return Us(n,"collectionParents")}function tC(n){return Us(n,"indexEntries")}function CA(n){return Us(n,"indexConfiguration")}function nC(n){return Us(n,"indexState")}function nG(n){Kt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;xF(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Ua(e.readTime,e.documentKey,t)}const iG={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ca{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new ca(e,ca.DEFAULT_COLLECTION_PERCENTILE,ca.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function rG(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),o=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=i.Z({range:c},(T,R,F)=>(p++,F.delete()));o.push(_.next(()=>{Kt(1===p)}));const E=[];for(const T of t.mutations){const R=V$(e,T.key.path,t.batchId);o.push(r.delete(R)),E.push(T.key)}return ke.waitFor(o).next(()=>E)}function IA(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Lt();e=n.noDocument}return JSON.stringify(e).length}ca.DEFAULT_COLLECTION_PERCENTILE=10,ca.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ca.DEFAULT=new ca(41943040,ca.DEFAULT_COLLECTION_PERCENTILE,ca.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ca.DISABLED=new ca(-1,0,0);class TA{constructor(e,t,i,r){this.userId=e,this.yt=t,this.indexManager=i,this.referenceDelegate=r,this.In={}}static re(e,t,i,r){Kt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new TA(o,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zf(e).Z({index:"userMutationsIndex",range:i},(r,o,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const o=Nv(e),c=Zf(e);return c.add({}).next(p=>{Kt("number"==typeof p);const _=new YF(p,t,i,r),E=function(F,G,K){const ue=K.baseMutations.map(Ke=>QE(F.ie,Ke)),we=K.mutations.map(Ke=>QE(F.ie,Ke));return{userId:G,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:ue,mutations:we}}(this.yt,this.userId,_),T=[];let R=new bi((F,G)=>wn(F.canonicalString(),G.canonicalString()));for(const F of r){const G=V$(this.userId,F.key.path,p);R=R.add(F.key.path.popLast()),T.push(c.put(E)),T.push(o.put(G,mte))}return R.forEach(F=>{T.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.In[p]=_.keys()}),ke.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return Zf(e).get(t).next(i=>i?(Kt(i.userId===this.userId),bm(this.yt,i)):null)}Tn(e,t){return this.In[t]?ke.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.In[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Zf(e).Z({index:"userMutationsIndex",range:r},(c,p,_)=>{p.userId===this.userId&&(Kt(p.batchId>=i),o=bm(this.yt,p)),_.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Zf(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(r,o,c)=>{i=o.batchId,c.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zf(e).W("userMutationsIndex",t).next(i=>i.map(r=>bm(this.yt,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=yA(this.userId,t.path),r=IDBKeyRange.lowerBound(i),o=[];return Nv(e).Z({range:r},(c,p,_)=>{const[E,T,R]=c,F=Oc(T);if(E===this.userId&&t.path.isEqual(F))return Zf(e).get(R).next(G=>{if(!G)throw Lt();Kt(G.userId===this.userId),o.push(bm(this.yt,G))});_.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new bi(wn);const r=[];return t.forEach(o=>{const c=yA(this.userId,o.path),p=IDBKeyRange.lowerBound(c),_=Nv(e).Z({range:p},(E,T,R)=>{const[F,G,K]=E,ue=Oc(G);F===this.userId&&o.path.isEqual(ue)?i=i.add(K):R.done()});r.push(_)}),ke.waitFor(r).next(()=>this.En(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,o=yA(this.userId,i),c=IDBKeyRange.lowerBound(o);let p=new bi(wn);return Nv(e).Z({range:c},(_,E,T)=>{const[R,F,G]=_,K=Oc(F);R===this.userId&&i.isPrefixOf(K)?K.length===r&&(p=p.add(G)):T.done()}).next(()=>this.En(e,p))}En(e,t){const i=[],r=[];return t.forEach(o=>{r.push(Zf(e).get(o).next(c=>{if(null===c)throw Lt();Kt(c.userId===this.userId),i.push(bm(this.yt,c))}))}),ke.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return rG(e.se,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ke.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ke.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Nv(e).Z({range:i},(o,c,p)=>{if(o[0]===this.userId){const _=Oc(o[1]);r.push(_)}else p.done()}).next(()=>{Kt(0===r.length)})})}containsKey(e,t){return sG(e,this.userId,t)}Rn(e){return oG(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sG(n,e,t){const i=yA(e,t.path),r=i[1],o=IDBKeyRange.lowerBound(i);let c=!1;return Nv(n).Z({range:o,X:!0},(p,_,E)=>{const[T,R,F]=p;T===e&&R===r&&(c=!0),E.done()}).next(()=>c)}function Zf(n){return Us(n,"mutations")}function Nv(n){return Us(n,"documentMutations")}function oG(n){return Us(n,"mutationQueues")}class Im{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Im(0)}static vn(){return new Im(-1)}}class $te{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const i=new Im(t.highestTargetId);return t.highestTargetId=i.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>en.fromTimestamp(new Ji(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Vn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Sn(e,r)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(i=>(i.targetCount+=1,this.Cn(t,i),this.Sn(e,i))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ov(e).delete(t.targetId)).next(()=>this.Vn(e)).next(i=>(Kt(i.targetCount>0),i.targetCount-=1,this.Sn(e,i)))}removeTargets(e,t,i){let r=0;const o=[];return Ov(e).Z((c,p)=>{const _=JE(p);_.sequenceNumber<=t&&null===i.get(_.targetId)&&(r++,o.push(this.removeTargetData(e,_)))}).next(()=>ke.waitFor(o)).next(()=>r)}forEachTarget(e,t){return Ov(e).Z((i,r)=>{const o=JE(r);t(o)})}Vn(e){return aG(e).get("targetGlobalKey").next(t=>(Kt(null!==t),t))}Sn(e,t){return aG(e).put("targetGlobalKey",t)}Dn(e,t){return Ov(e).put(q$(this.yt,t))}Cn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=gm(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return Ov(e).Z({range:r,index:"queryTargetsIndex"},(c,p,_)=>{const E=JE(p);BE(t,E.target)&&(o=E,_.done())}).next(()=>o)}addMatchingKeys(e,t,i){const r=[],o=zf(e);return t.forEach(c=>{const p=jo(c.path);r.push(o.put({targetId:i,path:p})),r.push(this.referenceDelegate.addReference(e,i,c))}),ke.waitFor(r)}removeMatchingKeys(e,t,i){const r=zf(e);return ke.forEach(t,o=>{const c=jo(o.path);return ke.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,t){const i=zf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=zf(e);let o=Cn();return r.Z({range:i,X:!0},(c,p,_)=>{const E=Oc(c[1]),T=new vt(E);o=o.add(T)}).next(()=>o)}containsKey(e,t){const i=jo(t.path),r=IDBKeyRange.bound([i],[C5(i)],!1,!0);let o=0;return zf(e).Z({index:"documentTargetsIndex",X:!0,range:r},([c,p],_,E)=>{0!==c&&(o++,E.done())}).next(()=>o>0)}ne(e,t){return Ov(e).get(t).next(i=>i?JE(i):null)}}function Ov(n){return Us(n,"targets")}function aG(n){return Us(n,"targetGlobal")}function zf(n){return Us(n,"targetDocuments")}function lG([n,e],[t,i]){const r=wn(n,t);return 0===r?wn(e,i):r}class Gte{constructor(e){this.xn=e,this.buffer=new bi(lG),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();lG(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qte{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;at("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ce.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Lf(i)?at("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Ff(i)}yield t.Fn(3e5)}))}}class Zte{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return ke.resolve(Va.at);const i=new Gte(t);return this.$n.forEachTarget(e,r=>i.On(r.sequenceNumber)).next(()=>this.$n.Ln(e,r=>i.On(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.$n.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(iG)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iG):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let i,r,o,c,p,_,E;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),r=this.params.maximumSequenceNumbersToCollect):r=R,c=Date.now(),this.nthSequenceNumber(e,r))).next(R=>(i=R,p=Date.now(),this.removeTargets(e,i,t))).next(R=>(o=R,_=Date.now(),this.removeOrphanedDocuments(e,i))).next(R=>(E=Date.now(),DF()<=Po.in.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-T}ms\n\tDetermined least recently used ${r} in `+(p-c)+`ms\n\tRemoved ${o} targets in `+(_-p)+`ms\n\tRemoved ${R} documents in `+(E-_)+`ms\nTotal Duration: ${E-T}ms`),ke.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:R})))}}class zte{constructor(e,t){this.db=e,this.garbageCollector=new Zte(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Un(e){let t=0;return this.Ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(i,r)=>t(r))}addReference(e,t,i){return SA(e,i)}removeReference(e,t,i){return SA(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return SA(e,t)}Gn(e,t){return function(i,r){let o=!1;return oG(i).tt(c=>sG(i,c,r).next(p=>(p&&(o=!0),ke.resolve(!p)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Kn(e,(c,p)=>{if(p<=t){const _=this.Gn(e,c).next(E=>{if(!E)return o++,i.getEntry(e,c).next(()=>(i.removeEntry(c,en.min()),zf(e).delete([0,jo(c.path)])))});r.push(_)}}).next(()=>ke.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return SA(e,t)}Kn(e,t){const i=zf(e);let r,o=Va.at;return i.Z({index:"documentTargetsIndex"},([c,p],{path:_,sequenceNumber:E})=>{0===c?(o!==Va.at&&t(new vt(Oc(r)),o),o=E,r=_):o=Va.at}).next(()=>{o!==Va.at&&t(new vt(Oc(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function SA(n,e){return zf(n).put((i=n.currentSequenceNumber,{targetId:0,path:jo(e.path),sequenceNumber:i}));var i}class uG{constructor(){this.changes=new $f(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?ke.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wte{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Tm(e).put(i)}removeEntry(e,t,i){return Tm(e).delete(function(r,o){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],vA(o),c[c.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Qn(e,i)))}getEntry(e,t){let i=Bi.newInvalidDocument(t);return Tm(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(iC(t))},(r,o)=>{i=this.jn(t,o)}).next(()=>i)}Wn(e,t){let i={size:0,document:Bi.newInvalidDocument(t)};return Tm(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(iC(t))},(r,o)=>{i={document:this.jn(t,o),size:IA(o)}}).next(()=>i)}getEntries(e,t){let i=ua();return this.zn(e,t,(r,o)=>{const c=this.jn(r,o);i=i.insert(r,c)}).next(()=>i)}Hn(e,t){let i=ua(),r=new Ar(vt.comparator);return this.zn(e,t,(o,c)=>{const p=this.jn(o,c);i=i.insert(o,p),r=r.insert(o,IA(c))}).next(()=>({documents:i,Jn:r}))}zn(e,t,i){if(t.isEmpty())return ke.resolve();let r=new bi(fG);t.forEach(_=>r=r.add(_));const o=IDBKeyRange.bound(iC(r.first()),iC(r.last())),c=r.getIterator();let p=c.getNext();return Tm(e).Z({index:"documentKeyIndex",range:o},(_,E,T)=>{const R=vt.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;p&&fG(p,R)<0;)i(p,null),p=c.getNext();p&&p.isEqual(R)&&(i(p,E),p=c.hasNext()?c.getNext():null),p?T.j(iC(p)):T.done()}).next(()=>{for(;p;)i(p,null),p=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,i,r){const o=t.path,c=[o.popLast().toArray(),o.lastSegment(),vA(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],p=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tm(e).W(IDBKeyRange.bound(c,p,!0)).next(_=>{let E=ua();for(const T of _){const R=this.jn(vt.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);R.isFoundDocument()&&(HE(t,R)||r.has(R.key))&&(E=E.insert(R.key,R))}return E})}getAllFromCollectionGroup(e,t,i,r){let o=ua();const c=hG(t,i),p=hG(t,Ua.max());return Tm(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(_,E,T)=>{const R=this.jn(vt.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);o=o.insert(R.key,R),o.size===r&&T.done()}).next(()=>o)}newChangeBuffer(e){return new Kte(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dG(e).get("remoteDocumentGlobalKey").next(t=>(Kt(!!t),t))}Qn(e,t){return dG(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const i=function Pte(n,e){let t;if(e.document)t=k$(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=vt.fromSegments(e.noDocument.path),r=wm(e.noDocument.readTime);t=Bi.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Lt();{const i=vt.fromSegments(e.unknownDocument.path),r=wm(e.unknownDocument.version);t=Bi.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new Ji(i[0],i[1]);return en.fromTimestamp(r)}(e.readTime)),t}(this.yt,t);if(!i.isNoDocument()||!i.version.isEqual(en.min()))return i}return Bi.newInvalidDocument(e)}}function cG(n){return new Wte(n)}class Kte extends uG{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new $f(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new bi((o,c)=>wn(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const p=this.Xn.get(o);if(t.push(this.Yn.removeEntry(e,o,p.readTime)),c.isValidDocument()){const _=G$(this.Yn.yt,c);r=r.add(o.path.popLast());const E=IA(_);i+=E-p.size,t.push(this.Yn.addEntry(e,o,_))}else if(i-=p.size,this.trackRemovals){const _=G$(this.Yn.yt,c.convertToNoDocument(en.min()));t.push(this.Yn.addEntry(e,o,_))}}),r.forEach(o=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Yn.updateMetadata(e,i)),ke.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(i=>(this.Xn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:i,Jn:r})=>(r.forEach((o,c)=>{this.Xn.set(o,{size:c,readTime:i.get(o).readTime})}),i))}}function dG(n){return Us(n,"remoteDocumentGlobal")}function Tm(n){return Us(n,"remoteDocumentsV14")}function iC(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hG(n,e){const t=e.documentKey.path.toArray();return[n,vA(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fG(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(r=wn(t[o],i[o]),r)return r;return r=wn(t.length,i.length),r||(r=wn(t[t.length-2],i[i.length-2]),r||wn(t[t.length-1],i[i.length-1]))}class Yte{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pG{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&GE(i.mutation,r,la.empty(),Ji.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Cn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Cn()){const r=Pc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let c=qE();return o.forEach((p,_)=>{c=c.insert(p,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=Pc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Cn()))}populateOverlays(e,t,i){const r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((c,p)=>{t.set(c,p)})})}computeViews(e,t,i,r){let o=ua();const c=ZE(),p=ZE();return t.forEach((_,E)=>{const T=i.get(E.key);r.has(E.key)&&(void 0===T||T.mutation instanceof Kd)?o=o.insert(E.key,E):void 0!==T?(c.set(E.key,T.mutation.getFieldMask()),GE(T.mutation,E,T.mutation.getFieldMask(),Ji.now())):c.set(E.key,la.empty())}),this.recalculateAndSaveOverlays(e,o).next(_=>(_.forEach((E,T)=>c.set(E,T)),t.forEach((E,T)=>{var R;return p.set(E,new Yte(T,null!==(R=c.get(E))&&void 0!==R?R:null))}),p))}recalculateAndSaveOverlays(e,t){const i=ZE();let r=new Ar((c,p)=>c-p),o=Cn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const p of c)p.keys().forEach(_=>{const E=t.get(_);if(null===E)return;let T=i.get(_)||la.empty();T=p.applyToLocalView(E,T),i.set(_,T);const R=(r.get(p.batchId)||Cn()).add(_);r=r.insert(p.batchId,R)})}).next(()=>{const c=[],p=r.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),E=_.key,T=_.value,R=w$();T.forEach(F=>{if(!o.has(F)){const G=d$(t.get(F),i.get(F));null!==G&&R.set(F,G),o=o.add(F)}}),c.push(this.documentOverlayCache.saveOverlays(e,E,R))}return ke.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return vt.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):jF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{const c=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):ke.resolve(Pc());let p=-1,_=o;return c.next(E=>ke.forEach(E,(T,R)=>(p<R.largestBatchId&&(p=R.largestBatchId),o.get(T)?ke.resolve():this.remoteDocumentCache.getEntry(e,T).next(F=>{_=_.insert(T,F)}))).next(()=>this.populateOverlays(e,E,o)).next(()=>this.computeViews(e,_,E,Cn())).next(T=>({batchId:p,changes:v$(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new vt(t)).next(i=>{let r=qE();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let o=qE();return this.indexManager.getCollectionParents(e,r).next(c=>ke.forEach(c,p=>{const _=(E=t,T=p.child(r),new Wd(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,T;return this.getDocumentsMatchingCollectionQuery(e,_,i).next(E=>{E.forEach((T,R)=>{o=o.insert(T,R)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r))).next(o=>{r.forEach((p,_)=>{const E=_.getKey();null===o.get(E)&&(o=o.insert(E,Bi.newInvalidDocument(E)))});let c=qE();return o.forEach((p,_)=>{const E=r.get(p);void 0!==E&&GE(E.mutation,_,la.empty(),Ji.now()),HE(t,_)&&(c=c.insert(p,_))}),c})}}class Qte{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ke.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:jr(i.createTime)}),ke.resolve()}getNamedQuery(e,t){return ke.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(i=t).name,query:XF(i.bundledQuery),readTime:jr(i.readTime)}),ke.resolve();var i}}class Jte{constructor(){this.overlays=new Ar(vt.comparator),this.es=new Map}getOverlay(e,t){return ke.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Pc();return ke.forEach(t,r=>this.getOverlay(e,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.oe(e,t,o)}),ke.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.es.delete(i)),ke.resolve()}getOverlaysForCollection(e,t,i){const r=Pc(),o=t.length+1,c=new vt(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,E=_.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===o&&_.largestBatchId>i&&r.set(_.getKey(),_)}return ke.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new Ar((E,T)=>E-T);const c=this.overlays.getIterator();for(;c.hasNext();){const E=c.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>i){let T=o.get(E.largestBatchId);null===T&&(T=Pc(),o=o.insert(E.largestBatchId,T)),T.set(E.getKey(),E)}}const p=Pc(),_=o.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((E,T)=>p.set(E,T)),!(p.size()>=r)););return ke.resolve(p)}oe(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const c=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new JF(t,i));let o=this.es.get(t);void 0===o&&(o=Cn(),this.es.set(t,o)),this.es.set(t,o.add(i.key))}}class oL{constructor(){this.ns=new bi(Vs.ss),this.rs=new bi(Vs.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new Vs(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new Vs(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new vt(new Wn([])),i=new Vs(t,e),r=new Vs(t,e+1),o=[];return this.rs.forEachInRange([i,r],c=>{this.cs(c),o.push(c.key)}),o}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new vt(new Wn([])),i=new Vs(t,e),r=new Vs(t,e+1);let o=Cn();return this.rs.forEachInRange([i,r],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new Vs(e,0),i=this.ns.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Vs{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return vt.comparator(e.key,t.key)||wn(e._s,t._s)}static os(e,t){return wn(e._s,t._s)||vt.comparator(e.key,t.key)}}class Xte{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new bi(Vs.ss)}checkEmpty(e){return ke.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const o=this.ws;this.ws++;const c=new YF(o,t,i,r);this.mutationQueue.push(c);for(const p of r)this.gs=this.gs.add(new Vs(p.key,o)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ke.resolve(c)}lookupMutationBatch(e,t){return ke.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.ps(t+1),o=r<0?0:r;return ke.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Vs(t,0),r=new Vs(t,Number.POSITIVE_INFINITY),o=[];return this.gs.forEachInRange([i,r],c=>{const p=this.ys(c._s);o.push(p)}),ke.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new bi(wn);return t.forEach(r=>{const o=new Vs(r,0),c=new Vs(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([o,c],p=>{i=i.add(p._s)})}),ke.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let o=i;vt.isDocumentKey(o)||(o=o.child(""));const c=new Vs(new vt(o),0);let p=new bi(wn);return this.gs.forEachWhile(_=>{const E=_.key.path;return!!i.isPrefixOf(E)&&(E.length===r&&(p=p.add(_._s)),!0)},c),ke.resolve(this.Is(p))}Is(e){const t=[];return e.forEach(i=>{const r=this.ys(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Kt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return ke.forEach(t.mutations,r=>{const o=new Vs(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new Vs(t,0),r=this.gs.firstAfterOrEqual(i);return ke.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return ke.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ene{constructor(e){this.Es=e,this.docs=new Ar(vt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),o=r?r.size:0,c=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ke.resolve(i?i.document.mutableCopy():Bi.newInvalidDocument(t))}getEntries(e,t){let i=ua();return t.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Bi.newInvalidDocument(r))}),ke.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=ua();const c=t.path,p=new vt(c.child("")),_=this.docs.getIteratorFrom(p);for(;_.hasNext();){const{key:E,value:{document:T}}=_.getNext();if(!c.isPrefixOf(E.path))break;E.path.length>c.length+1||xF(T5(T),i)<=0||(r.has(T.key)||HE(t,T))&&(o=o.insert(T.key,T.mutableCopy()))}return ke.resolve(o)}getAllFromCollectionGroup(e,t,i,r){Lt()}As(e,t){return ke.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new tne(this)}getSize(e){return ke.resolve(this.size)}}class tne extends uG{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(i)}),ke.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class nne{constructor(e){this.persistence=e,this.Rs=new $f(t=>gm(t),BE),this.lastRemoteSnapshotVersion=en.min(),this.highestTargetId=0,this.bs=0,this.Ps=new oL,this.targetCount=0,this.vs=Im.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,r)=>t(r)),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),ke.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Im(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ke.resolve()}updateTargetData(e,t){return this.Dn(t),ke.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,t,i){let r=0;const o=[];return this.Rs.forEach((c,p)=>{p.sequenceNumber<=t&&null===i.get(p.targetId)&&(this.Rs.delete(c),o.push(this.removeMatchingKeysForTargetId(e,p.targetId)),r++)}),ke.waitFor(o).next(()=>r)}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return ke.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),ke.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(c=>{o.push(r.markPotentiallyOrphaned(e,c))}),ke.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ke.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return ke.resolve(i)}containsKey(e,t){return ke.resolve(this.Ps.containsKey(t))}}class gG{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Va(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new nne(this),this.indexManager=new jte,this.remoteDocumentCache=new ene(i=>this.referenceDelegate.xs(i)),this.yt=new $$(t),this.Ns=new Qte(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Jte,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new Xte(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){at("MemoryPersistence","Starting transaction:",e);const r=new ine(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(o=>this.referenceDelegate.Os(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ms(e,t){return ke.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class ine extends D5{constructor(e){super(),this.currentSequenceNumber=e}}class DA{constructor(e){this.persistence=e,this.Fs=new oL,this.$s=null}static Bs(e){return new DA(e)}get Ls(){if(this.$s)return this.$s;throw Lt()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),ke.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),ke.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ke.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.Ls.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.Ls,i=>{const r=vt.fromPath(i);return this.qs(e,r).next(o=>{o||t.removeEntry(r,en.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return ke.or([()=>ke.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class rne{constructor(e){this.yt=e}$(e,t,i,r){const o=new sA("createOrUpgrade",t);var p;i<1&&r>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",U$,{unique:!0}),p.createObjectStore("documentMutations"),mG(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=ke.resolve();return i<3&&r>=3&&(0!==i&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),mG(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:en.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",E)}(o))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(p,_){return _.store("mutations").W().next(E=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",U$,{unique:!0});const T=_.store("mutations"),R=E.map(F=>T.put(F));return ke.waitFor(R)})}(e,o))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(c=c.next(()=>this.Us(o))),i<6&&r>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(o)))),i<7&&r>=7&&(c=c.next(()=>this.Gs(o))),i<8&&r>=8&&(c=c.next(()=>this.Qs(e,o))),i<9&&r>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(c=c.next(()=>this.js(o))),i<11&&r>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:Ate});_.createIndex("collectionPathOverlayIndex",Mte,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",xte,{unique:!1})}(e)})),i<13&&r>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:_te});_.createIndex("documentKeyIndex",yte),_.createIndex("collectionGroupIndex",vte)}(e)).next(()=>this.Ws(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>this.zs(e,o))),i<15&&r>=15&&(c=c.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:Ite}).createIndex("sequenceNumberIndex",Tte,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:Ste}).createIndex("documentKeyIndex",Dte,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((i,r)=>{t+=IA(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Us(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(r=>ke.forEach(r,o=>{const c=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",c).next(p=>ke.forEach(p,_=>{Kt(_.userId===o.userId);const E=bm(this.yt,_);return rG(e,o.userId,E).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const o=[];return i.Z((c,p)=>{const _=new Wn(c),E=[0,jo(_)];o.push(t.get(E).next(T=>T?ke.resolve():t.put({targetId:0,path:jo(_),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ke.waitFor(o))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Cte});const i=t.store("collectionParents"),r=new sL,o=c=>{if(r.add(c)){const p=c.lastSegment(),_=c.popLast();return i.put({collectionId:p,parent:jo(_)})}};return t.store("remoteDocuments").Z({X:!0},(c,p)=>{const _=new Wn(c);return o(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,p,_],E)=>{const T=Oc(p);return o(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((i,r)=>{const o=JE(r),c=q$(this.yt,o);return t.put(c)})}Ws(e,t){const i=t.store("remoteDocuments"),r=[];return i.Z((o,c)=>{const p=t.store("remoteDocumentsV14"),_=(E=c,E.document?new vt(Wn.fromString(E.document.name).popFirst(5)):E.noDocument?vt.fromSegments(E.noDocument.path):E.unknownDocument?vt.fromSegments(E.unknownDocument.path):Lt()).path.toArray();var E;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(p.put(T))}).next(()=>ke.waitFor(r))}zs(e,t){const i=t.store("mutations"),r=cG(this.yt),o=new gG(DA.Bs,this.yt.ie);return i.W().next(c=>{const p=new Map;return c.forEach(_=>{var E;let T=null!==(E=p.get(_.userId))&&void 0!==E?E:Cn();bm(this.yt,_).keys().forEach(R=>T=T.add(R)),p.set(_.userId,T)}),ke.forEach(p,(_,E)=>{const T=new Ls(E),R=wA.re(this.yt,T),F=o.getIndexManager(T),G=TA.re(T,this.yt,F,o.referenceDelegate);return new pG(r,G,R,F).recalculateAndSaveOverlaysForDocumentKeys(new KF(t,Va.at),_).next()})})}}function mG(n){n.createObjectStore("targetDocuments",{keyPath:bte}).createIndex("documentTargetsIndex",Ete,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wte,{unique:!0}),n.createObjectStore("targetGlobal")}const aL="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lL{constructor(e,t,i,r,o,c,p,_,E,T,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Hs=o,this.window=c,this.document=p,this.Js=E,this.Ys=T,this.Xs=R,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=F=>Promise.resolve(),!lL.C())throw new Je(Pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zte(this,r),this.ii=t+"main",this.yt=new $$(_),this.ri=new Cu(this.ii,this.Xs,new rne(this.yt)),this.Cs=new $te(this.referenceDelegate,this.yt),this.remoteDocumentCache=cG(this.yt),this.Ns=new Nte,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&Br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Je(Pe.FAILED_PRECONDITION,aL);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Va(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var i=(0,Ce.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ce.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>AA(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Lf(e))return at("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return at("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return rC(e).get("owner").next(t=>ke.resolve(this.mi(t)))}gi(e){return AA(e).delete(this.clientId)}yi(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Us(i,"clientMetadata");return r.W().next(o=>{const c=e.Ii(o,18e5),p=o.filter(_=>-1===c.indexOf(_));return ke.forEach(p,_=>r.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.oi)for(const i of t)e.oi.removeItem(e.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ke.resolve(!0):rC(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Je(Pe.FAILED_PRECONDITION,aL);return!1}}return!(!this.networkEnabled||!this.inForeground)||AA(e).W().next(i=>void 0===this.Ii(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(t=>(this.isPrimary!==t&&at("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new KF(t,Va.at);return e._i(i).next(()=>e.gi(i))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(i=>this.pi(i.updateTimeMs,t)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>AA(e).W().next(t=>this.Ii(t,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return TA.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Hte(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return wA.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,i){at("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",o=15===(c=this.Xs)?Rte:14===c?H$:13===c?j$:12===c?kte:11===c?B$:void Lt();var c;let p;return this.ri.runTransaction(e,r,o,_=>(p=new KF(_,this.Ss?this.Ss.next():Va.at),"readwrite-primary"===t?this.fi(p).next(E=>!!E||this.di(p)).next(E=>{if(!E)throw Br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Je(Pe.FAILED_PRECONDITION,S5);return i(p)}).next(E=>this.wi(p).next(()=>E)):this.Vi(p).next(()=>i(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Vi(e){return rC(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Je(Pe.FAILED_PRECONDITION,aL)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rC(e).put("owner",t)}static C(){return Cu.C()}_i(e){const t=rC(e);return t.get("owner").next(i=>this.mi(i)?(at("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ke.resolve())}pi(e,t){const i=Date.now();return!(e<i-t||e>i&&(Br(`Detected an update time that is in the future: ${e} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,W.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const i=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return at("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Br("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Br("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rC(n){return Us(n,"owner")}function AA(n){return Us(n,"clientMetadata")}function uL(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class cL{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=r}static Ci(e,t){let i=Cn(),r=Cn();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new cL(e,t.fromCache,i,r)}}class _G{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.ki(e,t).next(o=>o||this.Oi(e,t,r,i)).next(o=>o||this.Mi(e,t))}ki(e,t){if(X5(t))return ke.resolve(null);let i=Bo(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=hA(t,null,"F"),i=Bo(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const c=Cn(...o);return this.Ni.getDocuments(e,c).next(p=>this.indexManager.getMinOffset(e,i).next(_=>{const E=this.Fi(t,p);return this.$i(t,E,c,_.readTime)?this.ki(e,hA(t,null,"F")):this.Bi(e,E,t,_)}))})))}Oi(e,t,i,r){return X5(t)||r.isEqual(en.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(o=>{const c=this.Fi(t,o);return this.$i(t,c,i,r)?this.Mi(e,t):(DF()<=Po.in.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$F(t)),this.Bi(e,c,t,I5(r,-1)))})}Fi(e,t){let i=new bi(n$(e));return t.forEach((r,o)=>{HE(e,o)&&(i=i.add(o))}),i}$i(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Mi(e,t){return DF()<=Po.in.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",$F(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ua.min())}Bi(e,t,i,r){return this.Ni.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}class sne{constructor(e,t,i,r){this.persistence=e,this.Li=t,this.yt=r,this.qi=new Ar(wn),this.Ui=new $f(o=>gm(o),BE),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pG(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function yG(n,e,t,i){return new sne(n,e,t,i)}function vG(n,e){return dL.apply(this,arguments)}function dL(){return dL=(0,Ce.Z)(function*(n,e){const t=Et(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{const c=[],p=[];let _=Cn();for(const E of r){c.push(E.batchId);for(const T of E.mutations)_=_.add(T.key)}for(const E of o){p.push(E.batchId);for(const T of E.mutations)_=_.add(T.key)}return t.localDocuments.getDocuments(i,_).next(E=>({ji:E,removedBatchIds:c,addedBatchIds:p}))})})}),dL.apply(this,arguments)}function wG(n){const e=Et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function bG(n,e,t){let i=Cn(),r=Cn();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let c=ua();return t.forEach((p,_)=>{const E=o.get(p);_.isFoundDocument()!==E.isFoundDocument()&&(r=r.add(p)),_.isNoDocument()&&_.version.isEqual(en.min())?(e.removeEntry(p,_.readTime),c=c.insert(p,_)):!E.isValidDocument()||_.version.compareTo(E.version)>0||0===_.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(_),c=c.insert(p,_)):at("LocalStore","Ignoring outdated watch update for ",p,". Current version:",E.version," Watch version:",_.version)}),{Wi:c,zi:r}})}function lne(n,e){const t=Et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Fv(n,e){const t=Et(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Cs.getTargetData(i,e).next(o=>o?(r=o,ke.resolve(r)):t.Cs.allocateTargetId(i).next(c=>(r=new Gf(e,c,0,i.currentSequenceNumber),t.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.qi.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.qi=t.qi.insert(i.targetId,i),t.Ui.set(e,i.targetId)),i})}function Lv(n,e,t){return hL.apply(this,arguments)}function hL(){return hL=(0,Ce.Z)(function*(n,e,t){const i=Et(n),r=i.qi.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Lf(c))throw c;at("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.qi=i.qi.remove(e),i.Ui.delete(r.target)}),hL.apply(this,arguments)}function MA(n,e,t){const i=Et(n);let r=en.min(),o=Cn();return i.persistence.runTransaction("Execute query","readonly",c=>function(p,_,E){const T=Et(p),R=T.Ui.get(E);return void 0!==R?ke.resolve(T.qi.get(R)):T.Cs.getTargetData(_,E)}(i,c,Bo(e)).next(p=>{if(p)return r=p.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(c,p.targetId).next(_=>{o=_})}).next(()=>i.Li.getDocumentsMatchingQuery(c,e,t?r:en.min(),t?o:Cn())).next(p=>(IG(i,t$(e),p),{documents:p,Hi:o})))}function EG(n,e){const t=Et(n),i=Et(t.Cs),r=t.qi.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",o=>i.ne(o,e).next(c=>c?c.target:null))}function CG(n,e){const t=Et(n),i=t.Ki.get(e)||en.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Gi.getAllFromCollectionGroup(r,e,I5(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(IG(t,e,r),r))}function IG(n,e,t){let i=n.Ki.get(e)||en.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Ki.set(e,i)}function fL(){return fL=(0,Ce.Z)(function*(n,e,t,i){const r=Et(n);let o=Cn(),c=ua();for(const E of t){const T=e.Ji(E.metadata.name);E.document&&(o=o.add(T));const R=e.Yi(E);R.setReadTime(e.Xi(E.metadata.readTime)),c=c.insert(T,R)}const p=r.Gi.newChangeBuffer({trackRemovals:!0}),_=yield Fv(r,(E=i,Bo(Sv(Wn.fromString(`__bundle__/docs/${E}`)))));var E;return r.persistence.runTransaction("Apply bundle documents","readwrite",E=>bG(E,p,c).next(T=>(p.apply(E),T)).next(T=>r.Cs.removeMatchingKeysForTargetId(E,_.targetId).next(()=>r.Cs.addMatchingKeys(E,o,_.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(E,T.Wi,T.zi)).next(()=>T.Wi)))}),fL.apply(this,arguments)}function cne(n,e){return pL.apply(this,arguments)}function pL(){return pL=(0,Ce.Z)(function*(n,e,t=Cn()){const i=yield Fv(n,Bo(XF(e.bundledQuery))),r=Et(n);return r.persistence.runTransaction("Save named query","readwrite",o=>{const c=jr(e.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.Ns.saveNamedQuery(o,e);const p=i.withResumeToken(Cs.EMPTY_BYTE_STRING,c);return r.qi=r.qi.insert(p.targetId,p),r.Cs.updateTargetData(o,p).next(()=>r.Cs.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>r.Cs.addMatchingKeys(o,t,i.targetId)).next(()=>r.Ns.saveNamedQuery(o,e))})}),pL.apply(this,arguments)}function TG(n,e){return`firestore_clients_${n}_${e}`}function SG(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function gL(n,e){return`firestore_targets_${n}_${e}`}class xA{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Zi(e,t,i){const r=JSON.parse(i);let o,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(o=new Je(r.error.code,r.error.message))),c?new xA(e,t,r.state,o):(Br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sC{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let r,o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(r=new Je(i.error.code,i.error.message))),o?new sC(e,i.state,r):(Br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kA{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,o=mA();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=k5(i.activeTargetIds[c]),o=o.add(i.activeTargetIds[c]);return r?new kA(e,o):(Br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class mL{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new mL(t.clientId,t.onlineState):(Br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _L{constructor(){this.activeTargetIds=mA()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yL{constructor(e,t,i,r,o){this.window=e,this.Hs=t,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ar(wn),this.started=!1,this.cr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ar=TG(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new _L),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.vi();for(const r of t){if(r===e.sr)continue;const o=e.getItem(TG(e.persistenceKey,r));if(o){const c=kA.Zi(r,o);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const i=e.storage.getItem(e.wr);if(i){const r=e.yr(i);r&&e.pr(r)}for(const r of e.cr)e.rr(r);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,i){this.Tr(e,t,i),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(gL(this.persistenceKey,e));if(i){const r=sC.Zi(e,i);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gL(this.persistenceKey,e))}updateQueryState(e,t,i){this.Rr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Er(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return at("SharedClientState","READ",e,t),t}setItem(e,t){at("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){at("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(at("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void Br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==i.key)if(t.lr.test(i.key)){if(null==i.newValue){const r=t.vr(i.key);return t.Vr(r,null)}{const r=t.Sr(i.key,i.newValue);if(r)return t.Vr(r.clientId,r)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const r=t.Dr(i.key,i.newValue);if(r)return t.Cr(r)}}else if(t._r.test(i.key)){if(null!==i.newValue){const r=t.Nr(i.key,i.newValue);if(r)return t.kr(r)}}else if(i.key===t.wr){if(null!==i.newValue){const r=t.yr(i.newValue);if(r)return t.pr(r)}}else if(i.key===t.hr){const r=function(o){let c=Va.at;if(null!=o)try{const p=JSON.parse(o);Kt("number"==typeof p),c=p}catch(p){Br("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(i.newValue);r!==Va.at&&t.sequenceNumberHandler(r)}else if(i.key===t.mr){const r=t.Or(i.newValue);yield Promise.all(r.map(o=>t.syncEngine.Mr(o)))}}else t.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,i){const r=new xA(this.currentUser,e,t,i),o=SG(this.persistenceKey,this.currentUser,e);this.setItem(o,r.tr())}Er(e){const t=SG(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,i){const r=gL(this.persistenceKey,e),o=new sC(e,t,i);this.setItem(r,o.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const i=this.vr(e);return kA.Zi(i,t)}Dr(e,t){const i=this.dr.exec(e),r=Number(i[1]);return xA.Zi(new Ls(void 0!==i[2]?i[2]:null),r,t)}Nr(e,t){const i=this._r.exec(e),r=Number(i[1]);return sC.Zi(r,t)}yr(e){return mL.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);at("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const i=t?this.ur.insert(e,t):this.ur.remove(e),r=this.Ir(this.ur),o=this.Ir(i),c=[],p=[];return o.forEach(_=>{r.has(_)||c.push(_)}),r.forEach(_=>{o.has(_)||p.push(_)}),this.syncEngine.Br(c,p).then(()=>{this.ur=i})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=mA();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class DG{constructor(){this.Lr=new _L,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,i){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new _L,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class dne{Ur(e){}shutdown(){}}class AG{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){at("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){at("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const hne={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fne{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class pne extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,r,o){const c=this.ho(e,t);at("RestConnection","Sending: ",c,i);const p={};return this.lo(p,r,o),this.fo(e,c,p,i).then(_=>(at("RestConnection","Received: ",_),_),_=>{throw lm("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",i),_})}_o(e,t,i,r,o,c){return this.ao(e,t,i,r,o)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+wv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}ho(e,t){return`${this.oo}/v1/${t}:${hne[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,r){return new Promise((o,c)=>{const p=new fee;p.setWithCredentials(!0),p.listenOnce(cee.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case SF.NO_ERROR:const E=p.getResponseJson();at("Connection","XHR received:",JSON.stringify(E)),o(E);break;case SF.TIMEOUT:at("Connection",'RPC "'+e+'" timed out'),c(new Je(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case SF.HTTP_ERROR:const T=p.getStatus();if(at("Connection",'RPC "'+e+'" failed with status:',T,"response text:",p.getResponseText()),T>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const F=R?.error;if(F&&F.status&&F.message){const G=function(K){const ue=K.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(ue)>=0?ue:Pe.UNKNOWN}(F.status);c(new Je(G,F.message))}else c(new Je(Pe.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Je(Pe.UNAVAILABLE,"Connection failed."));break;default:Lt()}}finally{at("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(r);p.send(t,"POST",_,i,15)})}wo(e,t,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=lee(),c=uee(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new hee({})),this.lo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=r.join("");at("Connection","Creating WebChannel: "+_,p);const E=o.createWebChannel(_,p);let T=!1,R=!1;const F=new fne({Hr:K=>{R?at("Connection","Not sending because WebChannel is closed:",K):(T||(at("Connection","Opening WebChannel transport."),E.open(),T=!0),at("Connection","WebChannel sending:",K),E.send(K))},Jr:()=>E.close()}),G=(K,ue,we)=>{K.listen(ue,Ke=>{try{we(Ke)}catch(ut){setTimeout(()=>{throw ut},0)}})};return G(E,nA.EventType.OPEN,()=>{R||at("Connection","WebChannel transport opened.")}),G(E,nA.EventType.CLOSE,()=>{R||(R=!0,at("Connection","WebChannel transport closed"),F.io())}),G(E,nA.EventType.ERROR,K=>{R||(R=!0,lm("Connection","WebChannel transport errored:",K),F.io(new Je(Pe.UNAVAILABLE,"The operation could not be completed")))}),G(E,nA.EventType.MESSAGE,K=>{var ue;if(!R){const we=K.data[0];Kt(!!we);const ut=we.error||(null===(ue=we[0])||void 0===ue?void 0:ue.error);if(ut){at("Connection","WebChannel received error:",ut);const ct=ut.status;let ht=function(Nt){const bn=is[Nt];if(void 0!==bn)return _$(bn)}(ct),Pt=ut.message;void 0===ht&&(ht=Pe.INTERNAL,Pt="Unknown error status: "+ct+" with message "+ut.message),R=!0,F.io(new Je(ht,Pt)),E.close()}else at("Connection","WebChannel received:",we),F.ro(we)}}),G(c,dee.STAT_EVENT,K=>{K.stat===y5.PROXY?at("Connection","Detected buffering proxy"):K.stat===y5.NOPROXY&&at("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.so()},0),F}}function MG(){return typeof window<"u"?window:null}function RA(){return typeof document<"u"?document:null}function oC(n){return new ste(n,!0)}class vL{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=r,this.po=o,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-i);r>0&&at("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class xG{constructor(e,t,i,r,o,c,p,_){this.Hs=e,this.vo=i,this.Vo=r,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new vL(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ce.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ce.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var i=this;return(0,Ce.Z)(function*(){i.Lo(),i.qo(),i.xo.cancel(),i.So++,4!==e?i.xo.reset():t&&t.code===Pe.RESOURCE_EXHAUSTED?(Br(t.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):t&&t.code===Pe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Uo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.So===t&&this.Go(i,r)},i=>{e(()=>{const r=new Je(Pe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(r)})})}Go(e,t){const i=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.Qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ce.Z)(function*(){e.state=0,e.start()}))}Qo(e){return at("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(at("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gne extends xG{constructor(e,t,i,r,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,c),this.yt=o}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function lte(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:Lt(),r=e.targetChange.targetIds||[],o=function(_,E){return _.wt?(Kt(void 0===E||"string"==typeof E),Cs.fromBase64String(E||"")):(Kt(void 0===E||E instanceof Uint8Array),Cs.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const E=void 0===_.code?Pe.UNKNOWN:_$(_.code);return new Je(E,_.message||"")}(c);t=new E$(i,r,o,p||null)}else if("documentChange"in e){const i=e.documentChange,r=Nc(n,i.document.name),o=jr(i.document.updateTime),c=i.document.createTime?jr(i.document.createTime):en.min(),p=new Xs({mapValue:{fields:i.document.fields}}),_=Bi.newFoundDocument(r,o,c,p);t=new _A(i.targetIds||[],i.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const i=e.documentDelete,r=Nc(n,i.document),o=i.readTime?jr(i.readTime):en.min(),c=Bi.newNoDocument(r,o);t=new _A([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const i=e.documentRemove,r=Nc(n,i.document);t=new _A([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return Lt();{const i=e.filter,o=new Yee(i.count||0);t=new b$(i.targetId,o)}}var _;return t}(this.yt,e),i=function(r){if(!("targetChange"in r))return en.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?en.min():o.readTime?jr(o.readTime):en.min()}(e);return this.listener.Wo(t,i)}zo(e){const t={};t.database=YE(this.yt),t.addTarget=function(r,o){let c;const p=o.target;return c=uA(p)?{documents:R$(r,p)}:{query:WF(r,p)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?c.resumeToken=S$(r,o.resumeToken):o.snapshotVersion.compareTo(en.min())>0&&(c.readTime=kv(r,o.snapshotVersion.toTimestamp())),c}(this.yt,e);const i=function cte(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Bo(t)}Ho(e){const t={};t.database=YE(this.yt),t.removeTarget=e,this.Bo(t)}}class mne extends xG{constructor(e,t,i,r,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,c),this.yt=o,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function ute(n,e){return n&&n.length>0?(Kt(void 0!==e),n.map(t=>function(i,r){let o=jr(i.updateTime?i.updateTime:r);return o.isEqual(en.min())&&(o=jr(r)),new zee(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=jr(e.commitTime);return this.listener.Zo(i,t)}return Kt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=YE(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>QE(this.yt,i))};this.Bo(t)}}class _ne extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.yt=r,this.nu=!1}su(){if(this.nu)throw new Je(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.ao(e,t,i,r,o)).catch(r=>{throw"FirebaseError"===r.name?(r.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Je(Pe.UNKNOWN,r.toString())})}_o(e,t,i,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection._o(e,t,i,o,c,r)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Je(Pe.UNKNOWN,o.toString())})}terminate(){this.nu=!0}}class vne{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Br(t),this.ou=!1):at("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class wne{constructor(e,t,i,r,o){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=o,this.mu.Ur(p=>{i.enqueueAndForget((0,Ce.Z)(function*(){var _;Yd(c)&&(at("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ce.Z)(function*(E){const T=Et(E);T._u.add(4),yield Uv(T),T.gu.set("Unknown"),T._u.delete(4),yield aC(T)}),function(E){return _.apply(this,arguments)})(c))}))}),this.gu=new vne(i,r)}}function aC(n){return bL.apply(this,arguments)}function bL(){return bL=(0,Ce.Z)(function*(n){if(Yd(n))for(const e of n.wu)yield e(!0)}),bL.apply(this,arguments)}function Uv(n){return EL.apply(this,arguments)}function EL(){return EL=(0,Ce.Z)(function*(n){for(const e of n.wu)yield e(!1)}),EL.apply(this,arguments)}function PA(n,e){const t=Et(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),TL(t)?IL(t):Bv(t).ko()&&CL(t,e))}function lC(n,e){const t=Et(n),i=Bv(t);t.du.delete(e),i.ko()&&kG(t,e),0===t.du.size&&(i.ko()?i.Fo():Yd(t)&&t.gu.set("Unknown"))}function CL(n,e){n.yu.Ot(e.targetId),Bv(n).zo(e)}function kG(n,e){n.yu.Ot(e),Bv(n).Ho(e)}function IL(n){n.yu=new tte({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),Bv(n).start(),n.gu.uu()}function TL(n){return Yd(n)&&!Bv(n).No()&&n.du.size>0}function Yd(n){return 0===Et(n)._u.size}function RG(n){n.yu=void 0}function bne(n){return SL.apply(this,arguments)}function SL(){return SL=(0,Ce.Z)(function*(n){n.du.forEach((e,t)=>{CL(n,e)})}),SL.apply(this,arguments)}function Ene(n,e){return DL.apply(this,arguments)}function DL(){return DL=(0,Ce.Z)(function*(n,e){RG(n),TL(n)?(n.gu.hu(e),IL(n)):n.gu.set("Unknown")}),DL.apply(this,arguments)}function Cne(n,e,t){return AL.apply(this,arguments)}function AL(){return AL=(0,Ce.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof E$&&2===e.state&&e.cause)try{yield(i=(0,Ce.Z)(function*(r,o){const c=o.cause;for(const p of o.targetIds)r.du.has(p)&&(yield r.remoteSyncer.rejectListen(p,c),r.du.delete(p),r.yu.removeTarget(p))}),function(r,o){return i.apply(this,arguments)})(n,e)}catch(i){at("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield NA(n,i)}else if(e instanceof _A?n.yu.Kt(e):e instanceof b$?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(en.min()))try{const i=yield wG(n.localStore);t.compareTo(i)>=0&&(yield function(r,o){const c=r.yu.Zt(o);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const E=r.du.get(_);E&&r.du.set(_,E.withResumeToken(p.resumeToken,o))}}),c.targetMismatches.forEach(p=>{const _=r.du.get(p);if(!_)return;r.du.set(p,_.withResumeToken(Cs.EMPTY_BYTE_STRING,_.snapshotVersion)),kG(r,p);const E=new Gf(_.target,p,1,_.sequenceNumber);CL(r,E)}),r.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){at("RemoteStore","Failed to raise snapshot:",i),yield NA(n,i)}var i}),AL.apply(this,arguments)}function NA(n,e,t){return ML.apply(this,arguments)}function ML(){return ML=(0,Ce.Z)(function*(n,e,t){if(!Lf(e))throw e;n._u.add(1),yield Uv(n),n.gu.set("Offline"),t||(t=()=>wG(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){at("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield aC(n)}))}),ML.apply(this,arguments)}function PG(n,e){return e().catch(t=>NA(n,t,e))}function Vv(n){return xL.apply(this,arguments)}function xL(){return xL=(0,Ce.Z)(function*(n){const e=Et(n),t=Wf(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Ine(e);)try{const r=yield lne(e.localStore,i);if(null===r){0===e.fu.length&&t.Fo();break}i=r.batchId,Tne(e,r)}catch(r){yield NA(e,r)}NG(e)&&OG(e)}),xL.apply(this,arguments)}function Ine(n){return Yd(n)&&n.fu.length<10}function Tne(n,e){n.fu.push(e);const t=Wf(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function NG(n){return Yd(n)&&!Wf(n).No()&&n.fu.length>0}function OG(n){Wf(n).start()}function Sne(n){return kL.apply(this,arguments)}function kL(){return kL=(0,Ce.Z)(function*(n){Wf(n).eu()}),kL.apply(this,arguments)}function Dne(n){return RL.apply(this,arguments)}function RL(){return RL=(0,Ce.Z)(function*(n){const e=Wf(n);for(const t of n.fu)e.Xo(t.mutations)}),RL.apply(this,arguments)}function Ane(n,e,t){return PL.apply(this,arguments)}function PL(){return PL=(0,Ce.Z)(function*(n,e,t){const i=n.fu.shift(),r=QF.from(i,e,t);yield PG(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Vv(n)}),PL.apply(this,arguments)}function Mne(n,e){return NL.apply(this,arguments)}function NL(){return NL=(0,Ce.Z)(function*(n,e){var t;e&&Wf(n).Yo&&(yield(t=(0,Ce.Z)(function*(i,r){if(m$(o=r.code)&&o!==Pe.ABORTED){const c=i.fu.shift();Wf(i).Mo(),yield PG(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield Vv(i)}var o}),function(i,r){return t.apply(this,arguments)})(n,e)),NG(n)&&OG(n)}),NL.apply(this,arguments)}function FG(n,e){return OL.apply(this,arguments)}function OL(){return OL=(0,Ce.Z)(function*(n,e){const t=Et(n);t.asyncQueue.verifyOperationInProgress(),at("RemoteStore","RemoteStore received new credentials");const i=Yd(t);t._u.add(3),yield Uv(t),i&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield aC(t)}),OL.apply(this,arguments)}function FL(n,e){return LL.apply(this,arguments)}function LL(){return LL=(0,Ce.Z)(function*(n,e){const t=Et(n);e?(t._u.delete(2),yield aC(t)):e||(t._u.add(2),yield Uv(t),t.gu.set("Unknown"))}),LL.apply(this,arguments)}function Bv(n){return n.pu||(n.pu=function(e,t,i){const r=Et(e);return r.su(),new gne(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,i)}(n.datastore,n.asyncQueue,{Yr:bne.bind(null,n),Zr:Ene.bind(null,n),Wo:Cne.bind(null,n)}),n.wu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.pu.Mo(),TL(n)?IL(n):n.gu.set("Unknown")):(yield n.pu.stop(),RG(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Wf(n){return n.Iu||(n.Iu=function(e,t,i){const r=Et(e);return r.su(),new mne(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,i)}(n.datastore,n.asyncQueue,{Yr:Sne.bind(null,n),Zr:Mne.bind(null,n),tu:Dne.bind(null,n),Zo:Ane.bind(null,n)}),n.wu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Iu.Mo(),yield Vv(n)):(yield n.Iu.stop(),n.fu.length>0&&(at("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class UL{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,i,r,o){const c=Date.now()+i,p=new UL(e,t,c,r,o);return p.start(i),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Je(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jv(n,e){if(Br("AsyncQueue",`${e}: ${n}`),Lf(n))return new Je(Pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Hv{constructor(e){this.comparator=e?(t,i)=>e(t,i)||vt.comparator(t.key,i.key):(t,i)=>vt.comparator(t.key,i.key),this.keyedMap=qE(),this.sortedSet=new Ar(this.comparator)}static emptySet(e){return new Hv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Hv;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class LG{constructor(){this.Tu=new Ar(vt.comparator)}track(e){const t=e.doc.key,i=this.Tu.get(t);i?0!==e.type&&3===i.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==i.type?this.Tu=this.Tu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Tu=this.Tu.remove(t):1===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Lt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,i)=>{e.push(i)}),e}}class $v{constructor(e,t,i,r,o,c,p,_,E){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=E}static fromInitialDocuments(e,t,i,r,o){const c=[];return t.forEach(p=>{c.push({type:0,doc:p})}),new $v(e,t,Hv.emptySet(t),c,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class xne{constructor(){this.Au=void 0,this.listeners=[]}}class kne{constructor(){this.queries=new $f(e=>e$(e),jE),this.onlineState="Unknown",this.Ru=new Set}}function VL(n,e){return BL.apply(this,arguments)}function BL(){return BL=(0,Ce.Z)(function*(n,e){const t=Et(n),i=e.query;let r=!1,o=t.queries.get(i);if(o||(r=!0,o=new xne),r)try{o.Au=yield t.onListen(i)}catch(c){const p=jv(c,`Initialization of query '${$F(e.query)}' failed`);return void e.onError(p)}t.queries.set(i,o),o.listeners.push(e),e.bu(t.onlineState),o.Au&&e.Pu(o.Au)&&$L(t)}),BL.apply(this,arguments)}function jL(n,e){return HL.apply(this,arguments)}function HL(){return HL=(0,Ce.Z)(function*(n,e){const t=Et(n),i=e.query;let r=!1;const o=t.queries.get(i);if(o){const c=o.listeners.indexOf(e);c>=0&&(o.listeners.splice(c,1),r=0===o.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),HL.apply(this,arguments)}function Rne(n,e){const t=Et(n);let i=!1;for(const r of e){const c=t.queries.get(r.query);if(c){for(const p of c.listeners)p.Pu(r)&&(i=!0);c.Au=r}}i&&$L(t)}function Pne(n,e,t){const i=Et(n),r=i.queries.get(e);if(r)for(const o of r.listeners)o.onError(t);i.queries.delete(e)}function $L(n){n.Ru.forEach(e=>{e.next()})}class GL{constructor(e,t,i){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new $v(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=$v.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Nne{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class UG{constructor(e){this.yt=e}Ji(e){return Nc(this.yt,e)}Yi(e){return e.metadata.exists?k$(this.yt,e.document,!1):Bi.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return jr(e)}}class One{constructor(e,t,i){this.Mu=e,this.localStore=t,this.yt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=VG(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const i=Wn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,i=new UG(this.yt);for(const r of e)if(r.metadata.queries){const o=i.Ji(r.metadata.name);for(const c of r.metadata.queries){const p=(t.get(c)||Cn()).add(o);t.set(c,p)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function une(n,e,t,i){return fL.apply(this,arguments)}(e.localStore,new UG(e.yt),e.documents,e.Mu.id),i=e.$u(e.documents);for(const r of e.queries)yield cne(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function VG(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class BG{constructor(e){this.key=e}}class jG{constructor(e){this.key=e}}class HG{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Cn(),this.mutatedKeys=Cn(),this.Gu=n$(e),this.Qu=new Hv(this.Gu)}get ju(){return this.qu}Wu(e,t){const i=t?t.zu:new LG,r=t?t.Qu:this.Qu;let o=t?t.mutatedKeys:this.mutatedKeys,c=r,p=!1;const _="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,E="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((T,R)=>{const F=r.get(T),G=HE(this.query,R)?R:null,K=!!F&&this.mutatedKeys.has(F.key),ue=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let we=!1;F&&G?F.data.isEqual(G.data)?K!==ue&&(i.track({type:3,doc:G}),we=!0):this.Hu(F,G)||(i.track({type:2,doc:G}),we=!0,(_&&this.Gu(G,_)>0||E&&this.Gu(G,E)<0)&&(p=!0)):!F&&G?(i.track({type:0,doc:G}),we=!0):F&&!G&&(i.track({type:1,doc:F}),we=!0,(_||E)&&(p=!0)),we&&(G?(c=c.add(G),o=ue?o.add(T):o.delete(T)):(c=c.delete(T),o=o.delete(T)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const T="F"===this.query.limitType?c.last():c.first();c=c.delete(T.key),o=o.delete(T.key),i.track({type:1,doc:T})}return{Qu:c,zu:i,$i:p,mutatedKeys:o}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const o=e.zu.Eu();o.sort((E,T)=>function(R,F){const G=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lt()}};return G(R)-G(F)}(E.type,T.type)||this.Gu(E.doc,T.doc)),this.Ju(i);const c=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,_=p!==this.Uu;return this.Uu=p,0!==o.length||_?{snapshot:new $v(this.query,e.Qu,r,o,e.mutatedKeys,0===p,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new LG,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Cn(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new jG(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new BG(i))}),t}tc(e){this.qu=e.Hi,this.Ku=Cn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return $v.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Fne{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Lne{constructor(e){this.key=e,this.nc=!1}}class Une{constructor(e,t,i,r,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new $f(p=>e$(p),jE),this.rc=new Map,this.oc=new Set,this.uc=new Ar(vt.comparator),this.cc=new Map,this.ac=new oL,this.hc={},this.lc=new Map,this.fc=Im.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Vne(n,e){return qL.apply(this,arguments)}function qL(){return qL=(0,Ce.Z)(function*(n,e){const t=p2(n);let i,r;const o=t.ic.get(e);if(o)i=o.targetId,t.sharedClientState.addLocalQueryTarget(i),r=o.view.ec();else{const c=yield Fv(t.localStore,Bo(e));t.isPrimaryClient&&PA(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield ZL(t,e,i,"current"===p,c.resumeToken)}return r}),qL.apply(this,arguments)}function ZL(n,e,t,i,r){return zL.apply(this,arguments)}function zL(){return zL=(0,Ce.Z)(function*(n,e,t,i,r){n._c=(R,F,G)=>{return(K=(0,Ce.Z)(function*(ue,we,Ke,ut){let ct=we.view.Wu(Ke);ct.$i&&(ct=yield MA(ue.localStore,we.query,!1).then(({documents:Nt})=>we.view.Wu(Nt,ct)));const ht=ut&&ut.targetChanges.get(we.targetId),Pt=we.view.applyChanges(ct,ue.isPrimaryClient,ht);return i2(ue,we.targetId,Pt.Xu),Pt.snapshot}),function(ue,we,Ke,ut){return K.apply(this,arguments)})(n,R,F,G);var K};const o=yield MA(n.localStore,e,!0),c=new HG(e,o.Hi),p=c.Wu(o.documents),_=WE.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),E=c.applyChanges(p,n.isPrimaryClient,_);i2(n,t,E.Xu);const T=new Fne(e,t,c);return n.ic.set(e,T),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),E.snapshot}),zL.apply(this,arguments)}function Bne(n,e){return WL.apply(this,arguments)}function WL(){return WL=(0,Ce.Z)(function*(n,e){const t=Et(n),i=t.ic.get(e),r=t.rc.get(i.targetId);if(r.length>1)return t.rc.set(i.targetId,r.filter(o=>!jE(o,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Lv(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),lC(t.remoteStore,i.targetId),Gv(t,i.targetId)}).catch(Ff))):(Gv(t,i.targetId),yield Lv(t.localStore,i.targetId,!0))}),WL.apply(this,arguments)}function KL(){return KL=(0,Ce.Z)(function*(n,e,t){const i=g2(n);try{const r=yield function(o,c){const p=Et(o),_=Ji.now(),E=c.reduce((F,G)=>F.add(G.key),Cn());let T,R;return p.persistence.runTransaction("Locally write mutations","readwrite",F=>{let G=ua(),K=Cn();return p.Gi.getEntries(F,E).next(ue=>{G=ue,G.forEach((we,Ke)=>{Ke.isValidDocument()||(K=K.add(we))})}).next(()=>p.localDocuments.getOverlayedDocuments(F,G)).next(ue=>{T=ue;const we=[];for(const Ke of c){const ut=Kee(Ke,T.get(Ke.key).overlayedDocument);null!=ut&&we.push(new Kd(Ke.key,ut,K5(ut.value.mapValue),Xi.exists(!0)))}return p.mutationQueue.addMutationBatch(F,_,we,c)}).next(ue=>{R=ue;const we=ue.applyToLocalDocumentSet(T,K);return p.documentOverlayCache.saveOverlays(F,ue.batchId,we)})}).then(()=>({batchId:R.batchId,changes:v$(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,c,p){let _=o.hc[o.currentUser.toKey()];_||(_=new Ar(wn)),_=_.insert(c,p),o.hc[o.currentUser.toKey()]=_}(i,r.batchId,t),yield Qd(i,r.changes),yield Vv(i.remoteStore)}catch(r){const o=jv(r,"Failed to persist write");t.reject(o)}}),KL.apply(this,arguments)}function $G(n,e){return YL.apply(this,arguments)}function YL(){return YL=(0,Ce.Z)(function*(n,e){const t=Et(n);try{const i=yield function ane(n,e){const t=Et(n),i=e.snapshotVersion;let r=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});r=t.qi;const p=[];e.targetChanges.forEach((T,R)=>{const F=r.get(R);if(!F)return;p.push(t.Cs.removeMatchingKeys(o,T.removedDocuments,R).next(()=>t.Cs.addMatchingKeys(o,T.addedDocuments,R)));let G=F.withSequenceNumber(o.currentSequenceNumber);var K,ue,we;e.targetMismatches.has(R)?G=G.withResumeToken(Cs.EMPTY_BYTE_STRING,en.min()).withLastLimboFreeSnapshotVersion(en.min()):T.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(T.resumeToken,i)),r=r.insert(R,G),ue=G,we=T,(0===(K=F).resumeToken.approximateByteSize()||ue.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8||we.addedDocuments.size+we.modifiedDocuments.size+we.removedDocuments.size>0)&&p.push(t.Cs.updateTargetData(o,G))});let _=ua(),E=Cn();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(o,T))}),p.push(bG(o,c,e.documentUpdates).next(T=>{_=T.Wi,E=T.zi})),!i.isEqual(en.min())){const T=t.Cs.getLastRemoteSnapshotVersion(o).next(R=>t.Cs.setTargetsMetadata(o,o.currentSequenceNumber,i));p.push(T)}return ke.waitFor(p).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,_,E)).next(()=>_)}).then(o=>(t.qi=r,o))}(t.localStore,e);e.targetChanges.forEach((r,o)=>{const c=t.cc.get(o);c&&(Kt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.nc=!0:r.modifiedDocuments.size>0?Kt(c.nc):r.removedDocuments.size>0&&(Kt(c.nc),c.nc=!1))}),yield Qd(t,i,e)}catch(i){yield Ff(i)}}),YL.apply(this,arguments)}function GG(n,e,t){const i=Et(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.ic.forEach((o,c)=>{const p=c.view.bu(e);p.snapshot&&r.push(p.snapshot)}),function(o,c){const p=Et(o);p.onlineState=c;let _=!1;p.queries.forEach((E,T)=>{for(const R of T.listeners)R.bu(c)&&(_=!0)}),_&&$L(p)}(i.eventManager,e),r.length&&i.sc.Wo(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Hne(n,e,t){return QL.apply(this,arguments)}function QL(){return QL=(0,Ce.Z)(function*(n,e,t){const i=Et(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.cc.get(e),o=r&&r.key;if(o){let c=new Ar(vt.comparator);c=c.insert(o,Bi.newNoDocument(o,en.min()));const p=Cn().add(o),_=new zE(en.min(),new Map,new bi(wn),c,p);yield $G(i,_),i.uc=i.uc.remove(o),i.cc.delete(e),r2(i)}else yield Lv(i.localStore,e,!1).then(()=>Gv(i,e,t)).catch(Ff)}),QL.apply(this,arguments)}function $ne(n,e){return JL.apply(this,arguments)}function JL(){return JL=(0,Ce.Z)(function*(n,e){const t=Et(n),i=e.batch.batchId;try{const r=yield function one(n,e){const t=Et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,p,_,E){const T=_.batch,R=T.keys();let F=ke.resolve();return R.forEach(G=>{F=F.next(()=>E.getEntry(p,G)).next(K=>{const ue=_.docVersions.get(G);Kt(null!==ue),K.version.compareTo(ue)<0&&(T.applyToRemoteDocument(K,_),K.isValidDocument()&&(K.setReadTime(_.commitVersion),E.addEntry(K)))})}),F.next(()=>c.mutationQueue.removeMutationBatch(p,T))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let p=Cn();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(p=p.add(c.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(t.localStore,e);n2(t,i,null),t2(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Qd(t,r)}catch(r){yield Ff(r)}}),JL.apply(this,arguments)}function Gne(n,e,t){return XL.apply(this,arguments)}function XL(){return XL=(0,Ce.Z)(function*(n,e,t){const i=Et(n);try{const r=yield function(o,c){const p=Et(o);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return p.mutationQueue.lookupMutationBatch(_,c).next(T=>(Kt(null!==T),E=T.keys(),p.mutationQueue.removeMutationBatch(_,T))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,E,c)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>p.localDocuments.getDocuments(_,E))})}(i.localStore,e);n2(i,e,t),t2(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Qd(i,r)}catch(r){yield Ff(r)}}),XL.apply(this,arguments)}function e2(){return e2=(0,Ce.Z)(function*(n,e){const t=Et(n);Yd(t.remoteStore)||at("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const c=Et(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===i)return void e.resolve();const r=t.lc.get(i)||[];r.push(e),t.lc.set(i,r)}catch(i){const r=jv(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),e2.apply(this,arguments)}function t2(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function n2(n,e,t){const i=Et(n);let r=i.hc[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.hc[i.currentUser.toKey()]=r}}function Gv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||qG(n,i)})}function qG(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(lC(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),r2(n))}function i2(n,e,t){for(const i of t)i instanceof BG?(n.ac.addReference(i.key,e),Zne(n,i)):i instanceof jG?(at("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||qG(n,i.key)):Lt()}function Zne(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(at("SyncEngine","New document in limbo: "+t),n.oc.add(i),r2(n))}function r2(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new vt(Wn.fromString(e)),i=n.fc.next();n.cc.set(i,new Lne(t)),n.uc=n.uc.insert(t,i),PA(n.remoteStore,new Gf(Bo(Sv(t.path)),i,2,Va.at))}}function Qd(n,e,t){return s2.apply(this,arguments)}function s2(){return s2=(0,Ce.Z)(function*(n,e,t){const i=Et(n),r=[],o=[],c=[];var p;i.ic.isEmpty()||(i.ic.forEach((p,_)=>{c.push(i._c(_,e,t).then(E=>{if((E||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(_.targetId,E?.fromCache?"not-current":"current"),E){r.push(E);const T=cL.Ci(_.targetId,E);o.push(T)}}))}),yield Promise.all(c),i.sc.Wo(r),yield(p=(0,Ce.Z)(function*(_,E){const T=Et(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>ke.forEach(E,F=>ke.forEach(F.Si,G=>T.persistence.referenceDelegate.addReference(R,F.targetId,G)).next(()=>ke.forEach(F.Di,G=>T.persistence.referenceDelegate.removeReference(R,F.targetId,G)))))}catch(R){if(!Lf(R))throw R;at("LocalStore","Failed to update sequence numbers: "+R)}for(const R of E){const F=R.targetId;if(!R.fromCache){const G=T.qi.get(F),ue=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);T.qi=T.qi.insert(F,ue)}}}),function(_,E){return p.apply(this,arguments)})(i.localStore,o))}),s2.apply(this,arguments)}function zne(n,e){return o2.apply(this,arguments)}function o2(){return o2=(0,Ce.Z)(function*(n,e){const t=Et(n);if(!t.currentUser.isEqual(e)){at("SyncEngine","User change. New user:",e.toKey());const i=yield vG(t.localStore,e);t.currentUser=e,(r=t).lc.forEach(c=>{c.forEach(p=>{p.reject(new Je(Pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.lc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Qd(t,i.ji)}var r}),o2.apply(this,arguments)}function Wne(n,e){const t=Et(n),i=t.cc.get(e);if(i&&i.nc)return Cn().add(i.key);{let r=Cn();const o=t.rc.get(e);if(!o)return r;for(const c of o){const p=t.ic.get(c);r=r.unionWith(p.view.ju)}return r}}function Kne(n,e){return a2.apply(this,arguments)}function a2(){return a2=(0,Ce.Z)(function*(n,e){const t=Et(n),i=yield MA(t.localStore,e.query,!0),r=e.view.tc(i);return t.isPrimaryClient&&i2(t,e.targetId,r.Xu),r}),a2.apply(this,arguments)}function Yne(n,e){return l2.apply(this,arguments)}function l2(){return l2=(0,Ce.Z)(function*(n,e){const t=Et(n);return CG(t.localStore,e).then(i=>Qd(t,i))}),l2.apply(this,arguments)}function Qne(n,e,t,i){return u2.apply(this,arguments)}function u2(){return u2=(0,Ce.Z)(function*(n,e,t,i){const r=Et(n),o=yield function(c,p){const _=Et(c),E=Et(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>E.Tn(T,p).next(R=>R?_.localDocuments.getDocuments(T,R):ke.resolve(null)))}(r.localStore,e);var p;null!==o?("pending"===t?yield Vv(r.remoteStore):"acknowledged"===t||"rejected"===t?(n2(r,e,i||null),t2(r,e),p=e,Et(Et(r.localStore).mutationQueue).An(p)):Lt(),yield Qd(r,o)):at("SyncEngine","Cannot apply mutation batch with id: "+e)}),u2.apply(this,arguments)}function c2(){return c2=(0,Ce.Z)(function*(n,e){const t=Et(n);if(p2(t),g2(t),!0===e&&!0!==t.dc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield ZG(t,i.toArray());t.dc=!0,yield FL(t.remoteStore,!0);for(const o of r)PA(t.remoteStore,o)}else if(!1===e&&!1!==t.dc){const i=[];let r=Promise.resolve();t.rc.forEach((o,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(Gv(t,c),Lv(t.localStore,c,!0))),lC(t.remoteStore,c)}),yield r,yield ZG(t,i),function(o){const c=Et(o);c.cc.forEach((p,_)=>{lC(c.remoteStore,_)}),c.ac.fs(),c.cc=new Map,c.uc=new Ar(vt.comparator)}(t),t.dc=!1,yield FL(t.remoteStore,!1)}}),c2.apply(this,arguments)}function ZG(n,e,t){return d2.apply(this,arguments)}function d2(){return d2=(0,Ce.Z)(function*(n,e,t){const i=Et(n),r=[],o=[];for(const c of e){let p;const _=i.rc.get(c);if(_&&0!==_.length){p=yield Fv(i.localStore,Bo(_[0]));for(const E of _){const T=i.ic.get(E),R=yield Kne(i,T);R.snapshot&&o.push(R.snapshot)}}else{const E=yield EG(i.localStore,c);p=yield Fv(i.localStore,E),yield ZL(i,zG(E),c,!1,p.resumeToken)}r.push(p)}return i.sc.Wo(o),r}),d2.apply(this,arguments)}function zG(n){return J5(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Xne(n){const e=Et(n);return Et(Et(e.localStore).persistence).vi()}function eie(n,e,t,i){return h2.apply(this,arguments)}function h2(){return h2=(0,Ce.Z)(function*(n,e,t,i){const r=Et(n);if(r.dc)return void at("SyncEngine","Ignoring unexpected query state notification.");const o=r.rc.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const c=yield CG(r.localStore,t$(o[0])),p=zE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Cs.EMPTY_BYTE_STRING);yield Qd(r,c,p);break}case"rejected":yield Lv(r.localStore,e,!0),Gv(r,e,i);break;default:Lt()}}),h2.apply(this,arguments)}function tie(n,e,t){return f2.apply(this,arguments)}function f2(){return f2=(0,Ce.Z)(function*(n,e,t){const i=p2(n);if(i.dc){for(const r of e){if(i.rc.has(r)){at("SyncEngine","Adding an already active target "+r);continue}const o=yield EG(i.localStore,r),c=yield Fv(i.localStore,o);yield ZL(i,zG(o),c.targetId,!1,c.resumeToken),PA(i.remoteStore,c)}for(const r of t)i.rc.has(r)&&(yield Lv(i.localStore,r,!1).then(()=>{lC(i.remoteStore,r),Gv(i,r)}).catch(Ff))}}),f2.apply(this,arguments)}function p2(n){const e=Et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$G.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wne.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hne.bind(null,e),e.sc.Wo=Rne.bind(null,e.eventManager),e.sc.wc=Pne.bind(null,e.eventManager),e}function g2(n){const e=Et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$ne.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Gne.bind(null,e),e}class WG{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.yt=oC(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return yG(this.persistence,new _G,e.initialUser,this.yt)}yc(e){return new gG(DA.Bs,this.yt)}gc(e){return new DG}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class KG extends WG{constructor(e,t,i){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,Ce.Z)(function*(){yield t().call(i,e),yield i.Ac.initialize(i,e),yield g2(i.Ac.syncEngine),yield Vv(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return yG(this.persistence,new _G,e.initialUser,this.yt)}Tc(e,t){return new qte(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const i=new Mee(t,this.persistence);return new Aee(e.asyncQueue,i)}yc(e){const t=uL(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?ca.withCacheSize(this.cacheSizeBytes):ca.DEFAULT;return new lL(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,MG(),RA(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new DG}}class iie extends KG{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,Ce.Z)(function*(){yield t().call(i,e);const r=i.Ac.syncEngine;i.sharedClientState instanceof yL&&(i.sharedClientState.syncEngine={Fr:Qne.bind(null,r),$r:eie.bind(null,r),Br:tie.bind(null,r),vi:Xne.bind(null,r),Mr:Yne.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var o=(0,Ce.Z)(function*(c){yield function Jne(n,e){return c2.apply(this,arguments)}(i.Ac.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start():c||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(c&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():c||i.indexBackfillerScheduler.stop())});return function(c){return o.apply(this,arguments)}}())})()}gc(e){const t=MG();if(!yL.C(t))throw new Je(Pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=uL(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yL(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class m2{initialize(e,t){var i=this;return(0,Ce.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>GG(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=zne.bind(null,i.syncEngine),yield FL(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new kne}createDatastore(e){const t=oC(e.databaseInfo.databaseId),i=new pne(e.databaseInfo);return new _ne(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,o=p=>GG(this.syncEngine,p,0),c=AG.C()?new AG:new dne,new wne(t,i,r,o,c);var t,i,r,o,c}createSyncEngine(e,t){return function(i,r,o,c,p,_,E){const T=new Une(i,r,o,c,p,_);return E&&(T.dc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const i=Et(t);at("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield Uv(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function _2(n,e,t){if(!t)throw new Je(Pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YG(n,e,t,i){if(!0===e&&!0===i)throw new Je(Pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QG(n){if(!vt.isDocumentKey(n))throw new Je(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function JG(n){if(vt.isDocumentKey(n))throw new Je(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function OA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Lt()}function jn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Je(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=OA(n);throw new Je(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function XG(n,e){if(e<=0)throw new Je(Pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const e8=new Map;class t8{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Je(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Je(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,YG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uC{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t8({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Je(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Je(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t8(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new mee;switch(t.type){case"gapi":return new wee(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Je(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=e8.get(e);t&&(at("ComponentProvider","Removing Datastore"),e8.delete(e),t.terminate())}(this),Promise.resolve()}}class ji{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ji(this.firestore,e,this._key)}}class eo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new eo(this.firestore,e,this._query)}}class Fc extends eo{constructor(e,t,i){super(e,t,Sv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ji(this.firestore,null,new vt(e))}withConverter(e){return new Fc(this.firestore,e,this._path)}}function i8(n,e,...t){if(n=(0,W.m9)(n),_2("collection","path",e),n instanceof uC){const i=Wn.fromString(e,...t);return JG(i),new Fc(n,null,i)}{if(!(n instanceof ji||n instanceof Fc))throw new Je(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Wn.fromString(e,...t));return JG(i),new Fc(n.firestore,null,i)}}function FA(n,e,...t){if(n=(0,W.m9)(n),1===arguments.length&&(e=E5.R()),_2("doc","path",e),n instanceof uC){const i=Wn.fromString(e,...t);return QG(i),new ji(n,null,new vt(i))}{if(!(n instanceof ji||n instanceof Fc))throw new Je(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Wn.fromString(e,...t));return QG(i),new ji(n.firestore,n instanceof Fc?n.converter:null,new vt(i))}}function r8(n,e){return n=(0,W.m9)(n),e=(0,W.m9)(e),(n instanceof ji||n instanceof Fc)&&(e instanceof ji||e instanceof Fc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function y2(n,e){return n=(0,W.m9)(n),e=(0,W.m9)(e),n instanceof eo&&e instanceof eo&&n.firestore===e.firestore&&jE(n._query,e._query)&&n.converter===e.converter}function s8(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class LA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class sie{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Es,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const i=e.vc.decode(t),r=Number(i);isNaN(r)&&e.Dc(`length string (${i}) is not valid number`);const o=yield e.Cc(r);return new Nne(JSON.parse(o),t.length+r)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ce.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Cc(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const i=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class lie{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Je(Pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ce.Z)(function*(o,c){const p=Et(o),_=YE(p.yt)+"/documents",E={documents:c.map(G=>KE(p.yt,G))},T=yield p._o("BatchGetDocuments",_,E,c.length),R=new Map;T.forEach(G=>{const K=function ate(n,e){return"found"in e?function(t,i){Kt(!!i.found);const r=Nc(t,i.found.name),o=jr(i.found.updateTime),c=i.found.createTime?jr(i.found.createTime):en.min(),p=new Xs({mapValue:{fields:i.found.fields}});return Bi.newFoundDocument(r,o,c,p)}(n,e):"missing"in e?function(t,i){Kt(!!i.missing),Kt(!!i.readTime);const r=Nc(t,i.missing),o=jr(i.readTime);return Bi.newNoDocument(r,o)}(n,e):Lt()}(p.yt,G);R.set(K.key.toString(),K)});const F=[];return c.forEach(G=>{const K=R.get(G.toString());Kt(!!K),F.push(K)}),F}),function(o,c){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new xv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const o=vt.fromPath(r);e.mutations.push(new GF(o,e.precondition(o)))}),yield(i=(0,Ce.Z)(function*(r,o){const c=Et(r),p=YE(c.yt)+"/documents",_={writes:o.map(E=>QE(c.yt,E))};yield c.ao("Commit",p,_)}),function(r,o){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Lt();t=en.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Je(Pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(en.min())?Xi.exists(!1):Xi.updateTime(t):Xi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(en.min()))throw new Je(Pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xi.updateTime(t)}return Xi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uie{constructor(e,t,i,r,o){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=o,this.kc=i.maxAttempts,this.xo=new vL(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ce.Z)(function*(){const t=new lie(e.datastore),i=e.Mc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(o=>{e.Fc(o)}))}).catch(r=>{e.Fc(r)})}))}Mc(e){try{const t=this.updateFunction(e);return!NE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!m$(t)}return!1}}class cie{constructor(e,t,i,r){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Ls.UNAUTHENTICATED,this.clientId=E5.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,Ce.Z)(function*(p){at("FirestoreClient","Received user=",p.uid),yield o.authCredentialListener(p),o.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>(at("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Je(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=jv(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function o8(n,e){return v2.apply(this,arguments)}function v2(){return v2=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),at("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ce.Z)(function*(o){i.isEqual(o)||(yield vG(e.localStore,o),i=o)});return function(o){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),v2.apply(this,arguments)}function a8(n,e){return w2.apply(this,arguments)}function w2(){return w2=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield b2(n);at("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>FG(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>FG(e.remoteStore,o)),n.onlineComponents=e}),w2.apply(this,arguments)}function b2(n){return E2.apply(this,arguments)}function E2(){return E2=(0,Ce.Z)(function*(n){return n.offlineComponents||(at("FirestoreClient","Using default OfflineComponentProvider"),yield o8(n,new WG)),n.offlineComponents}),E2.apply(this,arguments)}function UA(n){return C2.apply(this,arguments)}function C2(){return C2=(0,Ce.Z)(function*(n){return n.onlineComponents||(at("FirestoreClient","Using default OnlineComponentProvider"),yield a8(n,new m2)),n.onlineComponents}),C2.apply(this,arguments)}function l8(n){return b2(n).then(e=>e.persistence)}function VA(n){return b2(n).then(e=>e.localStore)}function I2(n){return UA(n).then(e=>e.remoteStore)}function T2(n){return UA(n).then(e=>e.syncEngine)}function qv(n){return S2.apply(this,arguments)}function S2(){return S2=(0,Ce.Z)(function*(n){const e=yield UA(n),t=e.eventManager;return t.onListen=Vne.bind(null,e.syncEngine),t.onUnlisten=Bne.bind(null,e.syncEngine),t}),S2.apply(this,arguments)}function c8(n,e,t={}){const i=new Es;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(r,o,c,p,_){const E=new LA({next:R=>{o.enqueueAndForget(()=>jL(r,T));const F=R.docs.has(c);!F&&R.fromCache?_.reject(new Je(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&R.fromCache&&p&&"server"===p.source?_.reject(new Je(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(R)},error:R=>_.reject(R)}),T=new GL(Sv(c.path),E,{includeMetadataChanges:!0,Nu:!0});return VL(r,T)}(yield qv(n),n.asyncQueue,e,t,i)})),i.promise}function d8(n,e,t={}){const i=new Es;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(r,o,c,p,_){const E=new LA({next:R=>{o.enqueueAndForget(()=>jL(r,T)),R.fromCache&&"server"===p.source?_.reject(new Je(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(R)},error:R=>_.reject(R)}),T=new GL(c,E,{includeMetadataChanges:!0,Nu:!0});return VL(r,T)}(yield qv(n),n.asyncQueue,e,t,i)})),i.promise}class yie{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new vL(this,"async_queue_retry"),this.Wc=()=>{const t=RA();t&&at("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=RA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=RA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Es;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Lf(t))throw t;at("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{throw this.Kc=i,this.Gc=!1,Br("INTERNAL UNHANDLED ERROR: ",function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),c}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const r=UL.createAndSchedule(this,e,t,i,o=>this.Yc(o));return this.Uc.push(r),r}zc(){this.Kc&&Lt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function D2(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class vie{constructor(){this._progressObserver={},this._taskCompletionResolver=new Es,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Hi extends uC{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new yie,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||h8(this),this._firestoreClient.terminate()}}function Hr(n){return n._firestoreClient||h8(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function h8(n){var e;const t=n._freezeSettings(),i=(o=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new xee(n._databaseId,o,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var o,p;n._firestoreClient=new cie(n._authCredentials,n._appCheckCredentials,n._queue,i)}function f8(n,e,t){const i=new Es;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield o8(n,t),yield a8(n,e),i.resolve()}catch(r){const o=r;if(!("FirebaseError"===(c=o).name?c.code===Pe.FAILED_PRECONDITION||c.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;lm("Error enabling offline persistence. Falling back to persistence disabled: "+o),i.reject(o)}var c})).then(()=>i.promise)}function p8(n){if(n._initialized||n._terminated)throw new Je(Pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Lc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lc(Cs.fromBase64String(e))}catch(t){throw new Je(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lc(Cs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Jd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Je(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sm{constructor(e){this._methodName=e}}class BA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Je(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Je(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return wn(this._lat,e._lat)||wn(this._long,e._long)}}const Mie=/^__.*__$/;class xie{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Kd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mv(e,this.data,t,this.fieldTransforms)}}class g8{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Kd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function m8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lt()}}class jA{constructor(e,t,i,r,o,c){this.settings=e,this.databaseId=t,this.yt=i,this.ignoreUndefinedProperties=r,void 0===o&&this.na(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new jA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:i,oa:!1});return r.ua(e),r}ca(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:i,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return GA(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(m8(this.sa)&&Mie.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class kie{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=i||oC(e)}da(e,t,i,r=!1){return new jA({sa:e,methodName:t,fa:i,path:Sr.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Dm(n){const e=n._freezeSettings(),t=oC(n._databaseId);return new kie(n._databaseId,!!e.ignoreUndefinedProperties,t)}function HA(n,e,t,i,r,o={}){const c=n.da(o.merge||o.mergeFields?2:0,e,t,r);k2("Data must be an object, but it was:",c,i);const p=v8(i,c);let _,E;if(o.merge)_=new la(c.fieldMask),E=c.fieldTransforms;else if(o.mergeFields){const T=[];for(const R of o.mergeFields){const F=R2(e,R,t);if(!c.contains(F))throw new Je(Pe.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);b8(T,F)||T.push(F)}_=new la(T),E=c.fieldTransforms.filter(R=>_.covers(R.field))}else _=null,E=c.fieldTransforms;return new xie(new Xs(p),_,E)}class cC extends Sm{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cC}}function _8(n,e,t){return new jA({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class A2 extends Sm{_toFieldTransform(e){return new $E(e.path,new Dv)}isEqual(e){return e instanceof A2}}class Rie extends Sm{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=_8(this,e,!0),i=this._a.map(o=>Am(o,t)),r=new _m(i);return new $E(e.path,r)}isEqual(e){return this===e}}class Pie extends Sm{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=_8(this,e,!0),i=this._a.map(o=>Am(o,t)),r=new ym(i);return new $E(e.path,r)}isEqual(e){return this===e}}class Nie extends Sm{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Av(e.yt,s$(e.yt,this.wa));return new $E(e.path,t)}isEqual(e){return this===e}}function M2(n,e,t,i){const r=n.da(1,e,t);k2("Data must be an object, but it was:",r,i);const o=[],c=Xs.empty();dm(i,(_,E)=>{const T=$A(e,_,t);E=(0,W.m9)(E);const R=r.ca(T);if(E instanceof cC)o.push(T);else{const F=Am(E,R);null!=F&&(o.push(T),c.set(T,F))}});const p=new la(o);return new g8(c,p,r.fieldTransforms)}function x2(n,e,t,i,r,o){const c=n.da(1,e,t),p=[R2(e,i,t)],_=[r];if(o.length%2!=0)throw new Je(Pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<o.length;F+=2)p.push(R2(e,o[F])),_.push(o[F+1]);const E=[],T=Xs.empty();for(let F=p.length-1;F>=0;--F)if(!b8(E,p[F])){const G=p[F];let K=_[F];K=(0,W.m9)(K);const ue=c.ca(G);if(K instanceof cC)E.push(G);else{const we=Am(K,ue);null!=we&&(E.push(G),T.set(G,we))}}const R=new la(E);return new g8(T,R,c.fieldTransforms)}function y8(n,e,t,i=!1){return Am(t,n.da(i?4:3,e))}function Am(n,e){if(w8(n=(0,W.m9)(n)))return k2("Unsupported field value:",e,n),v8(n,e);if(n instanceof Sm)return function(t,i){if(!m8(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,i){const r=[];let o=0;for(const c of t){let p=Am(c,i.aa(o));null==p&&(p={nullValue:"NULL_VALUE"}),r.push(p),o++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,W.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return s$(i.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=Ji.fromDate(t);return{timestampValue:kv(i.yt,r)}}if(t instanceof Ji){const r=new Ji(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:kv(i.yt,r)}}if(t instanceof BA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Lc)return{bytesValue:S$(i.yt,t._byteString)};if(t instanceof ji){const r=i.databaseId,o=t.firestore._databaseId;if(!o.isEqual(r))throw i.ha(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:qF(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${OA(t)}`)}(n,e)}function v8(n,e){const t={};return x5(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dm(n,(i,r)=>{const o=Am(r,e.ra(i));null!=o&&(t[i]=o)}),{mapValue:{fields:t}}}function w8(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ji||n instanceof BA||n instanceof Lc||n instanceof ji||n instanceof Sm)}function k2(n,e,t){if(!w8(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=OA(t);throw e.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function R2(n,e,t){if((e=(0,W.m9)(e))instanceof Jd)return e._internalPath;if("string"==typeof e)return $A(n,e);throw GA("Field path arguments must be of type string or ",n,!1,void 0,t)}const Oie=new RegExp("[~\\*/\\[\\]]");function $A(n,e,t){if(e.search(Oie)>=0)throw GA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jd(...e.split("."))._internalPath}catch{throw GA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function GA(n,e,t,i,r){const o=i&&!i.isEmpty(),c=void 0!==r;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(o||c)&&(_+=" (found",o&&(_+=` in field ${i}`),c&&(_+=` in document ${r}`),_+=")"),new Je(Pe.INVALID_ARGUMENT,p+n+_)}function b8(n,e){return n.some(t=>t.isEqual(e))}class dC{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ji(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Fie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Fie extends dC{data(){return super.data()}}function qA(n,e){return"string"==typeof e?$A(n,e):e instanceof Jd?e._internalPath:e._delegate._internalPath}function E8(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Je(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class P2{}class hC extends P2{}function Kf(n,e,...t){let i=[];e instanceof P2&&i.push(e),i=i.concat(t),function(r){const o=r.filter(p=>p instanceof Zv).length,c=r.filter(p=>p instanceof fC).length;if(o>1||o>0&&c>0)throw new Je(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class fC extends hC{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new fC(e,t,i)}_apply(e){const t=this._parse(e);return S8(e._query,t),new eo(e.firestore,e.converter,HF(e._query,t))}_parse(e){const t=Dm(e.firestore);return function(r,o,c,p,_,E,T){let R;if(_.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Je(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){T8(T,E);const F=[];for(const G of T)F.push(I8(p,r,G));R={arrayValue:{values:F}}}else R=I8(p,r,T)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||T8(T,E),R=y8(c,"where",T,"in"===E||"not-in"===E);return Bn.create(_,E,R)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Zv extends P2{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Zv(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:mi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,r){let o=i;const c=r.getFlattenedFilters();for(const p of c)S8(o,p),o=HF(o,p)}(e._query,t),new eo(e.firestore,e.converter,HF(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class N2 extends hC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new N2(e,t)}_apply(e){const t=function(i,r,o){if(null!==i.startAt)throw new Je(Pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Je(Pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Iv(r,o);return function(p,_){if(null===BF(p)){const E=dA(p);null!==E&&D8(0,E,_.field)}}(i,c),c}(e._query,this._field,this._direction);return new eo(e.firestore,e.converter,function(i,r){const o=i.explicitOrderBy.concat([r]);return new Wd(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class ZA extends hC{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new ZA(e,t,i)}_apply(e){return new eo(e.firestore,e.converter,hA(e._query,this._limit,this._limitType))}}class zA extends hC{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new zA(e,t,i)}_apply(e){const t=C8(e,this.type,this._docOrFields,this._inclusive);return new eo(e.firestore,e.converter,(r=t,new Wd((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class WA extends hC{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new WA(e,t,i)}_apply(e){const t=C8(e,this.type,this._docOrFields,this._inclusive);return new eo(e.firestore,e.converter,(r=t,new Wd((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function C8(n,e,t,i){if(t[0]=(0,W.m9)(t[0]),t[0]instanceof dC)return function(r,o,c,p,_){if(!p)throw new Je(Pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const E=[];for(const T of mm(r))if(T.field.isKeyField())E.push(pm(o,p.key));else{const R=p.data.field(T.field);if(PF(R))throw new Je(Pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const F=T.field.canonicalString();throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}E.push(R)}return new Hf(E,_)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Dm(n.firestore);return function(o,c,p,_,E,T){const R=o.explicitOrderBy;if(E.length>R.length)throw new Je(Pe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let G=0;G<E.length;G++){const K=E[G];if(R[G].field.isKeyField()){if("string"!=typeof K)throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof K}`);if(!jF(o)&&-1!==K.indexOf("/"))throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${K}' contains a slash.`);const ue=o.path.child(Wn.fromString(K));if(!vt.isDocumentKey(ue))throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const we=new vt(ue);F.push(pm(c,we))}else{const ue=y8(p,_,K);F.push(ue)}}return new Hf(F,T)}(n._query,n.firestore._databaseId,r,e,t,i)}}function I8(n,e,t){if("string"==typeof(t=(0,W.m9)(t))){if(""===t)throw new Je(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jF(e)&&-1!==t.indexOf("/"))throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Wn.fromString(t));if(!vt.isDocumentKey(i))throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return pm(n,new vt(i))}if(t instanceof ji)return pm(n,t._key);throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${OA(t)}.`)}function T8(n,e){if(!Array.isArray(n)||0===n.length)throw new Je(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Je(Pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function S8(n,e){if(e.isInequality()){const i=dA(n),r=e.field;if(null!==i&&!i.isEqual(r))throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const o=BF(n);null!==o&&D8(0,r,o)}const t=function(i,r){for(const o of i)for(const c of o.getFlattenedFilters())if(r.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Je(Pe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function D8(n,e,t){if(!t.isEqual(e))throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class O2{convertValue(e,t="none"){switch(fm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Lt()}}convertObject(e,t){const i={};return dm(e.fields,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertGeoPoint(e){return new BA(Dr(e.latitude),Dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=R5(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(FE(e));default:return null}}convertTimestamp(e){const t=Vf(e);return new Ji(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Wn.fromString(e);Kt(F$(i));const r=new Uf(i.get(1),i.get(3)),o=new vt(i.popFirst(5));return r.isEqual(t)||Br(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function KA(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class qie extends O2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ji(this.firestore,null,t)}}class Mm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xd extends dC{constructor(e,t,i,r,o,c){super(e,t,i,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(qA("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class pC extends Xd{data(e={}){return super.data(e)}}class Yf{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Mm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new pC(this._firestore,this._userDataWriter,i.key,i,new Mm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Je(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new pC(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Mm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const p=new pC(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Mm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let _=-1,E=-1;return 0!==c.type&&(_=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),1!==c.type&&(o=o.add(c.doc),E=o.indexOf(c.doc.key)),{type:Zie(c.type),doc:p,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Zie(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lt()}}function M8(n,e){return n instanceof Xd&&e instanceof Xd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Yf&&e instanceof Yf&&n._firestore===e._firestore&&y2(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Qf extends O2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ji(this.firestore,null,t)}}function x8(n,e,t){n=jn(n,ji);const i=jn(n.firestore,Hi),r=KA(n.converter,e,t);return zv(i,[HA(Dm(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Xi.none())])}function k8(n,e,t,...i){n=jn(n,ji);const r=jn(n.firestore,Hi),o=Dm(r);let c;return c="string"==typeof(e=(0,W.m9)(e))||e instanceof Jd?x2(o,"updateDoc",n._key,e,t,i):M2(o,"updateDoc",n._key,e),zv(r,[c.toMutation(n._key,Xi.exists(!0))])}function R8(n,...e){var t,i,r;n=(0,W.m9)(n);let o={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||D2(e[c])||(o=e[c],c++);const p={includeMetadataChanges:o.includeMetadataChanges};if(D2(e[c])){const R=e[c];e[c]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[c+1]=null===(i=R.error)||void 0===i?void 0:i.bind(R),e[c+2]=null===(r=R.complete)||void 0===r?void 0:r.bind(R)}let _,E,T;if(n instanceof ji)E=jn(n.firestore,Hi),T=Sv(n._key.path),_={next:R=>{e[c]&&e[c](F2(E,n,R))},error:e[c+1],complete:e[c+2]};else{const R=jn(n,eo);E=jn(R.firestore,Hi),T=R._query;const F=new Qf(E);_={next:G=>{e[c]&&e[c](new Yf(E,F,R,G))},error:e[c+1],complete:e[c+2]},E8(n._query)}return function(R,F,G,K){const ue=new LA(K),we=new GL(F,ue,G);return R.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return VL(yield qv(R),we)})),()=>{ue.bc(),R.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return jL(yield qv(R),we)}))}}(Hr(E),T,p,_)}function zv(n,e){return function(t,i){const r=new Es;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function jne(n,e,t){return KL.apply(this,arguments)}(yield T2(t),i,r)})),r.promise}(Hr(n),e)}function F2(n,e,t){const i=t.docs.get(e._key),r=new Qf(n);return new Xd(n,r,e._key,i,new Mm(t.hasPendingWrites,t.fromCache),e.converter)}const nre={maxAttempts:5};class P8{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dm(e)}set(e,t,i){this._verifyNotCommitted();const r=Jf(e,this._firestore),o=KA(r.converter,t,i),c=HA(this._dataReader,"WriteBatch.set",r._key,o,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,Xi.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const o=Jf(e,this._firestore);let c;return c="string"==typeof(t=(0,W.m9)(t))||t instanceof Jd?x2(this._dataReader,"WriteBatch.update",o._key,t,i,r):M2(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(c.toMutation(o._key,Xi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Jf(e,this._firestore);return this._mutations=this._mutations.concat(new xv(t._key,Xi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Je(Pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jf(n,e){if((n=(0,W.m9)(n)).firestore!==e)throw new Je(Pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ire extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dm(e)}get(e){const t=Jf(e,this._firestore),i=new qie(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return Lt();const o=r[0];if(o.isFoundDocument())return new dC(this._firestore,i,o.key,o,t.converter);if(o.isNoDocument())return new dC(this._firestore,i,t._key,null,t.converter);throw Lt()})}set(e,t,i){const r=Jf(e,this._firestore),o=KA(r.converter,t,i),c=HA(this._dataReader,"Transaction.set",r._key,o,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(e,t,i,...r){const o=Jf(e,this._firestore);let c;return c="string"==typeof(t=(0,W.m9)(t))||t instanceof Jd?x2(this._dataReader,"Transaction.update",o._key,t,i,r):M2(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,c),this}delete(e){const t=Jf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Jf(e,this._firestore),i=new Qf(this._firestore);return super.get(e).then(r=>new Xd(this._firestore,i,t._key,r._document,new Mm(!1,!1),t.converter))}}function Xf(...n){return new Rie("arrayUnion",n)}function eh(...n){return new Pie("arrayRemove",n)}!function(n,e=!0){wv=Jr.SDK_VERSION,(0,Jr._registerComponent)(new mo.wA("firestore",(t,{instanceIdentifier:i,options:r})=>{const o=t.getProvider("app").getImmediate(),c=new Hi(new yee(t.getProvider("auth-internal")),new bee(t.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Je(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uf(p.options.projectId,_)}(o,i),o);return r=Object.assign({useFetchStreams:e},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),(0,Jr.registerVersion)(v5,"3.8.3",n),(0,Jr.registerVersion)(v5,"3.8.3","esm2017")}();function L2(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Je("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function O8(){if(typeof Uint8Array>"u")throw new Je("unimplemented","Uint8Arrays are not available in this environment.")}function F8(){if(!function kee(){return typeof atob<"u"}())throw new Je("unimplemented","Blobs are unavailable in Firestore in this environment.")}class gC{constructor(e){this._delegate=e}static fromBase64String(e){return F8(),new gC(Lc.fromBase64String(e))}static fromUint8Array(e){return O8(),new gC(Lc.fromUint8Array(e))}toBase64(){return F8(),this._delegate.toBase64()}toUint8Array(){return O8(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function U2(n){return function cre(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class dre{enableIndexedDbPersistence(e,t){return function bie(n,e){p8(n=jn(n,Hi));const t=Hr(n),i=n._freezeSettings(),r=new m2;return f8(t,r,new KG(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Eie(n){p8(n=jn(n,Hi));const e=Hr(n),t=n._freezeSettings(),i=new m2;return f8(e,i,new iie(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Cie(n){if(n._initialized&&!n._terminated)throw new Je(Pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Es;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(i){if(!Cu.C())return Promise.resolve();const r=i+"main";yield Cu.delete(r)}),function(i){return t.apply(this,arguments)})(uL(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class L8{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Uf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&lm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function n8(n,e,t,i={}){var r;const o=(n=jn(n,uC))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&lm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let c,p;if("string"==typeof i.mockUserToken)c=i.mockUserToken,p=Ls.MOCK_USER;else{c=(0,W.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new Je(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ls(_)}n._authCredentials=new _ee(new w5(c,p))}}(this._delegate,e,t,i)}enableNetwork(){return function Tie(n){return function die(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield l8(n),t=yield I2(n);return e.setNetworkEnabled(!0),function(i){const r=Et(i);return r._u.delete(0),aC(r)}(t)}))}(Hr(n=jn(n,Hi)))}(this._delegate)}disableNetwork(){return function Sie(n){return function hie(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield l8(n),t=yield I2(n);return e.setNetworkEnabled(!1),(i=(0,Ce.Z)(function*(r){const o=Et(r);o._u.add(0),yield Uv(o),o.gu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(Hr(n=jn(n,Hi)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,YG("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Iie(n){return function(e){const t=new Es;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function qne(n,e){return e2.apply(this,arguments)}(yield T2(e),t)})),t.promise}(Hr(n=jn(n,Hi)))}(this._delegate)}onSnapshotsInSync(e){return function tre(n,e){return function gie(n,e){const t=new LA(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return i=yield qv(n),r=t,Et(i).Ru.add(r),void r.next();var i,r})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return i=yield qv(n),r=t,void Et(i).Ru.delete(r);var i,r}))}}(Hr(n=jn(n,Hi)),D2(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Je("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Wv(this,i8(this._delegate,e))}catch(t){throw Ho(t,"collection()","Firestore.collection()")}}doc(e){try{return new Rl(this,FA(this._delegate,e))}catch(t){throw Ho(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $o(this,function rie(n,e){if(n=jn(n,uC),_2("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Je(Pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new eo(n,null,(t=e,new Wd(Wn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ho(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function rre(n,e,t){n=jn(n,Hi);const i=Object.assign(Object.assign({},nre),t);return function(r){if(r.maxAttempts<1)throw new Je(Pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,o,c){const p=new Es;return r.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const _=yield function u8(n){return UA(n).then(e=>e.datastore)}(r);new uie(r.asyncQueue,_,c,o,p).run()})),p.promise}(Hr(n),r=>e(new ire(n,r)),i)}(this._delegate,t=>e(new U8(this,t)))}batch(){return Hr(this._delegate),new V8(new P8(this._delegate,e=>zv(this._delegate,e)))}loadBundle(e){return function Die(n,e){const t=Hr(n=jn(n,Hi)),i=new vie;return function mie(n,e,t,i){const r=function(o,c){let p;return p="string"==typeof o?(new TextEncoder).encode(o):o,_=function(_,E){if(_ instanceof Uint8Array)return s8(_,E);if(_ instanceof ArrayBuffer)return s8(new Uint8Array(_),E);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new sie(_,c);var _}(t,oC(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function nie(n,e,t){const i=Et(n);var r;(r=(0,Ce.Z)(function*(o,c,p){try{const _=yield c.getMetadata();if(yield function(F,G){const K=Et(F),ue=jr(G.createTime);return K.persistence.runTransaction("hasNewerBundle","readonly",we=>K.Ns.getBundleMetadata(we,G.id)).then(we=>!!we&&we.createTime.compareTo(ue)>=0)}(o.localStore,_))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(F=_).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);p._updateProgress(VG(_));const E=new One(_,o.localStore,c.yt);let T=yield c.mc();for(;T;){const F=yield E.Fu(T);F&&p._updateProgress(F),T=yield c.mc()}const R=yield E.complete();return yield Qd(o,R.Lu,void 0),yield function(F,G){const K=Et(F);return K.persistence.runTransaction("Save bundle","readwrite",ue=>K.Ns.saveBundleMetadata(ue,G))}(o.localStore,_),p._completeWith(R.progress),Promise.resolve(R.Bu)}catch(_){return lm("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var F}),function(o,c,p){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield T2(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function Aie(n,e){return function _ie(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,i){const r=Et(t);return r.persistence.runTransaction("Get named query","readonly",o=>r.Ns.getNamedQuery(o,i))}(yield VA(n),e)}))}(Hr(n=jn(n,Hi)),e).then(t=>t?new eo(n,null,t.query):null)}(this._delegate,e).then(t=>t?new $o(this,t):null)}}class YA extends O2{constructor(e){super(),this.firestore=e}convertBytes(e){return new gC(new Lc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Rl.forKey(t,this.firestore,null)}}class U8{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new YA(e)}get(e){const t=km(e);return this._delegate.get(t).then(i=>new mC(this._firestore,new Xd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=km(e);return i?(L2("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=km(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=km(e);return this._delegate.delete(t),this}}class V8{constructor(e){this._delegate=e}set(e,t,i){const r=km(e);return i?(L2("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=km(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=km(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class xm{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new pC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _C(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=xm.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(t);return o||(o=new xm(e,new YA(e),t),r.set(t,o)),o}}xm.INSTANCES=new WeakMap;class Rl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YA(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Rl(t,new ji(t._delegate,i,new vt(e)))}static forKey(e,t,i){return new Rl(t,new ji(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Wv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Wv(this.firestore,i8(this._delegate,e))}catch(t){throw Ho(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,W.m9)(e))instanceof ji&&r8(this._delegate,e)}set(e,t){t=L2("DocumentReference.set",t);try{return t?x8(this._delegate,e,t):x8(this._delegate,e)}catch(i){throw Ho(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?k8(this._delegate,e):k8(this._delegate,e,t,...i)}catch(r){throw Ho(r,"updateDoc()","DocumentReference.update()")}}delete(){return function Xie(n){return zv(jn(n.firestore,Hi),[new xv(n._key,Xi.none())])}(this._delegate)}onSnapshot(...e){const t=B8(e),i=j8(e,r=>new mC(this.firestore,new Xd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return R8(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function Wie(n){n=jn(n,ji);const e=jn(n.firestore,Hi),t=Hr(e),i=new Qf(e);return function fie(n,e){const t=new Es;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(i=(0,Ce.Z)(function*(r,o,c){try{const p=yield function(_,E){const T=Et(_);return T.persistence.runTransaction("read document","readonly",R=>T.localDocuments.getDocument(R,E))}(r,o);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Je(Pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=jv(p,`Failed to get document '${o} from cache`);c.reject(_)}}),function(r,o,c){return i.apply(this,arguments)})(yield VA(n),e,t);var i})),t.promise}(t,n._key).then(r=>new Xd(e,i,n._key,r,new Mm(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Kie(n){n=jn(n,ji);const e=jn(n.firestore,Hi);return c8(Hr(e),n._key,{source:"server"}).then(t=>F2(e,n,t))}(this._delegate):function zie(n){n=jn(n,ji);const e=jn(n.firestore,Hi);return c8(Hr(e),n._key).then(t=>F2(e,n,t))}(this._delegate),t.then(i=>new mC(this.firestore,new Xd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Rl(this.firestore,this._delegate.withConverter(e?xm.getInstance(this.firestore,e):null))}}function Ho(n,e,t){return n.message=n.message.replace(e,t),n}function B8(n){for(const e of n)if("object"==typeof e&&!U2(e))return e;return{}}function j8(n,e){var t,i;let r;return r=U2(n[0])?n[0]:U2(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(e(o))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class mC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Rl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return M8(this._delegate,e._delegate)}}class _C extends mC{data(e){const t=this._delegate.data(e);return function gee(n,e){n||Lt()}(void 0!==t),t}}class $o{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YA(e)}where(e,t,i){try{return new $o(this.firestore,Kf(this._delegate,function Lie(n,e,t){const i=e,r=qA("where",n);return fC._create(r,i,t)}(e,t,i)))}catch(r){throw Ho(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new $o(this.firestore,Kf(this._delegate,function Uie(n,e="asc"){const t=e,i=qA("orderBy",n);return N2._create(i,t)}(e,t)))}catch(i){throw Ho(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $o(this.firestore,Kf(this._delegate,function Vie(n){return XG("limit",n),ZA._create("limit",n,"F")}(e)))}catch(t){throw Ho(t,"limit()","Query.limit()")}}limitToLast(e){try{return new $o(this.firestore,Kf(this._delegate,function Bie(n){return XG("limitToLast",n),ZA._create("limitToLast",n,"L")}(e)))}catch(t){throw Ho(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $o(this.firestore,Kf(this._delegate,function jie(...n){return zA._create("startAt",n,!0)}(...e)))}catch(t){throw Ho(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $o(this.firestore,Kf(this._delegate,function Hie(...n){return zA._create("startAfter",n,!1)}(...e)))}catch(t){throw Ho(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $o(this.firestore,Kf(this._delegate,function $ie(...n){return WA._create("endBefore",n,!1)}(...e)))}catch(t){throw Ho(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $o(this.firestore,Kf(this._delegate,function Gie(...n){return WA._create("endAt",n,!0)}(...e)))}catch(t){throw Ho(t,"endAt()","Query.endAt()")}}isEqual(e){return y2(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Qie(n){n=jn(n,eo);const e=jn(n.firestore,Hi),t=Hr(e),i=new Qf(e);return function pie(n,e){const t=new Es;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(i=(0,Ce.Z)(function*(r,o,c){try{const p=yield MA(r,o,!0),_=new HG(o,p.Hi),E=_.Wu(p.documents),T=_.applyChanges(E,!1);c.resolve(T.snapshot)}catch(p){const _=jv(p,`Failed to execute query '${o} against cache`);c.reject(_)}}),function(r,o,c){return i.apply(this,arguments)})(yield VA(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Yf(e,i,n,r))}(this._delegate):"server"===e?.source?function Jie(n){n=jn(n,eo);const e=jn(n.firestore,Hi),t=Hr(e),i=new Qf(e);return d8(t,n._query,{source:"server"}).then(r=>new Yf(e,i,n,r))}(this._delegate):function Yie(n){n=jn(n,eo);const e=jn(n.firestore,Hi),t=Hr(e),i=new Qf(e);return E8(n._query),d8(t,n._query).then(r=>new Yf(e,i,n,r))}(this._delegate),t.then(i=>new V2(this.firestore,new Yf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=B8(e),i=j8(e,r=>new V2(this.firestore,new Yf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return R8(this._delegate,t,i)}withConverter(e){return new $o(this.firestore,this._delegate.withConverter(e?xm.getInstance(this.firestore,e):null))}}class fre{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _C(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class V2{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new $o(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _C(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new fre(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new _C(this._firestore,i))})}isEqual(e){return M8(this._delegate,e._delegate)}}class Wv extends $o{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Rl(this.firestore,e):null}doc(e){try{return new Rl(this.firestore,void 0===e?FA(this._delegate):FA(this._delegate,e))}catch(t){throw Ho(t,"doc()","CollectionReference.doc()")}}add(e){return function ere(n,e){const t=jn(n.firestore,Hi),i=FA(n),r=KA(n.converter,e);return zv(t,[HA(Dm(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Xi.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Rl(this.firestore,t))}isEqual(e){return r8(this._delegate,e._delegate)}withConverter(e){return new Wv(this.firestore,this._delegate.withConverter(e?xm.getInstance(this.firestore,e):null))}}function km(n){return jn(n,ji)}class B2{constructor(...e){this._delegate=new Jd(...e)}static documentId(){return new B2(Sr.keyField().canonicalString())}isEqual(e){return(e=(0,W.m9)(e))instanceof Jd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Rm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ore(){return new A2("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Rm(e)}static delete(){const e=function sre(){return new cC("deleteField")}();return e._methodName="FieldValue.delete",new Rm(e)}static arrayUnion(...e){const t=Xf(...e);return t._methodName="FieldValue.arrayUnion",new Rm(t)}static arrayRemove(...e){const t=eh(...e);return t._methodName="FieldValue.arrayRemove",new Rm(t)}static increment(e){const t=function are(n){return new Nie("increment",n)}(e);return t._methodName="FieldValue.increment",new Rm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const pre={Firestore:L8,GeoPoint:BA,Timestamp:Ji,Blob:gC,Transaction:U8,WriteBatch:V8,DocumentReference:Rl,DocumentSnapshot:mC,Query:$o,QueryDocumentSnapshot:_C,QuerySnapshot:V2,CollectionReference:Wv,FieldPath:B2,FieldValue:Rm,setLogLevel:function hre(n){!function pee(n){Of.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function H8(n,e){return function _re(n,e=Ry.z){return new $e.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function j2(n,e){return H8(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function QA(n,e){return j2(n,e).pipe(Ng(void 0),BO(),(0,pt.U)(([t,i])=>{const r=i.payload.docChanges(),o=r.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,p)=>{const _=r.find(T=>T.doc.ref.isEqual(c.ref)),E=t?.payload.docs.find(T=>T.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&E&&JSON.stringify(E.metadata)===JSON.stringify(c.metadata)||o.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),o}))}function $8(n,e,t){return QA(n,t).pipe(Ic((i,r)=>function vre(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function wre(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return H2(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return H2(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return H2(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(o=>o.payload),e),[]),i4(),(0,pt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function H2(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function G8(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function mre(n){(function gre(n,e){n.INTERNAL.registerComponent(new mo.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},pre)))})(n,(e,t)=>new L8(e,t,new dre)),n.registerVersion("@firebase/firestore-compat","0.3.3")}(DO.Z);class q8{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=QA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Ng(void 0),BO(),Rs(([i,r])=>r.length>0||!i),(0,pt.U)(([i,r])=>r),kn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ic((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=G8(e);return $8(this.query,t,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(e={}){return j2(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),kn.iC)}get(e){return(0,le.D)(this.query.get(e)).pipe(kn.iC)}add(e){return this.ref.add(e)}doc(e){return new Z8(this.ref.doc(e),this.afs)}}class Z8{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:o}=K8(i,t);return new q8(r,o,this.afs)}snapshotChanges(){return function yre(n,e){return H8(n,e).pipe(Ng(void 0),BO(),(0,pt.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,le.D)(this.ref.get(e)).pipe(kn.iC)}}class bre{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?QA(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),Rs(t=>t.length>0),kn.iC):QA(this.query,this.afs.schedulers.outsideAngular).pipe(kn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ic((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=G8(e);return $8(this.query,t,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(e={}){return j2(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),kn.iC)}get(e){return(0,le.D)(this.query.get(e)).pipe(kn.iC)}}const z8=new u.OlP("angularfire2.enableFirestorePersistence"),W8=new u.OlP("angularfire2.firestore.persistenceSettings"),Ere=new u.OlP("angularfire2.firestore.settings"),Cre=new u.OlP("angularfire2.firestore.use-emulator");function K8(n,e=(t=>t)){return{query:e(n),ref:n}}let Is=(()=>{class n{constructor(t,i,r,o,c,p,_,E,T,R,F,G,K,ue,we,Ke,ut){this.schedulers=_;const ct=(0,N.on)(t,p,i),ht=T;R&&GT(ct,p,F,K,ue,we,G,Ke),[this.firestore,this.persistenceEnabled$]=(0,N.cc)(`${ct.name}.firestore`,"AngularFirestore",ct.name,()=>{const Pt=p.runOutsideAngular(()=>ct.firestore());if(o&&Pt.settings(o),ht&&Pt.useEmulator(...ht),r&&!Ao(c)){const Nt=()=>{try{return(0,le.D)(Pt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(bn){return typeof console<"u"&&console.warn(bn),ae(!1)}};return[Pt,p.runOutsideAngular(Nt)]}return[Pt,ae(!1)]},[o,ht,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:c}=K8(r,i),p=this.schedulers.ngZone.run(()=>o);return new q8(p,c,this)}collectionGroup(t,i){const r=i||(c=>c),o=this.firestore.collectionGroup(t);return new bre(r(o),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new Z8(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(N.Dh),u.LFG(N.xv,8),u.LFG(z8,8),u.LFG(Ere,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(kn.HU),u.LFG(W8,8),u.LFG(Cre,8),u.LFG(Cl,8),u.LFG(Ew,8),u.LFG(jT,8),u.LFG(HT,8),u.LFG(cg,8),u.LFG(dg,8),u.LFG($T,8),u.LFG(ug,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ire=(()=>{class n{constructor(){Mt.Z.registerVersion("angularfire",kn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:z8,useValue:!0},{provide:W8,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Is]}),n})();const Y8="@firebase/database";let $2="";function J8(n){$2=n}class Dre{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,W.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,W.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Are{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,W.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const X8=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Dre(e)}}catch{}return new Are},Pm=X8("localStorage"),G2=X8("sessionStorage"),Kv=new Po.Yd("@firebase/database"),eq=function(){let n=1;return function(){return n++}}(),tq=function(n){const e=(0,W.dS)(n),t=new W.gQ;t.update(e);const i=t.digest();return W.US.encodeByteArray(i)},yC=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=yC.apply(null,i):e+="object"==typeof i?(0,W.Wl)(i):i,e+=" "}return e};let Nm=null,nq=!0;const iq=function(n,e){(0,W.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Kv.logLevel=Po.in.VERBOSE,Nm=Kv.log.bind(Kv),e&&G2.set("logging_enabled",!0)):"function"==typeof n?Nm=n:(Nm=null,G2.remove("logging_enabled"))},Bs=function(...n){if(!0===nq&&(nq=!1,null===Nm&&!0===G2.get("logging_enabled")&&iq(!0)),Nm){const e=yC.apply(null,n);Nm(e)}},vC=function(n){return function(...e){Bs(n,...e)}},q2=function(...n){const e="FIREBASE INTERNAL ERROR: "+yC(...n);Kv.error(e)},Uc=function(...n){const e=`FIREBASE FATAL ERROR: ${yC(...n)}`;throw Kv.error(e),new Error(e)},Eo=function(...n){const e="FIREBASE WARNING: "+yC(...n);Kv.warn(e)},JA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ep="[MIN_NAME]",th="[MAX_NAME]",Om=function(n,e){if(n===e)return 0;if(n===ep||e===th)return-1;if(e===ep||n===th)return 1;{const t=oq(n),i=oq(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},kre=function(n,e){return n===e?0:n<e?-1:1},wC=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,W.Wl)(e))},Z2=function(n){if("object"!=typeof n||null===n)return(0,W.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,W.Wl)(e[i]),t+=":",t+=Z2(n[e[i]]);return t+="}",t},rq=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function js(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const sq=function(n){(0,W.hu)(!JA(n),"Invalid JSON number");const i=1023;let r,o,c,p,_;0===n?(o=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=p+i,c=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(o=0,c=Math.round(n/Math.pow(2,-1074))));const E=[];for(_=52;_;_-=1)E.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)E.push(o%2?1:0),o=Math.floor(o/2);E.push(r?1:0),E.reverse();const T=E.join("");let R="";for(_=0;_<64;_+=8){let F=parseInt(T.substr(_,8),2).toString(16);1===F.length&&(F="0"+F),R+=F}return R.toLowerCase()},Ore=new RegExp("^-?(0*)\\d{1,10}$"),oq=function(n){if(Ore.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Yv=function(n){try{n()}catch(e){setTimeout(()=>{throw Eo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Ure=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},bC=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Vre{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Eo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Bre{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Bs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Eo(e)}}let EC=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const dq=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pq="websocket",gq="long_polling";class W2{constructor(e,t,i,r,o=!1,c="",p=!1,_=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Pm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Pm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function mq(n,e,t){let i;if((0,W.hu)("string"==typeof e,"typeof type must == string"),(0,W.hu)("object"==typeof t,"typeof params must == object"),e===pq)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==gq)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function jre(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return js(t,(o,c)=>{r.push(o+"="+c)}),i+r.join("&")}class Hre{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,W.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,W.p$)(this.counters_)}}const K2={},Y2={};function Q2(n){const e=n.toString();return K2[e]||(K2[e]=new Hre),K2[e]}class Gre{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Yv(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class tp{constructor(e,t,i,r,o,c,p){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vC(e),this.stats_=Q2(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),mq(t,gq,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Gre(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,W.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new J2((...o)=>{const[c,p,_,E,T]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=p,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[c,p]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&dq.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){tp.forceAllow_=!0}static forceDisallow(){tp.forceDisallow_=!0}static isAvailable(){return!((0,W.Yr)()||!tp.forceAllow_&&(tp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,W.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,W.h$)(t),r=rq(i,1840);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,W.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,W.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class J2{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,W.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=eq(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=J2.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){Bs("frame writing exception"),p.stack&&Bs(p.stack),Bs(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Bs("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,W.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Bs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let eM=null;typeof MozWebSocket<"u"?eM=MozWebSocket:typeof WebSocket<"u"&&(eM=WebSocket);let Qv=(()=>{class n{constructor(t,i,r,o,c,p,_){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vC(this.connId),this.stats_=Q2(i),this.connURL=n.connectionURL_(i,p,_,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,o,c){const p={v:"5"};return!(0,W.Yr)()&&typeof location<"u"&&location.hostname&&dq.test(location.hostname)&&(p.r="f"),i&&(p.s=i),r&&(p.ls=r),o&&(p.ac=o),c&&(p.p=c),mq(t,pq,p)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Pm.set("previous_websocket_failure",!0);try{let r;if((0,W.Yr)()){r={headers:{"User-Agent":`Firebase/5/${$2}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,p=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;p&&(r.proxy={origin:p})}this.mySock=new eM(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==eM&&!n.forceDisallow_}static previouslyFailed(){return Pm.isInMemoryStorage||!0===Pm.get("previous_websocket_failure")}markConnectionHealthy(){Pm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,W.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,W.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,W.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=rq(i,16384);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Cq=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[tp,Qv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=Qv&&Qv.isAvailable();let r=i&&!Qv.previouslyFailed();if(t.webSocketOnly&&(i||Eo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Qv];else{const o=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class xq{constructor(e,t,i,r,o,c,p,_,E,T){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=_,this.onKill_=E,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vC("c:"+this.id+":"),this.transportManager_=new Cq(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=bC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=wC("t",e),i=wC("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=wC("t",e),i=wC("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=wC("t",e);if("d"in e){const i=e.d;if("h"===t){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?q2("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):q2("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&Eo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),bC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):bC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Pm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class kq{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class Rq{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,W.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===t&&(!i||i===r[o].context))return void r.splice(o,1)}validateEventType_(e){(0,W.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class tM extends Rq{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,W.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new tM}getInitialEvent(e){return(0,W.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Pq=32,Nq=768;class ci{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ti(){return new ci("")}function An(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function np(n){return n.pieces_.length-n.pieceNum_}function Mi(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ci(n.pieces_,e)}function eU(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function CC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Oq(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ci(e,0)}function er(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof ci)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new ci(t,0)}function Mn(n){return n.pieceNum_>=n.pieces_.length}function Go(n,e){const t=An(n),i=An(e);if(null===t)return e;if(t===i)return Go(Mi(n),Mi(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function hse(n,e){const t=CC(n,0),i=CC(e,0);for(let r=0;r<t.length&&r<i.length;r++){const o=Om(t[r],i[r]);if(0!==o)return o}return t.length===i.length?0:t.length<i.length?-1:1}function tU(n,e){if(np(n)!==np(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Pl(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(np(n)>np(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class fse{constructor(e,t){this.errorPrefix_=t,this.parts_=CC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,W.ug)(this.parts_[i]);Fq(this)}}function Fq(n){if(n.byteLength_>Nq)throw new Error(n.errorPrefix_+"has a key path longer than "+Nq+" bytes ("+n.byteLength_+").");if(n.parts_.length>Pq)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Pq+") or object contains a cycle "+Fm(n))}function Fm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class nU extends Rq{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new nU}getInitialEvent(e){return(0,W.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const IC=1e3;let iM,Lm=(()=>{class n extends kq{constructor(t,i,r,o,c,p,_,E){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=_,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=vC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=IC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,W.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nU.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&tM.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const o=++this.requestNumber_,c={r:o,a:t,b:i};this.log_((0,W.Wl)(c)),(0,W.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[o]=r)}get(t){this.initConnection_();const i=new W.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:p=>{const _=p.d;"ok"===p.s?i.resolve(_):i.reject(_)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,o){this.initConnection_();const c=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+c),this.listens.has(p)||this.listens.set(p,new Map),(0,W.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,W.hu)(!this.listens.get(p).has(c),"listen() called twice for same path/queryId.");const _={onComplete:o,hashFn:i,query:t,tag:r};this.listens.get(p).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);const c={p:r};t.tag&&(c.q=i._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const E=_.d,T=_.s;n.warnOnListenWarnings_(E,i),(this.listens.get(r)&&this.listens.get(r).get(o))===t&&(this.log_("listen response",_),"ok"!==T&&this.removeListen_(r,o),t.onComplete&&t.onComplete(T,E))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,W.r3)(t,"w")){const r=(0,W.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();Eo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,W.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,W.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{const c=o.s,p=o.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),(0,W.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,t._queryObject,i)}sendUnlisten_(t,i,r,o){this.log_("Unlisten on "+t+" for "+i);const c={p:t};o&&(c.q=r,c.t=o),this.sendRequest("n",c)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,o){const c={p:i,d:r};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,p=>{o&&setTimeout(()=>{o(p.s,p.d)},Math.floor(0))})}put(t,i,r,o){this.putInternal("p",t,i,r,o)}merge(t,i,r,o){this.putInternal("m",t,i,r,o)}putInternal(t,i,r,o,c){this.initConnection_();const p={p:i,d:r};void 0!==c&&(p.h=c),this.outstandingPuts_.push({action:t,request:p,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,W.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):q2("Unrecognized action received from server: "+(0,W.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,W.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=IC,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=IC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=IC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let _=!1,E=null;const T=function(){E?E.close():(_=!0,o())};t.realtime_={close:T,sendRequest:function(G){(0,W.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(G)}};const F=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[G,K]=yield Promise.all([t.authTokenProvider_.getToken(F),t.appCheckTokenProvider_.getToken(F)]);_?Bs("getToken() completed but was canceled"):(Bs("getToken() completed. Creating connection."),t.authToken_=G&&G.accessToken,t.appCheckToken_=K&&K.token,E=new xq(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,o,ue=>{Eo(ue+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(G){t.log_("Failed to get token: "+G),_||(t.repoInfo_.nodeAdmin&&Eo(G),T())}}})()}interrupt(t){Bs("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Bs("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,W.xb)(this.interruptReasons_)&&(this.reconnectDelay_=IC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(c=>Z2(c)).join("$"):"default";const o=this.removeListen_(t,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const r=new ci(t).toString();let o;if(this.listens.has(r)){const c=this.listens.get(r);o=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(t,i){Bs("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Bs("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,W.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+$2.replace(/\./g,"-")]=1,(0,W.uI)()?t["framework.cordova"]=1:(0,W.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=tM.getInstance().currentlyOnline();return(0,W.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Rn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Rn(e,t)}}class nM{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Rn(ep,e),r=new Rn(ep,t);return 0!==this.compare(i,r)}minPost(){return Rn.MIN}}class Vq extends nM{static get __EMPTY_NODE(){return iM}static set __EMPTY_NODE(e){iM=e}compare(e,t){return Om(e.name,t.name)}isDefinedOn(e){throw(0,W.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Rn.MIN}maxPost(){return new Rn(th,iM)}makePost(e,t){return(0,W.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Rn(e,iM)}toString(){return".key"}}const Vc=new Vq;class rM{constructor(e,t,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,r&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let rU,Iu=(()=>{class n{constructor(t,i,r,o,c){this.key=t,this.value=i,this.color=r??n.RED,this.left=o??da.EMPTY_NODE,this.right=c??da.EMPTY_NODE}copy(t,i,r,o,c){return new n(t??this.key,i??this.value,r??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this;const c=r(t,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(t,i,r),null):0===c?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return da.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,o;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return da.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class da{constructor(e,t=da.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new da(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Iu.BLACK,null,null))}remove(e){return new da(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Iu.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new rM(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new rM(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new rM(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new rM(this.root_,null,this.comparator_,!0,e)}}function bse(n,e){return Om(n.name,e.name)}function iU(n,e){return Om(n,e)}da.EMPTY_NODE=new class wse{copy(e,t,i,r,o){return this}insert(e,t,i){return new Iu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Bq=function(n){return"number"==typeof n?"number:"+sq(n):"string:"+n},jq=function(n){if(n.isLeafNode()){const e=n.val();(0,W.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,W.r3)(e,".sv"),"Priority must be a string or number.")}else(0,W.hu)(n===rU||n.isEmpty(),"priority of unexpected type.");(0,W.hu)(n===rU||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Hq,$q,Gq,Jv=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,W.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),jq(this.priorityNode_)}static set __childrenNodeConstructor(t){Hq=t}static get __childrenNodeConstructor(){return Hq}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Mn(t)?this:".priority"===An(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=An(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,W.hu)(".priority"!==r||1===np(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mi(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Bq(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?sq(this.value_):this.value_,this.lazyHash_=tq(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,W.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,W.hu)(o>=0,"Unknown leaf type: "+i),(0,W.hu)(c>=0,"Unknown leaf type: "+r),o===c?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Ni=new class Tse extends nM{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),o=i.compareTo(r);return 0===o?Om(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Rn.MIN}maxPost(){return new Rn(th,new Jv("[PRIORITY-POST]",Gq))}makePost(e,t){const i=$q(e);return new Rn(t,new Jv("[PRIORITY-POST]",i))}toString(){return".priority"}},Sse=Math.log(2);class Dse{constructor(e){this.count=parseInt(Math.log(e+1)/Sse,10),this.current_=this.count-1;const r=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const sM=function(n,e,t,i){n.sort(e);const r=function(_,E){const T=E-_;let R,F;if(0===T)return null;if(1===T)return R=n[_],F=t?t(R):R,new Iu(F,R.node,Iu.BLACK,null,null);{const G=parseInt(T/2,10)+_,K=r(_,G),ue=r(G+1,E);return R=n[G],F=t?t(R):R,new Iu(F,R.node,Iu.BLACK,K,ue)}},p=function(_){let E=null,T=null,R=n.length;const F=function(K,ue){const we=R-K,Ke=R;R-=K;const ut=r(we+1,Ke),ct=n[we],ht=t?t(ct):ct;G(new Iu(ht,ct.node,ue,null,ut))},G=function(K){E?(E.left=K,E=K):(T=K,E=K)};for(let K=0;K<_.count;++K){const ue=_.nextBitIsOne(),we=Math.pow(2,_.count-(K+1));ue?F(we,Iu.BLACK):(F(we,Iu.BLACK),F(we,Iu.RED))}return T}(new Dse(n.length));return new da(i||e,p)};let sU;const Xv={};class nh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,W.hu)(Xv&&Ni,"ChildrenNode.ts has not been loaded"),sU=sU||new nh({".priority":Xv},{".priority":Ni}),sU}get(e){const t=(0,W.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof da?t:null}hasIndex(e){return(0,W.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,W.hu)(e!==Vc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=t.getIterator(Rn.Wrap);let p,c=o.getNext();for(;c;)r=r||e.isDefinedOn(c.node),i.push(c),c=o.getNext();p=r?sM(i,e.getCompare()):Xv;const _=e.toString(),E=Object.assign({},this.indexSet_);E[_]=e;const T=Object.assign({},this.indexes_);return T[_]=p,new nh(T,E)}addToIndexes(e,t){const i=(0,W.UI)(this.indexes_,(r,o)=>{const c=(0,W.DV)(this.indexSet_,o);if((0,W.hu)(c,"Missing index implementation for "+o),r===Xv){if(c.isDefinedOn(e.node)){const p=[],_=t.getIterator(Rn.Wrap);let E=_.getNext();for(;E;)E.name!==e.name&&p.push(E),E=_.getNext();return p.push(e),sM(p,c.getCompare())}return Xv}{const p=t.get(e.name);let _=r;return p&&(_=_.remove(new Rn(e.name,p))),_.insert(e,e.node)}});return new nh(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,W.UI)(this.indexes_,r=>{if(r===Xv)return r;{const o=t.get(e.name);return o?r.remove(new Rn(e.name,o)):r}});return new nh(i,this.indexSet_)}}let TC,En=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&jq(this.priorityNode_),this.children_.isEmpty()&&(0,W.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return TC||(TC=new n(new da(iU),null,nh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||TC}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?TC:i}}getChild(t){const i=An(t);return null===i?this:this.getImmediateChild(i).getChild(Mi(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,W.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Rn(t,i);let o,c;i.isEmpty()?(o=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,i),c=this.indexMap_.addToIndexes(r,this.children_));const p=o.isEmpty()?TC:this.priorityNode_;return new n(o,p,c)}}updateChild(t,i){const r=An(t);if(null===r)return i;{(0,W.hu)(".priority"!==An(t)||1===np(t),".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(Mi(t),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,o=0,c=!0;if(this.forEachChild(Ni,(p,_)=>{i[p]=_.val(t),r++,c&&n.INTEGER_REGEXP_.test(p)?o=Math.max(o,Number(p)):c=!1}),!t&&c&&o<2*r){const p=[];for(const _ in i)p[_]=i[_];return p}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Bq(this.getPriority().val())+":"),this.forEachChild(Ni,(i,r)=>{const o=r.hash();""!==o&&(t+=":"+i+":"+o)}),this.lazyHash_=""===t?"":tq(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const o=this.resolveIndex_(r);if(o){const c=o.getPredecessorKey(new Rn(t,i));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Rn(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Rn(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Rn.Wrap);let c=o.peek();for(;null!=c&&i.compare(c,t)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Rn.Wrap);let c=o.peek();for(;null!=c&&i.compare(c,t)>0;)o.getNext(),c=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===SC?-1:0}withIndex(t){if(t===Vc||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Vc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Ni),o=i.getIterator(Ni);let c=r.getNext(),p=o.getNext();for(;c&&p;){if(c.name!==p.name||!c.node.equals(p.node))return!1;c=r.getNext(),p=o.getNext()}return null===c&&null===p}return!1}return!1}}resolveIndex_(t){return t===Vc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const SC=new class Ase extends En{constructor(){super(new da(iU),En.EMPTY_NODE,nh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return En.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Rn,{MIN:{value:new Rn(ep,En.EMPTY_NODE)},MAX:{value:new Rn(th,SC)}}),Vq.__EMPTY_NODE=En.EMPTY_NODE,Jv.__childrenNodeConstructor=En,function Ese(n){rU=n}(SC),function Ise(n){Gq=n}(SC);const Mse=!0;function mr(n,e=null){if(null===n)return En.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,W.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Jv(n,mr(e));if(n instanceof Array||!Mse){let t=En.EMPTY_NODE;return js(n,(i,r)=>{if((0,W.r3)(n,i)&&"."!==i.substring(0,1)){const o=mr(r);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(mr(e))}{const t=[];let i=!1;if(js(n,(c,p)=>{if("."!==c.substring(0,1)){const _=mr(p);_.isEmpty()||(i=i||!_.getPriority().isEmpty(),t.push(new Rn(c,_)))}}),0===t.length)return En.EMPTY_NODE;const o=sM(t,bse,c=>c.name,iU);if(i){const c=sM(t,Ni.getCompare());return new En(o,mr(e),new nh({".priority":c},{".priority":Ni}))}return new En(o,mr(e),nh.Default)}}!function Cse(n){$q=n}(mr);class oU extends nM{constructor(e){super(),this.indexPath_=e,(0,W.hu)(!Mn(e)&&".priority"!==An(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),o=i.compareTo(r);return 0===o?Om(e.name,t.name):o}makePost(e,t){const i=mr(e),r=En.EMPTY_NODE.updateChild(this.indexPath_,i);return new Rn(t,r)}maxPost(){const e=En.EMPTY_NODE.updateChild(this.indexPath_,SC);return new Rn(th,e)}toString(){return CC(this.indexPath_,0).join("/")}}const aU=new class xse extends nM{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?Om(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Rn.MIN}maxPost(){return Rn.MAX}makePost(e,t){const i=mr(e);return new Rn(t,i)}toString(){return".value"}};function qq(n){return{type:"value",snapshotNode:n}}function e0(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function DC(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function AC(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class lU{constructor(e){this.index_=e}updateChild(e,t,i,r,o,c){(0,W.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(r).equals(i.getChild(r))&&p.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?e.hasChild(t)?c.trackChildChange(DC(t,p)):(0,W.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(e0(t,i)):c.trackChildChange(AC(t,i,p))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(Ni,(r,o)=>{t.hasChild(r)||i.trackChildChange(DC(r,o))}),t.isLeafNode()||t.forEachChild(Ni,(r,o)=>{if(e.hasChild(r)){const c=e.getImmediateChild(r);c.equals(o)||i.trackChildChange(AC(r,o,c))}else i.trackChildChange(e0(r,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?En.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class MC{constructor(e){this.indexedFilter_=new lU(e.getIndex()),this.index_=e.getIndex(),this.startPost_=MC.getStartPost_(e),this.endPost_=MC.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,o,c){return this.matches(new Rn(t,i))||(i=En.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,o,c)}updateFullNode(e,t,i){t.isLeafNode()&&(t=En.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(En.EMPTY_NODE);const o=this;return t.forEachChild(Ni,(c,p)=>{o.matches(new Rn(c,p))||(r=r.updateImmediateChild(c,En.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Rse{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new MC(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,o,c){return this.rangedFilter_.matches(new Rn(t,i))||(i=En.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,o,c):this.fullLimitUpdateChild_(e,t,i,o,c)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=En.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;r=En.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){const p=o.getNext();if(this.withinDirectionalStart(p)){if(!this.withinDirectionalEnd(p))break;r=r.updateImmediateChild(p.name,p.node),c++}}}else{let o;r=t.withIndex(this.index_),r=r.updatePriority(En.EMPTY_NODE),o=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let c=0;for(;o.hasNext();){const p=o.getNext();c<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?c++:r=r.updateImmediateChild(p.name,En.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,o){let c;if(this.reverse_){const R=this.index_.getCompare();c=(F,G)=>R(G,F)}else c=this.index_.getCompare();const p=e;(0,W.hu)(p.numChildren()===this.limit_,"");const _=new Rn(t,i),E=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),T=this.rangedFilter_.matches(_);if(p.hasChild(t)){const R=p.getImmediateChild(t);let F=r.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=F&&(F.name===t||p.hasChild(F.name));)F=r.getChildAfterChild(this.index_,F,this.reverse_);const G=null==F?1:c(F,_);if(T&&!i.isEmpty()&&G>=0)return o?.trackChildChange(AC(t,i,R)),p.updateImmediateChild(t,i);{o?.trackChildChange(DC(t,R));const ue=p.updateImmediateChild(t,En.EMPTY_NODE);return null!=F&&this.rangedFilter_.matches(F)?(o?.trackChildChange(e0(F.name,F.node)),ue.updateImmediateChild(F.name,F.node)):ue}}return i.isEmpty()?e:T&&c(E,_)>=0?(null!=o&&(o.trackChildChange(DC(E.name,E.node)),o.trackChildChange(e0(t,i))),p.updateImmediateChild(t,i).updateImmediateChild(E.name,En.EMPTY_NODE)):e}}class oM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ni}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,W.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,W.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ep}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,W.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,W.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:th}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,W.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ni}copy(){const e=new oM;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function uU(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function cU(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function aM(n,e){const t=n.copy();return t.index_=e,t}function Zq(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Ni?t="$priority":n.index_===aU?t="$value":n.index_===Vc?t="$key":((0,W.hu)(n.index_ instanceof oU,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,W.Wl)(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=(0,W.Wl)(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+(0,W.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=(0,W.Wl)(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+(0,W.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function zq(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Ni&&(e.i=n.index_.toString()),e}class lM extends kq{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=vC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,W.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const c=lM.getListenId_(e,i),p={};this.listens_[c]=p;const _=Zq(e._queryParams);this.restRequest_(o+".json",_,(E,T)=>{let R=T;if(404===E&&(R=null,E=null),null===E&&this.onDataUpdate_(o,R,!1,i),(0,W.DV)(this.listens_,c)===p){let F;F=E?401===E?"permission_denied":"rest_error:"+E:"ok",r(F,null)}})}unlisten(e,t){const i=lM.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Zq(e._queryParams),i=e._path.toString(),r=new W.BH;return this.restRequest_(i+".json",t,(o,c)=>{let p=c;404===o&&(p=null,o=null),null===o?(this.onDataUpdate_(i,p,!1,null),r.resolve(p)):r.reject(new Error(p))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(t.auth=r.accessToken),o&&o.token&&(t.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,W.xO)(t);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(i&&4===p.readyState){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let _=null;if(p.status>=200&&p.status<300){try{_=(0,W.cI)(p.responseText)}catch{Eo("Failed to parse JSON response for "+c+": "+p.responseText)}i(null,_)}else 401!==p.status&&404!==p.status&&Eo("Got unsuccessful REST response for "+c+" Status: "+p.status),i(p.status);i=null}},p.open("GET",c,!0),p.send()})}}class Use{constructor(){this.rootNode_=En.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function uM(){return{value:null,children:new Map}}function t0(n,e,t){if(Mn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=An(e);n.children.has(i)||n.children.set(i,uM()),t0(n.children.get(i),e=Mi(e),t)}}function dU(n,e){if(Mn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Ni,(i,r)=>{t0(n,new ci(i),r)}),dU(n,e)}}if(n.children.size>0){const t=An(e);return e=Mi(e),n.children.has(t)&&dU(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function hU(n,e,t){null!==n.value?t(e,n.value):function Vse(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{hU(r,new ci(e.toString()+"/"+i),t)})}class Bse{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&js(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class $se{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Bse(e);const i=1e4+2e4*Math.random();bC(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;js(e,(r,o)=>{o>0&&(0,W.r3)(this.statsToReport_,r)&&(t[r]=o,i=!0)}),i&&this.server_.reportStats(t),bC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Nl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Nl||(Nl={})),Nl))();function gU(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class cM{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Nl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Mn(this.path)){if(null!=this.affectedTree.value)return(0,W.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ci(e));return new cM(ti(),t,this.revert)}}return(0,W.hu)(An(this.path)===e,"operationForChild called for unrelated child."),new cM(Mi(this.path),this.affectedTree,this.revert)}}class xC{constructor(e,t){this.source=e,this.path=t,this.type=Nl.LISTEN_COMPLETE}operationForChild(e){return Mn(this.path)?new xC(this.source,ti()):new xC(this.source,Mi(this.path))}}class Um{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Nl.OVERWRITE}operationForChild(e){return Mn(this.path)?new Um(this.source,ti(),this.snap.getImmediateChild(e)):new Um(this.source,Mi(this.path),this.snap)}}class n0{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Nl.MERGE}operationForChild(e){if(Mn(this.path)){const t=this.children.subtree(new ci(e));return t.isEmpty()?null:t.value?new Um(this.source,ti(),t.value):new n0(this.source,ti(),t)}return(0,W.hu)(An(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n0(this.source,Mi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ip{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Mn(e))return this.isFullyInitialized()&&!this.filtered_;const t=An(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Gse{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function kC(n,e,t,i,r,o){const c=i.filter(p=>p.type===t);c.sort((p,_)=>function zse(n,e,t){if(null==e.childName||null==t.childName)throw(0,W.g5)("Should only compare child_ events.");const i=new Rn(e.childName,e.snapshotNode),r=new Rn(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,p,_)),c.forEach(p=>{const _=function Zse(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,o);r.forEach(E=>{E.respondsTo(p.type)&&e.push(E.createEvent(_,n.query_))})})}function dM(n,e){return{eventCache:n,serverCache:e}}function RC(n,e,t,i){return dM(new ip(e,t,i),n.serverCache)}function Kq(n,e,t,i){return dM(n.eventCache,new ip(e,t,i))}function hM(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Vm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let mU;class Oi{constructor(e,t=(()=>(mU||(mU=new da(kre)),mU))()){this.value=e,this.children=t}static fromObject(e){let t=new Oi(null);return js(e,(i,r)=>{t=t.set(new ci(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ti(),value:this.value};if(Mn(e))return null;{const i=An(e),r=this.children.get(i);if(null!==r){const o=r.findRootMostMatchingPathAndValue(Mi(e),t);return null!=o?{path:er(new ci(i),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Mn(e))return this;{const t=An(e),i=this.children.get(t);return null!==i?i.subtree(Mi(e)):new Oi(null)}}set(e,t){if(Mn(e))return new Oi(t,this.children);{const i=An(e),o=(this.children.get(i)||new Oi(null)).set(Mi(e),t),c=this.children.insert(i,o);return new Oi(this.value,c)}}remove(e){if(Mn(e))return this.children.isEmpty()?new Oi(null):new Oi(null,this.children);{const t=An(e),i=this.children.get(t);if(i){const r=i.remove(Mi(e));let o;return o=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&o.isEmpty()?new Oi(null):new Oi(this.value,o)}return this}}get(e){if(Mn(e))return this.value;{const t=An(e),i=this.children.get(t);return i?i.get(Mi(e)):null}}setTree(e,t){if(Mn(e))return t;{const i=An(e),o=(this.children.get(i)||new Oi(null)).setTree(Mi(e),t);let c;return c=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new Oi(this.value,c)}}fold(e){return this.fold_(ti(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(er(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,ti(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Mn(e))return null;{const o=An(e),c=this.children.get(o);return c?c.findOnPath_(Mi(e),er(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ti(),t)}foreachOnPath_(e,t,i){if(Mn(e))return this;{this.value&&i(t,this.value);const r=An(e),o=this.children.get(r);return o?o.foreachOnPath_(Mi(e),er(t,r),i):new Oi(null)}}foreach(e){this.foreach_(ti(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(er(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Tu{constructor(e){this.writeTree_=e}static empty(){return new Tu(new Oi(null))}}function PC(n,e,t){if(Mn(e))return new Tu(new Oi(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let o=i.value;const c=Go(r,e);return o=o.updateChild(c,t),new Tu(n.writeTree_.set(r,o))}{const r=new Oi(t),o=n.writeTree_.setTree(e,r);return new Tu(o)}}}function _U(n,e,t){let i=n;return js(t,(r,o)=>{i=PC(i,er(e,r),o)}),i}function Yq(n,e){if(Mn(e))return Tu.empty();{const t=n.writeTree_.setTree(e,new Oi(null));return new Tu(t)}}function yU(n,e){return null!=Bm(n,e)}function Bm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Go(t.path,e)):null}function Qq(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ni,(i,r)=>{e.push(new Rn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Rn(i,r.value))}),e}function rp(n,e){if(Mn(e))return n;{const t=Bm(n,e);return new Tu(null!=t?new Oi(t):n.writeTree_.subtree(e))}}function vU(n){return n.writeTree_.isEmpty()}function r0(n,e){return Jq(ti(),n.writeTree_,e)}function Jq(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{".priority"===r?((0,W.hu)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):t=Jq(er(n,r),o,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(er(n,".priority"),i)),t}}function fM(n,e){return iZ(e,n)}function Xse(n,e){if(n.snap)return Pl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Pl(er(n.path,t),e))return!0;return!1}function toe(n){return n.visible}function Xq(n,e,t){let i=Tu.empty();for(let r=0;r<n.length;++r){const o=n[r];if(e(o)){const c=o.path;let p;if(o.snap)Pl(t,c)?(p=Go(t,c),i=PC(i,p,o.snap)):Pl(c,t)&&(p=Go(c,t),i=PC(i,ti(),o.snap.getChild(p)));else{if(!o.children)throw(0,W.g5)("WriteRecord should have .snap or .children");if(Pl(t,c))p=Go(t,c),i=_U(i,p,o.children);else if(Pl(c,t))if(p=Go(c,t),Mn(p))i=_U(i,ti(),o.children);else{const _=(0,W.DV)(o.children,An(p));if(_){const E=_.getChild(Mi(p));i=PC(i,ti(),E)}}}}}return i}function eZ(n,e,t,i,r){if(i||r){const o=rp(n.visibleWrites,e);return!r&&vU(o)?t:r||null!=t||yU(o,ti())?r0(Xq(n.allWrites,function(E){return(E.visible||r)&&(!i||!~i.indexOf(E.writeId))&&(Pl(E.path,e)||Pl(e,E.path))},e),t||En.EMPTY_NODE):null}{const o=Bm(n.visibleWrites,e);if(null!=o)return o;{const c=rp(n.visibleWrites,e);return vU(c)?t:null!=t||yU(c,ti())?r0(c,t||En.EMPTY_NODE):null}}}function pM(n,e,t,i){return eZ(n.writeTree,n.treePath,e,t,i)}function wU(n,e){return function noe(n,e,t){let i=En.EMPTY_NODE;const r=Bm(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ni,(o,c)=>{i=i.updateImmediateChild(o,c)}),i;if(t){const o=rp(n.visibleWrites,e);return t.forEachChild(Ni,(c,p)=>{const _=r0(rp(o,new ci(c)),p);i=i.updateImmediateChild(c,_)}),Qq(o).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return Qq(rp(n.visibleWrites,e)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,e)}function tZ(n,e,t,i){return function ioe(n,e,t,i,r){(0,W.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=er(e,t);if(yU(n.visibleWrites,o))return null;{const c=rp(n.visibleWrites,o);return vU(c)?r.getChild(t):r0(c,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function gM(n,e){return function soe(n,e){return Bm(n.visibleWrites,e)}(n.writeTree,er(n.treePath,e))}function bU(n,e,t){return function roe(n,e,t,i){const r=er(e,t),o=Bm(n.visibleWrites,r);return null!=o?o:i.isCompleteForChild(t)?r0(rp(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function nZ(n,e){return iZ(er(n.treePath,e),n.writeTree)}function iZ(n,e){return{treePath:n,writeTree:e}}class uoe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,W.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,W.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(i,AC(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(i,DC(i,r.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(i,e0(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,W.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,AC(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const rZ=new class coe{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class EU{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new ip(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bU(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Vm(this.viewCache_),o=function loe(n,e,t,i,r,o){return function ooe(n,e,t,i,r,o,c){let p;const _=rp(n.visibleWrites,e),E=Bm(_,ti());if(null!=E)p=E;else{if(null==t)return[];p=r0(_,t)}if(p=p.withIndex(c),p.isEmpty()||p.isLeafNode())return[];{const T=[],R=c.getCompare(),F=o?p.getReverseIteratorFrom(i,c):p.getIteratorFrom(i,c);let G=F.getNext();for(;G&&T.length<r;)0!==R(G,i)&&T.push(G),G=F.getNext();return T}}(n.writeTree,n.treePath,e,t,i,r,o)}(this.writes_,r,t,1,i,e);return 0===o.length?null:o[0]}}function sZ(n,e,t,i,r,o){const c=e.eventCache;if(null!=gM(i,t))return e;{let p,_;if(Mn(t))if((0,W.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=Vm(e),R=wU(i,E instanceof En?E:En.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),R,o)}else{const E=pM(i,Vm(e));p=n.filter.updateFullNode(e.eventCache.getNode(),E,o)}else{const E=An(t);if(".priority"===E){(0,W.hu)(1===np(t),"Can't have a priority with additional path components");const T=c.getNode();_=e.serverCache.getNode();const R=tZ(i,t,T,_);p=null!=R?n.filter.updatePriority(T,R):c.getNode()}else{const T=Mi(t);let R;if(c.isCompleteForChild(E)){_=e.serverCache.getNode();const F=tZ(i,t,c.getNode(),_);R=null!=F?c.getNode().getImmediateChild(E).updateChild(T,F):c.getNode().getImmediateChild(E)}else R=bU(i,E,e.serverCache);p=null!=R?n.filter.updateChild(c.getNode(),E,R,T,r,o):c.getNode()}}return RC(e,p,c.isFullyInitialized()||Mn(t),n.filter.filtersNodes())}}function mM(n,e,t,i,r,o,c,p){const _=e.serverCache;let E;const T=c?n.filter:n.filter.getIndexedFilter();if(Mn(t))E=T.updateFullNode(_.getNode(),i,null);else if(T.filtersNodes()&&!_.isFiltered()){const G=_.getNode().updateChild(t,i);E=T.updateFullNode(_.getNode(),G,null)}else{const G=An(t);if(!_.isCompleteForPath(t)&&np(t)>1)return e;const K=Mi(t),we=_.getNode().getImmediateChild(G).updateChild(K,i);E=".priority"===G?T.updatePriority(_.getNode(),we):T.updateChild(_.getNode(),G,we,K,rZ,null)}const R=Kq(e,E,_.isFullyInitialized()||Mn(t),T.filtersNodes());return sZ(n,R,t,r,new EU(r,R,o),p)}function CU(n,e,t,i,r,o,c){const p=e.eventCache;let _,E;const T=new EU(r,e,o);if(Mn(t))E=n.filter.updateFullNode(e.eventCache.getNode(),i,c),_=RC(e,E,!0,n.filter.filtersNodes());else{const R=An(t);if(".priority"===R)E=n.filter.updatePriority(e.eventCache.getNode(),i),_=RC(e,E,p.isFullyInitialized(),p.isFiltered());else{const F=Mi(t),G=p.getNode().getImmediateChild(R);let K;if(Mn(F))K=i;else{const ue=T.getCompleteChild(R);K=null!=ue?".priority"===eU(F)&&ue.getChild(Oq(F)).isEmpty()?ue:ue.updateChild(F,i):En.EMPTY_NODE}_=G.equals(K)?e:RC(e,n.filter.updateChild(p.getNode(),R,K,F,T,c),p.isFullyInitialized(),n.filter.filtersNodes())}}return _}function oZ(n,e){return n.eventCache.isCompleteForChild(e)}function aZ(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function IU(n,e,t,i,r,o,c,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,_=e;E=Mn(t)?i:new Oi(null).setTree(t,i);const T=e.serverCache.getNode();return E.children.inorderTraversal((R,F)=>{if(T.hasChild(R)){const K=aZ(0,e.serverCache.getNode().getImmediateChild(R),F);_=mM(n,_,new ci(R),K,r,o,c,p)}}),E.children.inorderTraversal((R,F)=>{const G=!e.serverCache.isCompleteForChild(R)&&null===F.value;if(!T.hasChild(R)&&!G){const ue=aZ(0,e.serverCache.getNode().getImmediateChild(R),F);_=mM(n,_,new ci(R),ue,r,o,c,p)}}),_}class voe{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new lU(i.getIndex()),o=function Pse(n){return n.loadsAllData()?new lU(n.getIndex()):n.hasLimit()?new Rse(n):new MC(n)}(i);this.processor_=function doe(n){return{filter:n}}(o);const c=t.serverCache,p=t.eventCache,_=r.updateFullNode(En.EMPTY_NODE,c.getNode(),null),E=o.updateFullNode(En.EMPTY_NODE,p.getNode(),null),T=new ip(_,c.isFullyInitialized(),r.filtersNodes()),R=new ip(E,p.isFullyInitialized(),o.filtersNodes());this.viewCache_=dM(R,T),this.eventGenerator_=new Gse(this.query_)}get query(){return this.query_}}function Eoe(n,e){const t=Vm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Mn(e)&&!t.getImmediateChild(An(e)).isEmpty())?t.getChild(e):null}function lZ(n){return 0===n.eventRegistrations_.length}function uZ(n,e,t){const i=[];if(t){(0,W.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(o=>{const c=o.createCancelEvent(t,r);c&&i.push(c)})}if(e){let r=[];for(let o=0;o<n.eventRegistrations_.length;++o){const c=n.eventRegistrations_[o];if(c.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(o+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function cZ(n,e,t,i){e.type===Nl.MERGE&&null!==e.source.queryId&&((0,W.hu)(Vm(n.viewCache_),"We should always have a full cache before handling merges"),(0,W.hu)(hM(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,o=function foe(n,e,t,i,r){const o=new uoe;let c,p;if(t.type===Nl.OVERWRITE){const E=t;E.source.fromUser?c=CU(n,e,E.path,E.snap,i,r,o):((0,W.hu)(E.source.fromServer,"Unknown source."),p=E.source.tagged||e.serverCache.isFiltered()&&!Mn(E.path),c=mM(n,e,E.path,E.snap,i,r,p,o))}else if(t.type===Nl.MERGE){const E=t;E.source.fromUser?c=function goe(n,e,t,i,r,o,c){let p=e;return i.foreach((_,E)=>{const T=er(t,_);oZ(e,An(T))&&(p=CU(n,p,T,E,r,o,c))}),i.foreach((_,E)=>{const T=er(t,_);oZ(e,An(T))||(p=CU(n,p,T,E,r,o,c))}),p}(n,e,E.path,E.children,i,r,o):((0,W.hu)(E.source.fromServer,"Unknown source."),p=E.source.tagged||e.serverCache.isFiltered(),c=IU(n,e,E.path,E.children,i,r,p,o))}else if(t.type===Nl.ACK_USER_WRITE){const E=t;c=E.revert?function yoe(n,e,t,i,r,o){let c;if(null!=gM(i,t))return e;{const p=new EU(i,e,r),_=e.eventCache.getNode();let E;if(Mn(t)||".priority"===An(t)){let T;if(e.serverCache.isFullyInitialized())T=pM(i,Vm(e));else{const R=e.serverCache.getNode();(0,W.hu)(R instanceof En,"serverChildren would be complete if leaf node"),T=wU(i,R)}E=n.filter.updateFullNode(_,T,o)}else{const T=An(t);let R=bU(i,T,e.serverCache);null==R&&e.serverCache.isCompleteForChild(T)&&(R=_.getImmediateChild(T)),E=null!=R?n.filter.updateChild(_,T,R,Mi(t),p,o):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(_,T,En.EMPTY_NODE,Mi(t),p,o):_,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=pM(i,Vm(e)),c.isLeafNode()&&(E=n.filter.updateFullNode(E,c,o)))}return c=e.serverCache.isFullyInitialized()||null!=gM(i,ti()),RC(e,E,c,n.filter.filtersNodes())}}(n,e,E.path,i,r,o):function moe(n,e,t,i,r,o,c){if(null!=gM(r,t))return e;const p=e.serverCache.isFiltered(),_=e.serverCache;if(null!=i.value){if(Mn(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return mM(n,e,t,_.getNode().getChild(t),r,o,p,c);if(Mn(t)){let E=new Oi(null);return _.getNode().forEachChild(Vc,(T,R)=>{E=E.set(new ci(T),R)}),IU(n,e,t,E,r,o,p,c)}return e}{let E=new Oi(null);return i.foreach((T,R)=>{const F=er(t,T);_.isCompleteForPath(F)&&(E=E.set(T,_.getNode().getChild(F)))}),IU(n,e,t,E,r,o,p,c)}}(n,e,E.path,E.affectedTree,i,r,o)}else{if(t.type!==Nl.LISTEN_COMPLETE)throw(0,W.g5)("Unknown operation type: "+t.type);c=function _oe(n,e,t,i,r){const o=e.serverCache;return sZ(n,Kq(e,o.getNode(),o.isFullyInitialized()||Mn(t),o.isFiltered()),t,i,rZ,r)}(n,e,t.path,i,o)}const _=o.getChanges();return function poe(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=hM(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(qq(hM(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,r,e,t,i);return function hoe(n,e){(0,W.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,W.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,W.hu)(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,dZ(n,o.changes,o.viewCache.eventCache.getNode(),null)}function dZ(n,e,t,i){return function qse(n,e,t,i){const r=[],o=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(function kse(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),kC(n,r,"child_removed",e,i,t),kC(n,r,"child_added",e,i,t),kC(n,r,"child_moved",o,i,t),kC(n,r,"child_changed",e,i,t),kC(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let _M,vM;class hZ{constructor(){this.views=new Map}}function TU(n,e,t,i){const r=e.source.queryId;if(null!==r){const o=n.views.get(r);return(0,W.hu)(null!=o,"SyncTree gave us an op for an invalid query."),cZ(o,e,t,i)}{let o=[];for(const c of n.views.values())o=o.concat(cZ(c,e,t,i));return o}}function fZ(n,e,t,i,r){const c=n.views.get(e._queryIdentifier);if(!c){let p=pM(t,r?i:null),_=!1;p?_=!0:i instanceof En?(p=wU(t,i),_=!1):(p=En.EMPTY_NODE,_=!1);const E=dM(new ip(p,_,!1),new ip(i,r,!1));return new voe(e,E)}return c}function pZ(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function sp(n,e){let t=null;for(const i of n.views.values())t=t||Eoe(i,e);return t}function gZ(n,e){return e._queryParams.loadsAllData()?yM(n):n.views.get(e._queryIdentifier)}function mZ(n,e){return null!=gZ(n,e)}function op(n){return null!=yM(n)}function yM(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Roe=1;class _Z{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Oi(null),this.pendingWriteTree_=function aoe(){return{visibleWrites:Tu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function SU(n,e,t,i,r){return function Kse(n,e,t,i,r){(0,W.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=PC(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?s0(n,new Um({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ap(n,e,t=!1){const i=function Qse(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function Jse(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,W.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,o=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const p=n.allWrites[c];p.visible&&(c>=t&&Xse(p,i.path)?r=!1:Pl(i.path,p.path)&&(o=!0)),c--}return!!r&&(o?(function eoe(n){n.visibleWrites=Xq(n.allWrites,toe,ti()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=Yq(n.visibleWrites,i.path):js(i.children,_=>{n.visibleWrites=Yq(n.visibleWrites,er(i.path,_))}),!0))}(n.pendingWriteTree_,e)){let o=new Oi(null);return null!=i.snap?o=o.set(ti(),!0):js(i.children,c=>{o=o.set(new ci(c),!0)}),s0(n,new cM(i.path,o,t))}return[]}function NC(n,e,t){return s0(n,new Um({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function wM(n,e,t,i,r=!1){const o=e._path,c=n.syncPointTree_.get(o);let p=[];if(c&&("default"===e._queryIdentifier||mZ(c,e))){const _=function Moe(n,e,t,i){const r=e._queryIdentifier,o=[];let c=[];const p=op(n);if("default"===r)for(const[_,E]of n.views.entries())c=c.concat(uZ(E,t,i)),lZ(E)&&(n.views.delete(_),E.query._queryParams.loadsAllData()||o.push(E.query));else{const _=n.views.get(r);_&&(c=c.concat(uZ(_,t,i)),lZ(_)&&(n.views.delete(r),_.query._queryParams.loadsAllData()||o.push(_.query)))}return p&&!op(n)&&o.push(new(function Soe(){return(0,W.hu)(_M,"Reference.ts has not been loaded"),_M}())(e._repo,e._path)),{removed:o,events:c}}(c,e,t,i);(function Doe(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const E=_.removed;if(p=_.events,!r){const T=-1!==E.findIndex(F=>F._queryParams.loadsAllData()),R=n.syncPointTree_.findOnPath(o,(F,G)=>op(G));if(T&&!R){const F=n.syncPointTree_.subtree(o);if(!F.isEmpty()){const G=function Voe(n){return n.fold((e,t,i)=>{if(t&&op(t))return[yM(t)];{let r=[];return t&&(r=pZ(t)),js(i,(o,c)=>{r=r.concat(c)}),r}})}(F);for(let K=0;K<G.length;++K){const ue=G[K],we=ue.query,Ke=bZ(n,ue);n.listenProvider_.startListening(FC(we),OC(n,we),Ke.hashFn,Ke.onComplete)}}}!R&&E.length>0&&!i&&(T?n.listenProvider_.stopListening(FC(e),null):E.forEach(F=>{const G=n.queryToTagMap.get(EM(F));n.listenProvider_.stopListening(FC(F),G)}))}!function Boe(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=EM(i),o=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(o)}}}(n,E)}return p}function yZ(n,e,t,i){const r=AU(n,i);if(null!=r){const o=MU(r),c=o.path,p=o.queryId,_=Go(c,e);return xU(n,c,new Um(gU(p),_,t))}return[]}function DU(n,e,t,i=!1){const r=e._path;let o=null,c=!1;n.syncPointTree_.foreachOnPath(r,(F,G)=>{const K=Go(F,r);o=o||sp(G,K),c=c||op(G)});let _,p=n.syncPointTree_.get(r);p?(c=c||op(p),o=o||sp(p,ti())):(p=new hZ,n.syncPointTree_=n.syncPointTree_.set(r,p)),null!=o?_=!0:(_=!1,o=En.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((G,K)=>{const ue=sp(K,ti());ue&&(o=o.updateImmediateChild(G,ue))}));const E=mZ(p,e);if(!E&&!e._queryParams.loadsAllData()){const F=EM(e);(0,W.hu)(!n.queryToTagMap.has(F),"View does not exist, but we have a tag");const G=function joe(){return Roe++}();n.queryToTagMap.set(F,G),n.tagToQueryMap.set(G,F)}let R=function Aoe(n,e,t,i,r,o){const c=fZ(n,e,i,r,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function Coe(n,e){n.eventRegistrations_.push(e)}(c,t),function Ioe(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ni,(o,c)=>{i.push(e0(o,c))}),t.isFullyInitialized()&&i.push(qq(t.getNode())),dZ(n,i,t.getNode(),e)}(c,t)}(p,e,t,fM(n.pendingWriteTree_,r),o,_);if(!E&&!c&&!i){const F=gZ(p,e);R=R.concat(function Hoe(n,e,t){const i=e._path,r=OC(n,e),o=bZ(n,t),c=n.listenProvider_.startListening(FC(e),r,o.hashFn,o.onComplete),p=n.syncPointTree_.subtree(i);if(r)(0,W.hu)(!op(p.value),"If we're adding a query, it shouldn't be shadowed");else{const _=p.fold((E,T,R)=>{if(!Mn(E)&&T&&op(T))return[yM(T).query];{let F=[];return T&&(F=F.concat(pZ(T).map(G=>G.query))),js(R,(G,K)=>{F=F.concat(K)}),F}});for(let E=0;E<_.length;++E){const T=_[E];n.listenProvider_.stopListening(FC(T),OC(n,T))}}return c}(n,e,F))}return R}function bM(n,e,t){const r=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(c,p)=>{const E=sp(p,Go(c,e));if(E)return E});return eZ(r,e,o,t,!0)}function s0(n,e){return vZ(e,n.syncPointTree_,null,fM(n.pendingWriteTree_,ti()))}function vZ(n,e,t,i){if(Mn(n.path))return wZ(n,e,t,i);{const r=e.get(ti());null==t&&null!=r&&(t=sp(r,ti()));let o=[];const c=An(n.path),p=n.operationForChild(c),_=e.children.get(c);if(_&&p){const E=t?t.getImmediateChild(c):null,T=nZ(i,c);o=o.concat(vZ(p,_,E,T))}return r&&(o=o.concat(TU(r,n,i,t))),o}}function wZ(n,e,t,i){const r=e.get(ti());null==t&&null!=r&&(t=sp(r,ti()));let o=[];return e.children.inorderTraversal((c,p)=>{const _=t?t.getImmediateChild(c):null,E=nZ(i,c),T=n.operationForChild(c);T&&(o=o.concat(wZ(T,p,_,E)))}),r&&(o=o.concat(TU(r,n,i,t))),o}function bZ(n,e){const t=e.query,i=OC(n,t);return{hashFn:()=>(function woe(n){return n.viewCache_.serverCache.getNode()}(e)||En.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function Foe(n,e,t){const i=AU(n,t);if(i){const r=MU(i),o=r.path,c=r.queryId,p=Go(o,e);return xU(n,o,new xC(gU(c),p))}return[]}(n,t._path,i):function Ooe(n,e){return s0(n,new xC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function Nre(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return wM(n,t,null,o)}}}}function OC(n,e){const t=EM(e);return n.queryToTagMap.get(t)}function EM(n){return n._path.toString()+"$"+n._queryIdentifier}function AU(n,e){return n.tagToQueryMap.get(e)}function MU(n){const e=n.indexOf("$");return(0,W.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ci(n.substr(0,e))}}function xU(n,e,t){const i=n.syncPointTree_.get(e);return(0,W.hu)(i,"Missing sync point for query tag that we're tracking"),TU(i,t,fM(n.pendingWriteTree_,e),null)}function FC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function koe(){return(0,W.hu)(vM,"Reference.ts has not been loaded"),vM}())(n._repo,n._path):n}class kU{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new kU(t)}node(){return this.node_}}class RU{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=er(this.path_,e);return new RU(this.syncTree_,t)}node(){return bM(this.syncTree_,this.path_)}}const $oe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},EZ=function(n,e,t){return n&&"object"==typeof n?((0,W.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Goe(n[".sv"],e,t):"object"==typeof n[".sv"]?qoe(n[".sv"],e):void(0,W.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Goe=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,W.hu)(!1,"Unexpected server value: "+n)},qoe=function(n,e,t){n.hasOwnProperty("increment")||(0,W.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,W.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,W.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},CZ=function(n,e,t,i){return NU(e,new RU(t,n),i)},PU=function(n,e,t){return NU(n,new kU(e),t)};function NU(n,e,t){const i=n.getPriority().val(),r=EZ(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const c=n,p=EZ(c.getValue(),e,t);return p!==c.getValue()||r!==c.getPriority().val()?new Jv(p,mr(r)):n}{const c=n;return o=c,r!==c.getPriority().val()&&(o=o.updatePriority(new Jv(r))),c.forEachChild(Ni,(p,_)=>{const E=NU(_,e.getImmediateChild(p),t);E!==_&&(o=o.updateImmediateChild(p,E))}),o}}class OU{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function CM(n,e){let t=e instanceof ci?e:new ci(e),i=n,r=An(t);for(;null!==r;){const o=(0,W.DV)(i.node.children,r)||{children:{},childCount:0};i=new OU(r,i,o),t=Mi(t),r=An(t)}return i}function jm(n){return n.node.value}function FU(n,e){n.node.value=e,LU(n)}function IZ(n){return n.node.childCount>0}function IM(n,e){js(n.node.children,(t,i)=>{e(new OU(t,n,i))})}function TZ(n,e,t,i){t&&!i&&e(n),IM(n,r=>{TZ(r,e,!0,i)}),t&&i&&e(n)}function LC(n){return new ci(null===n.parent?n.name:LC(n.parent)+"/"+n.name)}function LU(n){null!==n.parent&&function Woe(n,e,t){const i=function Zoe(n){return void 0===jm(n)&&!IZ(n)}(t),r=(0,W.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,LU(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,LU(n))}(n.parent,n.name,n)}const Koe=/[\[\].#$\/\u0000-\u001F\u007F]/,Yoe=/[\[\].#$\u0000-\u001F\u007F]/,UU=10485760,TM=function(n){return"string"==typeof n&&0!==n.length&&!Koe.test(n)},SZ=function(n){return"string"==typeof n&&0!==n.length&&!Yoe.test(n)},UC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!JA(n)||n&&"object"==typeof n&&(0,W.r3)(n,".sv")},Bc=function(n,e,t,i){i&&void 0===e||VC((0,W.gK)(n,"value"),e,t)},VC=function(n,e,t){const i=t instanceof ci?new fse(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Fm(i));if("function"==typeof e)throw new Error(n+"contains a function "+Fm(i)+" with contents = "+e.toString());if(JA(e))throw new Error(n+"contains "+e.toString()+" "+Fm(i));if("string"==typeof e&&e.length>UU/3&&(0,W.ug)(e)>UU)throw new Error(n+"contains a string greater than "+UU+" utf8 bytes "+Fm(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,o=!1;if(js(e,(c,p)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(o=!0,!TM(c)))throw new Error(n+" contains an invalid key ("+c+") "+Fm(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function pse(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,W.ug)(e),Fq(n)})(i,c),VC(n,p,i),function gse(n){const e=n.parts_.pop();n.byteLength_-=(0,W.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&o)throw new Error(n+' contains ".value" child '+Fm(i)+" in addition to actual children.")}},DZ=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,W.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];js(e,(c,p)=>{const _=new ci(c);if(VC(r,p,er(t,_)),".priority"===eU(_)&&!UC(p))throw new Error(r+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(_)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const o=CC(i);for(let c=0;c<o.length;c++)if((".priority"!==o[c]||c!==o.length-1)&&!TM(o[c]))throw new Error(n+"contains an invalid key ("+o[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(hse);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&Pl(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,o)},VU=function(n,e,t){if(!t||void 0!==e){if(JA(e))throw new Error((0,W.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!UC(e))throw new Error((0,W.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},BC=function(n,e,t,i){if(!(i&&void 0===t||TM(t)))throw new Error((0,W.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},jC=function(n,e,t,i){if(!(i&&void 0===t||SZ(t)))throw new Error((0,W.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Xoe=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jC(n,e,t,i)},Ol=function(n,e){if(".info"===An(e))throw new Error(n+" failed = Can't modify data under /.info/")},AZ=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!TM(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),SZ(n)}(t))throw new Error((0,W.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class eae{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function SM(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();null!==t&&!tU(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(r)}t&&n.eventLists_.push(t)}function MZ(n,e,t){SM(n,t),xZ(n,i=>tU(i,e))}function Ba(n,e,t){SM(n,t),xZ(n,i=>Pl(i,e)||Pl(e,i))}function xZ(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(tae(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function tae(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Nm&&Bs("event: "+t.toString()),Yv(i)}}}const kZ="repo_interrupt",nae=25;class iae{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new eae,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=uM(),this.transactionQueueTree_=new OU,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function RZ(n){const t=n.infoData_.getNode(new ci(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function HC(n){return $oe({timestamp:RZ(n)})}function PZ(n,e,t,i,r){n.dataUpdateCount++;const o=new ci(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(r)if(i){const _=(0,W.UI)(t,E=>mr(E));c=function Loe(n,e,t,i){const r=AU(n,i);if(r){const o=MU(r),c=o.path,p=o.queryId,_=Go(c,e),E=Oi.fromObject(t);return xU(n,c,new n0(gU(p),_,E))}return[]}(n.serverSyncTree_,o,_,r)}else{const _=mr(t);c=yZ(n.serverSyncTree_,o,_,r)}else if(i){const _=(0,W.UI)(t,E=>mr(E));c=function Noe(n,e,t){const i=Oi.fromObject(t);return s0(n,new n0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,o,_)}else{const _=mr(t);c=NC(n.serverSyncTree_,o,_)}let p=o;c.length>0&&(p=a0(n,o)),Ba(n.eventQueue_,p,c)}function NZ(n,e){BU(n,"connected",e),!1===e&&function lae(n){o0(n,"onDisconnectEvents");const e=HC(n),t=uM();hU(n.onDisconnect_,ti(),(r,o)=>{const c=CZ(r,o,n.serverSyncTree_,e);t0(t,r,c)});let i=[];hU(t,ti(),(r,o)=>{i=i.concat(NC(n.serverSyncTree_,r,o));const c=GU(n,r);a0(n,c)}),n.onDisconnect_=uM(),Ba(n.eventQueue_,ti(),i)}(n)}function BU(n,e,t){const i=new ci("/.info/"+e),r=mr(t);n.infoData_.updateSnapshot(i,r);const o=NC(n.infoSyncTree_,i,r);Ba(n.eventQueue_,i,o)}function DM(n){return n.nextWriteId_++}function jU(n,e,t,i,r){o0(n,"set",{path:e.toString(),value:t,priority:i});const o=HC(n),c=mr(t,i),p=bM(n.serverSyncTree_,e),_=PU(c,p,o),E=DM(n),T=SU(n.serverSyncTree_,e,_,E,!0);SM(n.eventQueue_,T),n.server_.put(e.toString(),c.val(!0),(F,G)=>{const K="ok"===F;K||Eo("set at "+e+" failed: "+F);const ue=ap(n.serverSyncTree_,E,!K);Ba(n.eventQueue_,e,ue),lp(0,r,F,G)});const R=GU(n,e);a0(n,R),Ba(n.eventQueue_,R,[])}function uae(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&dU(n.onDisconnect_,e),lp(0,t,i,r)})}function OZ(n,e,t,i){const r=mr(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(o,c)=>{"ok"===o&&t0(n.onDisconnect_,e,r),lp(0,i,o,c)})}function HU(n,e,t){let i;i=".info"===An(e._path)?wM(n.infoSyncTree_,e,t):wM(n.serverSyncTree_,e,t),MZ(n.eventQueue_,e._path,i)}function FZ(n){n.persistentConnection_&&n.persistentConnection_.interrupt(kZ)}function o0(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Bs(t,...e)}function lp(n,e,t,i){e&&Yv(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let o=r;i&&(o+=": "+i);const c=new Error(o);c.code=r,e(c)}})}function $U(n,e,t){return bM(n.serverSyncTree_,e,t)||En.EMPTY_NODE}function AM(n,e=n.transactionQueueTree_){if(e||MM(n,e),jm(e)){const t=UZ(n,e);(0,W.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function gae(n,e,t){const i=t.map(E=>E.currentWriteId),r=$U(n,e,i);let o=r;const c=r.hash();for(let E=0;E<t.length;E++){const T=t[E];(0,W.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const R=Go(e,T.path);o=o.updateChild(R,T.currentOutputSnapshotRaw)}const p=o.val(!0),_=e;n.server_.put(_.toString(),p,E=>{o0(n,"transaction put response",{path:_.toString(),status:E});let T=[];if("ok"===E){const R=[];for(let F=0;F<t.length;F++)t[F].status=2,T=T.concat(ap(n.serverSyncTree_,t[F].currentWriteId)),t[F].onComplete&&R.push(()=>t[F].onComplete(null,!0,t[F].currentOutputSnapshotResolved)),t[F].unwatcher();MM(n,CM(n.transactionQueueTree_,e)),AM(n,n.transactionQueueTree_),Ba(n.eventQueue_,e,T);for(let F=0;F<R.length;F++)Yv(R[F])}else{if("datastale"===E)for(let R=0;R<t.length;R++)t[R].status=3===t[R].status?4:0;else{Eo("transaction at "+_.toString()+" failed: "+E);for(let R=0;R<t.length;R++)t[R].status=4,t[R].abortReason=E}a0(n,e)}},c)}(n,LC(e),t)}else IZ(e)&&IM(e,t=>{AM(n,t)})}function a0(n,e){const t=LZ(n,e),i=LC(t);return function mae(n,e,t){if(0===e.length)return;const i=[];let r=[];const c=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const _=e[p],E=Go(t,_.path);let R,T=!1;if((0,W.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)T=!0,R=_.abortReason,r=r.concat(ap(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=nae)T=!0,R="maxretry",r=r.concat(ap(n.serverSyncTree_,_.currentWriteId,!0));else{const F=$U(n,_.path,c);_.currentInputSnapshot=F;const G=e[p].update(F.val());if(void 0!==G){VC("transaction failed: Data returned ",G,_.path);let K=mr(G);"object"==typeof G&&null!=G&&(0,W.r3)(G,".priority")||(K=K.updatePriority(F.getPriority()));const we=_.currentWriteId,Ke=HC(n),ut=PU(K,F,Ke);_.currentOutputSnapshotRaw=K,_.currentOutputSnapshotResolved=ut,_.currentWriteId=DM(n),c.splice(c.indexOf(we),1),r=r.concat(SU(n.serverSyncTree_,_.path,ut,_.currentWriteId,_.applyLocally)),r=r.concat(ap(n.serverSyncTree_,we,!0))}else T=!0,R="nodata",r=r.concat(ap(n.serverSyncTree_,_.currentWriteId,!0))}Ba(n.eventQueue_,t,r),r=[],T&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&i.push("nodata"===R?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(R),!1,null)))}MM(n,n.transactionQueueTree_);for(let p=0;p<i.length;p++)Yv(i[p]);AM(n,n.transactionQueueTree_)}(n,UZ(n,t),i),i}function LZ(n,e){let t,i=n.transactionQueueTree_;for(t=An(e);null!==t&&void 0===jm(i);)i=CM(i,t),t=An(e=Mi(e));return i}function UZ(n,e){const t=[];return VZ(n,e,t),t.sort((i,r)=>i.order-r.order),t}function VZ(n,e,t){const i=jm(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);IM(e,r=>{VZ(n,r,t)})}function MM(n,e){const t=jm(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,FU(e,t.length>0?t:void 0)}IM(e,i=>{MM(n,i)})}function GU(n,e){const t=LC(LZ(n,e)),i=CM(n.transactionQueueTree_,e);return function zoe(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{qU(n,r)}),qU(n,i),TZ(i,r=>{qU(n,r)}),t}function qU(n,e){const t=jm(e);if(t){const i=[];let r=[],o=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,W.hu)(o===c-1,"All SENT items should be at beginning of queue."),o=c,t[c].status=3,t[c].abortReason="set"):((0,W.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),r=r.concat(ap(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&i.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===o?FU(e,void 0):t.length=o+1,Ba(n.eventQueue_,LC(e),r);for(let c=0;c<i.length;c++)Yv(i[c])}}const ZU=function(n,e){const t=vae(n),i=t.namespace;return"firebase.com"===t.domain&&Uc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Uc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Eo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new W2(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new ci(t.pathString)}},vae=function(n){let e="",t="",i="",r="",o="",c=!0,p="https",_=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(p=n.substring(0,E-1),n=n.substring(E+2));let T=n.indexOf("/");-1===T&&(T=n.length);let R=n.indexOf("?");-1===R&&(R=n.length),e=n.substring(0,Math.min(T,R)),T<R&&(r=function _ae(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(T,R)));const F=function yae(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Eo(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,R)));E=e.indexOf(":"),E>=0?(c="https"===p||"wss"===p,_=parseInt(e.substring(E+1),10)):E=e.length;const G=e.slice(0,E);if("localhost"===G.toLowerCase())t="localhost";else if(G.split(".").length<=2)t=G;else{const K=e.indexOf(".");i=e.substring(0,K).toLowerCase(),t=e.substring(K+1),o=i}"ns"in F&&(o=F.ns)}return{host:e,port:_,domain:t,subdomain:i,secure:c,scheme:p,pathString:r,namespace:o}},BZ="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",wae=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const o=new Array(8);for(r=7;r>=0;r--)o[r]=BZ.charAt(t%64),t=Math.floor(t/64);(0,W.hu)(0===t,"Cannot push at time == 0");let c=o.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=BZ.charAt(e[r]);return(0,W.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class jZ{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,W.Wl)(this.snapshot.exportVal())}}class HZ{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class zU{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,W.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class $Z{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new W.BH;return uae(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ol("OnDisconnect.remove",this._path);const e=new W.BH;return OZ(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ol("OnDisconnect.set",this._path),Bc("OnDisconnect.set",e,this._path,!1);const t=new W.BH;return OZ(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ol("OnDisconnect.setWithPriority",this._path),Bc("OnDisconnect.setWithPriority",e,this._path,!1),VU("OnDisconnect.setWithPriority",t,!1);const i=new W.BH;return function cae(n,e,t,i,r){const o=mr(t,i);n.server_.onDisconnectPut(e.toString(),o.val(!0),(c,p)=>{"ok"===c&&t0(n.onDisconnect_,e,o),lp(0,r,c,p)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Ol("OnDisconnect.update",this._path),DZ("OnDisconnect.update",e,this._path,!1);const t=new W.BH;return function dae(n,e,t,i){if((0,W.xb)(t))return Bs("onDisconnect().update() called with empty data.  Don't do anything."),void lp(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,o)=>{"ok"===r&&js(t,(c,p)=>{const _=mr(p);t0(n.onDisconnect_,er(e,c),_)}),lp(0,i,r,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ha{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Mn(this._path)?null:eU(this._path)}get ref(){return new Fl(this._repo,this._path)}get _queryIdentifier(){const e=zq(this._queryParams),t=Z2(e);return"{}"===t?"default":t}get _queryObject(){return zq(this._queryParams)}isEqual(e){if(!((e=(0,W.m9)(e))instanceof ha))return!1;const t=this._repo===e._repo,i=tU(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function dse(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function xM(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function up(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Vc){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ep)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==th)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===Ni){if(null!=e&&!UC(e)||null!=t&&!UC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,W.hu)(n.getIndex()instanceof oU||n.getIndex()===aU,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function kM(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Fl extends ha{constructor(e,t){super(e,t,new oM,!1)}get parent(){const e=Oq(this._path);return null===e?null:new Fl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Hm{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ci(e),i=$m(this.ref,e);return new Hm(this._node.getChild(t),i,Ni)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new Hm(r,$m(this.ref,i),Ni)))}hasChild(e){const t=new ci(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function GZ(n,e){return(n=(0,W.m9)(n))._checkNotDeleted("ref"),void 0!==e?$m(n._root,e):n._root}function qZ(n,e){(n=(0,W.m9)(n))._checkNotDeleted("refFromURL");const t=ZU(e,n._repo.repoInfo_.nodeAdmin);AZ("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Uc("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),GZ(n,t.path.toString())}function $m(n,e){return null===An((n=(0,W.m9)(n))._path)?Xoe("child","path",e,!1):jC("child","path",e,!1),new Fl(n._repo,er(n._path,e))}function WU(n,e){n=(0,W.m9)(n),Ol("set",n._path),Bc("set",e,n._path,!1);const t=new W.BH;return jU(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Tae(n,e){DZ("update",e,n._path,!1);const t=new W.BH;return function aae(n,e,t,i){o0(n,"update",{path:e.toString(),value:t});let r=!0;const o=HC(n),c={};if(js(t,(p,_)=>{r=!1,c[p]=CZ(er(e,p),mr(_),n.serverSyncTree_,o)}),r)Bs("update() called with empty data.  Don't do anything."),lp(0,i,"ok",void 0);else{const p=DM(n),_=function Poe(n,e,t,i){!function Yse(n,e,t,i){(0,W.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=_U(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=Oi.fromObject(t);return s0(n,new n0({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,c,p);SM(n.eventQueue_,_),n.server_.merge(e.toString(),t,(E,T)=>{const R="ok"===E;R||Eo("update at "+e+" failed: "+E);const F=ap(n.serverSyncTree_,p,!R),G=F.length>0?a0(n,e):e;Ba(n.eventQueue_,G,F),lp(0,i,E,T)}),js(t,E=>{const T=GU(n,er(e,E));a0(n,T)}),Ba(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Sae(n){n=(0,W.m9)(n);const e=new zU(()=>{}),t=new $C(e);return function oae(n,e,t){const i=function Uoe(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(E,T)=>{const R=Go(E,t);i=i||sp(T,R)});let r=n.syncPointTree_.get(t);r?i=i||sp(r,ti()):(r=new hZ,n.syncPointTree_=n.syncPointTree_.set(t,r));const o=null!=i,c=o?new ip(i,!0,!1):null;return function boe(n){return hM(n.viewCache_)}(fZ(r,e,fM(n.pendingWriteTree_,e._path),o?c.getNode():En.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const o=mr(r).withIndex(e._queryParams.getIndex());let c;if(DU(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=NC(n.serverSyncTree_,e._path,o);else{const p=OC(n.serverSyncTree_,e);c=yZ(n.serverSyncTree_,e._path,o,p)}return Ba(n.eventQueue_,e._path,c),wM(n.serverSyncTree_,e,t,null,!0),o},r=>(o0(n,"get for query "+(0,W.Wl)(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new Hm(i,new Fl(n._repo,n._path),n._queryParams.getIndex()))}class $C{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new jZ("value",this,new Hm(e.snapshotNode,new Fl(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new HZ(this,e,t):null}matches(e){return e instanceof $C&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class RM{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new HZ(this,e,t):null}createEvent(e,t){(0,W.hu)(null!=e.childName,"Child events should have a childName.");const i=$m(new Fl(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new jZ(e.type,this,new Hm(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof RM&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function GC(n,e,t,i,r){let o;if("object"==typeof i&&(o=void 0,r=i),"function"==typeof i&&(o=i),r&&r.onlyOnce){const _=t,E=(T,R)=>{HU(n._repo,n,p),_(T,R)};E.userCallback=t.userCallback,E.context=t.context,t=E}const c=new zU(t,o||void 0),p="value"===e?new $C(c):new RM(e,c);return function hae(n,e,t){let i;i=".info"===An(e._path)?DU(n.infoSyncTree_,e,t):DU(n.serverSyncTree_,e,t),MZ(n.eventQueue_,e._path,i)}(n._repo,n,p),()=>HU(n._repo,n,p)}function KU(n,e,t,i){return GC(n,"value",e,t,i)}function ZZ(n,e,t,i){return GC(n,"child_added",e,t,i)}function zZ(n,e,t,i){return GC(n,"child_changed",e,t,i)}function WZ(n,e,t,i){return GC(n,"child_moved",e,t,i)}function KZ(n,e,t,i){return GC(n,"child_removed",e,t,i)}function YZ(n,e,t){let i=null;const r=t?new zU(t):null;"value"===e?i=new $C(r):e&&(i=new RM(e,r)),HU(n._repo,n,i)}class Su{}class QZ extends Su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bc("endAt",this._value,e._path,!0);const t=cU(e._queryParams,this._value,this._key);if(kM(t),up(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ha(e._repo,e._path,t,e._orderByCalled)}}class Aae extends Su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bc("endBefore",this._value,e._path,!1);const t=function Lse(n,e,t){let i;return i=cU(n,e,n.index_===Vc||t?t:ep),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(kM(t),up(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ha(e._repo,e._path,t,e._orderByCalled)}}class JZ extends Su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bc("startAt",this._value,e._path,!0);const t=uU(e._queryParams,this._value,this._key);if(kM(t),up(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ha(e._repo,e._path,t,e._orderByCalled)}}class kae extends Su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bc("startAfter",this._value,e._path,!1);const t=function Fse(n,e,t){let i;return i=uU(n,e,n.index_===Vc||t?t:th),i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(kM(t),up(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ha(e._repo,e._path,t,e._orderByCalled)}}class Pae extends Su{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ha(e._repo,e._path,function Nse(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Oae extends Su{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ha(e._repo,e._path,function Ose(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Lae extends Su{constructor(e){super(),this._path=e}_apply(e){xM(e,"orderByChild");const t=new ci(this._path);if(Mn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new oU(t),r=aM(e._queryParams,i);return up(r),new ha(e._repo,e._path,r,!0)}}class Vae extends Su{_apply(e){xM(e,"orderByKey");const t=aM(e._queryParams,Vc);return up(t),new ha(e._repo,e._path,t,!0)}}class jae extends Su{_apply(e){xM(e,"orderByPriority");const t=aM(e._queryParams,Ni);return up(t),new ha(e._repo,e._path,t,!0)}}class $ae extends Su{_apply(e){xM(e,"orderByValue");const t=aM(e._queryParams,aU);return up(t),new ha(e._repo,e._path,t,!0)}}class qae extends Su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Bc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new QZ(this._value,this._key)._apply(new JZ(this._value,this._key)._apply(e))}}function Du(n,...e){let t=(0,W.m9)(n);for(const i of e)t=i._apply(t);return t}(function Toe(n){(0,W.hu)(!_M,"__referenceConstructor has already been defined"),_M=n})(Fl),function xoe(n){(0,W.hu)(!vM,"__referenceConstructor has already been defined"),vM=n}(Fl);const zae="FIREBASE_DATABASE_EMULATOR_HOST",YU={};let XZ=!1;function e9(n,e,t,i,r){let o=i||n.options.databaseURL;void 0===o&&(n.options.projectId||Uc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bs("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,E,c=ZU(o,r),p=c.repoInfo;typeof process<"u"&&process.env&&(E=process.env[zae]),E?(_=!0,o=`http://${E}?ns=${p.namespace}`,c=ZU(o,r),p=c.repoInfo):_=!c.repoInfo.secure;const T=r&&_?new EC(EC.OWNER):new Bre(n.name,n.options,e);AZ("Invalid Firebase Database URL",c),Mn(c.path)||Uc("Database URL must point to the root of a Firebase Database (not including a child path).");const R=function Yae(n,e,t,i){let r=YU[e.name];r||(r={},YU[e.name]=r);let o=r[n.toURLString()];return o&&Uc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new iae(n,XZ,t,i),r[n.toURLString()]=o,o}(p,n,T,new Vre(n.name,t));return new Jae(R,n)}class Jae{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function rae(n,e,t){if(n.stats_=Q2(n.repoInfo_),n.forceRestClient_||Ure())n.server_=new lM(n.repoInfo_,(i,r,o,c)=>{PZ(n,i,r,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>NZ(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,W.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Lm(n.repoInfo_,e,(i,r,o,c)=>{PZ(n,i,r,o,c)},i=>{NZ(n,i)},i=>{!function sae(n,e){js(e,(t,i)=>{BU(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function $re(n,e){const t=n.toString();return Y2[t]||(Y2[t]=e()),Y2[t]}(n.repoInfo_,()=>new $se(n.stats_,n.server_)),n.infoData_=new Use,n.infoSyncTree_=new _Z({startListening:(i,r,o,c)=>{let p=[];const _=n.infoData_.getNode(i._path);return _.isEmpty()||(p=NC(n.infoSyncTree_,i._path,_),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),BU(n,"connected",!1),n.serverSyncTree_=new _Z({startListening:(i,r,o,c)=>(n.server_.listen(i,o,r,(p,_)=>{const E=c(p,_);Ba(n.eventQueue_,i._path,E)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fl(this._repo,ti())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Kae(n,e){const t=YU[e];(!t||t[n.key]!==n)&&Uc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),FZ(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Uc("Cannot call "+e+" on a deleted database.")}}function t9(){Cq.IS_TRANSPORT_INITIALIZED&&Eo("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Xae(){t9(),tp.forceDisallow()}function ele(){t9(),Qv.forceDisallow(),tp.forceAllow()}function ile(n,e){iq(n,e)}const sle={".sv":"timestamp"};class lle{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Lm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Lm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function rle(n){J8(Jr.SDK_VERSION),(0,Jr._registerComponent)(new mo.wA("database",(e,{instanceIdentifier:t})=>e9(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Jr.registerVersion)(Y8,"0.14.3",n),(0,Jr.registerVersion)(Y8,"0.14.3","esm2017")}();const hle=new Po.Yd("@firebase/database-compat"),i9=function(n){hle.warn("FIREBASE WARNING: "+n)};class gle{constructor(e){this._delegate=e}cancel(e){(0,W.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,W.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,W.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,W.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,W.Dv)("OnDisconnect.set",1,2,arguments.length),(0,W.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,W.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,W.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),o=>i(o)),r}update(e,t){if((0,W.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let o=0;o<e.length;++o)r[""+o]=e[o];e=r,i9("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,W.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class mle{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,W.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class cp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,W.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,W.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,W.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,W.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,W.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),jC("DataSnapshot.child","path",e,!1),new cp(this._database,this._delegate.child(e))}hasChild(e){return(0,W.Dv)("DataSnapshot.hasChild",1,1,arguments.length),jC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,W.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,W.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,W.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new cp(this._database,t)))}hasChildren(){return(0,W.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,W.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,W.Dv)("DataSnapshot.ref",0,0,arguments.length),new ja(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class to{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var o;(0,W.Dv)("Query.on",2,4,arguments.length),(0,W.Wj)("Query.on","callback",t,!1);const c=to.getCancelAndContextArgs_("Query.on",i,r),p=(E,T)=>{t.call(c.context,new cp(this.database,E),T)};p.userCallback=t,p.context=c.context;const _=null===(o=c.cancel)||void 0===o?void 0:o.bind(c.context);switch(e){case"value":return KU(this._delegate,p,_),t;case"child_added":return ZZ(this._delegate,p,_),t;case"child_removed":return KZ(this._delegate,p,_),t;case"child_changed":return zZ(this._delegate,p,_),t;case"child_moved":return WZ(this._delegate,p,_),t;default:throw new Error((0,W.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,W.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,W.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,W.Wj)("Query.off","callback",t,!0),(0,W.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,YZ(this._delegate,e,r)}else YZ(this._delegate,e)}get(){return Sae(this._delegate).then(e=>new cp(this.database,e))}once(e,t,i,r){(0,W.Dv)("Query.once",1,4,arguments.length),(0,W.Wj)("Query.once","callback",t,!0);const o=to.getCancelAndContextArgs_("Query.once",i,r),c=new W.BH,p=(E,T)=>{const R=new cp(this.database,E);t&&t.call(o.context,R,T),c.resolve(R)};p.userCallback=t,p.context=o.context;const _=E=>{o.cancel&&o.cancel.call(o.context,E),c.reject(E)};switch(e){case"value":KU(this._delegate,p,_,{onlyOnce:!0});break;case"child_added":ZZ(this._delegate,p,_,{onlyOnce:!0});break;case"child_removed":KZ(this._delegate,p,_,{onlyOnce:!0});break;case"child_changed":zZ(this._delegate,p,_,{onlyOnce:!0});break;case"child_moved":WZ(this._delegate,p,_,{onlyOnce:!0});break;default:throw new Error((0,W.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,W.Dv)("Query.limitToFirst",1,1,arguments.length),new to(this.database,Du(this._delegate,function Nae(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Pae(n)}(e)))}limitToLast(e){return(0,W.Dv)("Query.limitToLast",1,1,arguments.length),new to(this.database,Du(this._delegate,function Fae(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Oae(n)}(e)))}orderByChild(e){return(0,W.Dv)("Query.orderByChild",1,1,arguments.length),new to(this.database,Du(this._delegate,function Uae(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return jC("orderByChild","path",n,!1),new Lae(n)}(e)))}orderByKey(){return(0,W.Dv)("Query.orderByKey",0,0,arguments.length),new to(this.database,Du(this._delegate,function Bae(){return new Vae}()))}orderByPriority(){return(0,W.Dv)("Query.orderByPriority",0,0,arguments.length),new to(this.database,Du(this._delegate,function Hae(){return new jae}()))}orderByValue(){return(0,W.Dv)("Query.orderByValue",0,0,arguments.length),new to(this.database,Du(this._delegate,function Gae(){return new $ae}()))}startAt(e=null,t){return(0,W.Dv)("Query.startAt",0,2,arguments.length),new to(this.database,Du(this._delegate,function xae(n=null,e){return BC("startAt","key",e,!0),new JZ(n,e)}(e,t)))}startAfter(e=null,t){return(0,W.Dv)("Query.startAfter",0,2,arguments.length),new to(this.database,Du(this._delegate,function Rae(n,e){return BC("startAfter","key",e,!0),new kae(n,e)}(e,t)))}endAt(e=null,t){return(0,W.Dv)("Query.endAt",0,2,arguments.length),new to(this.database,Du(this._delegate,function Dae(n,e){return BC("endAt","key",e,!0),new QZ(n,e)}(e,t)))}endBefore(e=null,t){return(0,W.Dv)("Query.endBefore",0,2,arguments.length),new to(this.database,Du(this._delegate,function Mae(n,e){return BC("endBefore","key",e,!0),new Aae(n,e)}(e,t)))}equalTo(e,t){return(0,W.Dv)("Query.equalTo",1,2,arguments.length),new to(this.database,Du(this._delegate,function Zae(n,e){return BC("equalTo","key",e,!0),new qae(n,e)}(e,t)))}toString(){return(0,W.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,W.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,W.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof to))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,W.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,W.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,W.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new ja(this.database,new Fl(this._delegate._repo,this._delegate._path))}}class ja extends to{constructor(e,t){super(e,new ha(t._repo,t._path,new oM,!1)),this.database=e,this._delegate=t}getKey(){return(0,W.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,W.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ja(this.database,$m(this._delegate,e))}getParent(){(0,W.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ja(this.database,e):null}getRoot(){return(0,W.Dv)("Reference.root",0,0,arguments.length),new ja(this.database,this._delegate.root)}set(e,t){(0,W.Dv)("Reference.set",1,2,arguments.length),(0,W.Wj)("Reference.set","onComplete",t,!0);const i=WU(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,W.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let o=0;o<e.length;++o)r[""+o]=e[o];e=r,i9("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ol("Reference.update",this._delegate._path),(0,W.Wj)("Reference.update","onComplete",t,!0);const i=Tae(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,W.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,W.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function Iae(n,e,t){if(Ol("setWithPriority",n._path),Bc("setWithPriority",e,n._path,!1),VU("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new W.BH;return jU(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),o=>i(o)),r}remove(e){(0,W.Dv)("Reference.remove",0,1,arguments.length),(0,W.Wj)("Reference.remove","onComplete",e,!0);const t=function Eae(n){return Ol("remove",n._path),WU(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,W.Dv)("Reference.transaction",1,3,arguments.length),(0,W.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,W.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,W.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function ule(n,e,t){var i;if(n=(0,W.m9)(n),Ol("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=t?.applyLocally)||void 0===i||i,o=new W.BH,p=KU(n,()=>{});return function pae(n,e,t,i,r,o){o0(n,"transaction on "+e);const c={path:e,update:t,onComplete:i,status:null,order:eq(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=$U(n,e,void 0);c.currentInputSnapshot=p;const _=c.update(p.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{VC("transaction failed: Data returned ",_,c.path),c.status=0;const E=CM(n.transactionQueueTree_,e),T=jm(E)||[];let R;T.push(c),FU(E,T),"object"==typeof _&&null!==_&&(0,W.r3)(_,".priority")?(R=(0,W.DV)(_,".priority"),(0,W.hu)(UC(R),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):R=(bM(n.serverSyncTree_,e)||En.EMPTY_NODE).getPriority().val();const F=HC(n),G=mr(_,R),K=PU(G,p,F);c.currentOutputSnapshotRaw=G,c.currentOutputSnapshotResolved=K,c.currentWriteId=DM(n);const ue=SU(n.serverSyncTree_,e,K,c.currentWriteId,c.applyLocally);Ba(n.eventQueue_,e,ue),AM(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,E,T)=>{let R=null;_?o.reject(_):(R=new Hm(T,new Fl(n._repo,n._path),Ni),o.resolve(new lle(E,R)))},p,r),o.promise}(this._delegate,e,{applyLocally:i}).then(o=>new mle(o.committed,new cp(this.database,o.snapshot)));return t&&r.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),r}setPriority(e,t){(0,W.Dv)("Reference.setPriority",1,2,arguments.length),(0,W.Wj)("Reference.setPriority","onComplete",t,!0);const i=function Cae(n,e){n=(0,W.m9)(n),Ol("setPriority",n._path),VU("setPriority",e,!1);const t=new W.BH;return jU(n._repo,er(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,W.Dv)("Reference.push",0,2,arguments.length),(0,W.Wj)("Reference.push","onComplete",t,!0);const i=function bae(n,e){n=(0,W.m9)(n),Ol("push",n._path),Bc("push",e,n._path,!0);const t=RZ(n._repo),i=wae(t),r=$m(n,i),o=$m(n,i);let c;return c=null!=e?WU(o,e).then(()=>o):Promise.resolve(o),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,e),r=i.then(c=>new ja(this.database,c));t&&r.then(()=>t(null),c=>t(c));const o=new ja(this.database,i);return o.then=r.then.bind(r),o.catch=r.catch.bind(r,void 0),o}onDisconnect(){return Ol("Reference.onDisconnect",this._delegate._path),new gle(new $Z(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class qC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Xae,forceLongPolling:ele}}useEmulator(e,t,i={}){!function n9(n,e,t,i={}){(n=(0,W.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Uc("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Uc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new EC(EC.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,W.Sg)(i.mockUserToken,n.app.options.projectId);o=new EC(c)}!function Wae(n,e,t,i){n.repoInfo_=new W2(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,e,t,o)}(this._delegate,e,t,i)}ref(e){if((0,W.Dv)("database.ref",0,1,arguments.length),e instanceof ja){const t=qZ(this._delegate,e.toString());return new ja(this,t)}{const t=GZ(this._delegate,e);return new ja(this,t)}}refFromURL(e){(0,W.Dv)("database.refFromURL",1,1,arguments.length);const i=qZ(this._delegate,e);return new ja(this,i)}goOffline(){return(0,W.Dv)("database.goOffline",0,0,arguments.length),function tle(n){(n=(0,W.m9)(n))._checkNotDeleted("goOffline"),FZ(n._repo)}(this._delegate)}goOnline(){return(0,W.Dv)("database.goOnline",0,0,arguments.length),function nle(n){(n=(0,W.m9)(n))._checkNotDeleted("goOnline"),function fae(n){n.persistentConnection_&&n.persistentConnection_.resume(kZ)}(n._repo)}(this._delegate)}}qC.ServerValue={TIMESTAMP:function ole(){return sle}(),increment:n=>function ale(n){return{".sv":{increment:n}}}(n)};var yle=Object.freeze({__proto__:null,initStandalone:function _le({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:o=!1}){J8(t);const c=new mo.zt("auth-internal",new mo.H0("database-standalone"));return c.setComponent(new mo.wA("auth-internal",()=>i,"PRIVATE")),{instance:new qC(e9(n,c,void 0,e,o),n),namespace:r}}});const vle=qC.ServerValue;function r9(n){return null==n}function s9(n){return"function"==typeof n.set}function o9(n,e){return s9(e)?e:n.ref(e)}function a9(n,e){if(function ble(n){return"string"==typeof n}(n))return e.stringCase();if(s9(n))return e.firebaseCase();if(function Ele(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function ZC(n,e,t="on",i=Ry.z){return new $e.y(r=>{let o=null;return o=n[t](e,(c,p)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:p})}),"once"===t&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,pt.U)(r=>{const{snapshot:o,prevKey:c}=r;let p=null;return o.exists()&&(p=o.key),{type:e,payload:o,prevKey:c,key:p}}),(0,yl.B)())}function l9(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function Tle(n,e){const{payload:t,prevKey:i,key:r}=e,o=l9(n,r),c=function Ile(n,e){if(r9(e))return 0;{const t=l9(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(_=>{const E={payload:_,type:"value",prevKey:p,key:_.key};return p=_.key,n=[...n,E],!1})}return n;case"child_added":if(o>-1){const p=n[o-1];(p&&p.key||null)!==i&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===r?e:p);case"child_moved":if(o>-1){const p=n.splice(o,1)[0];return(n=n.slice()).splice(c,0,p),n}return n;default:return n}}function u9(n){return(r9(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function c9(n,e,t){return function Cle(n,e,t){return ZC(n,"value","once",t).pipe(Fn(i=>{const r=[ae(i)];return e.forEach(o=>r.push(ZC(n,o,"on",t))),(0,St.T)(...r).pipe(Ic(Tle,[]))}),i4())}(n,e=u9(e),t)}function d9(n,e,t){const i=(e=u9(e)).map(r=>ZC(n,r,"on",t));return(0,St.T)(...i)}function h9(n,e){return function(i,r){return a9(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function Mle(n){return function(t){return t?a9(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function f9(n,e){return function(){return ZC(n,"value","on",e)}}!function wle(n){n.INTERNAL.registerComponent(new mo.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new qC(r,i)},"PUBLIC").setServiceProps({Reference:ja,Query:to,Database:qC,DataSnapshot:cp,enableLogging:ile,INTERNAL:yle,ServerValue:vle}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.3")}(DO.Z);const Rle=new u.OlP("angularfire2.realtimeDatabaseURL"),Ple=new u.OlP("angularfire2.database.use-emulator");let p9=(()=>{class n{constructor(t,i,r,o,c,p,_,E,T,R,F,G,K,ue,we){this.schedulers=p;const Ke=_,ut=(0,N.on)(t,c,i);E&&GT(ut,c,T,F,G,K,R,ue),this.database=(0,N.cc)(`${ut.name}.database.${r}`,"AngularFireDatabase",ut.name,()=>{const ct=c.runOutsideAngular(()=>ut.database(r||void 0));return Ke&&ct.useEmulator(...Ke),ct},[Ke])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>o9(this.database,t));let o=r;return i&&(o=i(r)),function xle(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:h9(i,"update"),set:h9(i,"set"),push:r=>i.push(r),remove:Mle(i),snapshotChanges:r=>c9(n,r,t).pipe(kn.iC),stateChanges:r=>d9(n,r,t).pipe(kn.iC),auditTrail:r=>function Sle(n,e,t){return function Ale(n,e,t){return function Dle(n,e){return ZC(n,"value","on",e).pipe((0,pt.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function Tre(...n){const e=(0,X.jO)(n);return(0,Ht.e)((t,i)=>{const r=n.length,o=new Array(r);let c=n.map(()=>!1),p=!1;for(let _=0;_<r;_++)(0,kt.Xf)(n[_]).subscribe((0,Dt.x)(i,E=>{o[_]=E,!p&&!c[_]&&(c[_]=!0,(p=c.every(fc.y))&&(c=null))},Eb.Z));t.subscribe((0,Dt.x)(i,_=>{if(p){const E=[_,...o];i.next(e?e(...E):E)}}))})}(e),(0,pt.U)(([r,o])=>{const c=r.lastKeyToLoad,p=o.map(_=>_.key);return{actions:o,lastKeyToLoad:c,loadedKeys:p}}),function Sre(n){return(0,Ht.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,Dt.x)(t,o=>(i||(i=!n(o,r++)))&&t.next(o)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,pt.U)(r=>r.actions))}(n,d9(n,e).pipe(Ic((r,o)=>[...r,o],[])),t)}(n,r,t).pipe(kn.iC),valueChanges:(r,o)=>c9(n,r,t).pipe((0,pt.U)(p=>p.map(_=>o&&o.idField?Object.assign(Object.assign({},_.payload.val()),{[o.idField]:_.key}):_.payload.val())),kn.iC)}}(o,this)}object(t){return function kle(n,e){return{query:n,snapshotChanges:()=>f9(n,e.schedulers.outsideAngular)().pipe(kn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>f9(n,e.schedulers.outsideAngular)().pipe(kn.iC,(0,pt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>o9(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(N.Dh),u.LFG(N.xv,8),u.LFG(Rle,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(kn.HU),u.LFG(Ple,8),u.LFG(Cl,8),u.LFG(Ew,8),u.LFG(jT,8),u.LFG(HT,8),u.LFG(cg,8),u.LFG(dg,8),u.LFG($T,8),u.LFG(ug,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Nle=(()=>{class n{constructor(){Mt.Z.registerVersion("angularfire",kn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[p9]}),n})();var jc=q(2722);class g9{}class Ole{}const ih="*";function Fle(n,e){return{type:7,name:n,definitions:e,options:{}}}function m9(n,e=null){return{type:4,styles:e,timings:n}}function _9(n,e=null){return{type:2,steps:n,options:e}}function zC(n){return{type:6,styles:n,offset:null}}function QU(n,e,t){return{type:0,name:n,styles:e,options:t}}function y9(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function v9(n){Promise.resolve().then(n)}class WC{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){v9(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class w9{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const o=this.players.length;0==o?v9(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==o&&this._onFinish()}),c.onDestroy(()=>{++i==o&&this._onDestroy()}),c.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const JU="!",b9=["toast-component",""];function Lle(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.remove())}),u.TgZ(1,"span",6),u._uU(2,"\xd7"),u.qZA()()}}function Ule(n,e){if(1&n&&(u.ynx(0),u._uU(1),u.BQk()),2&n){const t=u.oxw(2);u.xp6(1),u.hij("[",t.duplicatesCount+1,"]")}}function Vle(n,e){if(1&n&&(u.TgZ(0,"div"),u._uU(1),u.YNc(2,Ule,2,1,"ng-container",4),u.qZA()),2&n){const t=u.oxw();u.Tol(t.options.titleClass),u.uIk("aria-label",t.title),u.xp6(1),u.hij(" ",t.title," "),u.xp6(1),u.Q6J("ngIf",t.duplicatesCount)}}function Ble(n,e){if(1&n&&u._UZ(0,"div",7),2&n){const t=u.oxw();u.Tol(t.options.messageClass),u.Q6J("innerHTML",t.message,u.oJD)}}function jle(n,e){if(1&n&&(u.TgZ(0,"div",8),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.Tol(t.options.messageClass),u.uIk("aria-label",t.message),u.xp6(1),u.hij(" ",t.message," ")}}function Hle(n,e){if(1&n&&(u.TgZ(0,"div"),u._UZ(1,"div",9),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Udp("width",t.width+"%")}}class Kle{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Yle{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class Qle{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new L.x,this._activate=new L.x,this._manualClose=new L.x,this._resetTimeout=new L.x,this._countDuplicate=new L.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class PM{constructor(e,t,i,r,o,c){this.toastId=e,this.config=t,this.message=i,this.title=r,this.toastType=o,this.toastRef=c,this._onTap=new L.x,this._onAction=new L.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const C9=new u.OlP("ToastConfig");class Jle extends Yle{constructor(e,t,i){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=i}attachComponentPortal(e,t){const i=this._componentFactoryResolver.resolveComponentFactory(e.component);let r;return r=i.create(e.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class Xle{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let eue=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tue=(()=>{class n{constructor(t,i,r,o){this._overlayContainer=t,this._componentFactoryResolver=i,this._appRef=r,this._document=o,this._paneElements=new Map}create(t,i){return this._createOverlayRef(this.getPaneElement(t,i))}getPaneElement(t="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[t]||(this._paneElements.get(i)[t]=this._createPaneElement(t,i)),this._paneElements.get(i)[t]}_createPaneElement(t,i){const r=this._document.createElement("div");return r.id="toast-container",r.classList.add(t),r.classList.add("toast-container"),i?i.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(t){return new Jle(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new Xle(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(eue),u.LFG(u._Vd),u.LFG(u.z2F),u.LFG(Se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),NM=(()=>{class n{constructor(t,i,r,o,c){this.overlay=i,this._injector=r,this.sanitizer=o,this.ngZone=c,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,i,r={},o=""){return this._preBuildNotification(o,t,i,this.applyConfig(r))}success(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,i,this.applyConfig(r))}error(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,i,this.applyConfig(r))}info(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,i,this.applyConfig(r))}warning(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,i,this.applyConfig(r))}clear(t){for(const i of this.toasts)if(void 0!==t){if(i.toastId===t)return void i.toastRef.manualClose()}else i.toastRef.manualClose()}remove(t){const i=this._findToast(t);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(t="",i="",r,o){const{includeTitleDuplicates:c}=this.toastrConfig;for(const p of this.toasts)if((!c||c&&p.title===t)&&p.message===i)return p.toastRef.onDuplicate(r,o),p;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===t)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(t,i,r,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,i,r,o)):this._buildNotification(t,i,r,o)}_buildNotification(t,i,r,o){if(!o.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(r,i,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||i)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=i;let p=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(p=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const _=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let E=i;i&&o.enableHtml&&(E=this.sanitizer.sanitize(u.q3G.HTML,i));const T=new Qle(_),R=new PM(this.index,o,E,r,t,T),G=u.zs3.create({providers:[{provide:PM,useValue:R}],parent:this._injector}),K=new Kle(o.toastComponent,G),ue=_.attach(K,o.newestOnTop);T.componentInstance=ue.instance;const we={toastId:this.index,title:r||"",message:i||"",toastRef:T,onShown:T.afterActivate(),onHidden:T.afterClosed(),onTap:R.onTap(),onAction:R.onAction(),portal:ue};return p||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{we.toastRef.activate()})),this.toasts.push(we),we}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(C9),u.LFG(tue),u.LFG(u.zs3),u.LFG(Ir),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nue={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{constructor(t,i,r){this.toastrService=t,this.toastPackage=i,this.ngZone=r,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),i)):this.timeout=setTimeout(()=>t(),i)}outsideInterval(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),i)):this.intervalId=setInterval(()=>t(),i)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(NM),u.Y36(PM),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,i){1&t&&u.NdJ("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),2&t&&(u.d8E("@flyInOut",i.state),u.Tol(i.toastClasses),u.Udp("display",i.displayStyle))},attrs:b9,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,i){1&t&&(u.YNc(0,Lle,3,0,"button",0),u.YNc(1,Vle,3,5,"div",1),u.YNc(2,Ble,1,3,"div",2),u.YNc(3,jle,2,4,"div",3),u.YNc(4,Hle,2,2,"div",4)),2&t&&(u.Q6J("ngIf",i.options.closeButton),u.xp6(1),u.Q6J("ngIf",i.title),u.xp6(1),u.Q6J("ngIf",i.message&&i.options.enableHtml),u.xp6(1),u.Q6J("ngIf",i.message&&!i.options.enableHtml),u.xp6(1),u.Q6J("ngIf",i.options.progressBar))},dependencies:[qt],encapsulation:2,data:{animation:[Fle("flyInOut",[QU("inactive",zC({opacity:0})),QU("active",zC({opacity:1})),QU("removed",zC({opacity:0})),y9("inactive => active",m9("{{ easeTime }}ms {{ easing }}")),y9("active => removed",m9("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let iue=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:C9,useValue:{default:nue,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[ms]}),n})();class xi{constructor(){this.comp="",this.param="",this.show=!1}open(e){var t=e.split(":");this.comp=t[0],this.param=t[1],this.show=!0}close(){this.show=!1,this.comp=""}}xi.\u0275fac=function(e){return new(e||xi)},xi.\u0275prov=u.Yz7({token:xi,factory:xi.\u0275fac,providedIn:"root"});class Ei{constructor(e,t,i,r,o,c,p){this.afs=e,this.afAuth=t,this.router=i,this.ngZone=r,this.toastr=o,this.modalService=c,this.db=p,this.afAuth.authState.subscribe(_=>{_?(this.userData=_,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,t){var i=this;return(0,Ce.Z)(function*(){return i.afAuth.signInWithEmailAndPassword(e,t).then(r=>{i.ngZone.run(()=>{i.SetUserData(r.user)}),i.SetUserData(r.user),i.modalService.close(),i.router.navigate(["feed"]),i.toastr.success("Login Successful")}).catch(r=>{i.toastr.error("Incorrect password or email")})})()}SignUp(e,t,i){var r=this;return(0,Ce.Z)(function*(){return r.afAuth.createUserWithEmailAndPassword(e,t).then(o=>{o.user&&o.user.updateProfile({displayName:i,photoURL:"https://firebasestorage.googleapis.com/v0/b/project-social-923a2.appspot.com/o/profile-pictures%2Fdefault-pfp.jpg?alt=media&token=008d33ee-4bb3-4b01-b227-c8d1eee67d6d"}).then(()=>{r.SetUserProfile(o.user).then(()=>{r.modalService.close(),r.SignIn(e,t),r.toastr.success("Sign Up Successful")})})}).catch(o=>{window.alert(o.message)})})()}UpdateUserName(e,t){return this.afAuth.onAuthStateChanged(i=>{if(i){const r=jc.M.credential(this.userData.email,t);(0,jc._)(this.userData,r).then(()=>{(0,jc.af)(this.userData,{displayName:e}).then(()=>{this.toastr.success("User Name Updated Successfully"),this.modalService.close(),this.SetUserData(this.userData)}).catch(o=>{window.alert(o.message)})}).catch(o=>{this.toastr.error("Please Enter your Current password")})}})}UpdatePFP(e){return this.afAuth.onAuthStateChanged(function(t){t&&t.updateProfile({photoURL:e}).then(function(){}).catch(i=>{window.alert(i.message)})})}updateUserPassword(e){this.userData.updatePassword(e).then(function(){console.log("succcess!")}).catch(t=>{window.alert(t.message)})}UpdateEmail(e,t){const i=jc.M.credential(this.userData.email,t);(0,jc._)(this.userData,i).then(()=>{(0,jc.ag)(this.userData,e).then(()=>{this.modalService.close(),this.toastr.success("Email Updated Successfully")}).catch(r=>{window.alert(r.message)})}).catch(r=>{this.toastr.error("Please Enter your Current password")})}UpdatePassword(e,t){const i=jc.M.credential(this.userData.email,e);(0,jc._)(this.userData,i).then(()=>{(0,jc.ah)(this.userData,t).then(()=>{this.modalService.close(),this.toastr.success("Password Updated Successfully")}).catch(r=>{})}).catch(r=>{this.toastr.error("Please Enter your Current password")})}SendVerificationMail(){var e=this;return(0,Ce.Z)(function*(){return e.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{e.router.navigate(["verify-email-address"])})})()}ForgotPassword(e){var t=this;return(0,Ce.Z)(function*(){return t.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})})()}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}AuthLogin(e){var t=this;return(0,Ce.Z)(function*(){return t.afAuth.signInWithPopup(e).then(i=>{t.ngZone.run(()=>{t.router.navigate(["feed"])}),t.SetUserData(i.user)}).catch(i=>{window.alert(i)})})()}SetUserData(e){const t=this.afs.doc(`users/${e.uid}`),i={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified,lowerDN:e.displayName.toLocaleLowerCase()};return t.set(i,{merge:!0})}SetUserProfile(e){const t=this.afs.doc(`profiles/${e.uid}`),i={profileName:e.displayName,joinDate:Date().toString(),bio:"",bannerURL:"",location:"",link:"",posts:[],followers:[],following:[]};return t.set(i,{merge:!0})}SignOut(){var e=this;return(0,Ce.Z)(function*(){return e.afAuth.signOut().then(()=>{localStorage.removeItem("user"),e.router.navigate([""]).then(()=>{window.location.reload()})})})()}userDeleteProfile(){const e=this.userData;(0,jc.z)(e).then(()=>{console.log("User deleted: "+e)}).catch(t=>{console.log(t)})}adminDeleteProfile(e){}}Ei.\u0275fac=function(e){return new(e||Ei)(u.LFG(Is),u.LFG(Cl),u.LFG(Ks),u.LFG(u.R0b),u.LFG(NM),u.LFG(xi),u.LFG(p9))},Ei.\u0275prov=u.Yz7({token:Ei,factory:Ei.\u0275fac,providedIn:"root"});class l0{constructor(e){this.authService=e,this.showPassword=!1}toggle(){this.showPassword=!this.showPassword}ngOnInit(){}}l0.\u0275fac=function(e){return new(e||l0)(u.Y36(Ei))},l0.\u0275cmp=u.Xpm({type:l0,selectors:[["app-login"]],decls:17,vars:1,consts:[[1,"login-container"],[1,"username"],[1,"input"],[1,"usernameInput"],["userEmail",""],[1,"password"],[1,"passwordInput",3,"type","keyup.enter"],["userPassword",""],[1,"show",3,"click"],[1,"loginButton",3,"click"]],template:function(e,t){if(1&e){const i=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"label"),u._uU(3,"Email"),u.qZA(),u.TgZ(4,"div",2),u._UZ(5,"input",3,4),u.qZA()(),u.TgZ(7,"div",5)(8,"label"),u._uU(9,"Password"),u.qZA(),u.TgZ(10,"div",2)(11,"input",6,7),u.NdJ("keyup.enter",function(){u.CHM(i);const o=u.MAs(6),c=u.MAs(12);return u.KtG(t.authService.SignIn(o.value,c.value))}),u.qZA(),u.TgZ(13,"div",8),u.NdJ("click",function(){return t.toggle()}),u._uU(14,"Show"),u.qZA()()(),u.TgZ(15,"div",9),u.NdJ("click",function(){u.CHM(i);const o=u.MAs(6),c=u.MAs(12);return u.KtG(t.authService.SignIn(o.value,c.value))}),u._uU(16," Log in "),u.qZA()()}2&e&&(u.xp6(11),u.s9C("type",!1===t.showPassword?"password":"text"))},styles:[".login-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin:0 auto}.show[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;cursor:pointer}.loginButton[_ngcontent-%COMP%]{width:450px;height:55px;background-color:#000;color:#fff;border-radius:9999px;cursor:pointer;display:flex;justify-content:center;align-items:center;font-size:20px;margin-bottom:15px}.usernameInput[_ngcontent-%COMP%], .passwordInput[_ngcontent-%COMP%]{width:450px;height:45px;font-size:17px;outline:none}.username[_ngcontent-%COMP%], .password[_ngcontent-%COMP%]{padding-bottom:15px}"]});class u0{constructor(e,t){this.authService=e,this.afs=t,this.showPassword=!1,this.userError=""}toggle(){this.showPassword=!this.showPassword}signUp(e,t,i){var r=this;return(0,Ce.Z)(function*(){r.userError="",/^[A-Za-z0-9_]+$/.exec(i)&&i.length>=3&&i.length<=15?yield r.afs.collection("users").ref.where("lowerDN","==",i.toLocaleLowerCase()).get().then(o=>{0==o.size?r.authService.SignUp(e,t,i):r.userError="The username "+i+" is alread taken."}):r.userError="Invalid username: Username can only contain letters, numbers, and underscores and must be between 3 and 15 characters."})()}}u0.\u0275fac=function(e){return new(e||u0)(u.Y36(Ei),u.Y36(Is))},u0.\u0275cmp=u.Xpm({type:u0,selectors:[["app-signup"]],decls:25,vars:2,consts:[[1,"signup-container"],[1,"email"],[1,"input"],[1,"emailInput"],["userEmail",""],[1,"password"],[1,"passwordInput",3,"type"],["userPassword",""],[1,"show",3,"click"],[1,"username"],[1,"usernameInput"],["userName",""],[1,"username-error"],[1,"signupButton",3,"click"]],template:function(e,t){if(1&e){const i=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"label"),u._uU(3,"Email"),u.qZA(),u.TgZ(4,"div",2),u._UZ(5,"input",3,4),u.qZA()(),u.TgZ(7,"div",5)(8,"label"),u._uU(9,"Password"),u.qZA(),u.TgZ(10,"div",2),u._UZ(11,"input",6,7),u.TgZ(13,"div",8),u.NdJ("click",function(){return t.toggle()}),u._uU(14,"Show"),u.qZA()()(),u.TgZ(15,"div",9)(16,"label"),u._uU(17,"Username"),u.qZA(),u.TgZ(18,"div",2),u._UZ(19,"input",10,11),u.TgZ(21,"div",12),u._uU(22),u.qZA()()(),u.TgZ(23,"div",13),u.NdJ("click",function(){u.CHM(i);const o=u.MAs(6),c=u.MAs(12),p=u.MAs(20);return u.KtG(t.signUp(o.value,c.value,p.value))}),u._uU(24," Create Account "),u.qZA()()}2&e&&(u.xp6(11),u.s9C("type",!1===t.showPassword?"password":"text"),u.xp6(11),u.Oqu(t.userError))},styles:[".signup-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin:0 auto}.show[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;cursor:pointer}.signupButton[_ngcontent-%COMP%]{width:450px;height:55px;background-color:#000;color:#fff;border-radius:9999px;cursor:pointer;display:flex;justify-content:center;align-items:center;font-size:20px;margin-bottom:15px}.emailInput[_ngcontent-%COMP%], .passwordInput[_ngcontent-%COMP%], .usernameInput[_ngcontent-%COMP%]{width:450px;height:45px;font-size:17px;outline:none}.email[_ngcontent-%COMP%], .password[_ngcontent-%COMP%], .username[_ngcontent-%COMP%]{padding-bottom:15px}.username-error[_ngcontent-%COMP%]{color:red;width:450px}"]});class Ll{constructor(e,t){this.afs=e,this.modalService=t,this.admins=[],this.owners=[],this.afs.collection("roles").doc("admin").ref.get().then(i=>{this.doc=i.data(),i&&(this.admins=this.doc.admins)}),this.afs.collection("roles").doc("owner").ref.get().then(i=>{this.doc=i.data(),i&&(this.owners=this.doc.owners)})}addAdmin(e){this.afs.collection("roles").doc("admin").update({admins:Xf(e)}),this.modalService.close()}removeAdmin(e){this.afs.collection("roles").doc("admin").update({admins:eh(e)}),this.modalService.close()}}Ll.\u0275fac=function(e){return new(e||Ll)(u.LFG(Is),u.LFG(xi))},Ll.\u0275prov=u.Yz7({token:Ll,factory:Ll.\u0275fac,providedIn:"root"});class Co{constructor(e){this.afs=e}UserFromUID(e){var t=this;return(0,Ce.Z)(function*(){return yield Promise.all([t.afs.collection("users").doc(e).ref.get().then(i=>{t.userData=i.data()}),t.afs.collection("profiles").doc(e).ref.get().then(i=>{t.profileData=i.data()})]),{...t.userData,...t.profileData}})()}}Co.\u0275fac=function(e){return new(e||Co)(u.LFG(Is))},Co.\u0275prov=u.Yz7({token:Co,factory:Co.\u0275fac,providedIn:"root"});class KC{constructor(e,t,i){var r=this;this.authService=e,this.getUserService=t,this.afAuth=i,this.userData={},this.afAuth.authState.subscribe(function(){var o=(0,Ce.Z)(function*(c){c&&(r.userData=yield r.getUserService.UserFromUID(c.uid))});return function(c){return o.apply(this,arguments)}}())}}KC.\u0275fac=function(e){return new(e||KC)(u.Y36(Ei),u.Y36(Co),u.Y36(Cl))},KC.\u0275cmp=u.Xpm({type:KC,selectors:[["app-account"]],decls:11,vars:3,consts:[[1,"account-container"],[1,"profilePicture"],[3,"src"],[1,"accountName"],[1,"profileName"],[1,"username"],[1,"logout",3,"click"],[1,"icon-container"],["src","assets/icons/logout.svg","alt","logout icon",1,"logout-icon"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"img",2),u.qZA(),u.TgZ(3,"div",3)(4,"div",4),u._uU(5),u.qZA(),u.TgZ(6,"div",5),u._uU(7),u.qZA()(),u.TgZ(8,"div",6),u.NdJ("click",function(){return t.authService.SignOut()}),u.TgZ(9,"div",7),u._UZ(10,"img",8),u.qZA()()()),2&e&&(u.xp6(2),u.s9C("src",t.authService.userData.photoURL,u.LSH),u.xp6(3),u.Oqu(t.userData.profileName),u.xp6(2),u.hij("@",t.authService.userData.displayName,""))},styles:[".account-container[_ngcontent-%COMP%]{width:250px;display:flex}.profilePicture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:5px;border-radius:50%}.logout[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;margin-left:auto;margin-right:0}.icon-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:5px;border-radius:50%}.icon-container[_ngcontent-%COMP%]:hover{background-color:var(--psGrey)}.logout-icon[_ngcontent-%COMP%]{height:25px;width:25px}"]});const I9=function(){return["feed"]};function rue(n,e){1&n&&(u.TgZ(0,"div",6)(1,"li",7),u._UZ(2,"img",12),u.TgZ(3,"a",9),u._uU(4,"Home"),u.qZA()()()),2&n&&(u.xp6(1),u.Q6J("routerLink",u.DdM(2,I9)),u.xp6(2),u.Q6J("routerLink",u.DdM(3,I9)))}const T9=function(){return["bookmarks"]};function sue(n,e){1&n&&(u.TgZ(0,"div",6)(1,"li",7),u._UZ(2,"img",13),u.TgZ(3,"a",9),u._uU(4,"Bookmarks"),u.qZA()()()),2&n&&(u.xp6(1),u.Q6J("routerLink",u.DdM(2,T9)),u.xp6(2),u.Q6J("routerLink",u.DdM(3,T9)))}const S9=function(n){return[n]};function oue(n,e){if(1&n&&(u.TgZ(0,"div",6)(1,"li",7),u._UZ(2,"img",14),u.TgZ(3,"a",9),u._uU(4,"Profile"),u.qZA()()()),2&n){const t=e.ngIf;u.xp6(1),u.Q6J("routerLink",u.VKq(2,S9,t.displayName)),u.xp6(2),u.Q6J("routerLink",u.VKq(4,S9,t.displayName))}}const D9=function(){return["admin"]};function aue(n,e){1&n&&(u.TgZ(0,"div",6)(1,"li",7),u._UZ(2,"img",15),u.TgZ(3,"a",9),u._uU(4,"Admin"),u.qZA()()()),2&n&&(u.xp6(1),u.Q6J("routerLink",u.DdM(2,D9)),u.xp6(2),u.Q6J("routerLink",u.DdM(3,D9)))}const A9=function(){return["settings"]};function lue(n,e){1&n&&(u.TgZ(0,"div",6)(1,"li",7),u._UZ(2,"img",16),u.TgZ(3,"a",9),u._uU(4,"Settings"),u.qZA()()()),2&n&&(u.xp6(1),u.Q6J("routerLink",u.DdM(2,A9)),u.xp6(2),u.Q6J("routerLink",u.DdM(3,A9)))}function uue(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",17),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.modalService.open("post"))}),u._uU(1," Post "),u.qZA()}}function cue(n,e){1&n&&(u.TgZ(0,"div",18),u._UZ(1,"app-account"),u.qZA())}const M9=function(){return["search"]};class c0{constructor(e,t,i){this.authService=e,this.modalService=t,this.adminService=i}}c0.\u0275fac=function(e){return new(e||c0)(u.Y36(Ei),u.Y36(xi),u.Y36(Ll))},c0.\u0275cmp=u.Xpm({type:c0,selectors:[["app-navigation"]],decls:18,vars:11,consts:[[1,"nav-container"],[1,"site-header"],["src","assets/icons/logo.svg","alt","logo",1,"logo"],[1,"site-nav"],[1,"nav-ul"],["class","li-container",4,"ngIf"],[1,"li-container"],[1,"nav-li",3,"routerLink"],["src","assets/icons/search.svg","alt","search icon",1,"nav-icons"],[1,"nav-a",3,"routerLink"],["class","post-button",3,"click",4,"ngIf"],["class","account",4,"ngIf"],["src","assets/icons/home.svg","alt","home icon",1,"nav-icons"],["src","assets/icons/bookmark.svg","alt","bookmark icon",1,"nav-icons"],["src","assets/icons/user.svg","alt","user icon",1,"nav-icons"],["src","assets/icons/admin.svg","alt","admin icon",1,"nav-icons"],["src","assets/icons/gear.svg","alt","gear icon",1,"nav-icons"],[1,"post-button",3,"click"],[1,"account"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"img",2),u._uU(3," Project Social "),u.qZA(),u.TgZ(4,"nav",3)(5,"ul",4),u.YNc(6,rue,5,4,"div",5),u.TgZ(7,"div",6)(8,"li",7),u._UZ(9,"img",8),u.TgZ(10,"a",9),u._uU(11,"Search"),u.qZA()()(),u.YNc(12,sue,5,4,"div",5),u.YNc(13,oue,5,6,"div",5),u.YNc(14,aue,5,4,"div",5),u.YNc(15,lue,5,4,"div",5),u.qZA()(),u.YNc(16,uue,2,0,"div",10),u.YNc(17,cue,2,0,"div",11),u.qZA()),2&e&&(u.xp6(6),u.Q6J("ngIf",t.authService.userData),u.xp6(2),u.Q6J("routerLink",u.DdM(9,M9)),u.xp6(2),u.Q6J("routerLink",u.DdM(10,M9)),u.xp6(2),u.Q6J("ngIf",t.authService.userData),u.xp6(1),u.Q6J("ngIf",t.authService.userData),u.xp6(1),u.Q6J("ngIf",t.authService.userData&&(-1!=t.adminService.admins.indexOf(t.authService.userData.uid)||-1!=t.adminService.owners.indexOf(t.authService.userData.uid))),u.xp6(1),u.Q6J("ngIf",t.authService.userData),u.xp6(1),u.Q6J("ngIf",t.authService.userData),u.xp6(1),u.Q6J("ngIf",t.authService.userData&&t.authService.userData.uid))},dependencies:[qt,bu,KC],styles:[".nav-container[_ngcontent-%COMP%]{height:100vh;width:-moz-fit-content;width:fit-content;display:block;float:right;margin-right:5px;font-weight:700}.site-header[_ngcontent-%COMP%]{height:50px;font-size:25px;display:flex;align-items:center}.logo[_ngcontent-%COMP%]{width:40px;height:40px;padding-right:3px;filter:invert(40%) sepia(36%) saturate(3972%) hue-rotate(151deg) brightness(91%) contrast(101%)}.nav-ul[_ngcontent-%COMP%]{padding:0;margin:20px 0}.li-container[_ngcontent-%COMP%]{width:100%}.nav-li[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 10px;width:-moz-fit-content;width:fit-content;list-style:none;margin:10px 0;cursor:pointer;border-radius:9999px}.nav-li[_ngcontent-%COMP%]:hover{background-color:var(--psGrey)}.nav-a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}nav[_ngcontent-%COMP%]{font-size:35px}.post-button[_ngcontent-%COMP%]{display:flex;align-items:center;width:200px;height:50px;justify-content:center;color:#fff;border-radius:9999px;background-color:var(--psTeal);font-weight:bolder;font-size:25px;cursor:pointer}.account[_ngcontent-%COMP%]{position:absolute;bottom:0;margin-bottom:20px}.nav-icons[_ngcontent-%COMP%]{height:32px;padding-right:5px}"]});const due=function(n){return["/",n]};function hue(n,e){if(1&n&&(u.TgZ(0,"div",6)(1,"div",7)(2,"div",8),u._UZ(3,"img",9),u.qZA()(),u.TgZ(4,"div",10)(5,"div",11)(6,"b"),u._uU(7),u.qZA(),u._uU(8),u.qZA(),u.TgZ(9,"div",12),u._uU(10),u.qZA()()()),2&n){const t=e.$implicit;u.Q6J("routerLink",u.VKq(5,due,t.displayName)),u.xp6(3),u.s9C("src",t.photoURL,u.LSH),u.xp6(4),u.Oqu(t.profileName),u.xp6(1),u.hij(" @",t.displayName," "),u.xp6(2),u.hij(" ",t.bio," ")}}function fue(n,e){if(1&n&&(u.TgZ(0,"div",13),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.hij(' No results found from "',t.input,'"\n')}}class Gm{constructor(e,t){this.afs=e,this.getUserService=t,this.searchText="",this.results=[],this.noResults=!1,this.input=""}search(){var e=this;this.input=this.searchText;var t=this.searchText.replace(/\W/g,"").toLocaleLowerCase();this.results=[],this.noResults=!1,t&&this.afs.collection("users").ref.where("lowerDN",">=",t).where("lowerDN","<=",t+"~").get().then(i=>{i.size>0?i.forEach(function(){var r=(0,Ce.Z)(function*(o){let c=o.data();e.results.push(yield e.getUserService.UserFromUID(c.uid))});return function(o){return r.apply(this,arguments)}}()):this.noResults=!0})}}Gm.\u0275fac=function(e){return new(e||Gm)(u.Y36(Is),u.Y36(Co))},Gm.\u0275cmp=u.Xpm({type:Gm,selectors:[["app-search"]],decls:6,vars:3,consts:[[1,"searchbar-container"],[1,"searchbar"],["placeholder","Search Profiles",1,"search-input",3,"ngModel","ngModelChange","keyup.enter"],[1,"results-container"],["class","results",3,"routerLink",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"results",3,"routerLink"],[1,"left-side"],[1,"result-pfp"],[3,"src"],[1,"right-side"],[1,"result-username"],[1,"result-bio"],[1,"no-results"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"input",2),u.NdJ("ngModelChange",function(r){return t.searchText=r})("keyup.enter",function(){return t.search()}),u.qZA()()(),u.TgZ(3,"div",3),u.YNc(4,hue,11,7,"div",4),u.qZA(),u.YNc(5,fue,2,1,"div",5)),2&e&&(u.xp6(2),u.Q6J("ngModel",t.searchText),u.xp6(2),u.Q6J("ngForOf",t.results),u.xp6(1),u.Q6J("ngIf",t.noResults))},dependencies:[On,qt,ef,cy,sf,bu],styles:[".searchbar-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:50px;padding:0;border-bottom:1px solid var(--psBorderColor)}.searchbar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:550px;height:40px;background-color:var(--psGrey);border-radius:9999px}.search-input[_ngcontent-%COMP%]{width:450px;height:35px;font-size:15px;outline:none;border:none;background-color:var(--psGrey)}.results[_ngcontent-%COMP%]{display:flex;height:60px;border-bottom:1px solid var(--psBorderColor)}.results[_ngcontent-%COMP%]:hover{background-color:#f7f7f7;cursor:pointer}.result-pfp[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin:3px}"]});const pue=[{path:"",component:Gm},{path:"login",component:l0},{path:"signup",component:u0},{path:"navigation",component:c0}];class d0{}d0.\u0275fac=function(e){return new(e||d0)},d0.\u0275mod=u.oAB({type:d0}),d0.\u0275inj=u.cJS({imports:[SO.forRoot(pue),SO]});class YC{constructor(e){this.modalService=e}}YC.\u0275fac=function(e){return new(e||YC)(u.Y36(xi))},YC.\u0275cmp=u.Xpm({type:YC,selectors:[["app-prompt"]],decls:10,vars:0,consts:[[1,"prompt-container"],[1,"prompt-header"],[1,"button-container"],[1,"buttons",3,"click"],[1,"login"],[1,"create"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u._uU(2," Have an account? "),u.qZA(),u.TgZ(3,"div",2)(4,"div",3),u.NdJ("click",function(){return t.modalService.open("login")}),u.TgZ(5,"div",4),u._uU(6," Login "),u.qZA()(),u.TgZ(7,"div",3),u.NdJ("click",function(){return t.modalService.open("signup")}),u.TgZ(8,"div",5),u._uU(9," Create Account "),u.qZA()()()())},styles:[".prompt-container[_ngcontent-%COMP%]{margin:5px 0;padding:5px 0;width:350px;background-color:var(--psGrey);border-radius:10px}.prompt-header[_ngcontent-%COMP%]{font-weight:700;font-size:20px;padding-left:5px}.button-container[_ngcontent-%COMP%]{width:300px;margin:0 auto;cursor:pointer}.buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:40px;border-radius:9999px;background-color:#000;color:#fff;margin:3px 0;font-size:17px;font-weight:bolder}.buttons[_ngcontent-%COMP%]:hover{background-color:#272c30}"]});class dp{constructor(e,t,i,r){this.afs=e,this.authService=t,this.modalService=i,this.getUserService=r,this.dbPath="/posts",this.arrayOfPosts=[],this.post={},this.user={},this.noFeed=!1,this.noFollowing=!1,this.postsRef=e.collection(this.dbPath)}getAll(){return this.postsRef}getPosts(){var e=this;return(0,Ce.Z)(function*(){e.afs.collection(e.dbPath).get().subscribe(t=>{t.docs.forEach(i=>{e.arrayOfPosts.push(i.data())})})})()}getFeed(){var e=this;return(0,Ce.Z)(function*(){e.noFeed=!1,e.noFollowing=!1,e.user=yield e.getUserService.UserFromUID(e.authService.userData.uid),e.user.following.length>0?e.afs.collection("posts").ref.where("uid","in",e.user.following.splice(0,10)).orderBy("date","desc").get().then(t=>{t.size>0?t.forEach(function(){var i=(0,Ce.Z)(function*(r){e.arrayOfPosts.push(r.data())});return function(r){return i.apply(this,arguments)}}()):e.noFeed=!0}):e.noFollowing=!0})()}makePost(e){var t=this;return(0,Ce.Z)(function*(){return t.post={pid:"",uid:t.authService.userData.uid,date:new Date,content:e,likes:[],dislikes:[],replies:[]},t.afs.collection(t.dbPath).add({...t.post}).then(i=>{i.set({pid:i.id},{merge:!0}),t.afs.collection("profiles").doc(t.authService.userData.uid).update({posts:Xf(i.id)}),t.modalService.close()}).catch(i=>{console.error("Error",i)})})()}}function gue(n,e){1&n&&u._UZ(0,"img",11),2&n&&u.s9C("src",e.ngIf.photoURL,u.LSH)}dp.\u0275fac=function(e){return new(e||dp)(u.LFG(Is),u.LFG(Ei),u.LFG(xi),u.LFG(Co))},dp.\u0275prov=u.Yz7({token:dp,factory:dp.\u0275fac,providedIn:"root"});const mue=function(){return{color:"red"}},x9=function(){return{}},_ue=function(n){return{transform:n}},yue=function(){return{opacity:"0.5",cursor:"default"}};class QC{constructor(e,t){this.authService=e,this.postService=t,this.count=0,this.remaining=255,this.degree=45}charCount(e){this.count=e.length,this.remaining=255-Number(this.count),Number(this.count)<=255&&(this.degree=45+.7*Number(this.count))}}QC.\u0275fac=function(e){return new(e||QC)(u.Y36(Ei),u.Y36(dp))},QC.\u0275cmp=u.Xpm({type:QC,selectors:[["app-post"]],decls:14,vars:11,consts:[[1,"post-container"],[1,"top"],[1,"profilePicture"],[3,"src",4,"ngIf"],["role","textbox","contenteditable","true",1,"content",3,"input"],["content",""],[1,"bottom"],[1,"progress",3,"ngStyle"],[1,"barOverflow"],[1,"bar",3,"ngStyle"],[1,"postButton",3,"ngStyle","click"],[3,"src"]],template:function(e,t){if(1&e){const i=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"div",2),u.YNc(3,gue,1,1,"img",3),u.qZA(),u.TgZ(4,"span",4,5),u.NdJ("input",function(){u.CHM(i);const o=u.MAs(5);return u.KtG(t.charCount(o.innerText))}),u.qZA()(),u.TgZ(6,"div",6)(7,"div",7)(8,"div",8),u._UZ(9,"div",9),u.qZA(),u.TgZ(10,"span"),u._uU(11),u.qZA()(),u.TgZ(12,"div",10),u.NdJ("click",function(){u.CHM(i);const o=u.MAs(5);return u.KtG(t.remaining<0||0==t.count?null:t.postService.makePost(o.innerText))}),u._uU(13," Post "),u.qZA()()()}2&e&&(u.xp6(3),u.Q6J("ngIf",t.authService.userData),u.xp6(4),u.Q6J("ngStyle",t.remaining<0?u.DdM(5,mue):u.DdM(6,x9)),u.xp6(2),u.Q6J("ngStyle",u.VKq(7,_ue,"rotate("+t.degree+"deg)")),u.xp6(2),u.Oqu(t.remaining),u.xp6(1),u.Q6J("ngStyle",t.remaining<0||0==t.count?u.DdM(9,yue):u.DdM(10,x9)))},dependencies:[qt,Io],styles:['.profilePicture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;margin-left:5px}.top[_ngcontent-%COMP%]{display:flex}.content[_ngcontent-%COMP%]{display:block;margin:0 auto;width:480px;overflow:hidden;resize:none;min-height:100px;line-height:20px;outline:none;max-height:400px;overflow-y:scroll;word-wrap:break-word;border-bottom:1px solid gainsboro;padding-bottom:5px}.content[contenteditable][_ngcontent-%COMP%]:empty:before{content:"Write something...";color:gray}input[type=text][_ngcontent-%COMP%]{word-wrap:break-word;word-break:break-all;height:80px}.postButton[_ngcontent-%COMP%]{height:35px;cursor:pointer;width:55px;border-radius:9999px;background-color:var(--psTeal);color:#fff;font-size:15px;display:flex;justify-content:center;align-items:center;font-weight:700;float:right;margin:5px}.progress[_ngcontent-%COMP%]{position:relative;padding-left:56px;margin:4px;float:left;text-align:center}.barOverflow[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:45px;height:22px;margin-bottom:-14px}.bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:45px;height:45px;border-radius:50%;box-sizing:border-box;border:5px solid #eee;border-bottom-color:var(--psTeal);border-right-color:var(--psTeal)}']});class Hc{constructor(e,t,i){this.afs=e,this.getUserService=t,this.authService=i,this.noUser=!1,this.user={},this.posts=[],this.replies=[],this.repliesData=[],this.message=""}getProfile(e){var t=this;return(0,Ce.Z)(function*(){t.afs.collection("users",i=>i.where("lowerDN","==",e.toLocaleLowerCase())).get().subscribe(i=>{i.forEach(r=>t.userData=r.data()),null!=t.userData?t.afs.collection("profiles").doc(t.userData.uid).ref.get().then(r=>{t.profileData=r.data(),t.user={...t.userData,...t.profileData},t.user.joinDate=new Date(t.user.joinDate.toString()).toLocaleDateString("en-US",{year:"numeric",month:"long"}),t.getPosts()}):t.noUser=!0})})()}getPosts(){var e=this;return(0,Ce.Z)(function*(){if(null!=e.user.uid)switch(e.posts=[],e.replies=[],e.repliesData=[],e.message="",window.location.pathname.split("/")[3]){case void 0:e.afs.collection("posts").ref.where("uid","==",e.user.uid).orderBy("date","desc").get().then(t=>{t.size>0?t.forEach(i=>{e.posts.push(i.data())}):e.message=e.user.displayName+" has not made any posts."});break;case"replies":e.afs.collection("replies").ref.where("uid","==",e.userData.uid).orderBy("date","desc").get().then(t=>{t.size>0?(t.forEach(i=>{let r=i.data();r.date=new Date(1e3*r.date.seconds).toLocaleString("en-US",{hour:"2-digit",minute:"numeric",year:"numeric",month:"short",day:"numeric"}),e.replies.push(r)}),e.replies.forEach(i=>{e.afs.collection("posts").doc(i.pid).ref.get().then(function(){var r=(0,Ce.Z)(function*(o){var c=o.data();e.repliesData.push({reply:i,...yield e.getUserService.UserFromUID(c.uid)})});return function(o){return r.apply(this,arguments)}}())})):e.message=e.user.displayName+" has not made any replies."});break;case"likes":e.getLDPost("likes");break;case"dislikes":e.getLDPost("dislikes")}})()}getLDPost(e){this.afs.collection(e).ref.where("uid","==",this.user.uid).orderBy("date","desc").get().then(t=>{t.size>0?t.forEach(i=>{let r=i.data();this.afs.collection("posts").doc(r.pid).ref.get().then(o=>{this.posts.push(o.data())})}):this.message=this.user.displayName+" has not "+e.replace(/.$/,"d")+" any posts."})}follow(){this.afs.collection("profiles").doc(this.userData.uid).update({followers:Xf(this.authService.userData.uid)}),this.afs.collection("profiles").doc(this.authService.userData.uid).update({following:Xf(this.userData.uid)}),this.user.followers.push(this.authService.userData.uid)}unfollow(){this.afs.collection("profiles").doc(this.userData.uid).update({followers:eh(this.authService.userData.uid)}),this.afs.collection("profiles").doc(this.authService.userData.uid).update({following:eh(this.userData.uid)}),this.user.followers.splice(this.user.followers.indexOf(this.authService.userData.uid),1)}}Hc.\u0275fac=function(e){return new(e||Hc)(u.LFG(Is),u.LFG(Co),u.LFG(Ei))},Hc.\u0275prov=u.Yz7({token:Hc,factory:Hc.\u0275fac,providedIn:"root"});class qm{constructor(){this.show=!1}ngOnInit(){this.media="https://firebasestorage.googleapis.com/v0/b/project-social-923a2.appspot.com/o/"+this.media}}function vue(n,e){if(1&n&&u._UZ(0,"img",20),2&n){const t=u.oxw();u.s9C("src",t.pfp,u.LSH)}}qm.\u0275fac=function(e){return new(e||qm)},qm.\u0275cmp=u.Xpm({type:qm,selectors:[["app-media"]],inputs:{media:"media"},decls:3,vars:1,consts:[[1,"media-container"],[1,"media"],[1,"media-img",3,"src"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"img",2),u.qZA()()),2&e&&(u.xp6(2),u.s9C("src",t.media,u.LSH))},styles:[".media-container[_ngcontent-%COMP%]{height:250px;display:flex;justify-content:center;align-items:center}.media-img[_ngcontent-%COMP%]{width:100%;max-width:550px;max-height:240px;object-fit:contain}"]});class JC{constructor(e,t,i,r,o,c){this.profileService=e,this.afs=t,this.authService=i,this.modalService=r,this.storage=o,this.media=c,this.user={},this.profileName="",this.bio="",this.location="",this.link=""}ngOnInit(){var e=this;return(0,Ce.Z)(function*(){e.user=e.profileService.user,e.profileName=e.user.profileName,e.bio=e.user.bio,e.location=e.user.location,e.link=e.user.link,e.pfp=e.user.photoURL,e.banner=e.user.bannerURL})()}ngOnDestroy(){this.user={},this.profileName="",this.bio="",this.location="",this.link=""}upload(e,t){const r=e.target.files;if(r[0]){var o=new FileReader;o.readAsDataURL(r[0]),"image"==r[0].type.split("/")[0]&&(o.onload=c=>{"pfp"==t&&(this.pfp=o.result,this.pfpFile=r[0]),"banner"==t&&(this.banner=o.result,this.bannerFile=r[0])})}}save(){if(this.pfp!=this.user.photoURL&&this.pfpFile){const e="profile-pictures/"+this.user.uid,t=this.storage.storage.ref(e);this.storage.upload(e,this.pfpFile).then(()=>{t.getDownloadURL().then(i=>{this.authService.UpdatePFP(i),this.afs.collection("users").doc(this.authService.userData.uid).update({photoURL:i}),this.profileService.user.photoURL=i})})}if(this.banner!=this.user.bannerURL&&this.bannerFile){const e="profile-banners/"+this.user.uid,t=this.storage.storage.ref(e);this.storage.upload(e,this.bannerFile).then(()=>{t.getDownloadURL().then(i=>{this.afs.collection("profiles").doc(this.authService.userData.uid).update({bannerURL:i}),this.profileService.user.bannerURL=i})})}(this.profileName!=this.user.profileName||this.bio!=this.user.bio||this.location!=this.user.location||this.link!=this.user.link)&&(this.afs.collection("profiles").doc(this.authService.userData.uid).update({profileName:this.profileName,bio:this.bio,location:this.location,link:this.link.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"")}),this.profileService.user.profileName=this.profileName,this.profileService.user.bio=this.bio,this.profileService.user.location=this.location,this.profileService.user.link=this.link.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"")),this.modalService.close()}}JC.\u0275fac=function(e){return new(e||JC)(u.Y36(Hc),u.Y36(Is),u.Y36(Ei),u.Y36(xi),u.Y36(n4),u.Y36(qm))},JC.\u0275cmp=u.Xpm({type:JC,selectors:[["app-edit"]],decls:34,vars:6,consts:[[1,"edit-container"],[1,"edit-top"],[1,"edit-pfp"],["class","edit-pfp-img",3,"src",4,"ngIf"],[1,"edit-media"],["for","pfpFileInput"],["src","assets/icons/media.svg","alt","media icon",1,"media-icon"],["id","pfpFileInput","accept","image/jpeg,image/png,image/webp","tabindex","-1","type","file",1,"media-input",3,"change"],[1,"edit-banner"],[1,"edit-banner-img",3,"src"],["for","bannerFileInput"],["id","bannerFileInput","accept","image/jpeg,image/png,image/webp","tabindex","-1","type","file",1,"media-input",3,"change"],[1,"edit-bottom"],[1,"edit-name"],[1,"edit-input",3,"ngModel","ngModelChange"],[1,"edit-bio"],[1,"edit-location"],[1,"edit-link"],[1,"edit-footer"],[1,"edit-save",3,"click"],[1,"edit-pfp-img",3,"src"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2),u.YNc(3,vue,1,1,"img",3),u.TgZ(4,"div",4)(5,"label",5),u._UZ(6,"img",6),u.qZA(),u.TgZ(7,"input",7),u.NdJ("change",function(r){return t.upload(r,"pfp")}),u.qZA()()(),u.TgZ(8,"div",8),u._UZ(9,"img",9),u.TgZ(10,"div",4)(11,"label",10),u._UZ(12,"img",6),u.qZA(),u.TgZ(13,"input",11),u.NdJ("change",function(r){return t.upload(r,"banner")}),u.qZA()()()(),u.TgZ(14,"div",12)(15,"div",13)(16,"label"),u._uU(17,"Name"),u.qZA(),u.TgZ(18,"input",14),u.NdJ("ngModelChange",function(r){return t.profileName=r}),u.qZA()(),u.TgZ(19,"div",15)(20,"label"),u._uU(21,"Bio"),u.qZA(),u.TgZ(22,"input",14),u.NdJ("ngModelChange",function(r){return t.bio=r}),u.qZA()(),u.TgZ(23,"div",16)(24,"label"),u._uU(25,"Location"),u.qZA(),u.TgZ(26,"input",14),u.NdJ("ngModelChange",function(r){return t.location=r}),u.qZA()(),u.TgZ(27,"div",17)(28,"label"),u._uU(29,"Link"),u.qZA(),u.TgZ(30,"input",14),u.NdJ("ngModelChange",function(r){return t.link=r}),u.qZA()()(),u.TgZ(31,"div",18)(32,"div",19),u.NdJ("click",function(){return t.save()}),u._uU(33," Save "),u.qZA()()()),2&e&&(u.xp6(3),u.Q6J("ngIf",t.user.photoURL),u.xp6(6),u.s9C("src",t.banner,u.LSH),u.xp6(9),u.Q6J("ngModel",t.profileName),u.xp6(4),u.Q6J("ngModel",t.bio),u.xp6(4),u.Q6J("ngModel",t.location),u.xp6(4),u.Q6J("ngModel",t.link))},dependencies:[qt,ef,cy,sf],styles:[".edit-container[_ngcontent-%COMP%]{width:100%}.edit-top[_ngcontent-%COMP%]{display:flex;height:130px;margin-bottom:3px}.edit-media[_ngcontent-%COMP%]{z-index:10;position:absolute;cursor:pointer;opacity:.5;border-radius:50%;padding:3px}.edit-media[_ngcontent-%COMP%]:hover{opacity:1;background-color:#64646480}.media-icon[_ngcontent-%COMP%]{width:35px;cursor:pointer}.media-input[_ngcontent-%COMP%]{display:none;cursor:pointer}.edit-banner[_ngcontent-%COMP%]{width:425px;background-color:var(--psGrey);display:flex;align-items:center;justify-content:center}.edit-banner-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.edit-pfp[_ngcontent-%COMP%]{width:125px;display:flex;align-items:center;justify-content:center}.edit-pfp-img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:contain;border-radius:50%}.edit-bottom[_ngcontent-%COMP%]{width:95%;margin-left:auto;margin-right:auto}.edit-bottom[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:3px}.edit-input[_ngcontent-%COMP%]{width:98%;height:50px;font-size:15px;outline:none}.edit-save[_ngcontent-%COMP%]{height:35px;cursor:pointer;width:55px;border-radius:9999px;background-color:var(--psTeal);color:#fff;font-size:15px;display:flex;justify-content:center;align-items:center;font-weight:700;float:right;margin:5px}"]});const wue=function(n){return["/",n]};function bue(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",2),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.modalService.close())}),u.TgZ(1,"div",3)(2,"div",4),u._UZ(3,"img",5),u.qZA()(),u.TgZ(4,"div",6)(5,"div",7)(6,"b"),u._uU(7),u.qZA(),u._uU(8),u.qZA(),u.TgZ(9,"div",8),u._uU(10),u.qZA()()()}if(2&n){const t=e.$implicit;u.Q6J("routerLink",u.VKq(5,wue,t.displayName)),u.xp6(3),u.s9C("src",t.photoURL,u.LSH),u.xp6(4),u.Oqu(t.profileName),u.xp6(1),u.hij(" @",t.displayName," "),u.xp6(2),u.hij(" ",t.bio," ")}}class XC{constructor(e,t,i){this.profileService=e,this.getUserService=t,this.modalService=i,this.userList=[],this.list=""}ngOnInit(){var e=this;"followers"==this.list?this.profileService.user.followers.forEach(function(){var t=(0,Ce.Z)(function*(i){e.userList.push(yield e.getUserService.UserFromUID(i))});return function(i){return t.apply(this,arguments)}}()):"following"==this.list&&this.profileService.user.following.forEach(function(){var t=(0,Ce.Z)(function*(i){e.userList.push(yield e.getUserService.UserFromUID(i))});return function(i){return t.apply(this,arguments)}}())}}function Eue(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",5)(1,"label"),u._uU(2,"Update Email"),u.qZA(),u.TgZ(3,"div",6),u._UZ(4,"input",7,8),u.qZA(),u.TgZ(6,"label"),u._uU(7,"Password"),u.qZA(),u.TgZ(8,"div",6),u._UZ(9,"input",9,10),u.TgZ(11,"div",11),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.toggle())}),u._uU(12,"Show"),u.qZA()(),u.TgZ(13,"div",12),u.NdJ("click",function(){u.CHM(t);const r=u.MAs(5),o=u.MAs(10),c=u.oxw();return u.KtG(c.authService.UpdateEmail(r.value,o.value))}),u._uU(14," Save Email "),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(9),u.s9C("type",!1===t.showPassword?"password":"text")}}function Cue(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",13)(1,"label"),u._uU(2,"Current Password"),u.qZA(),u.TgZ(3,"div",6),u._UZ(4,"input",9,10),u.TgZ(6,"div",11),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.toggle())}),u._uU(7,"Show"),u.qZA()(),u.TgZ(8,"label"),u._uU(9,"New Password"),u.qZA(),u.TgZ(10,"div",6),u._UZ(11,"input",9,14),u.TgZ(13,"div",11),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.toggleNew())}),u._uU(14,"Show"),u.qZA()(),u.TgZ(15,"div",12),u.NdJ("click",function(){u.CHM(t);const r=u.MAs(5),o=u.MAs(12),c=u.oxw();return u.KtG(c.authService.UpdatePassword(r.value,o.value))}),u._uU(16," Save Password "),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(4),u.s9C("type",!1===t.showPassword?"password":"text"),u.xp6(7),u.s9C("type",!1===t.showNewPassword?"password":"text")}}function Iue(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",15)(1,"label"),u._uU(2,"Update Username"),u.qZA(),u.TgZ(3,"div",6),u._UZ(4,"input",7,16),u.qZA(),u.TgZ(6,"label"),u._uU(7,"Password"),u.qZA(),u.TgZ(8,"div",6),u._UZ(9,"input",9,10),u.TgZ(11,"div",11),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.toggle())}),u._uU(12,"Show"),u.qZA()(),u.TgZ(13,"div",12),u.NdJ("click",function(){u.CHM(t);const r=u.MAs(5),o=u.MAs(10),c=u.oxw();return u.KtG(c.authService.UpdateUserName(r.value,o.value))}),u._uU(14," Save Username "),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(9),u.s9C("type",!1===t.showPassword?"password":"text")}}XC.\u0275fac=function(e){return new(e||XC)(u.Y36(Hc),u.Y36(Co),u.Y36(xi))},XC.\u0275cmp=u.Xpm({type:XC,selectors:[["app-relations"]],inputs:{list:"list"},decls:2,vars:1,consts:[[1,"relations-container"],["class","relations-user",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"relations-user",3,"routerLink","click"],[1,"user-side"],[1,"user-pfp"],[3,"src"],[1,"left-side"],[1,"user-username"],[1,"user-bio"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.YNc(1,bue,11,7,"div",1),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngForOf",t.userList))},dependencies:[On,bu],styles:[".relations-container[_ngcontent-%COMP%]{height:500px;overflow:scroll}.relations-user[_ngcontent-%COMP%]{display:flex;height:60px;border-bottom:1px solid var(--psBorderColor)}.relations-user[_ngcontent-%COMP%]:hover{background-color:#f7f7f7;cursor:pointer}.user-pfp[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin:3px}"]});class eI{constructor(e){this.authService=e,this.showPassword=!1,this.showNewPassword=!1,this.updateSender=""}toggle(){this.showPassword=!this.showPassword}toggleNew(){this.showNewPassword=!this.showNewPassword}placeholder(e,t){}}eI.\u0275fac=function(e){return new(e||eI)(u.Y36(Ei))},eI.\u0275cmp=u.Xpm({type:eI,selectors:[["app-update"]],inputs:{updateSender:"updateSender"},decls:5,vars:4,consts:[[1,"update-container"],[3,"ngSwitch"],["class","update-form","id","email-form",4,"ngSwitchCase"],["class","update-form","id","password-form",4,"ngSwitchCase"],["class","update-form","id","username-form",4,"ngSwitchCase"],["id","email-form",1,"update-form"],[1,"input-container"],[1,"update-input"],["email",""],[1,"update-input",3,"type"],["password",""],[1,"show",3,"click"],[1,"updateButton",3,"click"],["id","password-form",1,"update-form"],["newpassword",""],["id","username-form",1,"update-form"],["username",""]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.ynx(1,1),u.YNc(2,Eue,15,1,"div",2),u.YNc(3,Cue,17,2,"div",3),u.YNc(4,Iue,15,1,"div",4),u.BQk(),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngSwitch",t.updateSender),u.xp6(1),u.Q6J("ngSwitchCase","email"),u.xp6(1),u.Q6J("ngSwitchCase","password"),u.xp6(1),u.Q6J("ngSwitchCase","username"))},dependencies:[ds,Ui],styles:[".update-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin:0 auto}.show[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;cursor:pointer}.updateButton[_ngcontent-%COMP%]{width:450px;height:55px;background-color:#000;color:#fff;border-radius:9999px;cursor:pointer;display:flex;justify-content:center;align-items:center;font-size:20px;margin-bottom:15px}.update-input[_ngcontent-%COMP%]{width:450px;height:45px;font-size:17px;outline:none}.input-container[_ngcontent-%COMP%]{padding-bottom:15px}"]});class tI{constructor(e){this.modalService=e}}function Tue(n,e){1&n&&u._UZ(0,"img",11),2&n&&u.s9C("src",e.ngIf.photoURL,u.LSH)}tI.\u0275fac=function(e){return new(e||tI)(u.Y36(xi))},tI.\u0275cmp=u.Xpm({type:tI,selectors:[["app-alert"]],decls:10,vars:0,consts:[[1,"alert-container"],[1,"alert-message"],[1,"button-container"],[1,"buttons",3,"click"],[1,"login"],[1,"create"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u._uU(2," You need an account do that. "),u.qZA(),u.TgZ(3,"div",2)(4,"div",3),u.NdJ("click",function(){return t.modalService.open("login")}),u.TgZ(5,"div",4),u._uU(6," Login "),u.qZA()(),u.TgZ(7,"div",3),u.NdJ("click",function(){return t.modalService.open("signup")}),u.TgZ(8,"div",5),u._uU(9," Create Account "),u.qZA()()()())},styles:[".alert-message[_ngcontent-%COMP%]{text-align:center;font-size:20px}.button-container[_ngcontent-%COMP%]{width:300px;margin:0 auto;cursor:pointer;padding-bottom:20px}.buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:40px;border-radius:9999px;background-color:#000;color:#fff;margin:3px 0;font-size:17px;font-weight:bolder}.buttons[_ngcontent-%COMP%]:hover{background-color:#272c30}"]});const Sue=function(){return{color:"red"}},k9=function(){return{}},Due=function(n){return{transform:n}},Aue=function(){return{opacity:"0.5",cursor:"default"}};class nI{constructor(e,t,i){this.authService=e,this.afs=t,this.modalService=i,this.dbPath="/replies",this.count=0,this.remaining=127,this.reply={},this.degree=45,this.pid=""}charCount(e){this.count=e.length,this.remaining=127-Number(this.count),Number(this.count)<=127&&(this.degree=45+1.42*Number(this.count))}makeReply(e){var t=this;return(0,Ce.Z)(function*(){return t.reply={rid:"",pid:t.pid,uid:t.authService.userData.uid,date:new Date,content:e},t.afs.collection(t.dbPath).add({...t.reply}).then(i=>{i.set({rid:i.id},{merge:!0}),t.afs.collection("posts").doc(t.pid).update({replies:Xf(i.id)}),t.modalService.close()}).catch(i=>{console.error("Error",i)})})()}}function Mue(n,e){if(1&n&&(u.TgZ(0,"div",3),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.hij(" ",t.message," ")}}nI.\u0275fac=function(e){return new(e||nI)(u.Y36(Ei),u.Y36(Is),u.Y36(xi))},nI.\u0275cmp=u.Xpm({type:nI,selectors:[["app-reply"]],inputs:{pid:"pid"},decls:14,vars:11,consts:[[1,"reply-container"],[1,"top"],[1,"profilePicture"],[3,"src",4,"ngIf"],["role","textbox","contenteditable","true",1,"content",3,"input"],["content",""],[1,"bottom"],[1,"progress",3,"ngStyle"],[1,"barOverflow"],[1,"bar",3,"ngStyle"],[1,"replyButton",3,"ngStyle","click"],[3,"src"]],template:function(e,t){if(1&e){const i=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"div",2),u.YNc(3,Tue,1,1,"img",3),u.qZA(),u.TgZ(4,"span",4,5),u.NdJ("input",function(){u.CHM(i);const o=u.MAs(5);return u.KtG(t.charCount(o.innerText))}),u.qZA()(),u.TgZ(6,"div",6)(7,"div",7)(8,"div",8),u._UZ(9,"div",9),u.qZA(),u.TgZ(10,"span"),u._uU(11),u.qZA()(),u.TgZ(12,"div",10),u.NdJ("click",function(){u.CHM(i);const o=u.MAs(5);return u.KtG(t.remaining<0||0==t.count?null:t.makeReply(o.innerText))}),u._uU(13," Reply "),u.qZA()()()}2&e&&(u.xp6(3),u.Q6J("ngIf",t.authService.userData),u.xp6(4),u.Q6J("ngStyle",t.remaining<0?u.DdM(5,Sue):u.DdM(6,k9)),u.xp6(2),u.Q6J("ngStyle",u.VKq(7,Due,"rotate("+t.degree+"deg)")),u.xp6(2),u.Oqu(t.remaining),u.xp6(1),u.Q6J("ngStyle",t.remaining<0||0==t.count?u.DdM(9,Aue):u.DdM(10,k9)))},dependencies:[qt,Io],styles:['.profilePicture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;margin-left:5px}.top[_ngcontent-%COMP%]{display:flex}.content[_ngcontent-%COMP%]{display:block;margin:0 auto;width:480px;overflow:hidden;resize:none;min-height:75px;line-height:20px;outline:none;max-height:400px;overflow-y:scroll;word-wrap:break-word;border-bottom:1px solid gainsboro;padding-bottom:5px}.content[contenteditable][_ngcontent-%COMP%]:empty:before{content:"Write a reply...";color:gray}input[type=text][_ngcontent-%COMP%]{word-wrap:break-word;word-break:break-all;height:80px}.replyButton[_ngcontent-%COMP%]{height:35px;cursor:pointer;width:55px;border-radius:9999px;background-color:var(--psTeal);color:#fff;font-size:15px;display:flex;justify-content:center;align-items:center;font-weight:700;float:right;margin:5px}.progress[_ngcontent-%COMP%]{position:relative;padding-left:56px;margin:4px;float:left;text-align:center}.barOverflow[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:45px;height:22px;margin-bottom:-14px}.bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:45px;height:45px;border-radius:50%;box-sizing:border-box;border:5px solid #eee;border-bottom-color:var(--psTeal);border-right-color:var(--psTeal)}']});const xue=function(n){return["/",n]};function kue(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",4),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.modalService.close())}),u.TgZ(1,"div",5)(2,"div",6),u._UZ(3,"img",7),u.qZA()(),u.TgZ(4,"div",8)(5,"div",9)(6,"b"),u._uU(7),u.qZA(),u._uU(8),u.qZA(),u.TgZ(9,"div",10),u._uU(10),u.qZA()()()}if(2&n){const t=e.$implicit;u.Q6J("routerLink",u.VKq(5,xue,t.displayName)),u.xp6(3),u.s9C("src",t.photoURL,u.LSH),u.xp6(4),u.Oqu(t.profileName),u.xp6(1),u.hij(" @",t.displayName," "),u.xp6(2),u.hij(" ",t.bio," ")}}class iI{constructor(e,t,i){this.afs=e,this.getUserService=t,this.modalService=i,this.userList=[],this.message="",this.interation=""}ngOnInit(){switch(this.message="",this.interation.split("-")[0]){case"likes":case"dislikes":this.getLD()}}getLD(){var e=this;this.afs.collection("posts").doc(this.interation.split("-")[1]).ref.get().then(t=>{var i=t.data();i[this.interation.split("-")[0]].length>0?i[this.interation.split("-")[0]].forEach(r=>{this.afs.collection(this.interation.split("-")[0]).doc(r).ref.get().then(function(){var o=(0,Ce.Z)(function*(c){var p=c.data();e.userList.push(yield e.getUserService.UserFromUID(p.uid))});return function(c){return o.apply(this,arguments)}}())}):this.message="This post has no "+this.interation.split("-")[0]+"."})}}iI.\u0275fac=function(e){return new(e||iI)(u.Y36(Is),u.Y36(Co),u.Y36(xi))},iI.\u0275cmp=u.Xpm({type:iI,selectors:[["app-interactions"]],inputs:{interation:"interation"},decls:3,vars:2,consts:[[1,"interatcions-container"],["class","message",4,"ngIf"],["class","interactions-user",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"message"],[1,"interactions-user",3,"routerLink","click"],[1,"user-side"],[1,"user-pfp"],[3,"src"],[1,"left-side"],[1,"user-username"],[1,"user-bio"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.YNc(1,Mue,2,1,"div",1),u.YNc(2,kue,11,7,"div",2),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngIf",t.message),u.xp6(1),u.Q6J("ngForOf",t.userList))},dependencies:[On,qt,bu],styles:[".interatcions-container[_ngcontent-%COMP%]{height:500px;overflow:scroll}.interactions-user[_ngcontent-%COMP%]{display:flex;height:60px;border-bottom:1px solid var(--psBorderColor)}.interactions-user[_ngcontent-%COMP%]:hover{background-color:#f7f7f7;cursor:pointer}.user-pfp[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin:3px}"]});class Rue{}class Pue{}class h0{constructor(e){this.afs=e,this.dbLikePath="/likes",this.dbDislikePate="/dislikes",this.postsLikeRef=e.collection(this.dbLikePath),this.postDislikeRef=e.collection(this.dbDislikePate)}likePost(e){return this.afs.collection(this.dbLikePath).add({...e}).then(t=>{let i=t.id;t.set({lid:i},{merge:!0}),this.afs.collection("posts").doc(e.pid).update({likes:Xf(i)})}).catch(t=>{console.error("Error",t)})}dislikePost(e){return this.afs.collection(this.dbDislikePate).add({...e}).then(t=>{let i=t.id;t.set({did:i},{merge:!0}),this.afs.collection("posts").doc(e.pid).update({dislikes:Xf(i)})}).catch(t=>{console.error("Error",t)})}}h0.\u0275fac=function(e){return new(e||h0)(u.LFG(Is))},h0.\u0275prov=u.Yz7({token:h0,factory:h0.\u0275fac,providedIn:"root"});class rh{constructor(e,t,i){this.authService=e,this.afs=t,this.likeDislikeService=i,this.likeObj=new Rue,this.dislikeObj=new Pue}checkIfLDExists(e,t){var i=this;return(0,Ce.Z)(function*(){return new Promise((r,o)=>{i.afs.collection(e,c=>c.where("uid","==",i.authService.userData.uid).where("pid","==",t)).get().subscribe(c=>{r(!c.empty)},c=>{o(c)})})})()}like(e){var t=this;return(0,Ce.Z)(function*(){let i=0;return yield t.checkIfLDExists("likes",e).then(function(){var r=(0,Ce.Z)(function*(o){o?(t.afs.collection("likes").ref.where("uid","==",t.authService.userData.uid).where("pid","==",e).get().then(c=>{c.forEach(p=>{const _=p.id;t.afs.collection("posts").doc(e).update({likes:eh(_)}),t.afs.collection("likes").doc(_).delete()})}).catch(c=>{}),i=-1):(t.likeObj={uid:t.authService.userData.uid,pid:e,date:new Date},t.likeDislikeService.likePost(t.likeObj),i=1)});return function(o){return r.apply(this,arguments)}}()),i})()}dislike(e){var t=this;return(0,Ce.Z)(function*(){let i=0;return yield t.checkIfLDExists("dislikes",e).then(function(){var r=(0,Ce.Z)(function*(o){o?(yield t.afs.collection("dislikes").ref.where("uid","==",t.authService.userData.uid).where("pid","==",e).get().then(c=>{c.forEach(p=>{const _=p.id;t.afs.collection("posts").doc(e).update({dislikes:eh(_)}),t.afs.collection("dislikes").doc(_).delete()})}).catch(c=>{}),i=-1):(t.dislikeObj={uid:t.authService.userData.uid,pid:e,date:new Date},t.likeDislikeService.dislikePost(t.dislikeObj),i=1)});return function(o){return r.apply(this,arguments)}}()),i})()}bookmark(e){var t=this;return(0,Ce.Z)(function*(){t.afs.collection("bookmarks",i=>i.where("uid","==",t.authService.userData.uid).where("pid","==",e)).get().subscribe(i=>i.size>0?(i.forEach(r=>{var o=r.data();t.afs.collection("bookmarks").doc(o.bid).delete()}),!1):t.afs.collection("bookmarks").add({date:new Date,uid:t.authService.userData.uid,pid:e}).then(r=>{r.set({bid:r.id},{merge:!0})}).catch(r=>{console.error("Error",r)}))})()}share(e){navigator.clipboard.writeText(window.location.origin+"/post/"+e)}}rh.\u0275fac=function(e){return new(e||rh)(u.LFG(Ei),u.LFG(Is),u.LFG(h0))},rh.\u0275prov=u.Yz7({token:rh,factory:rh.\u0275fac,providedIn:"root"});class rI{constructor(e,t,i,r,o,c,p){this.authService=e,this.postService=t,this.router=i,this.afs=r,this.getUserService=o,this.interactionsService=c,this.modalService=p,this.type="",this.id="",this.deletion=""}ngOnInit(){this.type=this.deletion.split("-")[0],this.id=this.deletion.split("-")[1]}deletePost(e){this.afs.collection("posts").doc(e).get().subscribe(t=>{const i=t.id;if(t.exists){const r=t.data().uid;if(t.data()?.likes){const o=t.data().likes;console.log(o),o.forEach(c=>{this.afs.collection("likes").doc(c).delete()})}else console.log("error deleting likes");if(t.data()?.dislikes){const o=t.data().dislikes;console.log(o),o.forEach(c=>{this.afs.collection("dislikes").doc(c).delete()})}else console.log("error deleting dislikes");if(t.data()?.replies){const o=t.data().replies;console.log(o),o.forEach(c=>{this.afs.collection("replies").doc(c).delete()})}else console.log("error deleting replies");this.afs.collection("posts").doc(i).delete(),this.afs.collection("profiles").doc(r).update({posts:eh(i)})}else console.log("error deleting post")})}deleteProfile(e){this.afs.collection("profiles").doc(e).get().subscribe(t=>{if(t.exists){const i=t.id;t.data()?.followers&&t.data().followers.forEach(o=>{console.log(o),this.afs.collection("profiles").doc(o).update({following:eh(i)})}),t.data()?.following&&t.data().following.forEach(o=>{console.log(o),this.afs.collection("profiles").doc(o).update({followers:eh(i)})}),t.data()?.posts&&t.data().posts.forEach(o=>{console.log(o),this.deletePost(o)}),this.afs.collection("bookmarks").ref.where("uid","==",e).get().then(r=>{r.forEach(o=>{const c=o.id;console.log(c),this.afs.collection("bookmarks").doc(c).delete()})}),this.authService.userData.uid==e&&this.authService.userDeleteProfile(),console.log("deleting user with uid: "+e),this.afs.collection("profiles").doc(e).delete(),this.afs.collection("users").doc(e).delete()}})}deleteReply(e){this.afs.collection("replies").doc(e).get().subscribe(t=>{const i=t.id;this.afs.collection("replies").doc(i).delete()})}deleting(){switch(this.type){case"post":console.log(this.type),console.log("pid"+this.id),this.deletePost(this.id);break;case"profile":console.log(this.type),console.log("uid: "+this.id),this.deleteProfile(this.id);break;case"reply":console.log(this.type),console.log("rid: "+this.id),this.deleteReply(this.id)}this.modalService.close()}}rI.\u0275fac=function(e){return new(e||rI)(u.Y36(Ei),u.Y36(dp),u.Y36(Ks),u.Y36(Is),u.Y36(Co),u.Y36(rh),u.Y36(xi))},rI.\u0275cmp=u.Xpm({type:rI,selectors:[["app-delete"]],inputs:{deletion:"deletion"},decls:8,vars:0,consts:[[1,"delete-container"],[1,"delete-message"],[1,"delete-buttons"],[1,"cancel-button",3,"click"],[1,"delete-button",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u._uU(2," Are you sure you want to delete this. This action is permanent and cannot be undone. "),u.qZA(),u.TgZ(3,"div",2)(4,"div",3),u.NdJ("click",function(){return t.modalService.close()}),u._uU(5," Cancel "),u.qZA(),u.TgZ(6,"div",4),u.NdJ("click",function(){return t.deleting()}),u._uU(7," Delete "),u.qZA()()())},styles:[".delete-container[_ngcontent-%COMP%]{display:grid;align-items:center;justify-content:center}.delete-message[_ngcontent-%COMP%]{display:flex;width:350px;justify-content:center;align-items:center}.delete-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.delete-buttons[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100px;height:30px;margin:5px;display:flex;justify-content:center;align-items:center;color:#fff;border-radius:9999px;cursor:pointer}.cancel-button[_ngcontent-%COMP%]{background-color:#000}.delete-button[_ngcontent-%COMP%]{background-color:red}"]});class sI{constructor(e){this.adminService=e}}function Nue(n,e){1&n&&u._UZ(0,"app-login")}function Oue(n,e){1&n&&u._UZ(0,"app-signup")}function Fue(n,e){1&n&&u._UZ(0,"app-post")}function Lue(n,e){1&n&&u._UZ(0,"app-edit")}function Uue(n,e){1&n&&u._UZ(0,"app-alert")}function Vue(n,e){1&n&&u._UZ(0,"app-manage")}function Bue(n,e){if(1&n&&u._UZ(0,"app-update",14),2&n){const t=u.oxw();u.s9C("updateSender",t.modalService.param)}}function jue(n,e){if(1&n&&u._UZ(0,"app-relations",15),2&n){const t=u.oxw();u.s9C("list",t.modalService.param)}}function Hue(n,e){if(1&n&&u._UZ(0,"app-interactions",16),2&n){const t=u.oxw();u.s9C("interation",t.modalService.param)}}function $ue(n,e){if(1&n&&u._UZ(0,"app-reply",17),2&n){const t=u.oxw();u.s9C("pid",t.modalService.param)}}function Gue(n,e){if(1&n&&u._UZ(0,"app-media",18),2&n){const t=u.oxw();u.s9C("media",t.modalService.param)}}function que(n,e){if(1&n&&u._UZ(0,"app-delete",19),2&n){const t=u.oxw();u.s9C("deletion",t.modalService.param)}}function Zue(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1," Something should be here. But it broke "),u.qZA())}sI.\u0275fac=function(e){return new(e||sI)(u.Y36(Ll))},sI.\u0275cmp=u.Xpm({type:sI,selectors:[["app-manage"]],decls:14,vars:0,consts:[[1,"manage-container"],[1,"manage-form"],[1,"input-container"],[1,"manage-input"],["uid",""],[1,"manage-buttons"],[1,"remove"],[1,"remove-button",3,"click"],[1,"make"],[1,"make-button",3,"click"]],template:function(e,t){if(1&e){const i=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"label"),u._uU(3,"UID of user"),u.qZA(),u.TgZ(4,"div",2),u._UZ(5,"input",3,4),u.qZA(),u.TgZ(7,"div",5)(8,"div",6)(9,"div",7),u.NdJ("click",function(){u.CHM(i);const o=u.MAs(6);return u.KtG(t.adminService.removeAdmin(o.value))}),u._uU(10," Remove Admin "),u.qZA()(),u.TgZ(11,"div",8)(12,"div",9),u.NdJ("click",function(){u.CHM(i);const o=u.MAs(6);return u.KtG(t.adminService.addAdmin(o.value))}),u._uU(13," Make Admin "),u.qZA()()()()()}},styles:[".manage-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin:0 auto}.manage-input[_ngcontent-%COMP%]{width:450px;height:45px;font-size:17px;outline:none}.manage-buttons[_ngcontent-%COMP%]{display:flex;width:450px;justify-content:space-evenly}.remove-button[_ngcontent-%COMP%], .make-button[_ngcontent-%COMP%]{width:150px;height:40px;color:#fff;background-color:#000;display:flex;justify-content:center;align-items:center;border-radius:9999px;margin:5px;cursor:pointer}"]});class oI{constructor(e){this.modalService=e}close(){this.modalService.comp="",this.modalService.show=!1}}function zue(n,e){if(1&n&&(u.TgZ(0,"div",21),u._UZ(1,"img",22),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.s9C("src",t.profileService.user.bannerURL,u.LSH)}}function Wue(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",23),u.NdJ("click",function(){u.CHM(t);const r=u.oxw(2);return u.KtG(null!=r.authService.userData?r.profileService.follow():r.modalService.open("alert"))}),u.TgZ(1,"span"),u._uU(2,"Follow"),u.qZA()()}}oI.\u0275fac=function(e){return new(e||oI)(u.Y36(xi))},oI.\u0275cmp=u.Xpm({type:oI,selectors:[["app-modal"]],decls:19,vars:13,consts:[[1,"modal-backdrop",3,"click"],[1,"modal"],[1,"modal-header"],[1,"close",3,"click"],[1,"modal-content"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"updateSender",4,"ngSwitchCase"],[3,"list",4,"ngSwitchCase"],[3,"interation",4,"ngSwitchCase"],[3,"pid",4,"ngSwitchCase"],[3,"media",4,"ngSwitchCase"],[3,"deletion",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"updateSender"],[3,"list"],[3,"interation"],[3,"pid"],[3,"media"],[3,"deletion"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.NdJ("click",function(){return t.close()}),u.qZA(),u.TgZ(1,"div",1)(2,"div",2)(3,"div",3),u.NdJ("click",function(){return t.close()}),u.qZA()(),u.TgZ(4,"div",4),u.ynx(5,5),u.YNc(6,Nue,1,0,"app-login",6),u.YNc(7,Oue,1,0,"app-signup",6),u.YNc(8,Fue,1,0,"app-post",6),u.YNc(9,Lue,1,0,"app-edit",6),u.YNc(10,Uue,1,0,"app-alert",6),u.YNc(11,Vue,1,0,"app-manage",6),u.YNc(12,Bue,1,1,"app-update",7),u.YNc(13,jue,1,1,"app-relations",8),u.YNc(14,Hue,1,1,"app-interactions",9),u.YNc(15,$ue,1,1,"app-reply",10),u.YNc(16,Gue,1,1,"app-media",11),u.YNc(17,que,1,1,"app-delete",12),u.YNc(18,Zue,2,0,"div",13),u.BQk(),u.qZA()()),2&e&&(u.xp6(5),u.Q6J("ngSwitch",t.modalService.comp),u.xp6(1),u.Q6J("ngSwitchCase","login"),u.xp6(1),u.Q6J("ngSwitchCase","signup"),u.xp6(1),u.Q6J("ngSwitchCase","post"),u.xp6(1),u.Q6J("ngSwitchCase","edit"),u.xp6(1),u.Q6J("ngSwitchCase","alert"),u.xp6(1),u.Q6J("ngSwitchCase","manage"),u.xp6(1),u.Q6J("ngSwitchCase","update"),u.xp6(1),u.Q6J("ngSwitchCase","follow"),u.xp6(1),u.Q6J("ngSwitchCase","interactions"),u.xp6(1),u.Q6J("ngSwitchCase","reply"),u.xp6(1),u.Q6J("ngSwitchCase","media"),u.xp6(1),u.Q6J("ngSwitchCase","delete"))},dependencies:[ds,Ui,Xa,QC,l0,u0,JC,XC,eI,tI,nI,iI,qm,rI,sI],styles:['.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080}.modal-header[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}.close[_ngcontent-%COMP%]{cursor:pointer;width:-moz-fit-content;width:fit-content;padding-left:10px}.close[_ngcontent-%COMP%]:after{content:"\\d7";font-size:35px;color:#000}.modal[_ngcontent-%COMP%]{background:white;position:fixed;top:35%;left:50%;transform:translate(-50%,-50%);z-index:99;border-radius:5px}.modal-content[_ngcontent-%COMP%]{width:550px;height:-moz-fit-content;height:fit-content}']});const Kue=function(){return{background:"var(--psTeal)"}};function Yue(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",24),u.NdJ("click",function(){u.CHM(t);const r=u.oxw(2);return u.KtG(r.profileService.unfollow())}),u.TgZ(1,"span"),u._uU(2,"Following"),u.qZA()()}2&n&&u.Q6J("ngStyle",u.DdM(1,Kue))}function Que(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",25),u.NdJ("click",function(){u.CHM(t);const r=u.oxw(2);return u.KtG(r.modalService.open("edit"))}),u.TgZ(1,"span"),u._uU(2,"Edit"),u.qZA()()}}function Jue(n,e){if(1&n&&(u.TgZ(0,"div",26),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.hij(" ",t.profileService.user.bio," ")}}function Xue(n,e){if(1&n&&(u.TgZ(0,"div",27),u._UZ(1,"img",28),u._uU(2),u.qZA()),2&n){const t=u.oxw(2);u.xp6(2),u.hij("",t.profileService.user.location," ")}}function ece(n,e){if(1&n&&(u.TgZ(0,"div",29),u._UZ(1,"img",30),u.TgZ(2,"a",31),u._uU(3),u.qZA()()),2&n){const t=u.oxw(2);u.xp6(2),u.MGl("href","https://",t.profileService.user.link,"",u.LSH),u.xp6(1),u.Oqu(t.profileService.user.link)}}function tce(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",1),u.YNc(1,zue,2,1,"div",2),u.TgZ(2,"div",3)(3,"div",4),u._UZ(4,"img",5),u.qZA(),u.TgZ(5,"div",6)(6,"div",7)(7,"div",8),u._uU(8),u.qZA(),u.TgZ(9,"div",9),u._uU(10),u.qZA()(),u.TgZ(11,"div",10),u._UZ(12,"img",11),u._uU(13),u.qZA()(),u.YNc(14,Wue,3,0,"div",12),u.YNc(15,Yue,3,2,"div",13),u.YNc(16,Que,3,0,"div",14),u.qZA(),u.YNc(17,Jue,2,1,"div",15),u.TgZ(18,"div",16),u.YNc(19,Xue,3,1,"div",17),u.YNc(20,ece,4,2,"div",18),u.qZA(),u.TgZ(21,"div",19)(22,"div",20),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.modalService.open("follow:following"))}),u.TgZ(23,"b"),u._uU(24),u.qZA(),u._uU(25," Following"),u.qZA(),u.TgZ(26,"div",20),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.modalService.open("follow:followers"))}),u.TgZ(27,"b"),u._uU(28),u.qZA(),u._uU(29," Followers"),u.qZA()()()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.profileService.user.bannerURL),u.xp6(3),u.s9C("src",t.profileService.user.photoURL,u.LSH),u.xp6(4),u.hij(" ",t.profileService.user.profileName," "),u.xp6(2),u.hij(" @",t.profileService.user.displayName," "),u.xp6(3),u.hij("Joined ",t.profileService.user.joinDate," "),u.xp6(1),u.Q6J("ngIf",null==t.authService.userData||t.authService.userData.uid!=t.profileService.user.uid&&-1==t.profileService.user.followers.indexOf(t.authService.userData.uid)),u.xp6(1),u.Q6J("ngIf",null!=t.authService.userData&&t.authService.userData.uid!=t.profileService.user.uid&&-1!=t.profileService.user.followers.indexOf(t.authService.userData.uid)),u.xp6(1),u.Q6J("ngIf",null!=t.authService.userData&&t.authService.userData.uid==t.profileService.user.uid),u.xp6(1),u.Q6J("ngIf",t.profileService.user.bio),u.xp6(2),u.Q6J("ngIf",t.profileService.user.location),u.xp6(1),u.Q6J("ngIf",t.profileService.user.link),u.xp6(4),u.Oqu(t.profileService.user.following.length),u.xp6(4),u.Oqu(t.profileService.user.followers.length)}}class aI{constructor(e,t,i,r){this.authService=e,this.profileService=t,this.modalService=i,this.interactionsService=r}ngOnInit(){}}function nce(n,e){1&n&&u._UZ(0,"app-prompt")}function ice(n,e){1&n&&(u.TgZ(0,"div",7),u._UZ(1,"app-modal"),u.qZA())}aI.\u0275fac=function(e){return new(e||aI)(u.Y36(Ei),u.Y36(Hc),u.Y36(xi),u.Y36(rh))},aI.\u0275cmp=u.Xpm({type:aI,selectors:[["app-profiles"]],decls:1,vars:1,consts:[["class","profile",4,"ngIf"],[1,"profile"],["class","profile-banner",4,"ngIf"],[1,"profile-user"],[1,"profile-picture"],["alt","",3,"src"],[1,"profile-name"],[1,"name"],[1,"display-name"],[1,"user-name"],[1,"join-date"],["src","assets/icons/calendar.svg","alt","calendar icon",1,"profiles-icons"],["class","follow",3,"click",4,"ngIf"],["class","following",3,"ngStyle","click",4,"ngIf"],["class","profile-edit",3,"click",4,"ngIf"],["class","profile-bio",4,"ngIf"],[1,"profile-info"],["class","location",4,"ngIf"],["class","link",4,"ngIf"],[1,"profile-relations"],[1,"relations",3,"click"],[1,"profile-banner"],[3,"src"],[1,"follow",3,"click"],[1,"following",3,"ngStyle","click"],[1,"profile-edit",3,"click"],[1,"profile-bio"],[1,"location"],["src","assets/icons/location.svg","alt","location icon",1,"profiles-icons"],[1,"link"],["src","assets/icons/link.svg","alt","link icon",1,"profiles-icons"],["target","_blank",3,"href"]],template:function(e,t){1&e&&u.YNc(0,tce,30,13,"div",0),2&e&&u.Q6J("ngIf",null!=t.profileService.user.uid)},dependencies:[qt,Io],styles:[".profile[_ngcontent-%COMP%]{padding:5px;background-color:var(--psGrey);border-radius:var(--psRadius)}.profile-banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:590px;height:180px;object-fit:cover;border-radius:var(--psRadius)}.profile-user[_ngcontent-%COMP%]{display:flex}.profile-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%}.profile-name[_ngcontent-%COMP%]{padding-left:10px;width:100%;display:flex;flex-direction:column}.display-name[_ngcontent-%COMP%]{font-size:35px}.user-name[_ngcontent-%COMP%]{font-size:20px}.join-date[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto;display:flex;align-items:center}.follow[_ngcontent-%COMP%], .following[_ngcontent-%COMP%], .profile-edit[_ngcontent-%COMP%]{width:auto;height:30px;float:right;display:flex;align-items:center;justify-content:center;color:#fff;background-color:#000;border-radius:9999px;font-size:20px}.follow[_ngcontent-%COMP%]:hover, .following[_ngcontent-%COMP%]:hover, .profile-edit[_ngcontent-%COMP%]:hover{background-color:#272c30;cursor:pointer}.follow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .following[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .profile-edit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 15px}.profile-info[_ngcontent-%COMP%]{display:flex}.profile-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:7px;display:flex;align-items:center}.profiles-icons[_ngcontent-%COMP%]{height:15px;padding-right:2px}.relations[_ngcontent-%COMP%]{display:inline-flex;margin-right:10px;cursor:pointer}.relations[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{padding-right:2px}"]});class lI{constructor(e,t,i,r){this.authService=e,this.modalService=t,this.toastr=i,this.adminService=r,this.title="project-social"}ngOnInit(){}ShowSuccess(){this.toastr.success("Success login ")}}function rce(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",16),u.NdJ("click",function(r){u.CHM(t);const o=u.oxw();return u.KtG(o.postClick(r,"delete"))}),u._UZ(1,"img",17),u.qZA()}}lI.\u0275fac=function(e){return new(e||lI)(u.Y36(Ei),u.Y36(xi),u.Y36(NM),u.Y36(Ll))},lI.\u0275cmp=u.Xpm({type:lI,selectors:[["app-root"]],decls:10,vars:2,consts:[[1,"main-container"],[1,"main"],[1,"left"],[1,"center"],[1,"right"],[4,"ngIf"],["class","modal-container",4,"ngIf"],[1,"modal-container"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2),u._UZ(3,"app-navigation"),u.qZA(),u.TgZ(4,"div",3),u._UZ(5,"router-outlet"),u.qZA(),u.TgZ(6,"div",4),u._UZ(7,"app-profiles"),u.YNc(8,nce,1,0,"app-prompt",5),u.qZA()()(),u.YNc(9,ice,2,0,"div",6)),2&e&&(u.xp6(8),u.Q6J("ngIf",!t.authService.userData),u.xp6(1),u.Q6J("ngIf",t.modalService.show))},dependencies:[qt,Jb,c0,YC,oI,aI],styles:[".main-container[_ngcontent-%COMP%]{width:100%}.main[_ngcontent-%COMP%]{display:flex;width:-moz-fit-content;width:fit-content;margin:0 auto;position:relative}.main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:600px}.left[_ngcontent-%COMP%]{margin:0 20px}.right[_ngcontent-%COMP%]{margin:20px}.center[_ngcontent-%COMP%]{border-left:1px solid var(--psBorderColor);border-right:1px solid var(--psBorderColor);height:100vh}"]});const sce=function(n){return["/post",n]},oce=function(n){return["/",n]};class Zm{constructor(e,t,i,r,o,c,p){this.authService=e,this.router=t,this.afs=i,this.getUserService=r,this.interactionsService=o,this.modalService=c,this.adminService=p,this.user={}}ngOnInit(){var e=this;return(0,Ce.Z)(function*(){e.post.date=new Date(1e3*e.post.date.seconds).toLocaleString("en-US",{hour:"2-digit",minute:"numeric",year:"numeric",month:"short",day:"numeric"}),e.user=yield e.getUserService.UserFromUID(e.post.uid)})()}postClick(e,t){var i=this;return(0,Ce.Z)(function*(){if(e.stopPropagation(),null!=i.authService.userData)switch(t){case"reply":i.modalService.open("reply:"+i.post.pid);break;case"like":-1==(yield i.interactionsService.like(i.post.pid))?i.post.likes.pop():i.post.likes.push("1");break;case"dislike":-1==(yield i.interactionsService.dislike(i.post.pid))?i.post.dislikes.pop():i.post.dislikes.push("1");break;case"bookmark":i.interactionsService.bookmark(i.post.pid);break;case"delete":i.modalService.open("delete:post-"+i.post.pid)}else"share"==t?i.interactionsService.share(i.post.pid):i.modalService.open("alert")})()}}function ace(n,e){if(1&n&&(u.TgZ(0,"div",9),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.hij(" ",t.profileService.message," ")}}function lce(n,e){1&n&&u._UZ(0,"app-posts",12),2&n&&u.Q6J("post",e.$implicit)}function uce(n,e){if(1&n&&(u.TgZ(0,"div",10),u.YNc(1,lce,1,1,"app-posts",11),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Q6J("ngForOf",t.profileService.posts)}}function cce(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",27),u.NdJ("click",function(r){u.CHM(t);const o=u.oxw().$implicit,c=u.oxw(3);return r.stopPropagation(),u.KtG(c.modalService.open("delete:reply"+o.reply.rid))}),u._UZ(1,"img",28),u.qZA()}}Zm.\u0275fac=function(e){return new(e||Zm)(u.Y36(Ei),u.Y36(Ks),u.Y36(Is),u.Y36(Co),u.Y36(rh),u.Y36(xi),u.Y36(Ll))},Zm.\u0275cmp=u.Xpm({type:Zm,selectors:[["app-posts"]],inputs:{post:"post"},decls:28,vars:15,consts:[[1,"post-container",3,"routerLink"],[1,"post-pfp"],[3,"src"],[1,"post"],[1,"post-top"],[1,"post-user",3,"routerLink"],[1,"post-date"],["class","post-delete",3,"click",4,"ngIf"],[1,"post-content"],[1,"post-interactions"],[1,"post-button",3,"click"],["src","assets/icons/reply.svg","alt","reply icon",1,"post-icons"],["src","assets/icons/like.svg","alt","like icon",1,"post-icons"],["src","assets/icons/dislike.svg","alt","dislike icon",1,"post-icons"],["src","assets/icons/bookmark.svg","alt","bookmark icon",1,"post-icons"],["src","assets/icons/share.svg","alt","share icon",1,"post-icons"],[1,"post-delete",3,"click"],["src","assets/icons/delete.svg","alt","delete icon",1,"post-icons"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"img",2),u.qZA(),u.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"b"),u._uU(7),u.qZA(),u._uU(8),u.qZA(),u.TgZ(9,"div",6),u._uU(10),u.qZA(),u.YNc(11,rce,2,0,"div",7),u.qZA(),u.TgZ(12,"div",8),u._uU(13),u.qZA(),u.TgZ(14,"div",9)(15,"div",10),u.NdJ("click",function(r){return t.postClick(r,"reply")}),u._UZ(16,"img",11),u._uU(17),u.qZA(),u.TgZ(18,"div",10),u.NdJ("click",function(r){return t.postClick(r,"like")}),u._UZ(19,"img",12),u._uU(20),u.qZA(),u.TgZ(21,"div",10),u.NdJ("click",function(r){return t.postClick(r,"dislike")}),u._UZ(22,"img",13),u._uU(23),u.qZA(),u.TgZ(24,"div",10),u.NdJ("click",function(r){return t.postClick(r,"bookmark")}),u._UZ(25,"img",14),u.qZA(),u.TgZ(26,"div",10),u.NdJ("click",function(r){return t.postClick(r,"share")}),u._UZ(27,"img",15),u.qZA()()()()),2&e&&(u.Q6J("routerLink",u.VKq(11,sce,t.post.pid)),u.xp6(2),u.s9C("src",t.user.photoURL,u.LSH),u.xp6(3),u.Q6J("routerLink",u.VKq(13,oce,t.user.displayName)),u.xp6(2),u.Oqu(t.user.profileName),u.xp6(1),u.hij(" @",t.user.displayName," "),u.xp6(2),u.hij(" \xa0\u2022 ",t.post.date," "),u.xp6(1),u.Q6J("ngIf",t.authService.userData&&(t.post.uid==t.authService.userData.uid||-1!=t.adminService.admins.indexOf(t.authService.userData.uid))),u.xp6(2),u.hij(" ",t.post.content," "),u.xp6(4),u.hij("",t.post.replies.length," "),u.xp6(3),u.hij("",t.post.likes.length," "),u.xp6(3),u.hij("",t.post.dislikes.length," "))},dependencies:[qt,bu],styles:[".post[_ngcontent-%COMP%]{height:auto;width:100%}.post-container[_ngcontent-%COMP%]{display:flex;padding-top:5px;border-bottom:1px solid var(--psBorderColor)}.post-container[_ngcontent-%COMP%]:hover{background-color:#f7f7f7;cursor:pointer}.post-pfp[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px;width:50px;margin:0 10px;border-radius:50%}.post-top[_ngcontent-%COMP%]{display:inline-flex;width:100%}.post-delete[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:flex;margin-left:auto;margin-right:10px;padding:2px;border-radius:5px}.post-delete[_ngcontent-%COMP%]:hover{background-color:var(--psGrey)}.post-content[_ngcontent-%COMP%]{margin-right:10px;padding:1px 0}.post-interactions[_ngcontent-%COMP%]{padding-bottom:5px;display:inline-flex}.post-button[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:10px;padding:2px;border-radius:5px}.post-button[_ngcontent-%COMP%]:hover{background-color:var(--psGrey)}.post-icons[_ngcontent-%COMP%]{width:15px;height:15px;margin-right:2px}"]});const dce=function(n){return["/post",n]};function hce(n,e){if(1&n&&(u.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18),u._UZ(4,"img",19),u.qZA(),u.TgZ(5,"div",20)(6,"div",21)(7,"div",22)(8,"b"),u._uU(9),u.qZA(),u._uU(10),u.qZA(),u.TgZ(11,"div",23),u._uU(12),u.qZA(),u.YNc(13,cce,2,0,"div",24),u.qZA(),u.TgZ(14,"div",25),u._uU(15),u.qZA(),u.TgZ(16,"div",26),u._uU(17),u.qZA()()()()()),2&n){const t=e.$implicit,i=u.oxw(3);u.xp6(1),u.Q6J("routerLink",u.VKq(8,dce,t.reply.pid)),u.xp6(3),u.s9C("src",i.profileService.user.photoURL,u.LSH),u.xp6(5),u.Oqu(i.profileService.user.profileName),u.xp6(1),u.hij(" @",i.profileService.user.displayName," "),u.xp6(2),u.hij(" \xa0\u2022 ",t.reply.date," "),u.xp6(1),u.Q6J("ngIf",i.authService.userData&&(t.reply.uid==i.authService.userData.uid||-1!=i.adminService.admins.indexOf(i.authService.userData.uid))),u.xp6(2),u.hij(" Replying to @",t.displayName," "),u.xp6(2),u.hij(" ",t.reply.content," ")}}function fce(n,e){if(1&n&&(u.TgZ(0,"div",13),u.YNc(1,hce,18,10,"div",14),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Q6J("ngForOf",t.profileService.repliesData)}}const pce=function(n){return["/",n]},OM=function(){return{"border-bottom":"solid 4px var(--psTeal)","margin-top":"4px"}},FM=function(){return{}},gce=function(){return["replies"]},mce=function(){return["likes"]},_ce=function(){return["dislikes"]};function yce(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",2)(1,"div",3)(2,"div",4),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.title.setTitle("Project Social | @"+r.profileService.user.displayName))}),u.TgZ(3,"span",5),u._uU(4," Posts "),u.qZA()(),u.TgZ(5,"div",4),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.title.setTitle("Project Social | @"+r.profileService.user.displayName+" / Replies"))}),u.TgZ(6,"span",5),u._uU(7," Replies "),u.qZA()(),u.TgZ(8,"div",4),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.title.setTitle("Project Social | @"+r.profileService.user.displayName+" / Likes"))}),u.TgZ(9,"span",5),u._uU(10," Likes "),u.qZA()(),u.TgZ(11,"div",4),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.title.setTitle("Project Social | @"+r.profileService.user.displayName+" / Dislikes"))}),u.TgZ(12,"span",5),u._uU(13," Dislikes "),u.qZA()()(),u.YNc(14,ace,2,1,"div",6),u.YNc(15,uce,2,1,"div",7),u.YNc(16,fce,2,1,"div",8),u.qZA()}if(2&n){const t=u.oxw();u.xp6(2),u.Q6J("routerLink",u.VKq(11,pce,t.profileService.user.displayName)),u.xp6(1),u.Q6J("ngStyle",t.router.url.split("/")[2]?u.DdM(14,FM):u.DdM(13,OM)),u.xp6(2),u.Q6J("routerLink",u.DdM(15,gce)),u.xp6(1),u.Q6J("ngStyle","replies"==t.router.url.split("/")[2]?u.DdM(16,OM):u.DdM(17,FM)),u.xp6(2),u.Q6J("routerLink",u.DdM(18,mce)),u.xp6(1),u.Q6J("ngStyle","likes"==t.router.url.split("/")[2]?u.DdM(19,OM):u.DdM(20,FM)),u.xp6(2),u.Q6J("routerLink",u.DdM(21,_ce)),u.xp6(1),u.Q6J("ngStyle","dislikes"==t.router.url.split("/")[2]?u.DdM(22,OM):u.DdM(23,FM)),u.xp6(2),u.Q6J("ngIf",t.profileService.message),u.xp6(1),u.Q6J("ngIf","replies"!=t.router.url.split("/")[2]),u.xp6(1),u.Q6J("ngIf","replies"==t.router.url.split("/")[2])}}function vce(n,e){if(1&n&&(u.TgZ(0,"div",29)(1,"div",30),u._uU(2),u.qZA(),u.TgZ(3,"div",31),u._uU(4," The user may have changed thier name. Or perhaps they never existed. Maybe your spelling is wrong. "),u.qZA()()),2&n){const t=u.oxw();u.xp6(2),u.hij(" There is no user by the name of ",t.userPath,". ")}}class hp{constructor(e,t,i,r,o,c,p){this.activatedRoute=e,this.profileService=t,this.router=i,this.title=r,this.authService=o,this.adminService=c,this.modalService=p,this.userPath=""}ngOnInit(){this.profileService.posts=[],this.profileService.replies=[],this.profileService.repliesData=[],this.activatedRoute.params.subscribe(e=>{this.userPath!=e.user&&(this.userPath=e.user,this.title.setTitle("Project Social | @"+this.userPath),this.profileService.posts=[],this.profileService.getProfile(this.userPath))}),this.routerSubscribe=this.router.events.subscribe(e=>{e instanceof xl&&null!=this.profileService.user.uid&&this.profileService.getPosts()})}ngOnDestroy(){this.profileService.noUser=!1,this.profileService.user={},this.profileService.posts=[],this.profileService.replies=[],this.profileService.repliesData=[],this.routerSubscribe?.unsubscribe()}navigate(e){this.router.navigate(["/",e]).then(()=>{this.profileService.getPosts()})}}function wce(n,e){1&n&&u._UZ(0,"app-posts",4),2&n&&u.Q6J("post",e.$implicit)}function bce(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1," This page shows posts from people you are following. You are following exactly 0 people. Meaning there are no posts to show. Try following someone and then come back here. "),u.qZA())}function Ece(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1," You are following at least 1 person. However none of the people you follow have posted anything. So there are no posts to show. Try following someone who has posted something. "),u.qZA())}function Cce(n,e){if(1&n&&(u.TgZ(0,"div",5)(1,"div",6),u._uU(2," There's nothing to show here. "),u.qZA(),u.TgZ(3,"div",7),u.YNc(4,bce,2,0,"div",8),u.YNc(5,Ece,2,0,"div",8),u.qZA()()),2&n){const t=u.oxw(2);u.xp6(4),u.Q6J("ngIf",t.postService.noFollowing),u.xp6(1),u.Q6J("ngIf",t.postService.noFeed)}}function Ice(n,e){if(1&n&&(u.TgZ(0,"div",1),u.YNc(1,wce,1,1,"app-posts",2),u.YNc(2,Cce,6,2,"div",3),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngForOf",t.posts),u.xp6(1),u.Q6J("ngIf",t.postService.noFollowing||t.postService.noFeed)}}hp.\u0275fac=function(e){return new(e||hp)(u.Y36(Sc),u.Y36(Hc),u.Y36(Ks),u.Y36(hd),u.Y36(Ei),u.Y36(Ll),u.Y36(xi))},hp.\u0275cmp=u.Xpm({type:hp,selectors:[["app-profile"]],decls:2,vars:2,consts:[["class","profile-container",4,"ngIf"],["class","no-profile",4,"ngIf"],[1,"profile-container"],[1,"profile-header"],[1,"button",3,"routerLink","click"],[1,"buttonText",3,"ngStyle"],["class","no-posts",4,"ngIf"],["class","profile-posts",4,"ngIf"],["class","profile-replies",4,"ngIf"],[1,"no-posts"],[1,"profile-posts"],[3,"post",4,"ngFor","ngForOf"],[3,"post"],[1,"profile-replies"],["class","profile-reply",4,"ngFor","ngForOf"],[1,"profile-reply"],[1,"reply-container",3,"routerLink"],[1,"reply"],[1,"reply-pfp"],[3,"src"],[1,"reply-right"],[1,"reply-top"],[1,"reply-user"],[1,"reply-date"],["class","reply-delete",3,"click",4,"ngIf"],[1,"reply-to"],[1,"reply-content"],[1,"reply-delete",3,"click"],["src","assets/icons/delete.svg","alt","delete icon",1,"reply-delete-icon"],[1,"no-profile"],[1,"np-top"],[1,"np-bottom"]],template:function(e,t){1&e&&(u.YNc(0,yce,17,24,"div",0),u.YNc(1,vce,5,1,"div",1)),2&e&&(u.Q6J("ngIf",null!=t.profileService.user.uid),u.xp6(1),u.Q6J("ngIf",t.profileService.noUser))},dependencies:[On,qt,Io,bu,Zm],styles:[".profile-header[_ngcontent-%COMP%]{height:50px;display:flex;justify-content:space-evenly;align-items:center;border-bottom:1px solid var(--psBorderColor);position:sticky}.button[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--psGrey)}.buttonText[_ngcontent-%COMP%]{display:flex;height:100%;margin-bottom:4px;width:-moz-fit-content;width:fit-content;align-items:center}.no-profile[_ngcontent-%COMP%]{width:475px;display:block;margin:20px auto 0}.np-top[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.profile-nav[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.profile-posts[_ngcontent-%COMP%], .profile-replies[_ngcontent-%COMP%]{height:calc(100vh - 50px);overflow-y:scroll}.reply[_ngcontent-%COMP%]{height:auto}.reply-container[_ngcontent-%COMP%]{display:block;padding-top:5px;border-bottom:1px solid var(--psBorderColor)}.reply-container[_ngcontent-%COMP%]:hover{background-color:#f7f7f7;cursor:pointer}.reply[_ngcontent-%COMP%]{display:flex;width:100%}.reply-right[_ngcontent-%COMP%]{width:100%}.reply-top[_ngcontent-%COMP%]{display:flex}.reply-pfp[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px;margin:0 10px;border-radius:50%}.reply-to[_ngcontent-%COMP%]{font-size:14px;color:gray}.reply-content[_ngcontent-%COMP%]{margin-right:10px;padding:1px 0}.reply-delete[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:flex;margin-left:auto;margin-right:10px;padding:3px;border-radius:50%}.reply-delete[_ngcontent-%COMP%]:hover{background-color:var(--psGrey);cursor:pointer}.reply-delete-icon[_ngcontent-%COMP%]{width:15px}"]});class uI{constructor(e,t,i){this.postService=e,this.authService=t,this.afAuth=i,this.posts=this.postService.arrayOfPosts}ngOnInit(){this.userSubscribe=this.afAuth.authState.subscribe(e=>{e&&this.postService.getFeed()})}ngOnDestroy(){this.posts=[],this.postService.arrayOfPosts=[],this.postService.noFeed=!1,this.postService.noFollowing=!1,this.userSubscribe?.unsubscribe()}}uI.\u0275fac=function(e){return new(e||uI)(u.Y36(dp),u.Y36(Ei),u.Y36(Cl))},uI.\u0275cmp=u.Xpm({type:uI,selectors:[["app-feed"]],decls:1,vars:1,consts:[["class","feed-container",4,"ngIf"],[1,"feed-container"],[3,"post",4,"ngFor","ngForOf"],["class","feed-none",4,"ngIf"],[3,"post"],[1,"feed-none"],[1,"fn-header"],[1,"fn-message"],[4,"ngIf"]],template:function(e,t){1&e&&u.YNc(0,Ice,3,2,"div",0),2&e&&u.Q6J("ngIf",t.authService.userData&&t.authService.userData.uid)},dependencies:[On,qt,Zm],styles:[".feed-container[_ngcontent-%COMP%]{height:100vh;overflow-y:auto;position:relative;scrollbar-width:none}.feed-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.post[_ngcontent-%COMP%]{height:auto;border-bottom:1px solid var(--psBorderColor)}.post-container[_ngcontent-%COMP%]{display:flex;padding-top:5px}.post-container[_ngcontent-%COMP%]:hover{background-color:#f0f8ff;cursor:pointer}.post-pfp[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px;margin:0 10px;border-radius:50%;border:1px solid}.post-content[_ngcontent-%COMP%]{margin-right:10px;padding:1px 0}.post-interactions[_ngcontent-%COMP%]{padding-bottom:5px}.feed-none[_ngcontent-%COMP%]{width:475px;display:block;margin:20px auto 0}.fn-header[_ngcontent-%COMP%]{font-size:25px;font-weight:700}"]});class cI{constructor(e,t){this.authService=e,this.modalService=t,this.uid=this.authService.userData.uid}}function Tce(n,e){1&n&&u._UZ(0,"app-crud")}cI.\u0275fac=function(e){return new(e||cI)(u.Y36(Ei),u.Y36(xi))},cI.\u0275cmp=u.Xpm({type:cI,selectors:[["app-crud"]],decls:13,vars:0,consts:[[1,"crud-container"],[1,"crud-header"],[1,"crud-update"],[1,"update-email",3,"click"],[1,"update-password",3,"click"],[1,"update-username",3,"click"],[1,"crud-delete"],[1,"delete-account",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u._uU(2," Update Account "),u.qZA(),u.TgZ(3,"div",2)(4,"div",3),u.NdJ("click",function(){return t.modalService.open("update:email")}),u._uU(5," Update Email "),u.qZA(),u.TgZ(6,"div",4),u.NdJ("click",function(){return t.modalService.open("update:password")}),u._uU(7," Update Password "),u.qZA(),u.TgZ(8,"div",5),u.NdJ("click",function(){return t.modalService.open("update:username")}),u._uU(9," Update Username "),u.qZA()(),u.TgZ(10,"div",6)(11,"div",7),u.NdJ("click",function(){return t.modalService.open("delete:profile-"+t.uid)}),u._uU(12," Delete Account "),u.qZA()()())},styles:[".crud-header[_ngcontent-%COMP%]{font-size:25px;font-weight:700}.crud-update[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:50px;border-bottom:solid 1px var(--psBorderColor);cursor:pointer;display:flex;align-items:center;padding-left:10px}.crud-update[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:var(--psHover)}.update-email[_ngcontent-%COMP%]{border-top:solid 1px var(--psBorderColor)}.crud-delete[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-bottom:1px solid var(--psBorderColor)}.delete-account[_ngcontent-%COMP%]{width:450px;height:50px;background-color:red;color:#fff;cursor:pointer;display:flex;justify-content:center;align-items:center;border-radius:9999px;margin:5px;font-size:25px;font-weight:700}.delete-account[_ngcontent-%COMP%]:hover{background-color:#d60000}"]});class dI{constructor(e,t,i){this.authService=e,this.modalService=t,this.getUserService=i,this.user={}}}function Sce(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",32),u.NdJ("click",function(){u.CHM(t);const r=u.oxw(2);return u.KtG(r.modalService.open("delete:post"+r.post.pid))}),u._UZ(1,"img",33),u.qZA()}}dI.\u0275fac=function(e){return new(e||dI)(u.Y36(Ei),u.Y36(xi),u.Y36(Co))},dI.\u0275cmp=u.Xpm({type:dI,selectors:[["app-settings"]],decls:2,vars:1,consts:[[1,"settings-container"],[4,"ngIf"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.YNc(1,Tce,1,0,"app-crud",1),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngIf",t.authService.userData))},dependencies:[qt,cI],styles:[".spacer-div[_ngcontent-%COMP%]{height:15px}"]});const XU=function(n){return["/",n]};function Dce(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",5)(1,"div",6)(2,"div",7),u._UZ(3,"img",8),u.qZA(),u.TgZ(4,"div",9)(5,"div",10)(6,"div",11)(7,"b"),u._uU(8),u.qZA()(),u.TgZ(9,"div",12),u._uU(10),u.qZA()(),u.YNc(11,Sce,2,0,"div",13),u.qZA()(),u.TgZ(12,"div",14),u._uU(13),u.qZA(),u.TgZ(14,"div",15),u._uU(15),u.qZA(),u.TgZ(16,"div",16)(17,"div",17)(18,"div",18),u._uU(19),u.qZA(),u.TgZ(20,"div",19),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.modalService.open("interactions:likes-"+r.post.pid))}),u._uU(21),u.qZA(),u.TgZ(22,"div",20),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.modalService.open("interactions:dislikes-"+r.post.pid))}),u._uU(23),u.qZA()(),u.TgZ(24,"div",21)(25,"div",22),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.modalService.open(null!=r.authService.userData?"reply:"+r.post.pid:"alert"))}),u._UZ(26,"img",23),u.qZA(),u.TgZ(27,"div",24),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(null!=r.authService.userData?r.interact("like"):r.modalService.open("alert"))}),u._UZ(28,"img",25),u.qZA(),u.TgZ(29,"div",26),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(null!=r.authService.userData?r.interact("dislike"):r.modalService.open("alert"))}),u._UZ(30,"img",27),u.qZA(),u.TgZ(31,"div",28),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(null!=r.authService.userData?r.interactions.bookmark(r.post.pid):r.modalService.open("alert"))}),u._UZ(32,"img",29),u.qZA(),u.TgZ(33,"div",30),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.interactions.share(r.post.pid))}),u._UZ(34,"img",31),u.qZA()()()()}if(2&n){const t=u.oxw();u.xp6(3),u.s9C("src",t.user.photoURL,u.LSH),u.xp6(3),u.Q6J("routerLink",u.VKq(11,XU,t.user.displayName)),u.xp6(2),u.Oqu(t.user.profileName),u.xp6(1),u.Q6J("routerLink",u.VKq(13,XU,t.user.displayName)),u.xp6(1),u.hij(" @",t.user.displayName," "),u.xp6(1),u.Q6J("ngIf",t.authService.userData&&(t.post.uid==t.authService.userData.uid||-1!=t.adminService.admins.indexOf(t.authService.userData.uid))),u.xp6(2),u.hij(" ",t.post.content," "),u.xp6(2),u.hij(" ",t.post.date," "),u.xp6(4),u.hij(" ",t.post.replies.length," Replies "),u.xp6(2),u.hij(" ",t.post.likes.length," Likes "),u.xp6(2),u.hij(" ",t.post.dislikes.length," Dislikes ")}}function Ace(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",44),u.NdJ("click",function(){u.CHM(t);const r=u.oxw().$implicit,o=u.oxw();return u.KtG(o.modalService.open("delete:reply"+r.rid))}),u._UZ(1,"img",45),u.qZA()}}function Mce(n,e){1&n&&(u.TgZ(0,"div",46),u._uU(1," There are no replies to this post "),u.qZA())}function xce(n,e){if(1&n&&(u.TgZ(0,"div",34)(1,"div",35)(2,"div",36),u._UZ(3,"img",8),u.qZA(),u.TgZ(4,"div",37)(5,"div",38)(6,"div",39)(7,"b"),u._uU(8),u.qZA(),u._uU(9),u.qZA(),u.TgZ(10,"div",40),u._uU(11),u.qZA(),u.YNc(12,Ace,2,0,"div",41),u.qZA(),u.TgZ(13,"div",42),u._uU(14),u.qZA(),u._UZ(15,"div"),u.qZA()(),u.YNc(16,Mce,2,0,"div",43),u.qZA()),2&n){const t=e.$implicit,i=u.oxw();u.xp6(3),u.s9C("src",t.photoURL,u.LSH),u.xp6(3),u.Q6J("routerLink",u.VKq(8,XU,t.displayName)),u.xp6(2),u.Oqu(t.profileName),u.xp6(1),u.hij(" @",t.displayName," "),u.xp6(2),u.hij(" \xa0\u2022 ",t.date," "),u.xp6(1),u.Q6J("ngIf",i.authService.userData&&(i.post.uid==i.authService.userData.uid||-1!=i.adminService.admins.indexOf(i.authService.userData.uid))),u.xp6(2),u.hij(" ",t.content," "),u.xp6(2),u.Q6J("ngIf",0==i.post.replies.length)}}function kce(n,e){1&n&&(u.TgZ(0,"div",47),u._uU(1," This post does not exist. It may have been deleted.\n"),u.qZA())}class hI{constructor(e,t,i,r,o,c,p,_){this.activatedRoute=e,this.afs=t,this.getUserService=i,this.adminService=r,this.title=o,this.modalService=c,this.interactions=p,this.authService=_,this.user={},this.noPost=!1,this.replyData=[],this.replyUser={},this.replies=[]}ngOnInit(){var e=this;this.title.setTitle("Project Social | Post"),this.activatedRoute.params.subscribe(t=>{this.afs.collection("posts").doc(t.postid).ref.get().then(function(){var i=(0,Ce.Z)(function*(r){e.post=r.data(),e.post?(e.user=yield e.getUserService.UserFromUID(e.post.uid),e.post.date=new Date(1e3*e.post.date.seconds).toLocaleString("en-US",{hour:"2-digit",minute:"numeric",year:"numeric",month:"short",day:"numeric"}),e.title.setTitle("Project Social | Post by @"+e.user.displayName),e.post.replies.forEach(o=>{e.afs.collection("replies").doc(o).ref.get().then(function(){var c=(0,Ce.Z)(function*(p){e.reply=p.data(),e.reply.date=new Date(1e3*e.reply.date.seconds).toLocaleString("en-US",{hour:"2-digit",minute:"numeric",year:"numeric",month:"short",day:"numeric"}),e.replies.push({...e.reply,...yield e.getUserService.UserFromUID(e.reply.uid)})});return function(p){return c.apply(this,arguments)}}())})):e.noPost=!0});return function(r){return i.apply(this,arguments)}}())})}interact(e){var t=this;return(0,Ce.Z)(function*(){switch(e){case"like":-1==(yield t.interactions.like(t.post.pid))?t.post.likes.pop():t.post.likes.push("1");break;case"dislike":-1==(yield t.interactions.dislike(t.post.pid))?t.post.dislikes.pop():t.post.dislikes.push("1")}})()}}function R9(n){return new u.vHH(3e3,!1)}function hde(){return typeof window<"u"&&typeof window.document<"u"}function eV(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function fp(n){switch(n.length){case 0:return new WC;case 1:return n[0];default:return new w9(n)}}function P9(n,e,t,i,r=new Map,o=new Map){const c=[],p=[];let _=-1,E=null;if(i.forEach(T=>{const R=T.get("offset"),F=R==_,G=F&&E||new Map;T.forEach((K,ue)=>{let we=ue,Ke=K;if("offset"!==ue)switch(we=e.normalizePropertyName(we,c),Ke){case JU:Ke=r.get(ue);break;case ih:Ke=o.get(ue);break;default:Ke=e.normalizeStyleValue(ue,we,Ke,c)}G.set(we,Ke)}),F||p.push(G),E=G,_=R}),c.length)throw function ede(n){return new u.vHH(3502,!1)}();return p}function tV(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&nV(t,"start",n)));break;case"done":n.onDone(()=>i(t&&nV(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&nV(t,"destroy",n)))}}function nV(n,e,t){const o=iV(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(o._data=c),o}function iV(n,e,t,i,r="",o=0,c){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!c}}function Ha(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function N9(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}hI.\u0275fac=function(e){return new(e||hI)(u.Y36(Sc),u.Y36(Is),u.Y36(Co),u.Y36(Ll),u.Y36(hd),u.Y36(xi),u.Y36(rh),u.Y36(Ei))},hI.\u0275cmp=u.Xpm({type:hI,selectors:[["app-thread"]],decls:5,vars:3,consts:[[1,"thread-container"],["class","thread-post",4,"ngIf"],[1,"thread-replies"],["class","replies-container",4,"ngFor","ngForOf"],["class","no-post",4,"ngIf"],[1,"thread-post"],[1,"thread-user"],[1,"user-pfp"],[3,"src"],[1,"thread-top"],[1,"user-name"],[1,"user-profileName",3,"routerLink"],[1,"user-displayName",3,"routerLink"],["class","thread-delete",3,"click",4,"ngIf"],[1,"thread-content"],[1,"thread-date"],[1,"thread-interactions"],[1,"interactions-stats"],[1,"post-replies"],[1,"post-likes",3,"click"],[1,"post-dislikes",3,"click"],[1,"interactions-buttons"],[1,"reply-button",3,"click"],["src","assets/icons/reply.svg","alt","reply icon",1,"interaction-icons"],[1,"like-button",3,"click"],["src","assets/icons/like.svg","alt","like icon",1,"interaction-icons"],[1,"dislike-button",3,"click"],["src","assets/icons/dislike.svg","alt","dislike icon",1,"interaction-icons"],[1,"bookmark-button",3,"click"],["src","assets/icons/bookmark.svg","alt","bookmark icon",1,"interaction-icons"],[1,"share-button",3,"click"],["src","assets/icons/share.svg","alt","share icon",1,"interaction-icons"],[1,"thread-delete",3,"click"],["src","assets/icons/delete.svg","alt","delete icon",1,"delete-icon"],[1,"replies-container"],[1,"reply"],[1,"reply-pfp"],[1,"reply-right"],[1,"reply-top"],[1,"reply-user",3,"routerLink"],[1,"reply-date"],["class","reply-delete",3,"click",4,"ngIf"],[1,"reply-content"],["class","no-replies",4,"ngIf"],[1,"reply-delete",3,"click"],["src","assets/icons/delete.svg","alt","delete icon",1,"reply-delete-icon"],[1,"no-replies"],[1,"no-post"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.YNc(1,Dce,35,15,"div",1),u.TgZ(2,"div",2),u.YNc(3,xce,17,10,"div",3),u.YNc(4,kce,2,0,"div",4),u.qZA()()),2&e&&(u.xp6(1),u.Q6J("ngIf",null!=t.user.uid),u.xp6(2),u.Q6J("ngForOf",t.replies),u.xp6(1),u.Q6J("ngIf",t.noPost))},dependencies:[On,qt,bu],styles:[".thread-post[_ngcontent-%COMP%]{margin:10px 10px 0}.thread-top[_ngcontent-%COMP%]{display:inline-flex;width:100%}.thread-user[_ngcontent-%COMP%]{display:flex}.user-pfp[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin-right:5px}.user-profileName[_ngcontent-%COMP%], .user-displayName[_ngcontent-%COMP%]{cursor:pointer;width:-moz-fit-content;width:fit-content}.thread-delete[_ngcontent-%COMP%]{display:flex;margin-right:0;margin-left:auto;height:-moz-fit-content;height:fit-content;border-radius:50%;padding:3px}.thread-delete[_ngcontent-%COMP%]:hover{background-color:var(--psGrey);cursor:pointer}.delete-icon[_ngcontent-%COMP%]{width:20px}.thread-content[_ngcontent-%COMP%]{margin:3px 0}.thread-date[_ngcontent-%COMP%]{margin-bottom:3px}.interactions-stats[_ngcontent-%COMP%]{display:flex;height:35px;border-top:solid 1px var(--psBorderColor);border-bottom:solid 1px var(--psBorderColor);align-items:center}.interactions-stats[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:15px;width:-moz-fit-content;width:fit-content}.post-likes[_ngcontent-%COMP%], .post-dislikes[_ngcontent-%COMP%]{cursor:pointer}.interactions-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.interaction-icons[_ngcontent-%COMP%]{width:20px}.interactions-buttons[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;justify-content:center;width:30px;height:30px;align-items:center;border-radius:50%;margin:1px 0}.interactions-buttons[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:var(--psGrey);cursor:pointer}.thread-replies[_ngcontent-%COMP%]{border-top:solid 1px var(--psBorderColor);height:calc(100vh - 180px);overflow-y:scroll;overflow-x:hidden}.replies-container[_ngcontent-%COMP%]{display:flex;height:auto;padding-top:5px;border-bottom:1px solid var(--psBorderColor);width:100%}.reply[_ngcontent-%COMP%]{display:flex;width:100%}.reply-right[_ngcontent-%COMP%]{width:100%}.reply-pfp[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px;margin:0 10px;border-radius:50%}.reply-top[_ngcontent-%COMP%]{display:flex;width:100%}.reply-user[_ngcontent-%COMP%]{cursor:pointer}.reply-content[_ngcontent-%COMP%]{margin-right:10px;padding:1px 0}.reply-delete[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:flex;margin-left:auto;margin-right:10px;padding:3px;border-radius:50%}.reply-delete[_ngcontent-%COMP%]:hover{background-color:var(--psGrey);cursor:pointer}.reply-delete-icon[_ngcontent-%COMP%]{width:15px}"]});let rV=(n,e)=>!1,O9=(n,e,t)=>[],F9=null;function sV(n){const e=n.parentNode||n.host;return e===F9?null:e}(eV()||typeof Element<"u")&&(hde()?(F9=(()=>document.documentElement)(),rV=(n,e)=>{for(;e;){if(e===n)return!0;e=sV(e)}return!1}):rV=(n,e)=>n.contains(e),O9=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let zm=null,L9=!1;const U9=rV,V9=O9;let B9=(()=>{class n{validateStyleProperty(t){return function pde(n){zm||(zm=function gde(){return typeof document<"u"?document.body:null}()||{},L9=!!zm.style&&"WebkitAppearance"in zm.style);let e=!0;return zm.style&&!function fde(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in zm.style,!e&&L9&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in zm.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return U9(t,i)}getParentElement(t){return sV(t)}query(t,i,r){return V9(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,c,p=[],_){return new WC(r,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),oV=(()=>{class n{}return n.NOOP=new B9,n})();const mde=1e3,aV="ng-enter",LM="ng-leave",UM="ng-trigger",VM=".ng-trigger",H9="ng-animating",lV=".ng-animating";function sh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:uV(parseFloat(e[1]),e[2])}function uV(n,e){return"s"===e?n*mde:n}function BM(n,e,t){return n.hasOwnProperty("duration")?n:function yde(n,e,t){let r,o=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(R9()),{duration:0,delay:0,easing:""};r=uV(parseFloat(p[1]),p[2]);const _=p[3];null!=_&&(o=uV(parseFloat(_),p[4]));const E=p[5];E&&(c=E)}else r=n;if(!t){let p=!1,_=e.length;r<0&&(e.push(function Rce(){return new u.vHH(3100,!1)}()),p=!0),o<0&&(e.push(function Pce(){return new u.vHH(3101,!1)}()),p=!0),p&&e.splice(_,0,R9())}return{duration:r,delay:o,easing:c}}(n,e,t)}function fI(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function $9(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function pp(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function q9(n,e,t){return t?e+":"+t+";":""}function Z9(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=q9(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=q9(0,Ede(t),n.style[t]));n.setAttribute("style",e)}function $c(n,e,t){n.style&&(e.forEach((i,r)=>{const o=dV(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i}),eV()&&Z9(n))}function Wm(n,e){n.style&&(e.forEach((t,i)=>{const r=dV(i);n.style[r]=""}),eV()&&Z9(n))}function pI(n){return Array.isArray(n)?1==n.length?n[0]:_9(n):n}const cV=new RegExp("{{\\s*(.+?)\\s*}}","g");function z9(n){let e=[];if("string"==typeof n){let t;for(;t=cV.exec(n);)e.push(t[1]);cV.lastIndex=0}return e}function gI(n,e,t){const i=n.toString(),r=i.replace(cV,(o,c)=>{let p=e[c];return null==p&&(t.push(function Oce(n){return new u.vHH(3003,!1)}()),p=""),p.toString()});return r==i?n:r}function jM(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const bde=/-+([a-z0-9])/g;function dV(n){return n.replace(bde,(...e)=>e[1].toUpperCase())}function Ede(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function $a(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Fce(n){return new u.vHH(3004,!1)}()}}function W9(n,e){return window.getComputedStyle(n)[e]}const GM="*";function Ade(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Mde(n,e,t){if(":"==n[0]){const _=function xde(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Yce(n){return new u.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Kce(n){return new u.vHH(3015,!1)}()),e;const r=i[1],o=i[2],c=i[3];e.push(K9(r,c));"<"==o[0]&&!(r==GM&&c==GM)&&e.push(K9(c,r))}(i,t,e)):t.push(n),t}const qM=new Set(["true","1"]),ZM=new Set(["false","0"]);function K9(n,e){const t=qM.has(n)||ZM.has(n),i=qM.has(e)||ZM.has(e);return(r,o)=>{let c=n==GM||n==r,p=e==GM||e==o;return!c&&t&&"boolean"==typeof r&&(c=r?qM.has(n):ZM.has(n)),!p&&i&&"boolean"==typeof o&&(p=o?qM.has(e):ZM.has(e)),c&&p}}const kde=new RegExp("s*:selfs*,?","g");function hV(n,e,t,i){return new Rde(n).build(e,t,i)}class Rde{constructor(e){this._driver=e}build(e,t,i){const r=new Ode(t);return this._resetContextStyleTimingState(r),$a(this,pI(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const o=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function Uce(){return new u.vHH(3006,!1)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const _=p,E=_.name;E.toString().split(/\s*,\s*/).forEach(T=>{_.name=T,o.push(this.visitState(_,t))}),_.name=E}else if(1==p.type){const _=this.visitTransition(p,t);i+=_.queryCount,r+=_.depCount,c.push(_)}else t.errors.push(function Vce(){return new u.vHH(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:c,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const o=new Set,c=r||{};i.styles.forEach(p=>{p instanceof Map&&p.forEach(_=>{z9(_).forEach(E=>{c.hasOwnProperty(E)||o.add(E)})})}),o.size&&(jM(o.values()),t.errors.push(function Bce(n,e){return new u.vHH(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=$a(this,pI(e.animation),t);return{type:1,matchers:Ade(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Km(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>$a(this,i,t)),options:Km(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const o=e.steps.map(c=>{t.currentTime=i;const p=$a(this,c,t);return r=Math.max(r,t.currentTime),p});return t.currentTime=r,{type:3,steps:o,options:Km(e.options)}}visitAnimate(e,t){const i=function Lde(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return fV(BM(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=fV(0,0,"");return o.dynamic=!0,o.strValue=t,o}const r=BM(t,e);return fV(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:zC({});if(5==o.type)r=this.visitKeyframes(o,t);else{let c=e.styles,p=!1;if(!c){p=!0;const E={};i.easing&&(E.easing=i.easing),c=zC(E)}t.currentTime+=i.duration+i.delay;const _=this.visitStyle(c,t);_.isEmptyStep=p,r=_}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let p of r)"string"==typeof p?p===ih?i.push(p):t.errors.push(new u.vHH(3002,!1)):i.push($9(p));let o=!1,c=null;return i.forEach(p=>{if(p instanceof Map&&(p.has("easing")&&(c=p.get("easing"),p.delete("easing")),!o))for(let _ of p.values())if(_.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:c,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((p,_)=>{const E=t.collectedStyles.get(t.currentQuerySelector),T=E.get(_);let R=!0;T&&(o!=r&&o>=T.startTime&&r<=T.endTime&&(t.errors.push(function Hce(n,e,t,i,r){return new u.vHH(3010,!1)}()),R=!1),o=T.startTime),R&&E.set(_,{startTime:o,endTime:r}),t.options&&function wde(n,e,t){const i=e.params||{},r=z9(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(function Nce(n){return new u.vHH(3001,!1)}())})}(p,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function $ce(){return new u.vHH(3011,!1)}()),i;let o=0;const c=[];let p=!1,_=!1,E=0;const T=e.steps.map(Ke=>{const ut=this._makeStyleAst(Ke,t);let ct=null!=ut.offset?ut.offset:function Fde(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(ut.styles),ht=0;return null!=ct&&(o++,ht=ut.offset=ct),_=_||ht<0||ht>1,p=p||ht<E,E=ht,c.push(ht),ut});_&&t.errors.push(function Gce(){return new u.vHH(3012,!1)}()),p&&t.errors.push(function qce(){return new u.vHH(3200,!1)}());const R=e.steps.length;let F=0;o>0&&o<R?t.errors.push(function Zce(){return new u.vHH(3202,!1)}()):0==o&&(F=1/(R-1));const G=R-1,K=t.currentTime,ue=t.currentAnimateTimings,we=ue.duration;return T.forEach((Ke,ut)=>{const ct=F>0?ut==G?1:F*ut:c[ut],ht=ct*we;t.currentTime=K+ue.delay+ht,ue.duration=ht,this._validateStyleAst(Ke,t),Ke.offset=ct,i.styles.push(Ke)}),i}visitReference(e,t){return{type:8,animation:$a(this,pI(e.animation),t),options:Km(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Km(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Km(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[o,c]=function Pde(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(kde,"")),n=n.replace(/@\*/g,VM).replace(/@\w+/g,t=>VM+"-"+t.slice(1)).replace(/:animating/g,lV),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,Ha(t.collectedStyles,t.currentQuerySelector,new Map);const p=$a(this,pI(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:Km(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function zce(){return new u.vHH(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:BM(e.timings,t.errors,!0);return{type:12,animation:$a(this,pI(e.animation),t),timings:i,options:null}}}class Ode{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Km(n){return n?(n=fI(n)).params&&(n.params=function Nde(n){return n?fI(n):null}(n.params)):n={},n}function fV(n,e,t){return{duration:n,delay:e,easing:t}}function pV(n,e,t,i,r,o,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:c,subTimeline:p}}class zM{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Bde=new RegExp(":enter","g"),Hde=new RegExp(":leave","g");function gV(n,e,t,i,r,o=new Map,c=new Map,p,_,E=[]){return(new $de).buildKeyframes(n,e,t,i,r,o,c,p,_,E)}class $de{buildKeyframes(e,t,i,r,o,c,p,_,E,T=[]){E=E||new zM;const R=new mV(e,t,E,r,o,T,[]);R.options=_;const F=_.delay?sh(_.delay):0;R.currentTimeline.delayNextStep(F),R.currentTimeline.setStyles([c],null,R.errors,_),$a(this,i,R);const G=R.timelines.filter(K=>K.containsAnimation());if(G.length&&p.size){let K;for(let ue=G.length-1;ue>=0;ue--){const we=G[ue];if(we.element===t){K=we;break}}K&&!K.allowOnlyTimelineStyles()&&K.setStyles([p],null,R.errors,_)}return G.length?G.map(K=>K.buildKeyframes()):[pV(t,[],[],[],0,F,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);o!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const o=r?.delay;if(o){const c="number"==typeof o?o:sh(gI(o,r?.params??{},t.errors));i.delayNextStep(c)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime;const c=null!=i.duration?sh(i.duration):null,p=null!=i.delay?sh(i.delay):null;return 0!==c&&e.forEach(_=>{const E=t.appendInstructionToTimeline(_,c,p);o=Math.max(o,E.duration+E.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),$a(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=WM);const c=sh(o.delay);r.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>$a(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?sh(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);o&&p.delayNextStep(o),$a(this,c,p),r=Math.max(r,p.currentTimeline.currentTime),i.push(p.currentTimeline)}),i.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return BM(t.params?gI(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,p=t.createSubContext().currentTimeline;p.easing=i.easing,e.styles.forEach(_=>{p.forwardTime((_.offset||0)*o),p.setStyles(_.styles,_.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?sh(r.delay):0;o&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=WM);let c=i;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=p.length;let _=null;p.forEach((E,T)=>{t.currentQueryIndex=T;const R=t.createSubContext(e.options,E);o&&R.delayNextStep(o),E===t.element&&(_=R.currentTimeline),$a(this,e.animation,R),R.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,R.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,o=e.timings,c=Math.abs(o.duration),p=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":_=p-_;break;case"full":_=i.currentStaggerTime}const T=t.currentTimeline;_&&T.delayNextStep(_);const R=T.currentTime;$a(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-R+(r.startTime-i.currentTimeline.startTime)}}const WM={};class mV{constructor(e,t,i,r,o,c,p,_){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=WM,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new KM(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=sh(i.duration)),null!=i.delay&&(r.delay=sh(i.delay));const o=i.params;if(o){let c=r.params;c||(c=this.options.params={}),Object.keys(o).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=gI(o[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,o=new mV(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=WM,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new Gde(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,c){let p=[];if(r&&p.push(this.element),e.length>0){e=(e=e.replace(Bde,"."+this._enterClassName)).replace(Hde,"."+this._leaveClassName);let E=this._driver.query(this.element,e,1!=i);0!==i&&(E=i<0?E.slice(E.length+i,E.length):E.slice(0,i)),p.push(...E)}return!o&&0==p.length&&c.push(function Wce(n){return new u.vHH(3014,!1)}()),p}}class KM{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new KM(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||ih),this._currentKeyframe.set(t,ih);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const o=r&&r.params||{},c=function qde(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let o of i)t.set(o,ih)}else pp(r,t)}),t}(e,this._globalTimelineStyles);for(let[p,_]of c){const E=gI(_,o,i);this._pendingStyles.set(p,E),this._localTimelineStyles.has(p)||this._backFill.set(p,this._globalTimelineStyles.get(p)??ih),this._updateStyle(p,E)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((p,_)=>{const E=pp(p,new Map,this._backFill);E.forEach((T,R)=>{T===JU?e.add(R):T===ih&&t.add(R)}),i||E.set("offset",_/this.duration),r.push(E)});const o=e.size?jM(e.values()):[],c=t.size?jM(t.values()):[];if(i){const p=r[0],_=new Map(p);p.set("offset",0),_.set("offset",1),r=[p,_]}return pV(this.element,r,o,c,this.duration,this.startTime,this.easing,!1)}}class Gde extends KM{constructor(e,t,i,r,o,c,p=!1){super(e,t,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],c=i+t,p=t/c,_=pp(e[0]);_.set("offset",0),o.push(_);const E=pp(e[0]);E.set("offset",J9(p)),o.push(E);const T=e.length-1;for(let R=1;R<=T;R++){let F=pp(e[R]);const G=F.get("offset");F.set("offset",J9((t+G*i)/c)),o.push(F)}i=c,t=0,r="",e=o}return pV(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function J9(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class _V{}const Zde=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class zde extends _V{normalizePropertyName(e,t){return dV(e)}normalizeStyleValue(e,t,i,r){let o="";const c=i.toString().trim();if(Zde.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const p=i.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&r.push(function Lce(n,e){return new u.vHH(3005,!1)}())}return c+o}}function X9(n,e,t,i,r,o,c,p,_,E,T,R,F){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:c,timelines:p,queriedElements:_,preStyleProps:E,postStyleProps:T,totalTime:R,errors:F}}const yV={};class e7{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function Wde(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,c,p,_,E,T){const R=[],F=this.ast.options&&this.ast.options.params||yV,K=this.buildStyles(i,p&&p.params||yV,R),ue=_&&_.params||yV,we=this.buildStyles(r,ue,R),Ke=new Set,ut=new Map,ct=new Map,ht="void"===r,Pt={params:Kde(ue,F),delay:this.ast.options?.delay},Nt=T?[]:gV(e,t,this.ast.animation,o,c,K,we,Pt,E,R);let bn=0;if(Nt.forEach(qo=>{bn=Math.max(qo.duration+qo.delay,bn)}),R.length)return X9(t,this._triggerName,i,r,ht,K,we,[],[],ut,ct,bn,R);Nt.forEach(qo=>{const Au=qo.element,ni=Ha(ut,Au,new Set);qo.preStyleProps.forEach(Jn=>ni.add(Jn));const Ga=Ha(ct,Au,new Set);qo.postStyleProps.forEach(Jn=>Ga.add(Jn)),Au!==t&&Ke.add(Au)});const tr=jM(Ke.values());return X9(t,this._triggerName,i,r,ht,K,we,Nt,tr,ut,ct,bn)}}function Kde(n,e){const t=fI(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class Yde{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=fI(this.defaultParams);return Object.keys(e).forEach(o=>{const c=e[o];null!==c&&(r[o]=c)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((c,p)=>{c&&(c=gI(c,r,t));const _=this.normalizer.normalizePropertyName(p,t);c=this.normalizer.normalizeStyleValue(p,_,c,t),i.set(p,c)})}),i}}class Jde{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new Yde(r.style,r.options&&r.options.params||{},i))}),t7(this.states,"true","1"),t7(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new e7(e,r,this.states))}),this.fallbackTransition=function Xde(n,e,t){return new e7(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(c=>c.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function t7(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const ehe=new zM;class the{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],r=[],o=hV(this._driver,t,i,r);if(i.length)throw function tde(n){return new u.vHH(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,i){const r=e.element,o=P9(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],o=this._animations.get(e);let c;const p=new Map;if(o?(c=gV(this._driver,t,o,aV,LM,new Map,new Map,i,ehe,r),c.forEach(T=>{const R=Ha(p,T.element,new Map);T.postStyleProps.forEach(F=>R.set(F,null))})):(r.push(function nde(){return new u.vHH(3300,!1)}()),c=[]),r.length)throw function ide(n){return new u.vHH(3504,!1)}();p.forEach((T,R)=>{T.forEach((F,G)=>{T.set(G,this._driver.computeStyle(R,G,ih))})});const E=fp(c.map(T=>{const R=p.get(T.element);return this._buildPlayer(T,new Map,R)}));return this._playersById.set(e,E),E.onDestroy(()=>this.destroy(e)),this.players.push(E),E}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function rde(n){return new u.vHH(3301,!1)}();return t}listen(e,t,i,r){const o=iV(t,"","","");return tV(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const n7="ng-animate-queued",vV="ng-animate-disabled",ohe=[],i7={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ahe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ul="__ng_removed";class wV{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function dhe(n){return n??null}(i?e.value:e),i){const o=fI(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const mI="void",bV=new wV(mI);class lhe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Vl(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function sde(n,e){return new u.vHH(3302,!1)}();if(null==i||0==i.length)throw function ode(n){return new u.vHH(3303,!1)}();if(!function hhe(n){return"start"==n||"done"==n}(i))throw function ade(n,e){return new u.vHH(3400,!1)}();const o=Ha(this._elementListeners,e,[]),c={name:t,phase:i,callback:r};o.push(c);const p=Ha(this._engine.statesByElement,e,new Map);return p.has(t)||(Vl(e,UM),Vl(e,UM+"-"+t),p.set(t,bV)),()=>{this._engine.afterFlush(()=>{const _=o.indexOf(c);_>=0&&o.splice(_,1),this._triggers.has(t)||p.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function lde(n){return new u.vHH(3401,!1)}();return t}trigger(e,t,i,r=!0){const o=this._getTrigger(t),c=new EV(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Vl(e,UM),Vl(e,UM+"-"+t),this._engine.statesByElement.set(e,p=new Map));let _=p.get(t);const E=new wV(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&_&&E.absorbOptions(_.options),p.set(t,E),_||(_=bV),E.value!==mI&&_.value===E.value){if(!function ghe(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(_.params,E.params)){const ue=[],we=o.matchStyles(_.value,_.params,ue),Ke=o.matchStyles(E.value,E.params,ue);ue.length?this._engine.reportError(ue):this._engine.afterFlush(()=>{Wm(e,we),$c(e,Ke)})}return}const F=Ha(this._engine.playersByElement,e,[]);F.forEach(ue=>{ue.namespaceId==this.id&&ue.triggerName==t&&ue.queued&&ue.destroy()});let G=o.matchTransition(_.value,E.value,e,E.params),K=!1;if(!G){if(!r)return;G=o.fallbackTransition,K=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:G,fromState:_,toState:E,player:c,isFallbackTransition:K}),K||(Vl(e,n7),c.onStart(()=>{f0(e,n7)})),c.onDone(()=>{let ue=this.players.indexOf(c);ue>=0&&this.players.splice(ue,1);const we=this._engine.playersByElement.get(e);if(we){let Ke=we.indexOf(c);Ke>=0&&we.splice(Ke,1)}}),this.players.push(c),F.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,VM,!0);i.forEach(r=>{if(r[Ul])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(c=>c.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const o=this._engine.statesByElement.get(e),c=new Map;if(o){const p=[];if(o.forEach((_,E)=>{if(c.set(E,_.value),this._triggers.has(E)){const T=this.trigger(e,E,mI,r);T&&p.push(T)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),i&&fp(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(o=>{const c=o.name;if(r.has(c))return;r.add(c);const _=this._triggers.get(c).fallbackTransition,E=i.get(c)||bV,T=new wV(mI),R=new EV(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:E,toState:T,player:R,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let c=e;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Ul];(!o||o===i7)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Vl(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,c=this._elementListeners.get(o);c&&c.forEach(p=>{if(p.name==i.triggerName){const _=iV(o,i.triggerName,i.fromState.value,i.toState.value);_._data=e,tV(i.player,p.phase,_,p.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const o=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==o||0==c?o-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class uhe{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new lhe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let c=!1,p=this.driver.getParentElement(t);for(;p;){const _=r.get(p);if(_){const E=i.indexOf(_);i.splice(E+1,0,e),c=!0;break}p=this.driver.getParentElement(p)}c||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}return t}trigger(e,t,i,r){if(YM(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!YM(t))return;const o=t[Ul];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Vl(e,vV)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),f0(e,vV))}removeNode(e,t,i,r){if(YM(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[Ul]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return YM(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,VM,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,lV,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return fp(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ul];if(t&&t.setForRemoval){if(e[Ul]=i7,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(vV)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Vl(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?fp(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function ude(n){return new u.vHH(3402,!1)}()}_flushAnimations(e,t){const i=new zM,r=[],o=new Map,c=[],p=new Map,_=new Map,E=new Map,T=new Set;this.disabledNodes.forEach(tt=>{T.add(tt);const jt=this.driver.query(tt,".ng-animate-queued",!0);for(let sn=0;sn<jt.length;sn++)T.add(jt[sn])});const R=this.bodyNode,F=Array.from(this.statesByElement.keys()),G=o7(F,this.collectedEnterElements),K=new Map;let ue=0;G.forEach((tt,jt)=>{const sn=aV+ue++;K.set(jt,sn),tt.forEach(Ln=>Vl(Ln,sn))});const we=[],Ke=new Set,ut=new Set;for(let tt=0;tt<this.collectedLeaveElements.length;tt++){const jt=this.collectedLeaveElements[tt],sn=jt[Ul];sn&&sn.setForRemoval&&(we.push(jt),Ke.add(jt),sn.hasAnimation?this.driver.query(jt,".ng-star-inserted",!0).forEach(Ln=>Ke.add(Ln)):ut.add(jt))}const ct=new Map,ht=o7(F,Array.from(Ke));ht.forEach((tt,jt)=>{const sn=LM+ue++;ct.set(jt,sn),tt.forEach(Ln=>Vl(Ln,sn))}),e.push(()=>{G.forEach((tt,jt)=>{const sn=K.get(jt);tt.forEach(Ln=>f0(Ln,sn))}),ht.forEach((tt,jt)=>{const sn=ct.get(jt);tt.forEach(Ln=>f0(Ln,sn))}),we.forEach(tt=>{this.processLeaveNode(tt)})});const Pt=[],Nt=[];for(let tt=this._namespaceList.length-1;tt>=0;tt--)this._namespaceList[tt].drainQueuedTransitions(t).forEach(sn=>{const Ln=sn.player,Ci=sn.element;if(Pt.push(Ln),this.collectedEnterElements.length){const _i=Ci[Ul];if(_i&&_i.setForMove){if(_i.previousTriggersValues&&_i.previousTriggersValues.has(sn.triggerName)){const Zc=_i.previousTriggersValues.get(sn.triggerName),no=this.statesByElement.get(sn.element);if(no&&no.has(sn.triggerName)){const g0=no.get(sn.triggerName);g0.value=Zc,no.set(sn.triggerName,g0)}}return void Ln.destroy()}}const qa=!R||!this.driver.containsElement(R,Ci),Ts=ct.get(Ci),qc=K.get(Ci),$i=this._buildInstruction(sn,i,qc,Ts,qa);if($i.errors&&$i.errors.length)return void Nt.push($i);if(qa)return Ln.onStart(()=>Wm(Ci,$i.fromStyles)),Ln.onDestroy(()=>$c(Ci,$i.toStyles)),void r.push(Ln);if(sn.isFallbackTransition)return Ln.onStart(()=>Wm(Ci,$i.fromStyles)),Ln.onDestroy(()=>$c(Ci,$i.toStyles)),void r.push(Ln);const XM=[];$i.timelines.forEach(_i=>{_i.stretchStartingKeyframe=!0,this.disabledNodes.has(_i.element)||XM.push(_i)}),$i.timelines=XM,i.append(Ci,$i.timelines),c.push({instruction:$i,player:Ln,element:Ci}),$i.queriedElements.forEach(_i=>Ha(p,_i,[]).push(Ln)),$i.preStyleProps.forEach((_i,Zc)=>{if(_i.size){let no=_.get(Zc);no||_.set(Zc,no=new Set),_i.forEach((g0,wI)=>no.add(wI))}}),$i.postStyleProps.forEach((_i,Zc)=>{let no=E.get(Zc);no||E.set(Zc,no=new Set),_i.forEach((g0,wI)=>no.add(wI))})});if(Nt.length){const tt=[];Nt.forEach(jt=>{tt.push(function cde(n,e){return new u.vHH(3505,!1)}())}),Pt.forEach(jt=>jt.destroy()),this.reportError(tt)}const bn=new Map,tr=new Map;c.forEach(tt=>{const jt=tt.element;i.has(jt)&&(tr.set(jt,jt),this._beforeAnimationBuild(tt.player.namespaceId,tt.instruction,bn))}),r.forEach(tt=>{const jt=tt.element;this._getPreviousPlayers(jt,!1,tt.namespaceId,tt.triggerName,null).forEach(Ln=>{Ha(bn,jt,[]).push(Ln),Ln.destroy()})});const qo=we.filter(tt=>l7(tt,_,E)),Au=new Map;s7(Au,this.driver,ut,E,ih).forEach(tt=>{l7(tt,_,E)&&qo.push(tt)});const Ga=new Map;G.forEach((tt,jt)=>{s7(Ga,this.driver,new Set(tt),_,JU)}),qo.forEach(tt=>{const jt=Au.get(tt),sn=Ga.get(tt);Au.set(tt,new Map([...Array.from(jt?.entries()??[]),...Array.from(sn?.entries()??[])]))});const Jn=[],Gc=[],ki={};c.forEach(tt=>{const{element:jt,player:sn,instruction:Ln}=tt;if(i.has(jt)){if(T.has(jt))return sn.onDestroy(()=>$c(jt,Ln.toStyles)),sn.disabled=!0,sn.overrideTotalTime(Ln.totalTime),void r.push(sn);let Ci=ki;if(tr.size>1){let Ts=jt;const qc=[];for(;Ts=Ts.parentNode;){const $i=tr.get(Ts);if($i){Ci=$i;break}qc.push(Ts)}qc.forEach($i=>tr.set($i,Ci))}const qa=this._buildAnimation(sn.namespaceId,Ln,bn,o,Ga,Au);if(sn.setRealPlayer(qa),Ci===ki)Jn.push(sn);else{const Ts=this.playersByElement.get(Ci);Ts&&Ts.length&&(sn.parentPlayer=fp(Ts)),r.push(sn)}}else Wm(jt,Ln.fromStyles),sn.onDestroy(()=>$c(jt,Ln.toStyles)),Gc.push(sn),T.has(jt)&&r.push(sn)}),Gc.forEach(tt=>{const jt=o.get(tt.element);if(jt&&jt.length){const sn=fp(jt);tt.setRealPlayer(sn)}}),r.forEach(tt=>{tt.parentPlayer?tt.syncPlayerEvents(tt.parentPlayer):tt.destroy()});for(let tt=0;tt<we.length;tt++){const jt=we[tt],sn=jt[Ul];if(f0(jt,LM),sn&&sn.hasAnimation)continue;let Ln=[];if(p.size){let qa=p.get(jt);qa&&qa.length&&Ln.push(...qa);let Ts=this.driver.query(jt,lV,!0);for(let qc=0;qc<Ts.length;qc++){let $i=p.get(Ts[qc]);$i&&$i.length&&Ln.push(...$i)}}const Ci=Ln.filter(qa=>!qa.destroyed);Ci.length?fhe(this,jt,Ci):this.processLeaveNode(jt)}return we.length=0,Jn.forEach(tt=>{this.players.push(tt),tt.onDone(()=>{tt.destroy();const jt=this.players.indexOf(tt);this.players.splice(jt,1)}),tt.play()}),Jn}elementContainsData(e,t){let i=!1;const r=t[Ul];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const _=!o||o==mI;p.forEach(E=>{E.queued||!_&&E.triggerName!=r||c.push(E)})}}return(i||r)&&(c=c.filter(p=>!(i&&i!=p.namespaceId||r&&r!=p.triggerName))),c}_beforeAnimationBuild(e,t,i){const o=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const E=_.element,T=E!==o,R=Ha(i,E,[]);this._getPreviousPlayers(E,T,c,p,t.toState).forEach(G=>{const K=G.getRealPlayer();K.beforeDestroy&&K.beforeDestroy(),G.destroy(),R.push(G)})}Wm(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,c){const p=t.triggerName,_=t.element,E=[],T=new Set,R=new Set,F=t.timelines.map(K=>{const ue=K.element;T.add(ue);const we=ue[Ul];if(we&&we.removedBeforeQueried)return new WC(K.duration,K.delay);const Ke=ue!==_,ut=function phe(n){const e=[];return a7(n,e),e}((i.get(ue)||ohe).map(bn=>bn.getRealPlayer())).filter(bn=>!!bn.element&&bn.element===ue),ct=o.get(ue),ht=c.get(ue),Pt=P9(0,this._normalizer,0,K.keyframes,ct,ht),Nt=this._buildPlayer(K,Pt,ut);if(K.subTimeline&&r&&R.add(ue),Ke){const bn=new EV(e,p,ue);bn.setRealPlayer(Nt),E.push(bn)}return Nt});E.forEach(K=>{Ha(this.playersByQueriedElement,K.element,[]).push(K),K.onDone(()=>function che(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,K.element,K))}),T.forEach(K=>Vl(K,H9));const G=fp(F);return G.onDestroy(()=>{T.forEach(K=>f0(K,H9)),$c(_,t.toStyles)}),R.forEach(K=>{Ha(r,K,[]).push(G)}),G}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new WC(e.duration,e.delay)}}class EV{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new WC,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>tV(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ha(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function YM(n){return n&&1===n.nodeType}function r7(n,e){const t=n.style.display;return n.style.display=e??"none",t}function s7(n,e,t,i,r){const o=[];t.forEach(_=>o.push(r7(_)));const c=[];i.forEach((_,E)=>{const T=new Map;_.forEach(R=>{const F=e.computeStyle(E,R,r);T.set(R,F),(!F||0==F.length)&&(E[Ul]=ahe,c.push(E))}),n.set(E,T)});let p=0;return t.forEach(_=>r7(_,o[p++])),c}function o7(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=1,r=new Set(e),o=new Map;function c(p){if(!p)return i;let _=o.get(p);if(_)return _;const E=p.parentNode;return _=t.has(E)?E:r.has(E)?i:c(E),o.set(p,_),_}return e.forEach(p=>{const _=c(p);_!==i&&t.get(_).push(p)}),t}function Vl(n,e){n.classList?.add(e)}function f0(n,e){n.classList?.remove(e)}function fhe(n,e,t){fp(t).onDone(()=>n.processLeaveNode(e))}function a7(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof w9?a7(i.players,e):e.push(i)}}function l7(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}class QM{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new uhe(e,t,i),this._timelineEngine=new the(e,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){const c=e+"-"+r;let p=this._triggerCache[c];if(!p){const _=[],E=[],T=hV(this._driver,o,_,E);if(_.length)throw function Xce(n,e){return new u.vHH(3404,!1)}();p=function Qde(n,e,t){return new Jde(n,e,t)}(r,T,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,r,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[o,c]=N9(i);this._timelineEngine.command(o,t,c,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if("@"==i.charAt(0)){const[c,p]=N9(i);return this._timelineEngine.listen(c,t,p,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let _he=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&$c(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&($c(this._element,this._initialStyles),this._endStyles&&($c(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Wm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Wm(this._element,this._endStyles),this._endStyles=null),$c(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function CV(n){let e=null;return n.forEach((t,i)=>{(function yhe(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class u7{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:W9(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class vhe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return U9(e,t)}getParentElement(e){return sV(e)}query(e,t,i){return V9(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,o,c=[]){const _={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(_.easing=o);const E=new Map,T=c.filter(G=>G instanceof u7);(function Cde(n,e){return 0===n||0===e})(i,r)&&T.forEach(G=>{G.currentSnapshot.forEach((K,ue)=>E.set(ue,K))});let R=function vde(n){return n.length?n[0]instanceof Map?n:n.map(e=>$9(e)):[]}(t).map(G=>pp(G));R=function Ide(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,c)=>{i.has(c)||r.push(c),i.set(c,o)}),r.length)for(let o=1;o<e.length;o++){let c=e[o];r.forEach(p=>c.set(p,W9(n,p)))}}return e}(e,R,E);const F=function mhe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=CV(e[0]),e.length>1&&(i=CV(e[e.length-1]))):e instanceof Map&&(t=CV(e)),t||i?new _he(n,t,i):null}(e,R);return new u7(e,R,_,F)}}let whe=(()=>{class n extends g9{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?_9(t):t;return c7(this._renderer,null,i,"register",[r]),new bhe(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(Se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class bhe extends Ole{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Ehe(this._id,e,t||{},this._renderer)}}class Ehe{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return c7(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function c7(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const d7="@.disabled";let Che=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(o,c)=>{const p=c?.parentNode(o);p&&c.removeChild(p,o)}}createRenderer(t,i){const o=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let T=this._rendererCache.get(o);return T||(T=new h7("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,T)),T}const c=i.id,p=i.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const _=T=>{Array.isArray(T)?T.forEach(_):this.engine.registerTrigger(c,p,t,T.name,T)};return i.data.animation.forEach(_),new Ihe(this,p,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[c,p]=o;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(QM),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class h7{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==d7?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Ihe extends h7{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==d7?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function The(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),c="";return"@"!=o.charAt(0)&&([o,c]=function She(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,r,o,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,i,p)})}return this.delegate.listen(e,t,i)}}let Dhe=(()=>{class n extends QM{constructor(t,i,r,o){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Se),u.LFG(oV),u.LFG(_V),u.LFG(u.z2F))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const f7=[{provide:g9,useClass:whe},{provide:_V,useFactory:function Ahe(){return new zde}},{provide:QM,useClass:Dhe},{provide:u.FYo,useFactory:function Mhe(n,e,t){return new Che(n,e,t)},deps:[ac,QM,u.R0b]}],IV=[{provide:oV,useFactory:()=>new vhe},{provide:u.QbO,useValue:"BrowserAnimations"},...f7],p7=[{provide:oV,useClass:B9},{provide:u.QbO,useValue:"NoopAnimations"},...f7];let xhe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?p7:IV}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:IV,imports:[Sa]}),n})();function khe(n,e){1&n&&u._UZ(0,"app-posts",3),2&n&&u.Q6J("post",e.$implicit)}function Rhe(n,e){1&n&&(u.TgZ(0,"div",4)(1,"div",5),u._uU(2," There are no bookmarks to show. "),u.qZA(),u.TgZ(3,"div",6),u._uU(4," You have not bookmarked any posts. Try bookmarking a post and coming back here. "),u.qZA()())}class _I{constructor(e,t,i){this.authService=e,this.afs=t,this.afAuth=i,this.bookmarks=[],this.posts=[],this.noBookmarks=!1}ngOnInit(){this.userSubscribe=this.afAuth.authState.subscribe(e=>{e&&this.getBookmarks()})}ngOnDestroy(){this.userSubscribe?.unsubscribe()}getBookmarks(){this.afs.collection("bookmarks").ref.where("uid","==",this.authService.userData.uid).orderBy("date","desc").get().then(e=>{e.size>0?e.forEach(t=>{let i=t.data();this.afs.collection("posts").doc(i.pid).ref.get().then(r=>{this.posts.push(r.data())})}):this.noBookmarks=!0})}}function Phe(n,e){if(1&n&&(u.TgZ(0,"div",24)(1,"b",9),u._uU(2,"Bio:"),u.qZA(),u._uU(3),u.qZA()),2&n){const t=u.oxw(2);u.xp6(3),u.hij(" ",t.userData.bio," ")}}function Nhe(n,e){if(1&n&&(u.TgZ(0,"div",25)(1,"b",9),u._uU(2,"Location:"),u.qZA(),u._uU(3),u.qZA()),2&n){const t=u.oxw(2);u.xp6(3),u.hij(" ",t.userData.location," ")}}function Ohe(n,e){if(1&n&&(u.TgZ(0,"div",26)(1,"b",9),u._uU(2,"Link:"),u.qZA(),u._uU(3),u.qZA()),2&n){const t=u.oxw(2);u.xp6(3),u.hij(" ",t.userData.link," ")}}function Fhe(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"a",18),u.NdJ("click",function(){u.CHM(t);const r=u.oxw(2);return u.KtG(r.modalService.open("media:"+r.userData.bannerURL.split("/")[7]))}),u._uU(1,"Banner"),u.qZA()}}_I.\u0275fac=function(e){return new(e||_I)(u.Y36(Ei),u.Y36(Is),u.Y36(Cl))},_I.\u0275cmp=u.Xpm({type:_I,selectors:[["app-bookmarks"]],decls:3,vars:2,consts:[[1,"bookmarks-container"],[3,"post",4,"ngFor","ngForOf"],["class","bookmarks-none",4,"ngIf"],[3,"post"],[1,"bookmarks-none"],[1,"nb-header"],[1,"nb-message"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.YNc(1,khe,1,1,"app-posts",1),u.YNc(2,Rhe,5,0,"div",2),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngForOf",t.posts),u.xp6(1),u.Q6J("ngIf",t.noBookmarks))},dependencies:[On,qt,Zm],styles:[".bookmarks-none[_ngcontent-%COMP%]{width:475px;display:block;margin:20px auto 0}.nb-header[_ngcontent-%COMP%]{font-size:25px;font-weight:700}"]});const Lhe=function(n){return["/",n]};function Uhe(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"b",9),u._uU(4,"Join Date:"),u.qZA(),u._uU(5),u.qZA(),u.TgZ(6,"div",10)(7,"b",9),u._uU(8,"UID:"),u.qZA(),u._uU(9),u.qZA(),u.TgZ(10,"div",11)(11,"b",9),u._uU(12,"Email:"),u.qZA(),u._uU(13),u.qZA(),u.TgZ(14,"div",12)(15,"b",9),u._uU(16,"Profile Name:"),u.qZA(),u._uU(17),u.qZA(),u.YNc(18,Phe,4,1,"div",13),u.YNc(19,Nhe,4,1,"div",14),u.YNc(20,Ohe,4,1,"div",15),u.TgZ(21,"div",16)(22,"b",9),u._uU(23,"Stats:"),u.qZA(),u._uU(24),u.qZA(),u.TgZ(25,"div",17)(26,"b",9),u._uU(27,"Media:"),u.qZA(),u._uU(28," \xa0"),u.TgZ(29,"a",18),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.modalService.open("media:"+r.userData.photoURL.split("/")[7]))}),u._uU(30,"Profile Picture"),u.qZA(),u._uU(31," \xa0"),u.YNc(32,Fhe,2,0,"a",19),u.qZA()(),u.TgZ(33,"div",20)(34,"div",21),u._uU(35," View Profile "),u.qZA(),u.TgZ(36,"div",22),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.reset())}),u._uU(37," Reset User "),u.qZA(),u.TgZ(38,"div",23),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.modalService.open("delete:profile-"+r.userData.uid))}),u._uU(39," Delete User "),u.qZA()()()}if(2&n){const t=u.oxw();u.xp6(5),u.hij(" ",t.userData.joinDate," "),u.xp6(4),u.hij(" ",t.userData.uid," "),u.xp6(4),u.hij(" ",t.userData.email," "),u.xp6(4),u.hij(" ",t.userData.profileName," "),u.xp6(1),u.Q6J("ngIf",""!=t.userData.bio),u.xp6(1),u.Q6J("ngIf",""!=t.userData.location),u.xp6(1),u.Q6J("ngIf",""!=t.userData.link),u.xp6(4),u.lnq(" Followers: ",t.userData.followers.length," Following: ",t.userData.following.length," Posts: ",t.userData.posts.length," "),u.xp6(8),u.Q6J("ngIf",""!=t.userData.bannerURL),u.xp6(2),u.Q6J("routerLink",u.VKq(12,Lhe,t.userData.displayName))}}const Vhe=function(n){return{transform:n}},Bhe=function(){return{}};class yI{constructor(e,t,i){this.getUserService=e,this.afs=t,this.modalService=i,this.userData={},this.expand=!1}ngOnInit(){return(0,Ce.Z)(function*(){})()}reset(){this.userData.profileName=this.userData.displayName,this.userData.bio="",this.userData.location="",this.userData.link="",this.userData.bannerURL="",this.afs.collection("profiles").doc(this.userData.uid).update({profileName:this.userData.displayName,bio:"",location:"",link:"",bannerURL:""}),this.userData.photoURL="https://firebasestorage.googleapis.com/v0/b/project-social-923a2.appspot.com/o/profile-pictures%2Fdefault-pfp.jpg?alt=media&token=008d33ee-4bb3-4b01-b227-c8d1eee67d6d",this.afs.collection("users").doc(this.userData.uid).update({photoURL:this.userData.photoURL})}show(){var e=this;return(0,Ce.Z)(function*(){e.userData.uid||(e.userData=yield e.getUserService.UserFromUID(e.user.uid)),e.expand=!e.expand})()}}function jhe(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",14)(1,"div",15),u.NdJ("click",function(){u.CHM(t);const r=u.oxw(2);return u.KtG(r.modalService.open("manage"))}),u._uU(2," Manage "),u.qZA()()}}function Hhe(n,e){1&n&&u._UZ(0,"app-user",16),2&n&&u.Q6J("user",e.$implicit)}function $he(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"input",7),u.NdJ("ngModelChange",function(r){u.CHM(t);const o=u.oxw();return u.KtG(o.filterText=r)})("keyup.enter",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.filter(r.filterText))}),u.qZA()(),u.TgZ(5,"div",8),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.filter(r.filterText))}),u._uU(6," Filter "),u.qZA()(),u.TgZ(7,"div",9)(8,"div",10),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return r.reset(),u.KtG(r.filterText="")}),u._uU(9," Reset "),u.qZA()(),u.YNc(10,jhe,3,0,"div",11),u.qZA(),u.TgZ(11,"div",12),u.YNc(12,Hhe,1,1,"app-user",13),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(4),u.Q6J("ngModel",t.filterText),u.xp6(6),u.Q6J("ngIf",-1!=t.adminService.owners.indexOf(t.authService.userData.uid)),u.xp6(2),u.Q6J("ngForOf",t.users)}}function Ghe(n,e){1&n&&(u.TgZ(0,"div",17)(1,"div",18),u._uU(2," You found the secret admin page! "),u.qZA(),u.TgZ(3,"div",19),u._uU(4," However, you are not an admin. So you are unable to do anything here. "),u.qZA()())}yI.\u0275fac=function(e){return new(e||yI)(u.Y36(Co),u.Y36(Is),u.Y36(xi))},yI.\u0275cmp=u.Xpm({type:yI,selectors:[["app-user"]],inputs:{user:"user"},decls:7,vars:6,consts:[[1,"user-container"],[1,"user-cover",3,"click"],[1,"user-name"],[1,"arrow",3,"ngStyle"],["alt","arrow icon","src","assets/icons/arrow.svg",1,"arrow-svg"],["class","expanded",4,"ngIf"],[1,"expanded"],[1,"user-info"],[1,"user-join"],[1,"user-label"],[1,"user-uid"],[1,"user-email"],[1,"user-profileName"],["class","user-bio",4,"ngIf"],["class","user-location",4,"ngIf"],["class","user-link",4,"ngIf"],[1,"user-stats"],[1,"user-media"],[3,"click"],[3,"click",4,"ngIf"],[1,"manage-user"],[1,"view-profile",3,"routerLink"],[1,"reset-user",3,"click"],[1,"delete-user",3,"click"],[1,"user-bio"],[1,"user-location"],[1,"user-link"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u.NdJ("click",function(){return t.show()}),u.TgZ(2,"div",2),u._uU(3),u.qZA(),u.TgZ(4,"div",3),u._UZ(5,"img",4),u.qZA()(),u.YNc(6,Uhe,40,14,"div",5),u.qZA()),2&e&&(u.xp6(3),u.hij(" ",t.user.displayName," "),u.xp6(1),u.Q6J("ngStyle",t.expand?u.VKq(3,Vhe,"rotate(180deg)"):u.DdM(5,Bhe)),u.xp6(2),u.Q6J("ngIf",t.expand))},dependencies:[qt,Io,bu],styles:[".user-container[_ngcontent-%COMP%]{border-bottom:1px solid var(--psBorderColor)}.user-cover[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:5px;height:40px}.user-cover[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--psHover)}.expanded[_ngcontent-%COMP%]{margin-left:5px}.manage-user[_ngcontent-%COMP%]{display:flex}.delete-user[_ngcontent-%COMP%], .reset-user[_ngcontent-%COMP%], .view-profile[_ngcontent-%COMP%]{cursor:pointer;width:100px;height:30px;color:#fff;display:flex;align-items:center;justify-content:center;background-color:red;border-radius:9999px;margin:5px 5px 5px 0}.reset-user[_ngcontent-%COMP%], .view-profile[_ngcontent-%COMP%]{background-color:#000}.reset-user[_ngcontent-%COMP%]:hover, .view-profile[_ngcontent-%COMP%]:hover{background-color:#272c30}.delete-user[_ngcontent-%COMP%]:hover{background-color:#db1313}.arrow[_ngcontent-%COMP%]{width:20px;height:20px;display:flex;justify-content:center;align-items:center;margin-left:auto;margin-right:8px}.arrow-svg[_ngcontent-%COMP%]{width:15px}.user-media[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00f;cursor:pointer}"]});class vI{constructor(e,t,i,r,o){this.adminService=e,this.authService=t,this.afAuth=i,this.afs=r,this.modalService=o,this.filterText="",this.users=[],this.allUsers=[]}ngOnInit(){this.userSubscribe=this.afAuth.authState.subscribe(e=>{e&&this.afs.collection("users").ref.orderBy("lowerDN","asc").get().then(t=>{t.forEach(i=>{this.users.push(i.data())}),this.allUsers=this.users})})}filter(e){this.reset(),e=e.toLocaleLowerCase(),this.users=this.users.filter(function(t){return t.lowerDN>=e&&t.lowerDN<=e+"~"})}reset(){this.users=this.allUsers}ngOnDestroy(){this.userSubscribe?.unsubscribe()}}vI.\u0275fac=function(e){return new(e||vI)(u.Y36(Ll),u.Y36(Ei),u.Y36(Cl),u.Y36(Is),u.Y36(xi))},vI.\u0275cmp=u.Xpm({type:vI,selectors:[["app-admin"]],decls:3,vars:2,consts:[[1,"admin-container"],["class","admin",4,"ngIf"],["class","not-admin",4,"ngIf"],[1,"admin"],[1,"admin-header"],[1,"filter"],[1,"filter-search"],["placeholder","Filter by Username",1,"filter-input",3,"ngModel","ngModelChange","keyup.enter"],[1,"filter-button",3,"click"],[1,"reset"],[1,"reset-button",3,"click"],["class","manage-admin",4,"ngIf"],[1,"user-list"],[3,"user",4,"ngFor","ngForOf"],[1,"manage-admin"],[1,"manage-button",3,"click"],[3,"user"],[1,"not-admin"],[1,"na-header"],[1,"na-message"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.YNc(1,$he,13,3,"div",1),u.YNc(2,Ghe,5,0,"div",2),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngIf",t.authService.userData&&null!=t.authService.userData.uid&&(-1!=t.adminService.admins.indexOf(t.authService.userData.uid)||-1!=t.adminService.owners.indexOf(t.authService.userData.uid))),u.xp6(1),u.Q6J("ngIf",!t.authService.userData||-1==t.adminService.admins.indexOf(t.authService.userData.uid)||-1!=t.adminService.owners.indexOf(t.authService.userData.uid)))},dependencies:[On,qt,ef,cy,sf,yI],styles:[".not-admin[_ngcontent-%COMP%]{width:475px;display:block;margin:20px auto 0}.na-header[_ngcontent-%COMP%]{font-size:25px;font-weight:700}.admin-header[_ngcontent-%COMP%]{display:flex;align-items:center;height:40px;border-bottom:1px solid var(--psBorderColor)}.filter[_ngcontent-%COMP%]{display:flex}.filter-input[_ngcontent-%COMP%]{margin-left:5px;height:25px;outline:none;width:220px}.manage-admin[_ngcontent-%COMP%]{margin-left:auto;margin-right:0}.filter-button[_ngcontent-%COMP%], .reset-button[_ngcontent-%COMP%], .manage-button[_ngcontent-%COMP%]{cursor:pointer;width:95px;height:30px;color:#fff;display:flex;align-items:center;justify-content:center;background-color:#000;border-radius:9999px;margin:0 5px}.user-list[_ngcontent-%COMP%]{height:calc(100vh - 41px);overflow-y:scroll}"]});const qhe={signInFlow:"popup",signInOptions:[{requireDisplayName:!1,provider:Ok.auth.EmailAuthProvider.PROVIDER_ID}],tosUrl:"<your-tos-link>",privacyPolicyUrl:"<your-privacyPolicyUrl-link>",credentialHelper:qT.auth.CredentialHelper.NONE};class p0{}p0.\u0275fac=function(e){return new(e||p0)},p0.\u0275mod=u.oAB({type:p0,bootstrap:[lI]}),p0.\u0275inj=u.cJS({providers:[Ei,xi,Hc,qm],imports:[Sa,kN,Pk,Ire,cX,Nle,Qk,WS,zS,N.hO.initializeApp({apiKey:"AIzaSyC7HFZL6UIsi1cZHZkMS-KAtHSQLt-qJew",authDomain:"project-social-923a2.firebaseapp.com",databaseURL:"https://project-social-923a2-default-rtdb.firebaseio.com",projectId:"project-social-923a2",storageBucket:"project-social-923a2.appspot.com",messagingSenderId:"823960909578",appId:"1:823960909578:web:5c77455415470d525d2cf3",measurementId:"G-4ZB73RC827"}),Iw.forRoot(qhe),d0,SO.forRoot([{path:"",component:Gm,title:"Project Social | Search"},{path:"feed",component:uI,title:"Project Social | Home"},{path:"search",component:Gm,title:"Project Social | Search"},{path:"bookmarks",component:_I,title:"Project Social | Bookmarks"},{path:"settings",component:dI,title:"Project Social | Settings"},{path:"admin",component:vI,title:"Project Social | Settings"},{path:":user",component:hp,children:[{path:"replies",component:hp},{path:"likes",component:hp},{path:"dislikes",component:hp}]},{path:"post/:postid",component:hI}]),xhe,iue.forRoot({positionClass:"toast-bottom-full-width",preventDuplicates:!0,timeOut:3e3})]}),kh().bootstrapModule(p0).catch(n=>console.error(n))},4159:(Te,ye,q)=>{var V;!function(){var u=window.CustomEvent;function ge(te){for(;te;){if("dialog"===te.localName)return te;te=te.parentElement}return null}function Ie(te){te&&te.blur&&te!==document.body&&te.blur()}function xe(te,re){for(var pe=0;pe<te.length;++pe)if(te[pe]===re)return!0;return!1}function Se(te){return!(!te||!te.hasAttribute("method"))&&"dialog"===te.getAttribute("method").toLowerCase()}function Me(te){if(this.dialog_=te,this.replacedStyleTop_=!1,this.openAsModal_=!1,te.hasAttribute("role")||te.setAttribute("role","dialog"),te.show=this.show.bind(this),te.showModal=this.showModal.bind(this),te.close=this.close.bind(this),"returnValue"in te||(te.returnValue=""),"MutationObserver"in window)new MutationObserver(this.maybeHideModal.bind(this)).observe(te,{attributes:!0,attributeFilter:["open"]});else{var Le,pe=!1,De=function(){pe?this.downgradeModal():this.maybeHideModal(),pe=!1}.bind(this),Ue=function(Fe){if(Fe.target===te){var He="DOMNodeRemoved";pe|=Fe.type.substr(0,He.length)===He,window.clearTimeout(Le),Le=window.setTimeout(De,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(Fe){te.addEventListener(Fe,Ue)})}Object.defineProperty(te,"open",{set:this.setOpen.bind(this),get:te.hasAttribute.bind(te,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}(!u||"object"==typeof u)&&((u=function(re,pe){pe=pe||{};var De=document.createEvent("CustomEvent");return De.initCustomEvent(re,!!pe.bubbles,!!pe.cancelable,pe.detail||null),De}).prototype=window.Event.prototype),Me.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),ve.dm.removeDialog(this))},setOpen:function(te){te?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(te){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var re=document.createElement("div");this.dialog_.insertBefore(re,this.dialog_.firstChild),re.tabIndex=-1,re.focus(),this.dialog_.removeChild(re)}var pe=document.createEvent("MouseEvents");pe.initMouseEvent(te.type,te.bubbles,te.cancelable,window,te.detail,te.screenX,te.screenY,te.clientX,te.clientY,te.ctrlKey,te.altKey,te.shiftKey,te.metaKey,te.button,te.relatedTarget),this.dialog_.dispatchEvent(pe),te.stopPropagation()},focus_:function(){var te=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!te&&this.dialog_.tabIndex>=0&&(te=this.dialog_),!te){var pe=["button","input","keygen","select","textarea"].map(function(De){return De+":not([disabled])"});pe.push('[tabindex]:not([disabled]):not([tabindex=""])'),te=this.dialog_.querySelector(pe.join(", "))}Ie(document.activeElement),te&&te.focus()},updateZIndex:function(te,re){if(te<re)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=te,this.backdrop_.style.zIndex=re},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!ve.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function $(te){for(;te&&te!==document.body;){var re=window.getComputedStyle(te),pe=function(De,Le){return!(void 0===re[De]||re[De]===Le)};if(re.opacity<1||pe("zIndex","auto")||pe("transform","none")||pe("mixBlendMode","normal")||pe("filter","none")||pe("perspective","none")||"isolate"===re.isolation||"fixed"===re.position||"touch"===re.webkitOverflowScrolling)return!0;te=te.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,ve.needsCentering(this.dialog_)?(ve.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(te){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==te&&(this.dialog_.returnValue=te);var re=new u("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(re)}};var ve={reposition:function(te){var re=document.body.scrollTop||document.documentElement.scrollTop,pe=re+(window.innerHeight-te.offsetHeight)/2;te.style.top=Math.max(re,pe)+"px"},isInlinePositionSetByStylesheet:function(te){for(var re=0;re<document.styleSheets.length;++re){var pe=document.styleSheets[re],De=null;try{De=pe.cssRules}catch{}if(De)for(var Le=0;Le<De.length;++Le){var Ue=De[Le],Fe=null;try{Fe=document.querySelectorAll(Ue.selectorText)}catch{}if(Fe&&xe(Fe,te)){var He=Ue.style.getPropertyValue("top"),nt=Ue.style.getPropertyValue("bottom");if(He&&"auto"!==He||nt&&"auto"!==nt)return!0}}}return!1},needsCentering:function(te){return!("absolute"!==window.getComputedStyle(te).position||"auto"!==te.style.top&&""!==te.style.top||"auto"!==te.style.bottom&&""!==te.style.bottom||ve.isInlinePositionSetByStylesheet(te))},forceRegisterDialog:function(te){if((window.HTMLDialogElement||te.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",te),"dialog"!==te.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new Me(te)},registerDialog:function(te){te.showModal||ve.forceRegisterDialog(te)},DialogManager:function(){this.pendingDialogStack=[];var te=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(re){this.forwardTab_=void 0,re.stopPropagation(),te([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(re){var pe=[];re.forEach(function(De){for(var Ue,Le=0;Ue=De.removedNodes[Le];++Le)Ue instanceof Element&&("dialog"===Ue.localName&&pe.push(Ue),pe=pe.concat(Ue.querySelectorAll("dialog")))}),pe.length&&te(pe)}))}};if(ve.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},ve.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},ve.DialogManager.prototype.updateStacking=function(){for(var pe,te=this.zIndexHigh_,re=0;pe=this.pendingDialogStack[re];++re)pe.updateZIndex(--te,--te),0===re&&(this.overlay.style.zIndex=--te);var De=this.pendingDialogStack[0];De?(De.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},ve.DialogManager.prototype.containedByTopDialog_=function(te){for(;te=ge(te);){for(var pe,re=0;pe=this.pendingDialogStack[re];++re)if(pe.dialog===te)return 0===re;te=te.parentElement}return!1},ve.DialogManager.prototype.handleFocus_=function(te){if(!this.containedByTopDialog_(te.target)&&(te.preventDefault(),te.stopPropagation(),Ie(te.target),void 0!==this.forwardTab_)){var re=this.pendingDialogStack[0];return re.dialog.compareDocumentPosition(te.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?re.focus_():document.documentElement.focus()),!1}},ve.DialogManager.prototype.handleKey_=function(te){if(this.forwardTab_=void 0,27===te.keyCode){te.preventDefault(),te.stopPropagation();var re=new u("cancel",{bubbles:!1,cancelable:!0}),pe=this.pendingDialogStack[0];pe&&pe.dialog.dispatchEvent(re)&&pe.dialog.close()}else 9===te.keyCode&&(this.forwardTab_=!te.shiftKey)},ve.DialogManager.prototype.checkDOM_=function(te){this.pendingDialogStack.slice().forEach(function(pe){-1!==te.indexOf(pe.dialog)?pe.downgradeModal():pe.maybeHideModal()})},ve.DialogManager.prototype.pushDialog=function(te){return!(this.pendingDialogStack.length>=(this.zIndexHigh_-this.zIndexLow_)/2-1||(1===this.pendingDialogStack.unshift(te)&&this.blockDocument(),this.updateStacking(),0))},ve.DialogManager.prototype.removeDialog=function(te){var re=this.pendingDialogStack.indexOf(te);-1!==re&&(this.pendingDialogStack.splice(re,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},ve.dm=new ve.DialogManager,ve.formSubmitter=null,ve.useValue=null,void 0===window.HTMLDialogElement){var oe=document.createElement("form");if(oe.setAttribute("method","dialog"),"dialog"!==oe.method){var ie=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(ie){var fe=ie.get;ie.get=function(){return Se(this)?"dialog":fe.call(this)};var st=ie.set;ie.set=function(te){return"string"==typeof te&&"dialog"===te.toLowerCase()?this.setAttribute("method",te):st.call(this,te)},Object.defineProperty(HTMLFormElement.prototype,"method",ie)}}document.addEventListener("click",function(te){if(ve.formSubmitter=null,ve.useValue=null,!te.defaultPrevented){var re=te.target;if(re&&Se(re.form)){if(!("submit"===re.type&&["button","input"].indexOf(re.localName)>-1)){if("input"!==re.localName||"image"!==re.type)return;ve.useValue=te.offsetX+","+te.offsetY}ge(re)&&(ve.formSubmitter=re)}}},!1);var me=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!Se(this))return me.call(this);var te=ge(this);te&&te.close()},document.addEventListener("submit",function(te){var re=te.target;if(Se(re)){te.preventDefault();var pe=ge(re);if(pe){var De=ve.formSubmitter;De&&De.form===re?pe.close(ve.useValue||De.value):pe.close(),ve.formSubmitter=null}}},!0)}ve.forceRegisterDialog=ve.forceRegisterDialog,ve.registerDialog=ve.registerDialog,"amd"in q.amdD?void 0!==(V=function(){return ve}.call(ye,q,ye,Te))&&(Te.exports=V):"object"==typeof Te.exports?Te.exports=ve:window.dialogPolyfill=ve}()},5473:()=>{!function(){"use strict";var Te=function(q){this.element_=q,this.init()};window.MaterialButton=Te,Te.prototype.Constant_={},Te.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},Te.prototype.blurHandler_=function(ye){ye&&this.element_.blur()},Te.prototype.disable=Te.prototype.disable=function(){this.element_.disabled=!0},Te.prototype.enable=Te.prototype.enable=function(){this.element_.disabled=!1},Te.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var ye=document.createElement("span");ye.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),ye.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(ye)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:Te,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})}()},2125:()=>{var Te={upgradeDom:function(ye,q){},upgradeElement:function(ye,q){},upgradeElements:function(ye){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(ye,q){},register:function(ye){},downgradeElements:function(ye){}};(Te=function(){"use strict";var ye=[],q=[],V="mdlComponentConfigInternal_";function u(me,qe){for(var te=0;te<ye.length;te++)if(ye[te].className===me)return typeof qe<"u"&&(ye[te]=qe),ye[te];return!1}function $(me){var qe=me.getAttribute("data-upgraded");return null===qe?[""]:qe.split(",")}function ge(me,qe){return-1!==$(me).indexOf(qe)}function Ie(me,qe,te){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(me,{bubbles:qe,cancelable:te});var re=document.createEvent("Events");return re.initEvent(me,qe,te),re}function xe(me,qe){if(typeof me>"u"&&typeof qe>"u")for(var te=0;te<ye.length;te++)xe(ye[te].className,ye[te].cssClass);else{var re=me;if(typeof qe>"u"){var pe=u(re);pe&&(qe=pe.cssClass)}for(var De=document.querySelectorAll("."+qe),Le=0;Le<De.length;Le++)Se(De[Le],re)}}function Se(me,qe){if(!("object"==typeof me&&me instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var te=Ie("mdl-componentupgrading",!0,!0);if(me.dispatchEvent(te),!te.defaultPrevented){var re=$(me),pe=[];if(qe)ge(me,qe)||pe.push(u(qe));else{var De=me.classList;ye.forEach(function(Be){De.contains(Be.cssClass)&&-1===pe.indexOf(Be)&&!ge(me,Be.className)&&pe.push(Be)})}for(var Fe,Le=0,Ue=pe.length;Le<Ue;Le++){if(!(Fe=pe[Le]))throw new Error("Unable to find a registered component for the given class.");re.push(Fe.className),me.setAttribute("data-upgraded",re.join(","));var He=new Fe.classConstructor(me);He[V]=Fe,q.push(He);for(var nt=0,_e=Fe.callbacks.length;nt<_e;nt++)Fe.callbacks[nt](me);Fe.widget&&(me[Fe.className]=He);var Re=Ie("mdl-componentupgraded",!0,!1);me.dispatchEvent(Re)}}}function fe(me){if(me){var qe=q.indexOf(me);q.splice(qe,1);var te=me.element_.getAttribute("data-upgraded").split(","),re=te.indexOf(me[V].classAsString);te.splice(re,1),me.element_.setAttribute("data-upgraded",te.join(","));var pe=Ie("mdl-componentdowngraded",!0,!1);me.element_.dispatchEvent(pe)}}return{upgradeDom:xe,upgradeElement:Se,upgradeElements:function Me(me){Array.isArray(me)||(me=me instanceof Element?[me]:Array.prototype.slice.call(me));for(var re,qe=0,te=me.length;qe<te;qe++)(re=me[qe])instanceof HTMLElement&&(Se(re),re.children.length>0&&Me(re.children))},upgradeAllRegistered:function ie(){for(var me=0;me<ye.length;me++)xe(ye[me].className)},registerUpgradedCallback:function oe(me,qe){var te=u(me);te&&te.callbacks.push(qe)},register:function ve(me){var te=!0;typeof me.widget>"u"&&typeof me.widget>"u"||(te=me.widget||me.widget);var re={classConstructor:me.constructor||me.constructor,className:me.classAsString||me.classAsString,cssClass:me.cssClass||me.cssClass,widget:te,callbacks:[]};if(ye.forEach(function(De){if(De.cssClass===re.cssClass)throw new Error("The provided cssClass has already been registered: "+De.cssClass);if(De.className===re.className)throw new Error("The provided className has already been registered")}),me.constructor.prototype.hasOwnProperty(V))throw new Error("MDL component classes must not have "+V+" defined as a property.");u(me.classAsString,re)||ye.push(re)},downgradeElements:function st(me){var qe=function(re){q.filter(function(pe){return pe.element_===re}).forEach(fe)};if(me instanceof Array||me instanceof NodeList)for(var te=0;te<me.length;te++)qe(me[te]);else{if(!(me instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");qe(me)}}}}()).upgradeDom=Te.upgradeDom,Te.upgradeElement=Te.upgradeElement,Te.upgradeElements=Te.upgradeElements,Te.upgradeAllRegistered=Te.upgradeAllRegistered,Te.registerUpgradedCallback=Te.registerUpgradedCallback,Te.register=Te.register,Te.downgradeElements=Te.downgradeElements,window.componentHandler=Te,window.componentHandler=Te,window.addEventListener("load",function(){"use strict";"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),Te.upgradeAllRegistered()):(Te.upgradeElement=function(){},Te.register=function(){})})},9812:()=>{!function(){"use strict";var Te=function(q){this.element_=q,this.init()};window.MaterialProgress=Te,Te.prototype.Constant_={},Te.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},Te.prototype.setProgress=Te.prototype.setProgress=function(ye){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=ye+"%")},Te.prototype.setBuffer=Te.prototype.setBuffer=function(ye){this.bufferbar_.style.width=ye+"%",this.auxbar_.style.width=100-ye+"%"},Te.prototype.init=function(){if(this.element_){var ye=document.createElement("div");ye.className="progressbar bar bar1",this.element_.appendChild(ye),this.progressbar_=ye,(ye=document.createElement("div")).className="bufferbar bar bar2",this.element_.appendChild(ye),this.bufferbar_=ye,(ye=document.createElement("div")).className="auxbar bar bar3",this.element_.appendChild(ye),this.auxbar_=ye,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:Te,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})}()},7792:()=>{!function(){"use strict";var Te=function(q){this.element_=q,this.init()};window.MaterialSpinner=Te,Te.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},Te.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},Te.prototype.createLayer=Te.prototype.createLayer=function(ye){var q=document.createElement("div");q.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),q.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+ye);var V=document.createElement("div");V.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),V.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var u=document.createElement("div");u.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var $=document.createElement("div");$.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),$.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var ge=[V,u,$],Ie=0;Ie<ge.length;Ie++){var xe=document.createElement("div");xe.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),ge[Ie].appendChild(xe)}q.appendChild(V),q.appendChild(u),q.appendChild($),this.element_.appendChild(q)},Te.prototype.stop=Te.prototype.stop=function(){this.element_.classList.remove("is-active")},Te.prototype.start=Te.prototype.start=function(){this.element_.classList.add("is-active")},Te.prototype.init=function(){if(this.element_){for(var ye=1;ye<=this.Constant_.MDL_SPINNER_LAYER_COUNT;ye++)this.createLayer(ye);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:Te,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})}()},2910:()=>{!function(){"use strict";var Te=function(q){this.element_=q,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=Te,Te.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},Te.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},Te.prototype.onKeyDown_=function(ye){var q=ye.target.value.split("\n").length;13===ye.keyCode&&q>=this.maxRows&&ye.preventDefault()},Te.prototype.onFocus_=function(ye){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},Te.prototype.onBlur_=function(ye){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},Te.prototype.onReset_=function(ye){this.updateClasses_()},Te.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},Te.prototype.checkDisabled=Te.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},Te.prototype.checkFocus=Te.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},Te.prototype.checkValidity=Te.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},Te.prototype.checkDirty=Te.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},Te.prototype.disable=Te.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},Te.prototype.enable=Te.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},Te.prototype.change=Te.prototype.change=function(ye){this.input_.value=ye||"",this.updateClasses_()},Te.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var ye=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),ye&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:Te,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})}()},9751:(Te,ye,q)=>{"use strict";q.d(ye,{y:()=>Me});var V=q(930),u=q(727),$=q(8822),ge=q(9635),Ie=q(2416),xe=q(576),Se=q(2806);let Me=(()=>{class fe{constructor(me){me&&(this._subscribe=me)}lift(me){const qe=new fe;return qe.source=this,qe.operator=me,qe}subscribe(me,qe,te){const re=function ie(fe){return fe&&fe instanceof V.Lv||function oe(fe){return fe&&(0,xe.m)(fe.next)&&(0,xe.m)(fe.error)&&(0,xe.m)(fe.complete)}(fe)&&(0,u.Nn)(fe)}(me)?me:new V.Hp(me,qe,te);return(0,Se.x)(()=>{const{operator:pe,source:De}=this;re.add(pe?pe.call(re,De):De?this._subscribe(re):this._trySubscribe(re))}),re}_trySubscribe(me){try{return this._subscribe(me)}catch(qe){me.error(qe)}}forEach(me,qe){return new(qe=ve(qe))((te,re)=>{const pe=new V.Hp({next:De=>{try{me(De)}catch(Le){re(Le),pe.unsubscribe()}},error:re,complete:te});this.subscribe(pe)})}_subscribe(me){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(me)}[$.L](){return this}pipe(...me){return(0,ge.U)(me)(this)}toPromise(me){return new(me=ve(me))((qe,te)=>{let re;this.subscribe(pe=>re=pe,pe=>te(pe),()=>qe(re))})}}return fe.create=st=>new fe(st),fe})();function ve(fe){var st;return null!==(st=fe??Ie.v.Promise)&&void 0!==st?st:Promise}},7579:(Te,ye,q)=>{"use strict";q.d(ye,{x:()=>Se});var V=q(9751),u=q(727);const ge=(0,q(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ie=q(8737),xe=q(2806);let Se=(()=>{class ve extends V.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ie){const fe=new Me(this,this);return fe.operator=ie,fe}_throwIfClosed(){if(this.closed)throw new ge}next(ie){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const fe of this.currentObservers)fe.next(ie)}})}error(ie){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ie;const{observers:fe}=this;for(;fe.length;)fe.shift().error(ie)}})}complete(){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ie}=this;for(;ie.length;)ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ie;return(null===(ie=this.observers)||void 0===ie?void 0:ie.length)>0}_trySubscribe(ie){return this._throwIfClosed(),super._trySubscribe(ie)}_subscribe(ie){return this._throwIfClosed(),this._checkFinalizedStatuses(ie),this._innerSubscribe(ie)}_innerSubscribe(ie){const{hasError:fe,isStopped:st,observers:me}=this;return fe||st?u.Lc:(this.currentObservers=null,me.push(ie),new u.w0(()=>{this.currentObservers=null,(0,Ie.P)(me,ie)}))}_checkFinalizedStatuses(ie){const{hasError:fe,thrownError:st,isStopped:me}=this;fe?ie.error(st):me&&ie.complete()}asObservable(){const ie=new V.y;return ie.source=this,ie}}return ve.create=(oe,ie)=>new Me(oe,ie),ve})();class Me extends Se{constructor(oe,ie){super(),this.destination=oe,this.source=ie}next(oe){var ie,fe;null===(fe=null===(ie=this.destination)||void 0===ie?void 0:ie.next)||void 0===fe||fe.call(ie,oe)}error(oe){var ie,fe;null===(fe=null===(ie=this.destination)||void 0===ie?void 0:ie.error)||void 0===fe||fe.call(ie,oe)}complete(){var oe,ie;null===(ie=null===(oe=this.destination)||void 0===oe?void 0:oe.complete)||void 0===ie||ie.call(oe)}_subscribe(oe){var ie,fe;return null!==(fe=null===(ie=this.source)||void 0===ie?void 0:ie.subscribe(oe))&&void 0!==fe?fe:u.Lc}}},930:(Te,ye,q)=>{"use strict";q.d(ye,{Hp:()=>te,Lv:()=>fe});var V=q(576),u=q(727),$=q(2416),ge=q(7849),Ie=q(5032);const xe=ve("C",void 0,void 0);function ve(Ue,Fe,He){return{kind:Ue,value:Fe,error:He}}var oe=q(3410),ie=q(2806);class fe extends u.w0{constructor(Fe){super(),this.isStopped=!1,Fe?(this.destination=Fe,(0,u.Nn)(Fe)&&Fe.add(this)):this.destination=Le}static create(Fe,He,nt){return new te(Fe,He,nt)}next(Fe){this.isStopped?De(function Me(Ue){return ve("N",Ue,void 0)}(Fe),this):this._next(Fe)}error(Fe){this.isStopped?De(function Se(Ue){return ve("E",void 0,Ue)}(Fe),this):(this.isStopped=!0,this._error(Fe))}complete(){this.isStopped?De(xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Fe){this.destination.next(Fe)}_error(Fe){try{this.destination.error(Fe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const st=Function.prototype.bind;function me(Ue,Fe){return st.call(Ue,Fe)}class qe{constructor(Fe){this.partialObserver=Fe}next(Fe){const{partialObserver:He}=this;if(He.next)try{He.next(Fe)}catch(nt){re(nt)}}error(Fe){const{partialObserver:He}=this;if(He.error)try{He.error(Fe)}catch(nt){re(nt)}else re(Fe)}complete(){const{partialObserver:Fe}=this;if(Fe.complete)try{Fe.complete()}catch(He){re(He)}}}class te extends fe{constructor(Fe,He,nt){let _e;if(super(),(0,V.m)(Fe)||!Fe)_e={next:Fe??void 0,error:He??void 0,complete:nt??void 0};else{let Re;this&&$.v.useDeprecatedNextContext?(Re=Object.create(Fe),Re.unsubscribe=()=>this.unsubscribe(),_e={next:Fe.next&&me(Fe.next,Re),error:Fe.error&&me(Fe.error,Re),complete:Fe.complete&&me(Fe.complete,Re)}):_e=Fe}this.destination=new qe(_e)}}function re(Ue){$.v.useDeprecatedSynchronousErrorHandling?(0,ie.O)(Ue):(0,ge.h)(Ue)}function De(Ue,Fe){const{onStoppedNotification:He}=$.v;He&&oe.z.setTimeout(()=>He(Ue,Fe))}const Le={closed:!0,next:Ie.Z,error:function pe(Ue){throw Ue},complete:Ie.Z}},727:(Te,ye,q)=>{"use strict";q.d(ye,{Lc:()=>xe,w0:()=>Ie,Nn:()=>Se});var V=q(576);const $=(0,q(3888).d)(ve=>function(ie){ve(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((fe,st)=>`${st+1}) ${fe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie});var ge=q(8737);class Ie{constructor(oe){this.initialTeardown=oe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let oe;if(!this.closed){this.closed=!0;const{_parentage:ie}=this;if(ie)if(this._parentage=null,Array.isArray(ie))for(const me of ie)me.remove(this);else ie.remove(this);const{initialTeardown:fe}=this;if((0,V.m)(fe))try{fe()}catch(me){oe=me instanceof $?me.errors:[me]}const{_finalizers:st}=this;if(st){this._finalizers=null;for(const me of st)try{Me(me)}catch(qe){oe=oe??[],qe instanceof $?oe=[...oe,...qe.errors]:oe.push(qe)}}if(oe)throw new $(oe)}}add(oe){var ie;if(oe&&oe!==this)if(this.closed)Me(oe);else{if(oe instanceof Ie){if(oe.closed||oe._hasParent(this))return;oe._addParent(this)}(this._finalizers=null!==(ie=this._finalizers)&&void 0!==ie?ie:[]).push(oe)}}_hasParent(oe){const{_parentage:ie}=this;return ie===oe||Array.isArray(ie)&&ie.includes(oe)}_addParent(oe){const{_parentage:ie}=this;this._parentage=Array.isArray(ie)?(ie.push(oe),ie):ie?[ie,oe]:oe}_removeParent(oe){const{_parentage:ie}=this;ie===oe?this._parentage=null:Array.isArray(ie)&&(0,ge.P)(ie,oe)}remove(oe){const{_finalizers:ie}=this;ie&&(0,ge.P)(ie,oe),oe instanceof Ie&&oe._removeParent(this)}}Ie.EMPTY=(()=>{const ve=new Ie;return ve.closed=!0,ve})();const xe=Ie.EMPTY;function Se(ve){return ve instanceof Ie||ve&&"closed"in ve&&(0,V.m)(ve.remove)&&(0,V.m)(ve.add)&&(0,V.m)(ve.unsubscribe)}function Me(ve){(0,V.m)(ve)?ve():ve.unsubscribe()}},2416:(Te,ye,q)=>{"use strict";q.d(ye,{v:()=>V});const V={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Te,ye,q)=>{"use strict";q.d(ye,{E:()=>u});const u=new(q(9751).y)(Ie=>Ie.complete())},8996:(Te,ye,q)=>{"use strict";q.d(ye,{D:()=>Fe});var V=q(8421),u=q(5363),$=q(9468),xe=q(9751),Me=q(2202),ve=q(576),oe=q(9672);function fe(He,nt){if(!He)throw new Error("Iterable cannot be null");return new xe.y(_e=>{(0,oe.f)(_e,nt,()=>{const Re=He[Symbol.asyncIterator]();(0,oe.f)(_e,nt,()=>{Re.next().then(Be=>{Be.done?_e.complete():_e.next(Be.value)})},0,!0)})})}var st=q(3670),me=q(8239),qe=q(1144),te=q(6495),re=q(2206),pe=q(4532),De=q(3260);function Fe(He,nt){return nt?function Ue(He,nt){if(null!=He){if((0,st.c)(He))return function ge(He,nt){return(0,V.Xf)(He).pipe((0,$.R)(nt),(0,u.Q)(nt))}(He,nt);if((0,qe.z)(He))return function Se(He,nt){return new xe.y(_e=>{let Re=0;return nt.schedule(function(){Re===He.length?_e.complete():(_e.next(He[Re++]),_e.closed||this.schedule())})})}(He,nt);if((0,me.t)(He))return function Ie(He,nt){return(0,V.Xf)(He).pipe((0,$.R)(nt),(0,u.Q)(nt))}(He,nt);if((0,re.D)(He))return fe(He,nt);if((0,te.T)(He))return function ie(He,nt){return new xe.y(_e=>{let Re;return(0,oe.f)(_e,nt,()=>{Re=He[Me.h](),(0,oe.f)(_e,nt,()=>{let Be,gt;try{({value:Be,done:gt}=Re.next())}catch(bt){return void _e.error(bt)}gt?_e.complete():_e.next(Be)},0,!0)}),()=>(0,ve.m)(Re?.return)&&Re.return()})}(He,nt);if((0,De.L)(He))return function Le(He,nt){return fe((0,De.Q)(He),nt)}(He,nt)}throw(0,pe.z)(He)}(He,nt):(0,V.Xf)(He)}},8421:(Te,ye,q)=>{"use strict";q.d(ye,{Xf:()=>st});var V=q(655),u=q(1144),$=q(8239),ge=q(9751),Ie=q(3670),xe=q(2206),Se=q(4532),Me=q(6495),ve=q(3260),oe=q(576),ie=q(7849),fe=q(8822);function st(Ue){if(Ue instanceof ge.y)return Ue;if(null!=Ue){if((0,Ie.c)(Ue))return function me(Ue){return new ge.y(Fe=>{const He=Ue[fe.L]();if((0,oe.m)(He.subscribe))return He.subscribe(Fe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ue);if((0,u.z)(Ue))return function qe(Ue){return new ge.y(Fe=>{for(let He=0;He<Ue.length&&!Fe.closed;He++)Fe.next(Ue[He]);Fe.complete()})}(Ue);if((0,$.t)(Ue))return function te(Ue){return new ge.y(Fe=>{Ue.then(He=>{Fe.closed||(Fe.next(He),Fe.complete())},He=>Fe.error(He)).then(null,ie.h)})}(Ue);if((0,xe.D)(Ue))return pe(Ue);if((0,Me.T)(Ue))return function re(Ue){return new ge.y(Fe=>{for(const He of Ue)if(Fe.next(He),Fe.closed)return;Fe.complete()})}(Ue);if((0,ve.L)(Ue))return function De(Ue){return pe((0,ve.Q)(Ue))}(Ue)}throw(0,Se.z)(Ue)}function pe(Ue){return new ge.y(Fe=>{(function Le(Ue,Fe){var He,nt,_e,Re;return(0,V.mG)(this,void 0,void 0,function*(){try{for(He=(0,V.KL)(Ue);!(nt=yield He.next()).done;)if(Fe.next(nt.value),Fe.closed)return}catch(Be){_e={error:Be}}finally{try{nt&&!nt.done&&(Re=He.return)&&(yield Re.call(He))}finally{if(_e)throw _e.error}}Fe.complete()})})(Ue,Fe).catch(He=>Fe.error(He))})}},6451:(Te,ye,q)=>{"use strict";q.d(ye,{T:()=>xe});var V=q(8189),u=q(8421),$=q(515),ge=q(7669),Ie=q(8996);function xe(...Se){const Me=(0,ge.yG)(Se),ve=(0,ge._6)(Se,1/0),oe=Se;return oe.length?1===oe.length?(0,u.Xf)(oe[0]):(0,V.J)(ve)((0,Ie.D)(oe,Me)):$.E}},5403:(Te,ye,q)=>{"use strict";q.d(ye,{x:()=>u});var V=q(930);function u(ge,Ie,xe,Se,Me){return new $(ge,Ie,xe,Se,Me)}class $ extends V.Lv{constructor(Ie,xe,Se,Me,ve,oe){super(Ie),this.onFinalize=ve,this.shouldUnsubscribe=oe,this._next=xe?function(ie){try{xe(ie)}catch(fe){Ie.error(fe)}}:super._next,this._error=Me?function(ie){try{Me(ie)}catch(fe){Ie.error(fe)}finally{this.unsubscribe()}}:super._error,this._complete=Se?function(){try{Se()}catch(ie){Ie.error(ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:xe}=this;super.unsubscribe(),!xe&&(null===(Ie=this.onFinalize)||void 0===Ie||Ie.call(this))}}}},4004:(Te,ye,q)=>{"use strict";q.d(ye,{U:()=>$});var V=q(4482),u=q(5403);function $(ge,Ie){return(0,V.e)((xe,Se)=>{let Me=0;xe.subscribe((0,u.x)(Se,ve=>{Se.next(ge.call(Ie,ve,Me++))}))})}},8189:(Te,ye,q)=>{"use strict";q.d(ye,{J:()=>$});var V=q(5577),u=q(4671);function $(ge=1/0){return(0,V.z)(u.y,ge)}},5577:(Te,ye,q)=>{"use strict";q.d(ye,{z:()=>Me});var V=q(4004),u=q(8421),$=q(4482),ge=q(9672),Ie=q(5403),Se=q(576);function Me(ve,oe,ie=1/0){return(0,Se.m)(oe)?Me((fe,st)=>(0,V.U)((me,qe)=>oe(fe,me,st,qe))((0,u.Xf)(ve(fe,st))),ie):("number"==typeof oe&&(ie=oe),(0,$.e)((fe,st)=>function xe(ve,oe,ie,fe,st,me,qe,te){const re=[];let pe=0,De=0,Le=!1;const Ue=()=>{Le&&!re.length&&!pe&&oe.complete()},Fe=nt=>pe<fe?He(nt):re.push(nt),He=nt=>{me&&oe.next(nt),pe++;let _e=!1;(0,u.Xf)(ie(nt,De++)).subscribe((0,Ie.x)(oe,Re=>{st?.(Re),me?Fe(Re):oe.next(Re)},()=>{_e=!0},void 0,()=>{if(_e)try{for(pe--;re.length&&pe<fe;){const Re=re.shift();qe?(0,ge.f)(oe,qe,()=>He(Re)):He(Re)}Ue()}catch(Re){oe.error(Re)}}))};return ve.subscribe((0,Ie.x)(oe,Fe,()=>{Le=!0,Ue()})),()=>{te?.()}}(fe,st,ve,ie)))}},5363:(Te,ye,q)=>{"use strict";q.d(ye,{Q:()=>ge});var V=q(9672),u=q(4482),$=q(5403);function ge(Ie,xe=0){return(0,u.e)((Se,Me)=>{Se.subscribe((0,$.x)(Me,ve=>(0,V.f)(Me,Ie,()=>Me.next(ve),xe),()=>(0,V.f)(Me,Ie,()=>Me.complete(),xe),ve=>(0,V.f)(Me,Ie,()=>Me.error(ve),xe)))})}},3099:(Te,ye,q)=>{"use strict";q.d(ye,{B:()=>Ie});var V=q(8421),u=q(7579),$=q(930),ge=q(4482);function Ie(Se={}){const{connector:Me=(()=>new u.x),resetOnError:ve=!0,resetOnComplete:oe=!0,resetOnRefCountZero:ie=!0}=Se;return fe=>{let st,me,qe,te=0,re=!1,pe=!1;const De=()=>{me?.unsubscribe(),me=void 0},Le=()=>{De(),st=qe=void 0,re=pe=!1},Ue=()=>{const Fe=st;Le(),Fe?.unsubscribe()};return(0,ge.e)((Fe,He)=>{te++,!pe&&!re&&De();const nt=qe=qe??Me();He.add(()=>{te--,0===te&&!pe&&!re&&(me=xe(Ue,ie))}),nt.subscribe(He),!st&&te>0&&(st=new $.Hp({next:_e=>nt.next(_e),error:_e=>{pe=!0,De(),me=xe(Le,ve,_e),nt.error(_e)},complete:()=>{re=!0,De(),me=xe(Le,oe),nt.complete()}}),(0,V.Xf)(Fe).subscribe(st))})(fe)}}function xe(Se,Me,...ve){if(!0===Me)return void Se();if(!1===Me)return;const oe=new $.Hp({next:()=>{oe.unsubscribe(),Se()}});return Me(...ve).subscribe(oe)}},9468:(Te,ye,q)=>{"use strict";q.d(ye,{R:()=>u});var V=q(4482);function u($,ge=0){return(0,V.e)((Ie,xe)=>{xe.add($.schedule(()=>Ie.subscribe(xe),ge))})}},8505:(Te,ye,q)=>{"use strict";q.d(ye,{b:()=>Ie});var V=q(576),u=q(4482),$=q(5403),ge=q(4671);function Ie(xe,Se,Me){const ve=(0,V.m)(xe)||Se||Me?{next:xe,error:Se,complete:Me}:xe;return ve?(0,u.e)((oe,ie)=>{var fe;null===(fe=ve.subscribe)||void 0===fe||fe.call(ve);let st=!0;oe.subscribe((0,$.x)(ie,me=>{var qe;null===(qe=ve.next)||void 0===qe||qe.call(ve,me),ie.next(me)},()=>{var me;st=!1,null===(me=ve.complete)||void 0===me||me.call(ve),ie.complete()},me=>{var qe;st=!1,null===(qe=ve.error)||void 0===qe||qe.call(ve,me),ie.error(me)},()=>{var me,qe;st&&(null===(me=ve.unsubscribe)||void 0===me||me.call(ve)),null===(qe=ve.finalize)||void 0===qe||qe.call(ve)}))}):ge.y}},4408:(Te,ye,q)=>{"use strict";q.d(ye,{o:()=>Ie});var V=q(727);class u extends V.w0{constructor(Se,Me){super()}schedule(Se,Me=0){return this}}const $={setInterval(xe,Se,...Me){const{delegate:ve}=$;return ve?.setInterval?ve.setInterval(xe,Se,...Me):setInterval(xe,Se,...Me)},clearInterval(xe){const{delegate:Se}=$;return(Se?.clearInterval||clearInterval)(xe)},delegate:void 0};var ge=q(8737);class Ie extends u{constructor(Se,Me){super(Se,Me),this.scheduler=Se,this.work=Me,this.pending=!1}schedule(Se,Me=0){var ve;if(this.closed)return this;this.state=Se;const oe=this.id,ie=this.scheduler;return null!=oe&&(this.id=this.recycleAsyncId(ie,oe,Me)),this.pending=!0,this.delay=Me,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(ie,this.id,Me),this}requestAsyncId(Se,Me,ve=0){return $.setInterval(Se.flush.bind(Se,this),ve)}recycleAsyncId(Se,Me,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return Me;null!=Me&&$.clearInterval(Me)}execute(Se,Me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(Se,Me);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Se,Me){let oe,ve=!1;try{this.work(Se)}catch(ie){ve=!0,oe=ie||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),oe}unsubscribe(){if(!this.closed){const{id:Se,scheduler:Me}=this,{actions:ve}=Me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ge.P)(ve,this),null!=Se&&(this.id=this.recycleAsyncId(Me,Se,null)),this.delay=null,super.unsubscribe()}}}},7565:(Te,ye,q)=>{"use strict";q.d(ye,{v:()=>$});var V=q(6063);class u{constructor(Ie,xe=u.now){this.schedulerActionCtor=Ie,this.now=xe}schedule(Ie,xe=0,Se){return new this.schedulerActionCtor(this,Ie).schedule(Se,xe)}}u.now=V.l.now;class $ extends u{constructor(Ie,xe=u.now){super(Ie,xe),this.actions=[],this._active=!1}flush(Ie){const{actions:xe}=this;if(this._active)return void xe.push(Ie);let Se;this._active=!0;do{if(Se=Ie.execute(Ie.state,Ie.delay))break}while(Ie=xe.shift());if(this._active=!1,Se){for(;Ie=xe.shift();)Ie.unsubscribe();throw Se}}}},4986:(Te,ye,q)=>{"use strict";q.d(ye,{z:()=>$});var V=q(4408);const $=new(q(7565).v)(V.o)},6063:(Te,ye,q)=>{"use strict";q.d(ye,{l:()=>V});const V={now:()=>(V.delegate||Date).now(),delegate:void 0}},3410:(Te,ye,q)=>{"use strict";q.d(ye,{z:()=>V});const V={setTimeout(u,$,...ge){const{delegate:Ie}=V;return Ie?.setTimeout?Ie.setTimeout(u,$,...ge):setTimeout(u,$,...ge)},clearTimeout(u){const{delegate:$}=V;return($?.clearTimeout||clearTimeout)(u)},delegate:void 0}},2202:(Te,ye,q)=>{"use strict";q.d(ye,{h:()=>u});const u=function V(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Te,ye,q)=>{"use strict";q.d(ye,{L:()=>V});const V="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Te,ye,q)=>{"use strict";q.d(ye,{_6:()=>xe,jO:()=>ge,yG:()=>Ie});var V=q(576);function $(Se){return Se[Se.length-1]}function ge(Se){return(0,V.m)($(Se))?Se.pop():void 0}function Ie(Se){return function u(Se){return Se&&(0,V.m)(Se.schedule)}($(Se))?Se.pop():void 0}function xe(Se,Me){return"number"==typeof $(Se)?Se.pop():Me}},8737:(Te,ye,q)=>{"use strict";function V(u,$){if(u){const ge=u.indexOf($);0<=ge&&u.splice(ge,1)}}q.d(ye,{P:()=>V})},3888:(Te,ye,q)=>{"use strict";function V(u){const ge=u(Ie=>{Error.call(Ie),Ie.stack=(new Error).stack});return ge.prototype=Object.create(Error.prototype),ge.prototype.constructor=ge,ge}q.d(ye,{d:()=>V})},2806:(Te,ye,q)=>{"use strict";q.d(ye,{O:()=>ge,x:()=>$});var V=q(2416);let u=null;function $(Ie){if(V.v.useDeprecatedSynchronousErrorHandling){const xe=!u;if(xe&&(u={errorThrown:!1,error:null}),Ie(),xe){const{errorThrown:Se,error:Me}=u;if(u=null,Se)throw Me}}else Ie()}function ge(Ie){V.v.useDeprecatedSynchronousErrorHandling&&u&&(u.errorThrown=!0,u.error=Ie)}},9672:(Te,ye,q)=>{"use strict";function V(u,$,ge,Ie=0,xe=!1){const Se=$.schedule(function(){ge(),xe?u.add(this.schedule(null,Ie)):this.unsubscribe()},Ie);if(u.add(Se),!xe)return Se}q.d(ye,{f:()=>V})},4671:(Te,ye,q)=>{"use strict";function V(u){return u}q.d(ye,{y:()=>V})},1144:(Te,ye,q)=>{"use strict";q.d(ye,{z:()=>V});const V=u=>u&&"number"==typeof u.length&&"function"!=typeof u},2206:(Te,ye,q)=>{"use strict";q.d(ye,{D:()=>u});var V=q(576);function u($){return Symbol.asyncIterator&&(0,V.m)($?.[Symbol.asyncIterator])}},576:(Te,ye,q)=>{"use strict";function V(u){return"function"==typeof u}q.d(ye,{m:()=>V})},3670:(Te,ye,q)=>{"use strict";q.d(ye,{c:()=>$});var V=q(8822),u=q(576);function $(ge){return(0,u.m)(ge[V.L])}},6495:(Te,ye,q)=>{"use strict";q.d(ye,{T:()=>$});var V=q(2202),u=q(576);function $(ge){return(0,u.m)(ge?.[V.h])}},8239:(Te,ye,q)=>{"use strict";q.d(ye,{t:()=>u});var V=q(576);function u($){return(0,V.m)($?.then)}},3260:(Te,ye,q)=>{"use strict";q.d(ye,{L:()=>ge,Q:()=>$});var V=q(655),u=q(576);function $(Ie){return(0,V.FC)(this,arguments,function*(){const Se=Ie.getReader();try{for(;;){const{value:Me,done:ve}=yield(0,V.qq)(Se.read());if(ve)return yield(0,V.qq)(void 0);yield yield(0,V.qq)(Me)}}finally{Se.releaseLock()}})}function ge(Ie){return(0,u.m)(Ie?.getReader)}},4482:(Te,ye,q)=>{"use strict";q.d(ye,{A:()=>u,e:()=>$});var V=q(576);function u(ge){return(0,V.m)(ge?.lift)}function $(ge){return Ie=>{if(u(Ie))return Ie.lift(function(xe){try{return ge(xe,this)}catch(Se){this.error(Se)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Te,ye,q)=>{"use strict";function V(){}q.d(ye,{Z:()=>V})},9635:(Te,ye,q)=>{"use strict";q.d(ye,{U:()=>$,z:()=>u});var V=q(4671);function u(...ge){return $(ge)}function $(ge){return 0===ge.length?V.y:1===ge.length?ge[0]:function(xe){return ge.reduce((Se,Me)=>Me(Se),xe)}}},7849:(Te,ye,q)=>{"use strict";q.d(ye,{h:()=>$});var V=q(2416),u=q(3410);function $(ge){u.z.setTimeout(()=>{const{onUnhandledError:Ie}=V.v;if(!Ie)throw ge;Ie(ge)})}},4532:(Te,ye,q)=>{"use strict";function V(u){return new TypeError(`You provided ${null!==u&&"object"==typeof u?"an invalid object":`'${u}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}q.d(ye,{z:()=>V})},655:(Te,ye,q)=>{"use strict";function ge(ce,Oe){var Ve={};for(var Ye in ce)Object.prototype.hasOwnProperty.call(ce,Ye)&&Oe.indexOf(Ye)<0&&(Ve[Ye]=ce[Ye]);if(null!=ce&&"function"==typeof Object.getOwnPropertySymbols){var it=0;for(Ye=Object.getOwnPropertySymbols(ce);it<Ye.length;it++)Oe.indexOf(Ye[it])<0&&Object.prototype.propertyIsEnumerable.call(ce,Ye[it])&&(Ve[Ye[it]]=ce[Ye[it]])}return Ve}function fe(ce,Oe,Ve,Ye){return new(Ve||(Ve=Promise))(function(ot,wt){function _t(Zt){try{Jt(Ye.next(Zt))}catch(Ft){wt(Ft)}}function ii(Zt){try{Jt(Ye.throw(Zt))}catch(Ft){wt(Ft)}}function Jt(Zt){Zt.done?ot(Zt.value):function it(ot){return ot instanceof Ve?ot:new Ve(function(wt){wt(ot)})}(Zt.value).then(_t,ii)}Jt((Ye=Ye.apply(ce,Oe||[])).next())})}function Ue(ce){return this instanceof Ue?(this.v=ce,this):new Ue(ce)}function Fe(ce,Oe,Ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var it,Ye=Ve.apply(ce,Oe||[]),ot=[];return it={},wt("next"),wt("throw"),wt("return"),it[Symbol.asyncIterator]=function(){return this},it;function wt(pn){Ye[pn]&&(it[pn]=function(Yn){return new Promise(function(ri,Pn){ot.push([pn,Yn,ri,Pn])>1||_t(pn,Yn)})})}function _t(pn,Yn){try{!function ii(pn){pn.value instanceof Ue?Promise.resolve(pn.value.v).then(Jt,Zt):Ft(ot[0][2],pn)}(Ye[pn](Yn))}catch(ri){Ft(ot[0][3],ri)}}function Jt(pn){_t("next",pn)}function Zt(pn){_t("throw",pn)}function Ft(pn,Yn){pn(Yn),ot.shift(),ot.length&&_t(ot[0][0],ot[0][1])}}function nt(ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,Oe=ce[Symbol.asyncIterator];return Oe?Oe.call(ce):(ce=function te(ce){var Oe="function"==typeof Symbol&&Symbol.iterator,Ve=Oe&&ce[Oe],Ye=0;if(Ve)return Ve.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&Ye>=ce.length&&(ce=void 0),{value:ce&&ce[Ye++],done:!ce}}};throw new TypeError(Oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ce),Ve={},Ye("next"),Ye("throw"),Ye("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve);function Ye(ot){Ve[ot]=ce[ot]&&function(wt){return new Promise(function(_t,ii){!function it(ot,wt,_t,ii){Promise.resolve(ii).then(function(Jt){ot({value:Jt,done:_t})},wt)}(_t,ii,(wt=ce[ot](wt)).done,wt.value)})}}}q.d(ye,{FC:()=>Fe,KL:()=>nt,_T:()=>ge,mG:()=>fe,qq:()=>Ue})},4650:(Te,ye,q)=>{"use strict";q.d(ye,{$8M:()=>cc,$WT:()=>Ti,$Z:()=>TS,AFp:()=>Tf,AaK:()=>Me,BQk:()=>My,CHM:()=>Lp,CRH:()=>Pa,CZH:()=>Zg,CqO:()=>QR,D6c:()=>_O,DdM:()=>Ab,EJc:()=>QN,EiD:()=>Fk,EpF:()=>YR,F4k:()=>JS,FYo:()=>Ki,FiY:()=>lu,GfV:()=>Lw,Gpc:()=>ie,JOm:()=>Ma,JVY:()=>cB,JZr:()=>te,KtG:()=>yh,L6k:()=>ww,LAX:()=>Ak,LFG:()=>rt,LSH:()=>xa,Lbi:()=>Wy,Lck:()=>l6,MAs:()=>WR,MGl:()=>gb,MMx:()=>kD,MR2:()=>zT,NdJ:()=>XS,OlP:()=>Gn,Oqu:()=>cD,P3R:()=>Sw,PXZ:()=>Jg,Q6J:()=>Nd,QGY:()=>pb,QbO:()=>WN,Qsj:()=>Xh,R0b:()=>Fo,RDi:()=>FT,Rgc:()=>By,SBq:()=>gg,Sil:()=>XN,Suo:()=>BD,TTD:()=>nl,TgZ:()=>Od,Tol:()=>gP,Udp:()=>aD,VKq:()=>ND,X6Q:()=>sO,XFs:()=>Tt,Xpm:()=>Fu,Xts:()=>Aw,Y36:()=>tf,YKP:()=>gN,YNc:()=>Pd,Yjl:()=>Bu,Yz7:()=>Ft,Z0I:()=>Pn,ZZ4:()=>sE,_Bn:()=>MD,_UZ:()=>QS,_Vd:()=>Qh,_c5:()=>b1,_uU:()=>CP,aQg:()=>lv,c2e:()=>KN,cJS:()=>Yn,cg1:()=>fD,d8E:()=>hD,dDg:()=>Yb,dqk:()=>zn,eBb:()=>dB,eFA:()=>tv,eJc:()=>Gy,ekj:()=>lD,eoX:()=>a1,f3M:()=>yt,g9A:()=>zg,h0i:()=>mf,hGG:()=>mO,hij:()=>yb,iGM:()=>Ld,ifc:()=>We,ip1:()=>$b,jDz:()=>_N,kL8:()=>pD,lG2:()=>Vu,lnq:()=>dD,lqb:()=>Kh,lri:()=>Kb,mCW:()=>bw,n5z:()=>xh,oAB:()=>Lu,oJD:()=>hg,oxw:()=>nD,pB0:()=>hB,q3G:()=>ui,q4F:()=>nS,qLn:()=>ly,qOj:()=>Cy,qZA:()=>Tl,qzn:()=>gc,rWj:()=>Qy,s9C:()=>iD,sBO:()=>aO,s_b:()=>Vg,soG:()=>Yy,tb:()=>Ky,tp0:()=>N,uIk:()=>hb,vHH:()=>re,vpe:()=>yu,wAp:()=>tn,xp6:()=>Vw,ynx:()=>cf,z2F:()=>Sf,z3N:()=>El,zSh:()=>Rw,zs3:()=>fu});var V=q(7579),u=q(727),$=q(9751),ge=q(6451),Ie=q(3099);function xe(a){for(let l in a)if(a[l]===xe)return l;throw Error("Could not find renamed property on target object.")}function Se(a,l){for(const d in l)l.hasOwnProperty(d)&&!a.hasOwnProperty(d)&&(a[d]=l[d])}function Me(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(Me).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const d=l.indexOf("\n");return-1===d?l:l.substring(0,d)}function ve(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const oe=xe({__forward_ref__:xe});function ie(a){return a.__forward_ref__=ie,a.toString=function(){return Me(this())},a}function fe(a){return st(a)?a():a}function st(a){return"function"==typeof a&&a.hasOwnProperty(oe)&&a.__forward_ref__===ie}function me(a){return a&&!!a.\u0275providers}const te="https://g.co/ng/security#xss";class re extends Error{constructor(l,d){super(pe(l,d)),this.code=l}}function pe(a,l){return`NG0${Math.abs(a)}${l?": "+l.trim():""}`}function De(a){return"string"==typeof a?a:null==a?"":String(a)}function nt(a,l){throw new re(-201,!1)}function wt(a,l){null==a&&function _t(a,l,d,f){throw new Error(`ASSERTION ERROR: ${a}`+(null==f?"":` [Expected=> ${d} ${f} ${l} <=Actual]`))}(l,a,null,"!=")}function Ft(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Yn(a){return{providers:a.providers||[],imports:a.imports||[]}}function ri(a){return Gi(a,ls)||Gi(a,Nr)}function Pn(a){return null!==ri(a)}function Gi(a,l){return a.hasOwnProperty(l)?a[l]:null}function Ii(a){return a&&(a.hasOwnProperty(us)||a.hasOwnProperty(ei))?a[us]:null}const ls=xe({\u0275prov:xe}),us=xe({\u0275inj:xe}),Nr=xe({ngInjectableDef:xe}),ei=xe({ngInjectorDef:xe});var Tt=(()=>((Tt=Tt||{})[Tt.Default=0]="Default",Tt[Tt.Host=1]="Host",Tt[Tt.Self=2]="Self",Tt[Tt.SkipSelf=4]="SkipSelf",Tt[Tt.Optional=8]="Optional",Tt))();let ir;function Fi(a){const l=ir;return ir=a,l}function vr(a,l,d){const f=ri(a);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:d&Tt.Optional?null:void 0!==l?l:void nt(Me(a))}const zn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),wr={},Zi="__NG_DI_FLAG__",zi="ngTempTokenPath",Ds="ngTokenPath",vi=/\n/gm,fi="\u0275",Nn="__source";let Zr;function mn(a){const l=Zr;return Zr=a,l}function rr(a,l=Tt.Default){if(void 0===Zr)throw new re(-203,!1);return null===Zr?vr(a,void 0,l):Zr.get(a,l&Tt.Optional?null:void 0,l)}function rt(a,l=Tt.Default){return(function yr(){return ir}()||rr)(fe(a),l)}function yt(a,l=Tt.Default){return rt(a,Xt(l))}function Xt(a){return typeof a>"u"||"number"==typeof a?a:0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)}function nn(a){const l=[];for(let d=0;d<a.length;d++){const f=fe(a[d]);if(Array.isArray(f)){if(0===f.length)throw new re(900,!1);let g,y=Tt.Default;for(let C=0;C<f.length;C++){const D=f[C],k=se(D);"number"==typeof k?-1===k?g=D.token:y|=k:g=D}l.push(rt(g,y))}else l.push(rt(f))}return l}function Tn(a,l){return a[Zi]=l,a.prototype[Zi]=l,a}function se(a){return a[Zi]}function J(a){return{toString:a}.toString()}var H=(()=>((H=H||{})[H.OnPush=0]="OnPush",H[H.Default=1]="Default",H))(),We=(()=>{return(a=We||(We={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",We;var a})();const xt={},ft=[],hn=xe({\u0275cmp:xe}),$t=xe({\u0275dir:xe}),Hn=xe({\u0275pipe:xe}),sr=xe({\u0275mod:xe}),ln=xe({\u0275fac:xe}),br=xe({__NG_ELEMENT_ID__:xe});let Ou=0;function Fu(a){return J(()=>{const d=!0===a.standalone,f={},g={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:f,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===H.OnPush,directiveDefs:null,pipeDefs:null,standalone:d,dependencies:d&&a.dependencies||null,getStandaloneInjector:null,selectors:a.selectors||ft,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||We.Emulated,id:"c"+Ou++,styles:a.styles||ft,_:null,setInput:null,schemas:a.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},y=a.dependencies,C=a.features;return g.inputs=Xc(a.inputs,f),g.outputs=Xc(a.outputs),C&&C.forEach(D=>D(g)),g.directiveDefs=y?()=>("function"==typeof y?y():y).map(Jc).filter(or):null,g.pipeDefs=y?()=>("function"==typeof y?y():y).map(ar).filter(or):null,g})}function Jc(a){return xn(a)||oi(a)}function or(a){return null!==a}function Lu(a){return J(()=>({type:a.type,bootstrap:a.bootstrap||ft,declarations:a.declarations||ft,imports:a.imports||ft,exports:a.exports||ft,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function Xc(a,l){if(null==a)return xt;const d={};for(const f in a)if(a.hasOwnProperty(f)){let g=a[f],y=g;Array.isArray(g)&&(y=g[1],g=g[0]),d[g]=f,l&&(l[g]=y)}return d}const Vu=Fu;function Bu(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function xn(a){return a[hn]||null}function oi(a){return a[$t]||null}function ar(a){return a[Hn]||null}function Ti(a){const l=xn(a)||oi(a)||ar(a);return null!==l&&l.standalone}function cs(a,l){const d=a[sr]||null;if(!d&&!0===l)throw new Error(`Type ${Me(a)} does not have '\u0275mod' property.`);return d}const As=0,Ct=1,on=2,wi=3,Or=4,so=5,Li=6,Yo=7,On=8,Hl=9,Qo=10,qt=11,ju=12,$l=13,Gl=14,ds=15,Ui=16,Xa=17,ga=18,Fr=19,hs=20,Io=21,ai=22,fs=1,Hu=2,$u=7,To=8,Ms=9,lr=10;function ps(a){return Array.isArray(a)&&"object"==typeof a[fs]}function gs(a){return Array.isArray(a)&&!0===a[fs]}function So(a){return 0!=(4&a.flags)}function ql(a){return a.componentOffset>-1}function ed(a){return 1==(1&a.flags)}function ur(a){return null!==a.template}function g_(a){return 0!=(256&a[on])}function Ao(a,l){return a.hasOwnProperty(ln)?a[ln]:null}class tl{constructor(l,d,f){this.previousValue=l,this.currentValue=d,this.firstChange=f}isFirstChange(){return this.firstChange}}function nl(){return Kl}function Kl(a){return a.type.prototype.ngOnChanges&&(a.setInput=il),Zu}function Zu(){const a=Yl(this),l=a?.current;if(l){const d=a.previous;if(d===xt)a.previous=l;else for(let f in l)d[f]=l[f];a.current=null,this.ngOnChanges(l)}}function il(a,l,d,f){const g=this.declaredInputs[d],y=Yl(a)||function fh(a,l){return a[ma]=l}(a,{previous:xt,current:null}),C=y.current||(y.current={}),D=y.previous,k=D[g];C[g]=new tl(k&&k.currentValue,l,D===xt),a[f]=l}nl.ngInherit=!0;const ma="__ngSimpleChanges__";function Yl(a){return a[ma]||null}const cr=function(a,l,d){};function Si(a){for(;Array.isArray(a);)a=a[As];return a}function qs(a,l){return Si(l[a])}function zr(a,l){return Si(l[a.index])}function Wu(a,l){return a.data[l]}function dr(a,l){const d=l[a];return ps(d)?d:d[As]}function ya(a){return 64==(64&a[on])}function xs(a,l){return null==l?null:a[l]}function gh(a){a[ga]=0}function va(a,l){a[so]+=l;let d=a,f=a[wi];for(;null!==f&&(1===l&&1===d[so]||-1===l&&0===d[so]);)f[so]+=l,d=f,f=f[wi]}const un={lFrame:E_(null),bindingsEnabled:!0};function _h(){return un.bindingsEnabled}function ze(){return un.lFrame.lView}function Wt(){return un.lFrame.tView}function Lp(a){return un.lFrame.contextLView=a,a[On]}function yh(a){return un.lFrame.contextLView=null,a}function Wi(){let a=rd();for(;null!==a&&64===a.type;)a=a.parent;return a}function rd(){return un.lFrame.currentTNode}function uo(a,l){const d=un.lFrame;d.currentTNode=a,d.isParent=l}function wa(){return un.lFrame.isParent}function vh(){un.lFrame.isParent=!1}function Er(){const a=un.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Wr(){return un.lFrame.bindingIndex++}function ea(a){const l=un.lFrame,d=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,d}function Jl(a,l){const d=un.lFrame;d.bindingIndex=d.bindingRootIndex=a,Ea(l)}function Ea(a){un.lFrame.currentDirectiveIndex=a}function ec(a){const l=un.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function sd(){return un.lFrame.currentQueryIndex}function od(a){un.lFrame.currentQueryIndex=a}function wh(a){const l=a[Ct];return 2===l.type?l.declTNode:1===l.type?a[Li]:null}function Vp(a,l,d){if(d&Tt.SkipSelf){let g=l,y=a;for(;!(g=g.parent,null!==g||d&Tt.Host||(g=wh(y),null===g||(y=y[ds],10&g.type))););if(null===g)return!1;l=g,a=y}const f=un.lFrame=b_();return f.currentTNode=l,f.lView=a,!0}function tc(a){const l=b_(),d=a[Ct];un.lFrame=l,l.currentTNode=d.firstChild,l.lView=a,l.tView=d,l.contextLView=a,l.bindingIndex=d.bindingStartIndex,l.inI18n=!1}function b_(){const a=un.lFrame,l=null===a?null:a.child;return null===l?E_(a):l}function E_(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function C_(){const a=un.lFrame;return un.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const bh=C_;function I_(){const a=C_();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function Kr(){return un.lFrame.selectedIndex}function Mo(a){un.lFrame.selectedIndex=a}function $n(){const a=un.lFrame;return Wu(a.tView,a.selectedIndex)}function Xl(a,l){for(let d=l.directiveStart,f=l.directiveEnd;d<f;d++){const y=a.data[d].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:D,ngAfterViewInit:k,ngAfterViewChecked:O,ngOnDestroy:B}=y;C&&(a.contentHooks||(a.contentHooks=[])).push(-d,C),D&&((a.contentHooks||(a.contentHooks=[])).push(d,D),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(d,D)),k&&(a.viewHooks||(a.viewHooks=[])).push(-d,k),O&&((a.viewHooks||(a.viewHooks=[])).push(d,O),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(d,O)),null!=B&&(a.destroyHooks||(a.destroyHooks=[])).push(d,B)}}function eu(a,l,d){Ih(a,l,3,d)}function al(a,l,d,f){(3&a[on])===d&&Ih(a,l,d,f)}function tu(a,l){let d=a[on];(3&d)===l&&(d&=2047,d+=1,a[on]=d)}function Ih(a,l,d,f){const y=f??-1,C=l.length-1;let D=0;for(let k=void 0!==f?65535&a[ga]:0;k<C;k++)if("number"==typeof l[k+1]){if(D=l[k],null!=f&&D>=f)break}else l[k]<0&&(a[ga]+=65536),(D<y||-1==y)&&(ld(a,d,l,k),a[ga]=(4294901760&a[ga])+k+2),k++}function ld(a,l,d,f){const g=d[f]<0,y=d[f+1],D=a[g?-d[f]:d[f]];if(g){if(a[on]>>11<a[ga]>>16&&(3&a[on])===l){a[on]+=2048,cr(4,D,y);try{y.call(D)}finally{cr(5,D,y)}}}else{cr(4,D,y);try{y.call(D)}finally{cr(5,D,y)}}}const co=-1;class nc{constructor(l,d,f){this.factory=l,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=f}}function ul(a,l,d){let f=0;for(;f<d.length;){const g=d[f];if("number"==typeof g){if(0!==g)break;f++;const y=d[f++],C=d[f++],D=d[f++];a.setAttribute(l,C,D,y)}else{const y=g,C=d[++f];ic(y)?a.setProperty(l,y,C):a.setAttribute(l,y,C),f++}}return f}function Ca(a){return 3===a||4===a||6===a}function ic(a){return 64===a.charCodeAt(0)}function ys(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let d=-1;for(let f=0;f<l.length;f++){const g=l[f];"number"==typeof g?d=g:0===d||rc(a,d,g,null,-1===d||2===d?l[++f]:null)}}return a}function rc(a,l,d,f,g){let y=0,C=a.length;if(-1===l)C=-1;else for(;y<a.length;){const D=a[y++];if("number"==typeof D){if(D===l){C=-1;break}if(D>l){C=y-1;break}}}for(;y<a.length;){const D=a[y];if("number"==typeof D)break;if(D===d){if(null===f)return void(null!==g&&(a[y+1]=g));if(f===a[y+1])return void(a[y+2]=g)}y++,null!==f&&y++,null!==g&&y++}-1!==C&&(a.splice(C,0,l),y=C+1),a.splice(y++,0,d),null!==f&&a.splice(y++,0,f),null!==g&&a.splice(y++,0,g)}function sc(a){return a!==co}function cl(a){return 32767&a}function Ia(a,l){let d=function oc(a){return a>>16}(a),f=l;for(;d>0;)f=f[ds],d--;return f}let dl=!0;function ta(a){const l=dl;return dl=a,l}const Sh=255,fl=5;let ud=0;const Lr={};function ho(a,l){const d=lc(a,l);if(-1!==d)return d;const f=l[Ct];f.firstCreatePass&&(a.injectorIndex=l.length,pl(f.data,a),pl(l,null),pl(f.blueprint,null));const g=iu(a,l),y=a.injectorIndex;if(sc(g)){const C=cl(g),D=Ia(g,l),k=D[Ct].data;for(let O=0;O<8;O++)l[y+O]=D[C+O]|k[C+O]}return l[y+8]=g,y}function pl(a,l){a.push(0,0,0,0,0,0,0,0,l)}function lc(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function iu(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let d=0,f=null,g=l;for(;null!==g;){if(f=kh(g),null===f)return co;if(d++,g=g[ds],-1!==f.injectorIndex)return f.injectorIndex|d<<16}return co}function Dh(a,l,d){!function ac(a,l,d){let f;"string"==typeof d?f=d.charCodeAt(0)||0:d.hasOwnProperty(br)&&(f=d[br]),null==f&&(f=d[br]=ud++);const g=f&Sh;l.data[a+(g>>fl)]|=1<<g}(a,l,d)}function cd(a,l,d){if(d&Tt.Optional||void 0!==a)return a;nt()}function uc(a,l,d,f){if(d&Tt.Optional&&void 0===f&&(f=null),!(d&(Tt.Self|Tt.Host))){const g=a[Hl],y=Fi(void 0);try{return g?g.get(l,f,d&Tt.Optional):vr(l,f,d&Tt.Optional)}finally{Fi(y)}}return cd(f,0,d)}function dd(a,l,d,f=Tt.Default,g){if(null!==a){if(1024&l[on]){const C=function $p(a,l,d,f,g){let y=a,C=l;for(;null!==y&&null!==C&&1024&C[on]&&!(256&C[on]);){const D=ks(y,C,d,f|Tt.Self,Lr);if(D!==Lr)return D;let k=y.parent;if(!k){const O=C[Io];if(O){const B=O.get(d,Lr,f);if(B!==Lr)return B}k=kh(C),C=C[ds]}y=k}return g}(a,l,d,f,Lr);if(C!==Lr)return C}const y=ks(a,l,d,f,Lr);if(y!==Lr)return y}return uc(l,d,f,g)}function ks(a,l,d,f,g){const y=function Hp(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(br)?a[br]:void 0;return"number"==typeof l?l>=0?l&Sh:A_:l}(d);if("function"==typeof y){if(!Vp(l,a,f))return f&Tt.Host?cd(g,0,f):uc(l,d,f,g);try{const C=y(f);if(null!=C||f&Tt.Optional)return C;nt()}finally{bh()}}else if("number"==typeof y){let C=null,D=lc(a,l),k=co,O=f&Tt.Host?l[Ui][Li]:null;for((-1===D||f&Tt.SkipSelf)&&(k=-1===D?iu(a,l):l[D+8],k!==co&&Yr(f,!1)?(C=l[Ct],D=cl(k),l=Ia(k,l)):D=-1);-1!==D;){const B=l[Ct];if(Mh(y,D,B.data)){const Y=Ah(D,l,d,C,f,O);if(Y!==Lr)return Y}k=l[D+8],k!==co&&Yr(f,l[Ct].data[D+8]===O)&&Mh(y,D,l)?(C=B,D=cl(k),l=Ia(k,l)):D=-1}}return g}function Ah(a,l,d,f,g,y){const C=l[Ct],D=C.data[a+8],B=ml(D,C,d,null==f?ql(D)&&dl:f!=C&&0!=(3&D.type),g&Tt.Host&&y===D);return null!==B?vs(l,C,B,D):Lr}function ml(a,l,d,f,g){const y=a.providerIndexes,C=l.data,D=1048575&y,k=a.directiveStart,B=y>>20,de=g?D+B:a.directiveEnd;for(let Ee=f?D:D+B;Ee<de;Ee++){const je=C[Ee];if(Ee<k&&d===je||Ee>=k&&je.type===d)return Ee}if(g){const Ee=C[k];if(Ee&&ur(Ee)&&Ee.type===d)return k}return null}function vs(a,l,d,f){let g=a[d];const y=l.data;if(function hr(a){return a instanceof nc}(g)){const C=g;C.resolving&&function Ue(a,l){const d=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new re(-200,`Circular dependency in DI detected for ${a}${d}`)}(function Le(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():De(a)}(y[d]));const D=ta(C.canSeeViewProviders);C.resolving=!0;const k=C.injectImpl?Fi(C.injectImpl):null;Vp(a,f,Tt.Default);try{g=a[d]=C.factory(void 0,y,a,f),l.firstCreatePass&&d>=f.directiveStart&&function Ch(a,l,d){const{ngOnChanges:f,ngOnInit:g,ngDoCheck:y}=l.type.prototype;if(f){const C=Kl(l);(d.preOrderHooks||(d.preOrderHooks=[])).push(a,C),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(a,C)}g&&(d.preOrderHooks||(d.preOrderHooks=[])).push(0-a,g),y&&((d.preOrderHooks||(d.preOrderHooks=[])).push(a,y),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(a,y))}(d,y[d],l)}finally{null!==k&&Fi(k),ta(D),C.resolving=!1,bh()}}return g}function Mh(a,l,d){return!!(d[l+(a>>fl)]&1<<a)}function Yr(a,l){return!(a&Tt.Self||a&Tt.Host&&l)}class Ta{constructor(l,d){this._tNode=l,this._lView=d}get(l,d,f){return dd(this._tNode,this._lView,l,Xt(f),d)}}function A_(){return new Ta(Wi(),ze())}function xh(a){return J(()=>{const l=a.prototype.constructor,d=l[ln]||ru(l),f=Object.prototype;let g=Object.getPrototypeOf(a.prototype).constructor;for(;g&&g!==f;){const y=g[ln]||ru(g);if(y&&y!==d)return y;g=Object.getPrototypeOf(g)}return y=>new y})}function ru(a){return st(a)?()=>{const l=ru(fe(a));return l&&l()}:Ao(a)}function kh(a){const l=a[Ct],d=l.type;return 2===d?l.declTNode:1===d?a[Li]:null}function cc(a){return function gl(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const d=a.attrs;if(d){const f=d.length;let g=0;for(;g<f;){const y=d[g];if(Ca(y))break;if(0===y)g+=2;else if("number"==typeof y)for(g++;g<f&&"string"==typeof d[g];)g++;else{if(y===l)return d[g+1];g+=2}}}return null}(Wi(),a)}const _l="__parameters__";function dc(a,l,d){return J(()=>{const f=function Rh(a){return function(...d){if(a){const f=a(...d);for(const g in f)this[g]=f[g]}}}(l);function g(...y){if(this instanceof g)return f.apply(this,y),this;const C=new g(...y);return D.annotation=C,D;function D(k,O,B){const Y=k.hasOwnProperty(_l)?k[_l]:Object.defineProperty(k,_l,{value:[]})[_l];for(;Y.length<=B;)Y.push(null);return(Y[B]=Y[B]||[]).push(C),k}}return d&&(g.prototype=Object.create(d.prototype)),g.prototype.ngMetadataName=a,g.annotationCls=g,g})}class Gn{constructor(l,d){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=Ft({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ko(a,l){a.forEach(d=>Array.isArray(d)?ko(d,l):l(d))}function pd(a,l,d){l>=a.length?a.push(d):a.splice(l,0,d)}function au(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function Qr(a,l,d){let f=Ir(a,l);return f>=0?a[1|f]=d:(f=~f,function ow(a,l,d,f){let g=a.length;if(g==l)a.push(d,f);else if(1===g)a.push(f,a[0]),a[0]=d;else{for(g--,a.push(a[g-1],a[g]);g>l;)a[g]=a[g-2],g--;a[l]=d,a[l+1]=f}}(a,f,l,d)),f}function Uh(a,l){const d=Ir(a,l);if(d>=0)return a[1|d]}function Ir(a,l){return function gd(a,l,d){let f=0,g=a.length>>d;for(;g!==f;){const y=f+(g-f>>1),C=a[y<<d];if(l===C)return y<<d;C>l?g=y:f=y+1}return~(g<<d)}(a,l,1)}const lu=Tn(dc("Optional"),8),N=Tn(dc("SkipSelf"),4);var Ma=(()=>((Ma=Ma||{})[Ma.Important=1]="Important",Ma[Ma.DashCase=2]="DashCase",Ma))();const B_=new Map;let j_=0;const fr="__ngContext__";function Xr(a,l){ps(l)?(a[fr]=l[hs],function Jr(a){B_.set(a[hs],a)}(l)):a[fr]=l}let be;function Ze(a,l){return be(a,l)}function Bt(a){const l=a[wi];return gs(l)?l[wi]:l}function _o(a){return wd(a[$l])}function ra(a){return wd(a[Or])}function wd(a){for(;null!==a&&!gs(a);)a=a[Or];return a}function cu(a,l,d,f,g){if(null!=f){let y,C=!1;gs(f)?y=f:ps(f)&&(C=!0,f=f[As]);const D=Si(f);0===a&&null!==d?null==g?Y_(l,d,D):Ed(l,d,D,g||null,!0):1===a&&null!==d?Ed(l,d,D,g||null,!0):2===a?function ty(a,l,d){const f=Q_(a,l);f&&function xT(a,l,d,f){a.removeChild(l,d,f)}(a,f,l,d)}(l,D,C):3===a&&l.destroyNode(D),null!=y&&function vk(a,l,d,f,g){const y=d[$u];y!==Si(d)&&cu(l,a,f,y,g);for(let D=lr;D<d.length;D++){const k=d[D];ag(k[Ct],k,a,l,f,y)}}(l,a,y,d,g)}}function bl(a,l,d){return a.createElement(l,d)}function qh(a,l){const d=a[Ms],f=d.indexOf(l),g=l[wi];512&l[on]&&(l[on]&=-513,va(g,-1)),d.splice(f,1)}function q_(a,l){if(a.length<=lr)return;const d=lr+l,f=a[d];if(f){const g=f[Xa];null!==g&&g!==a&&qh(g,f),l>0&&(a[d-1][Or]=f[Or]);const y=au(a,lr+l);!function tg(a,l){ag(a,l,l[qt],2,null,null),l[As]=null,l[Li]=null}(f[Ct],f);const C=y[Fr];null!==C&&C.detachView(y[Ct]),f[wi]=null,f[Or]=null,f[on]&=-65}return f}function Z_(a,l){if(!(128&l[on])){const d=l[qt];d.destroyNode&&ag(a,l,d,3,null,null),function G_(a){let l=a[$l];if(!l)return z_(a[Ct],a);for(;l;){let d=null;if(ps(l))d=l[$l];else{const f=l[lr];f&&(d=f)}if(!d){for(;l&&!l[Or]&&l!==a;)ps(l)&&z_(l[Ct],l),l=l[wi];null===l&&(l=a),ps(l)&&z_(l[Ct],l),d=l&&l[Or]}l=d}}(l)}}function z_(a,l){if(!(128&l[on])){l[on]&=-65,l[on]|=128,function mk(a,l){let d;if(null!=a&&null!=(d=a.destroyHooks))for(let f=0;f<d.length;f+=2){const g=l[d[f]];if(!(g instanceof nc)){const y=d[f+1];if(Array.isArray(y))for(let C=0;C<y.length;C+=2){const D=g[y[C]],k=y[C+1];cr(4,D,k);try{k.call(D)}finally{cr(5,D,k)}}else{cr(4,g,y);try{y.call(g)}finally{cr(5,g,y)}}}}}(a,l),function ig(a,l){const d=a.cleanup,f=l[Yo];let g=-1;if(null!==d)for(let y=0;y<d.length-1;y+=2)if("string"==typeof d[y]){const C=d[y+3];C>=0?f[g=C]():f[g=-C].unsubscribe(),y+=2}else{const C=f[g=d[y+1]];d[y].call(C)}if(null!==f){for(let y=g+1;y<f.length;y++)(0,f[y])();l[Yo]=null}}(a,l),1===l[Ct].type&&l[qt].destroy();const d=l[Xa];if(null!==d&&gs(l[wi])){d!==l[wi]&&qh(d,l);const f=l[Fr];null!==f&&f.detachView(a)}!function W(a){B_.delete(a[hs])}(l)}}function W_(a,l,d){return function K_(a,l,d){let f=l;for(;null!==f&&40&f.type;)f=(l=f).parent;if(null===f)return d[As];{const{componentOffset:g}=f;if(g>-1){const{encapsulation:y}=a.data[f.directiveStart+g];if(y===We.None||y===We.Emulated)return null}return zr(f,d)}}(a,l.parent,d)}function Ed(a,l,d,f,g){a.insertBefore(l,d,f,g)}function Y_(a,l,d){a.appendChild(l,d)}function pw(a,l,d,f,g){null!==f?Ed(a,l,d,f,g):Y_(a,l,d)}function Q_(a,l){return a.parentNode(l)}let sg,Cd,iy,lg,J_=function rg(a,l,d){return 40&a.type?zr(a,d):null};function og(a,l,d,f){const g=W_(a,f,l),y=l[qt],D=function RT(a,l,d){return J_(a,l,d)}(f.parent||l[Li],f,l);if(null!=g)if(Array.isArray(d))for(let k=0;k<d.length;k++)pw(y,g,d[k],D,!1);else pw(y,g,d,D,!1);void 0!==sg&&sg(y,f,l,d,g)}function ey(a,l){if(null!==l){const d=l.type;if(3&d)return zr(l,a);if(4&d)return pc(-1,a[l.index]);if(8&d){const f=l.child;if(null!==f)return ey(a,f);{const g=a[l.index];return gs(g)?pc(-1,g):Si(g)}}if(32&d)return Ze(l,a)()||Si(a[l.index]);{const f=gw(a,l);return null!==f?Array.isArray(f)?f[0]:ey(Bt(a[Ui]),f):ey(a,l.next)}}return null}function gw(a,l){return null!==l?a[Ui][Li].projection[l.projection]:null}function pc(a,l){const d=lr+a+1;if(d<l.length){const f=l[d],g=f[Ct].firstChild;if(null!==g)return ey(f,g)}return l[$u]}function mw(a,l,d,f,g,y,C){for(;null!=d;){const D=f[d.index],k=d.type;if(C&&0===l&&(D&&Xr(Si(D),f),d.flags|=2),32!=(32&d.flags))if(8&k)mw(a,l,d.child,f,g,y,!1),cu(l,a,g,D,y);else if(32&k){const O=Ze(d,f);let B;for(;B=O();)cu(l,a,g,B,y);cu(l,a,g,D,y)}else 16&k?PT(a,l,f,d,g,y):cu(l,a,g,D,y);d=C?d.projectionNext:d.next}}function ag(a,l,d,f,g,y){mw(d,f,a.firstChild,l,g,y,!1)}function PT(a,l,d,f,g,y){const C=d[Ui],k=C[Li].projection[f.projection];if(Array.isArray(k))for(let O=0;O<k.length;O++)cu(l,a,g,k[O],y);else mw(a,l,k,C[wi],g,y,!0)}function NT(a,l,d){""===d?a.removeAttribute(l,"class"):a.setAttribute(l,"class",d)}function OT(a,l,d){const{mergedAttrs:f,classes:g,styles:y}=d;null!==f&&ul(a,l,f),null!==g&&NT(a,l,g),null!==y&&function bk(a,l,d){a.setAttribute(l,"style",d)}(a,l,y)}function Id(a){return function ny(){if(void 0===Cd&&(Cd=null,zn.trustedTypes))try{Cd=zn.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return Cd}()?.createHTML(a)||a}function FT(a){iy=a}function ry(){if(void 0===lg&&(lg=null,zn.trustedTypes))try{lg=zn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return lg}function Ik(a){return ry()?.createHTML(a)||a}function Tk(a){return ry()?.createScriptURL(a)||a}class Zh{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${te})`}}class vw extends Zh{getTypeName(){return"HTML"}}class uB extends Zh{getTypeName(){return"Style"}}class Sk extends Zh{getTypeName(){return"Script"}}class UT extends Zh{getTypeName(){return"URL"}}class Dk extends Zh{getTypeName(){return"ResourceURL"}}function El(a){return a instanceof Zh?a.changingThisBreaksApplicationSecurity:a}function gc(a,l){const d=function ug(a){return a instanceof Zh&&a.getTypeName()||null}(a);if(null!=d&&d!==l){if("ResourceURL"===d&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${d} (see ${te})`)}return d===l}function cB(a){return new vw(a)}function ww(a){return new uB(a)}function dB(a){return new Sk(a)}function Ak(a){return new UT(a)}function hB(a){return new Dk(a)}class Mk{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const d=(new window.DOMParser).parseFromString(Id(l),"text/html").body;return null===d?this.inertDocumentHelper.getInertBodyElement(l):(d.removeChild(d.firstChild),d)}catch{return null}}}class fB{constructor(l){this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(l){const d=this.inertDocument.createElement("template");return d.innerHTML=Id(l),d}}const xk=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function bw(a){return(a=String(a)).match(xk)?a:"unsafe:"+a}function mc(a){const l={};for(const d of a.split(","))l[d]=!0;return l}function sy(...a){const l={};for(const d of a)for(const f in d)d.hasOwnProperty(f)&&(l[f]=!0);return l}const kk=mc("area,br,col,hr,img,wbr"),Rk=mc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),BT=mc("rp,rt"),cg=sy(kk,sy(Rk,mc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),sy(BT,mc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sy(BT,Rk)),dg=mc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Cl=sy(dg,mc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),mc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Pk=mc("script,style,template");class Nk{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let d=l.firstChild,f=!0;for(;d;)if(d.nodeType===Node.ELEMENT_NODE?f=this.startElement(d):d.nodeType===Node.TEXT_NODE?this.chars(d.nodeValue):this.sanitizedSomething=!0,f&&d.firstChild)d=d.firstChild;else for(;d;){d.nodeType===Node.ELEMENT_NODE&&this.endElement(d);let g=this.checkClobberedElement(d,d.nextSibling);if(g){d=g;break}d=this.checkClobberedElement(d,d.parentNode)}return this.buf.join("")}startElement(l){const d=l.nodeName.toLowerCase();if(!cg.hasOwnProperty(d))return this.sanitizedSomething=!0,!Pk.hasOwnProperty(d);this.buf.push("<"),this.buf.push(d);const f=l.attributes;for(let g=0;g<f.length;g++){const y=f.item(g),C=y.name,D=C.toLowerCase();if(!Cl.hasOwnProperty(D)){this.sanitizedSomething=!0;continue}let k=y.value;dg[D]&&(k=bw(k)),this.buf.push(" ",C,'="',qT(k),'"')}return this.buf.push(">"),!0}endElement(l){const d=l.nodeName.toLowerCase();cg.hasOwnProperty(d)&&!kk.hasOwnProperty(d)&&(this.buf.push("</"),this.buf.push(d),this.buf.push(">"))}chars(l){this.buf.push(qT(l))}checkClobberedElement(l,d){if(d&&(l.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return d}}const gB=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ok=/([^\#-~ |!])/g;function qT(a){return a.replace(/&/g,"&amp;").replace(gB,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(Ok,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Cw;function Fk(a,l){let d=null;try{Cw=Cw||function VT(a){const l=new fB(a);return function pB(){try{return!!(new window.DOMParser).parseFromString(Id(""),"text/html")}catch{return!1}}()?new Mk(l):l}(a);let f=l?String(l):"";d=Cw.getInertBodyElement(f);let g=5,y=f;do{if(0===g)throw new Error("Failed to sanitize html because the input is unstable");g--,f=y,y=d.innerHTML,d=Cw.getInertBodyElement(f)}while(f!==y);return Id((new Nk).sanitizeChildren(Iw(d)||d))}finally{if(d){const f=Iw(d)||d;for(;f.firstChild;)f.removeChild(f.firstChild)}}}function Iw(a){return"content"in a&&function Zs(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var ui=(()=>((ui=ui||{})[ui.NONE=0]="NONE",ui[ui.HTML=1]="HTML",ui[ui.STYLE=2]="STYLE",ui[ui.SCRIPT=3]="SCRIPT",ui[ui.URL=4]="URL",ui[ui.RESOURCE_URL=5]="RESOURCE_URL",ui))();function hg(a){const l=oy();return l?Ik(l.sanitize(ui.HTML,a)||""):gc(a,"HTML")?Ik(El(a)):Fk(function yw(){return void 0!==iy?iy:typeof document<"u"?document:void 0}(),De(a))}function xa(a){const l=oy();return l?l.sanitize(ui.URL,a)||"":gc(a,"URL")?El(a):bw(De(a))}function Lk(a){const l=oy();if(l)return Tk(l.sanitize(ui.RESOURCE_URL,a)||"");if(gc(a,"ResourceURL"))return Tk(El(a));throw new re(904,!1)}function Sw(a,l,d){return function jk(a,l){return"src"===l&&("embed"===a||"frame"===a||"iframe"===a||"media"===a||"script"===a)||"href"===l&&("base"===a||"link"===a)?Lk:xa}(l,d)(a)}function oy(){const a=ze();return a&&a[ju]}const Aw=new Gn("ENVIRONMENT_INITIALIZER"),ZT=new Gn("INJECTOR",-1),Mw=new Gn("INJECTOR_DEF_TYPES");class xw{get(l,d=wr){if(d===wr){const f=new Error(`NullInjectorError: No provider for ${Me(l)}!`);throw f.name="NullInjectorError",f}return d}}function zT(a){return{\u0275providers:a}}function Hk(...a){return{\u0275providers:zh(0,a),\u0275fromNgModule:!0}}function zh(a,...l){const d=[],f=new Set;let g;return ko(l,y=>{const C=y;fg(C,d,[],f)&&(g||(g=[]),g.push(C))}),void 0!==g&&pr(g,d),d}function pr(a,l){for(let d=0;d<a.length;d++){const{providers:g}=a[d];Wh(g,y=>{l.push(y)})}}function fg(a,l,d,f){if(!(a=fe(a)))return!1;let g=null,y=Ii(a);const C=!y&&xn(a);if(y||C){if(C&&!C.standalone)return!1;g=a}else{const k=a.ngModule;if(y=Ii(k),!y)return!1;g=k}const D=f.has(g);if(C){if(D)return!1;if(f.add(g),C.dependencies){const k="function"==typeof C.dependencies?C.dependencies():C.dependencies;for(const O of k)fg(O,l,d,f)}}else{if(!y)return!1;{if(null!=y.imports&&!D){let O;f.add(g);try{ko(y.imports,B=>{fg(B,l,d,f)&&(O||(O=[]),O.push(B))})}finally{}void 0!==O&&pr(O,l)}if(!D){const O=Ao(g)||(()=>new g);l.push({provide:g,useFactory:O,deps:ft},{provide:Mw,useValue:g,multi:!0},{provide:Aw,useValue:()=>rt(g),multi:!0})}const k=y.providers;null==k||D||Wh(k,B=>{l.push(B)})}}return g!==a&&void 0!==a.providers}function Wh(a,l){for(let d of a)me(d)&&(d=d.\u0275providers),Array.isArray(d)?Wh(d,l):l(d)}const KT=xe({provide:String,useValue:xe});function pg(a){return null!==a&&"object"==typeof a&&KT in a}function Sd(a){return"function"==typeof a}const Rw=new Gn("Set Injector scope."),_c={},Gk={};let ay;function Pw(){return void 0===ay&&(ay=new xw),ay}class Kh{}class qk extends Kh{get destroyed(){return this._destroyed}constructor(l,d,f,g){super(),this.parent=d,this.source=f,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Nw(l,C=>this.processProvider(C)),this.records.set(ZT,Yh(void 0,this)),g.has("environment")&&this.records.set(Kh,Yh(void 0,this));const y=this.records.get(Rw);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(Mw.multi,ft,Tt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const d=mn(this),f=Fi(void 0);try{return l()}finally{mn(d),Fi(f)}}get(l,d=wr,f=Tt.Default){this.assertNotDestroyed(),f=Xt(f);const g=mn(this),y=Fi(void 0);try{if(!(f&Tt.SkipSelf)){let D=this.records.get(l);if(void 0===D){const k=function yB(a){return"function"==typeof a||"object"==typeof a&&a instanceof Gn}(l)&&ri(l);D=k&&this.injectableDefInScope(k)?Yh(QT(l),_c):null,this.records.set(l,D)}if(null!=D)return this.hydrate(l,D)}return(f&Tt.Self?Pw():this.parent).get(l,d=f&Tt.Optional&&d===wr?null:d)}catch(C){if("NullInjectorError"===C.name){if((C[zi]=C[zi]||[]).unshift(Me(l)),g)throw C;return function ee(a,l,d,f){const g=a[zi];throw l[Nn]&&g.unshift(l[Nn]),a.message=function he(a,l,d,f=null){a=a&&"\n"===a.charAt(0)&&a.charAt(1)==fi?a.slice(2):a;let g=Me(l);if(Array.isArray(l))g=l.map(Me).join(" -> ");else if("object"==typeof l){let y=[];for(let C in l)if(l.hasOwnProperty(C)){let D=l[C];y.push(C+":"+("string"==typeof D?JSON.stringify(D):Me(D)))}g=`{${y.join(", ")}}`}return`${d}${f?"("+f+")":""}[${g}]: ${a.replace(vi,"\n  ")}`}("\n"+a.message,g,d,f),a[Ds]=g,a[zi]=null,a}(C,l,"R3InjectorError",this.source)}throw C}finally{Fi(y),mn(g)}}resolveInjectorInitializers(){const l=mn(this),d=Fi(void 0);try{const f=this.get(Aw.multi,ft,Tt.Self);for(const g of f)g()}finally{mn(l),Fi(d)}}toString(){const l=[],d=this.records;for(const f of d.keys())l.push(Me(f));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(l){let d=Sd(l=fe(l))?l:fe(l&&l.provide);const f=function _B(a){return pg(a)?Yh(void 0,a.useValue):Yh(JT(a),_c)}(l);if(Sd(l)||!0!==l.multi)this.records.get(d);else{let g=this.records.get(d);g||(g=Yh(void 0,_c,!0),g.factory=()=>nn(g.multi),this.records.set(d,g)),d=l,g.multi.push(l)}this.records.set(d,f)}hydrate(l,d){return d.value===_c&&(d.value=Gk,d.value=d.factory()),"object"==typeof d.value&&d.value&&function Zk(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(d.value)&&this._ngOnDestroyHooks.add(d.value),d.value}injectableDefInScope(l){if(!l.providedIn)return!1;const d=fe(l.providedIn);return"string"==typeof d?"any"===d||this.scopes.has(d):this.injectorDefTypes.has(d)}}function QT(a){const l=ri(a),d=null!==l?l.factory:Ao(a);if(null!==d)return d;if(a instanceof Gn)throw new re(204,!1);if(a instanceof Function)return function mB(a){const l=a.length;if(l>0)throw function Ro(a,l){const d=[];for(let f=0;f<a;f++)d.push(l);return d}(l,"?"),new re(204,!1);const d=function Pr(a){const l=a&&(a[ls]||a[Nr]);return l?(function ro(a){if(a.hasOwnProperty("name"))return a.name;(""+a).match(/^function\s*([^\s(]+)/)}(a),l):null}(a);return null!==d?()=>d.factory(a):()=>new a}(a);throw new re(204,!1)}function JT(a,l,d){let f;if(Sd(a)){const g=fe(a);return Ao(g)||QT(g)}if(pg(a))f=()=>fe(a.useValue);else if(function kw(a){return!(!a||!a.useFactory)}(a))f=()=>a.useFactory(...nn(a.deps||[]));else if(function YT(a){return!(!a||!a.useExisting)}(a))f=()=>rt(fe(a.useExisting));else{const g=fe(a&&(a.useClass||a.provide));if(!function XT(a){return!!a.deps}(a))return Ao(g)||QT(g);f=()=>new g(...nn(a.deps))}return f}function Yh(a,l,d=!1){return{factory:a,value:l,multi:d?[]:void 0}}function Nw(a,l){for(const d of a)Array.isArray(d)?Nw(d,l):d&&me(d)?Nw(d.\u0275providers,l):l(d)}class zk{}class Ow{}class Kk{resolveComponentFactory(l){throw function Fw(a){const l=Error(`No component factory found for ${Me(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let Qh=(()=>{class a{}return a.NULL=new Kk,a})();function tS(){return Jh(Wi(),ze())}function Jh(a,l){return new gg(zr(a,l))}let gg=(()=>{class a{constructor(d){this.nativeElement=d}}return a.__NG_ELEMENT_ID__=tS,a})();function vB(a){return a instanceof gg?a.nativeElement:a}class Ki{}let Xh=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function Yk(){const a=ze(),d=dr(Wi().index,a);return(ps(d)?d:a)[qt]}(),a})(),wB=(()=>{class a{}return a.\u0275prov=Ft({token:a,providedIn:"root",factory:()=>null}),a})();class Lw{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const nS=new Lw("15.2.1"),iS={},rS="ngOriginalError";function sS(a){return a[rS]}class ly{constructor(){this._console=console}handleError(l){const d=this._findOriginalError(l);this._console.error("ERROR",l),d&&this._console.error("ORIGINAL ERROR",d)}_findOriginalError(l){let d=l&&sS(l);for(;d&&sS(d);)d=sS(d);return d||null}}function hu(a){return a instanceof Function?a():a}function yc(a,l,d){let f=a.length;for(;;){const g=a.indexOf(l,d);if(-1===g)return g;if(0===g||a.charCodeAt(g-1)<=32){const y=l.length;if(g+y===f||a.charCodeAt(g+y)<=32)return g}d=g+1}}const ka="ng-template";function aR(a,l,d){let f=0;for(;f<a.length;){let g=a[f++];if(d&&"class"===g){if(g=a[f],-1!==yc(g.toLowerCase(),l,0))return!0}else if(1===g){for(;f<a.length&&"string"==typeof(g=a[f++]);)if(g.toLowerCase()===l)return!0;return!1}}return!1}function Uw(a){return 4===a.type&&a.value!==ka}function lR(a,l,d){return l===(4!==a.type||d?a.value:ka)}function uR(a,l,d){let f=4;const g=a.attrs||[],y=function lS(a){for(let l=0;l<a.length;l++)if(Ca(a[l]))return l;return a.length}(g);let C=!1;for(let D=0;D<l.length;D++){const k=l[D];if("number"!=typeof k){if(!C)if(4&f){if(f=2|1&f,""!==k&&!lR(a,k,d)||""===k&&1===l.length){if(Ra(f))return!1;C=!0}}else{const O=8&f?k:l[++D];if(8&f&&null!==a.attrs){if(!aR(a.attrs,O,d)){if(Ra(f))return!1;C=!0}continue}const Y=ef(8&f?"class":k,g,Uw(a),d);if(-1===Y){if(Ra(f))return!1;C=!0;continue}if(""!==O){let de;de=Y>y?"":g[Y+1].toLowerCase();const Ee=8&f?de:null;if(Ee&&-1!==yc(Ee,O,0)||2&f&&O!==de){if(Ra(f))return!1;C=!0}}}}else{if(!C&&!Ra(f)&&!Ra(k))return!1;if(C&&Ra(k))continue;C=!1,f=k|1&f}}return Ra(f)||C}function Ra(a){return 0==(1&a)}function ef(a,l,d,f){if(null===l)return-1;let g=0;if(f||!d){let y=!1;for(;g<l.length;){const C=l[g];if(C===a)return g;if(3===C||6===C)y=!0;else{if(1===C||2===C){let D=l[++g];for(;"string"==typeof D;)D=l[++g];continue}if(4===C)break;if(0===C){g+=4;continue}}g+=y?1:2}return-1}return function Ps(a,l){let d=a.indexOf(4);if(d>-1)for(d++;d<a.length;){const f=a[d];if("number"==typeof f)return-1;if(f===l)return d;d++}return-1}(l,a)}function aS(a,l,d=!1){for(let f=0;f<l.length;f++)if(uR(a,l[f],d))return!0;return!1}function uS(a,l){return a?":not("+l.trim()+")":l}function IB(a){let l=a[0],d=1,f=2,g="",y=!1;for(;d<a.length;){let C=a[d];if("string"==typeof C)if(2&f){const D=a[++d];g+="["+C+(D.length>0?'="'+D+'"':"")+"]"}else 8&f?g+="."+C:4&f&&(g+=" "+C);else""!==g&&!Ra(C)&&(l+=uS(y,g),g=""),f=C,y=y||!Ra(f);d++}return""!==g&&(l+=uS(y,g)),l}const gn={};function Vw(a){Bw(Wt(),ze(),Kr()+a,!1)}function Bw(a,l,d,f){if(!f)if(3==(3&l[on])){const y=a.preOrderCheckHooks;null!==y&&eu(l,y,d)}else{const y=a.preOrderHooks;null!==y&&al(l,y,0,d)}Mo(d)}function $w(a,l=null,d=null,f){const g=Gw(a,l,d,f);return g.resolveInjectorInitializers(),g}function Gw(a,l=null,d=null,f,g=new Set){const y=[d||ft,Hk(a)];return f=f||("object"==typeof a?void 0:Me(a)),new qk(y,l||Pw(),f||null,g)}let fu=(()=>{class a{static create(d,f){if(Array.isArray(d))return $w({name:""},f,d,"");{const g=d.name??"";return $w({name:g},d.parent,d.providers,g)}}}return a.THROW_IF_NOT_FOUND=wr,a.NULL=new xw,a.\u0275prov=Ft({token:a,providedIn:"any",factory:()=>rt(ZT)}),a.__NG_ELEMENT_ID__=-1,a})();function tf(a,l=Tt.Default){const d=ze();return null===d?rt(a,l):dd(Wi(),d,fe(a),l)}function TS(){throw new Error("invalid")}function hy(a,l){const d=a.contentQueries;if(null!==d)for(let f=0;f<d.length;f+=2){const y=d[f+1];if(-1!==y){const C=a.data[y];od(d[f]),C.contentQueries(2,l[y],y)}}}function pu(a,l,d,f,g,y,C,D,k,O,B){const Y=l.blueprint.slice();return Y[As]=g,Y[on]=76|f,(null!==B||a&&1024&a[on])&&(Y[on]|=1024),gh(Y),Y[wi]=Y[ds]=a,Y[On]=d,Y[Qo]=C||a&&a[Qo],Y[qt]=D||a&&a[qt],Y[ju]=k||a&&a[ju]||null,Y[Hl]=O||a&&a[Hl]||null,Y[Li]=y,Y[hs]=function Ce(){return j_++}(),Y[Io]=B,Y[Ui]=2==l.type?a[Ui]:Y,Y}function Il(a,l,d,f,g){let y=a.data[l];if(null===y)y=function vg(a,l,d,f,g){const y=rd(),C=wa(),k=a.data[l]=function Ad(a,l,d,f,g,y){return{type:d,index:f,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,prev:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?y:y&&y.parent,d,l,f,g);return null===a.firstChild&&(a.firstChild=k),null!==y&&(C?null==y.child&&null!==k.parent&&(y.child=k):null===y.next&&(y.next=k,k.prev=y)),k}(a,l,d,f,g),function w_(){return un.lFrame.inI18n}()&&(y.flags|=32);else if(64&y.type){y.type=d,y.value=f,y.attrs=g;const C=function sl(){const a=un.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();y.injectorIndex=null===C?-1:C.injectorIndex}return uo(y,!0),y}function wg(a,l,d,f){if(0===d)return-1;const g=l.length;for(let y=0;y<d;y++)l.push(f),a.blueprint.push(f),a.data.push(null);return g}function bg(a,l,d){tc(l);try{const f=a.viewQuery;null!==f&&FS(1,f,d);const g=a.template;null!==g&&Eg(a,l,g,1,d),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&hy(a,l),a.staticViewQueries&&FS(2,a.viewQuery,d);const y=a.components;null!==y&&function fy(a,l){for(let d=0;d<l.length;d++)RB(a,l[d])}(l,y)}catch(f){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),f}finally{l[on]&=-5,I_()}}function py(a,l,d,f){const g=l[on];if(128!=(128&g)){tc(l);try{gh(l),function Xu(a){return un.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==d&&Eg(a,l,d,2,f);const C=3==(3&g);if(C){const O=a.preOrderCheckHooks;null!==O&&eu(l,O,null)}else{const O=a.preOrderHooks;null!==O&&al(l,O,0,null),tu(l,0)}if(function PS(a){for(let l=_o(a);null!==l;l=ra(l)){if(!l[Hu])continue;const d=l[Ms];for(let f=0;f<d.length;f++){const g=d[f];512&g[on]||va(g[wi],1),g[on]|=512}}}(l),function tb(a){for(let l=_o(a);null!==l;l=ra(l))for(let d=lr;d<l.length;d++){const f=l[d],g=f[Ct];ya(f)&&py(g,f,g.template,f[On])}}(l),null!==a.contentQueries&&hy(a,l),C){const O=a.contentCheckHooks;null!==O&&eu(l,O)}else{const O=a.contentHooks;null!==O&&al(l,O,1),tu(l,1)}!function wR(a,l){const d=a.hostBindingOpCodes;if(null!==d)try{for(let f=0;f<d.length;f++){const g=d[f];if(g<0)Mo(~g);else{const y=g,C=d[++f],D=d[++f];Jl(C,y),D(2,l[y])}}}finally{Mo(-1)}}(a,l);const D=a.components;null!==D&&function yg(a,l){for(let d=0;d<l.length;d++)NS(a,l[d])}(l,D);const k=a.viewQuery;if(null!==k&&FS(2,k,f),C){const O=a.viewCheckHooks;null!==O&&eu(l,O)}else{const O=a.viewHooks;null!==O&&al(l,O,2),tu(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[on]&=-41,512&l[on]&&(l[on]&=-513,va(l[wi],-1))}finally{I_()}}}function Eg(a,l,d,f,g){const y=Kr(),C=2&f;try{Mo(-1),C&&l.length>ai&&Bw(a,l,ai,!1),cr(C?2:0,g),d(f,g)}finally{Mo(y),cr(C?3:1,g)}}function gy(a,l,d){if(So(l)){const g=l.directiveEnd;for(let y=l.directiveStart;y<g;y++){const C=a.data[y];C.contentQueries&&C.contentQueries(1,d[y],y)}}}function my(a,l,d){_h()&&(function xS(a,l,d,f){const g=d.directiveStart,y=d.directiveEnd;ql(d)&&function RS(a,l,d){const f=zr(l,a),g=yy(d),y=a[Qo],C=Sg(a,pu(a,g,null,d.onPush?32:16,f,l,y,y.createRenderer(f,d),null,null,null));a[l.index]=C}(l,d,a.data[g+d.componentOffset]),a.firstCreatePass||ho(d,l),Xr(f,l);const C=d.initialInputs;for(let D=g;D<y;D++){const k=a.data[D],O=vs(l,a,D,d);Xr(O,l),null!==C&&kB(0,D-g,O,k,0,C),ur(k)&&(dr(d.index,l)[On]=vs(l,a,D,d))}}(a,l,d,zr(d,l)),64==(64&d.flags)&&kS(a,l,d))}function _y(a,l,d=zr){const f=l.localNames;if(null!==f){let g=l.index+1;for(let y=0;y<f.length;y+=2){const C=f[y+1],D=-1===C?d(l,a):a[C];a[g++]=D}}}function yy(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=SS(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function SS(a,l,d,f,g,y,C,D,k,O){const B=ai+f,Y=B+g,de=function DB(a,l){const d=[];for(let f=0;f<l;f++)d.push(f<a?null:gn);return d}(B,Y),Ee="function"==typeof O?O():O;return de[Ct]={type:a,blueprint:de,template:d,queries:null,viewQuery:D,declTNode:l,data:de.slice().fill(null,B),bindingStartIndex:B,expandoStartIndex:Y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:k,consts:Ee,incompleteFirstPass:!1}}function ER(a,l,d,f){const g=ib(l);null===d?g.push(f):(g.push(d),a.firstCreatePass&&LS(a).push(f,g.length-1))}function nf(a,l,d,f){for(let g in a)if(a.hasOwnProperty(g)){d=null===d?{}:d;const y=a[g];null===f?Cg(d,l,g,y):f.hasOwnProperty(g)&&Cg(d,l,f[g],y)}return d}function Cg(a,l,d,f){a.hasOwnProperty(d)?a[d].push(l,f):a[d]=[l,f]}function Ns(a,l,d,f,g,y,C,D){const k=zr(l,d);let B,O=l.inputs;!D&&null!=O&&(B=O[f])?(sb(a,d,B,f,g),ql(l)&&DS(d,l.index)):3&l.type&&(f=function vy(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(f),g=null!=C?C(g,l.value||"",f):g,y.setProperty(k,f,g))}function DS(a,l){const d=dr(l,a);16&d[on]||(d[on]|=32)}function Jw(a,l,d,f){if(_h()){const g=null===f?null:{"":-1},y=function IR(a,l){const d=a.directiveRegistry;let f=null,g=null;if(d)for(let y=0;y<d.length;y++){const C=d[y];if(aS(l,C.selectors,!1))if(f||(f=[]),ur(C))if(null!==C.findHostDirectiveDefs){const D=[];g=g||new Map,C.findHostDirectiveDefs(C,D,g),f.unshift(...D,C),Tg(a,l,D.length)}else f.unshift(C),Tg(a,l,0);else g=g||new Map,C.findHostDirectiveDefs?.(C,f,g),f.push(C)}return null===f?null:[f,g]}(a,d);let C,D;null===y?C=D=null:[C,D]=y,null!==C&&AS(a,l,d,C,g,D),g&&function MB(a,l,d){if(l){const f=a.localNames=[];for(let g=0;g<l.length;g+=2){const y=d[l[g+1]];if(null==y)throw new re(-301,!1);f.push(l[g],y)}}}(d,f,g)}d.mergedAttrs=ys(d.mergedAttrs,d.attrs)}function AS(a,l,d,f,g,y){for(let O=0;O<f.length;O++)Dh(ho(d,l),a,f[O].type);!function Xw(a,l,d){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+d,a.providerIndexes=l}(d,a.data.length,f.length);for(let O=0;O<f.length;O++){const B=f[O];B.providersResolver&&B.providersResolver(B)}let C=!1,D=!1,k=wg(a,l,f.length,null);for(let O=0;O<f.length;O++){const B=f[O];d.mergedAttrs=ys(d.mergedAttrs,B.hostAttrs),TR(a,d,l,k,B),xB(k,B,g),null!==B.contentQueries&&(d.flags|=4),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(d.flags|=64);const Y=B.type.prototype;!C&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(d.index),C=!0),!D&&(Y.ngOnChanges||Y.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(d.index),D=!0),k++}!function Ig(a,l,d){const g=l.directiveEnd,y=a.data,C=l.attrs,D=[];let k=null,O=null;for(let B=l.directiveStart;B<g;B++){const Y=y[B],de=d?d.get(Y):null,je=de?de.outputs:null;k=nf(Y.inputs,B,k,de?de.inputs:null),O=nf(Y.outputs,B,O,je);const lt=null===k||null===C||Uw(l)?null:SR(k,B,C);D.push(lt)}null!==k&&(k.hasOwnProperty("class")&&(l.flags|=8),k.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=D,l.inputs=k,l.outputs=O}(a,d,y)}function kS(a,l,d){const f=d.directiveStart,g=d.directiveEnd,y=d.index,C=function Up(){return un.lFrame.currentDirectiveIndex}();try{Mo(y);for(let D=f;D<g;D++){const k=a.data[D],O=l[D];Ea(D),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&AB(k,O)}}finally{Mo(-1),Ea(C)}}function AB(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function Tg(a,l,d){l.componentOffset=d,(a.components||(a.components=[])).push(l.index)}function xB(a,l,d){if(d){if(l.exportAs)for(let f=0;f<l.exportAs.length;f++)d[l.exportAs[f]]=a;ur(l)&&(d[""]=a)}}function TR(a,l,d,f,g){a.data[f]=g;const y=g.factory||(g.factory=Ao(g.type)),C=new nc(y,ur(g),tf);a.blueprint[f]=C,d[f]=C,function MS(a,l,d,f,g){const y=g.hostBindings;if(y){let C=a.hostBindingOpCodes;null===C&&(C=a.hostBindingOpCodes=[]);const D=~l.index;(function CR(a){let l=a.length;for(;l>0;){const d=a[--l];if("number"==typeof d&&d<0)return d}return 0})(C)!=D&&C.push(D),C.push(d,f,y)}}(a,l,f,wg(a,d,g.hostVars,gn),g)}function sa(a,l,d,f,g,y){const C=zr(a,l);!function eb(a,l,d,f,g,y,C){if(null==y)a.removeAttribute(l,g,d);else{const D=null==C?De(y):C(y,f||"",g);a.setAttribute(l,g,D,d)}}(l[qt],C,y,a.value,d,f,g)}function kB(a,l,d,f,g,y){const C=y[l];if(null!==C){const D=f.setInput;for(let k=0;k<C.length;){const O=C[k++],B=C[k++],Y=C[k++];null!==D?f.setInput(d,Y,O,B):d[B]=Y}}}function SR(a,l,d){let f=null,g=0;for(;g<d.length;){const y=d[g];if(0!==y)if(5!==y){if("number"==typeof y)break;if(a.hasOwnProperty(y)){null===f&&(f=[]);const C=a[y];for(let D=0;D<C.length;D+=2)if(C[D]===l){f.push(y,C[D+1],d[g+1]);break}}g+=2}else g+=2;else g+=4}return f}function rf(a,l,d,f){return[a,!0,!1,l,null,0,f,d,null,null]}function NS(a,l){const d=dr(l,a);if(ya(d)){const f=d[Ct];48&d[on]?py(f,d,f.template,d[On]):d[so]>0&&wy(d)}}function wy(a){for(let f=_o(a);null!==f;f=ra(f))for(let g=lr;g<f.length;g++){const y=f[g];if(ya(y))if(512&y[on]){const C=y[Ct];py(C,y,C.template,y[On])}else y[so]>0&&wy(y)}const d=a[Ct].components;if(null!==d)for(let f=0;f<d.length;f++){const g=dr(d[f],a);ya(g)&&g[so]>0&&wy(g)}}function RB(a,l){const d=dr(l,a),f=d[Ct];(function DR(a,l){for(let d=l.length;d<a.blueprint.length;d++)l.push(a.blueprint[d])})(f,d),bg(f,d,d[On])}function Sg(a,l){return a[$l]?a[Gl][Or]=l:a[$l]=l,a[Gl]=l,l}function OS(a){for(;a;){a[on]|=32;const l=Bt(a);if(g_(a)&&!l)return a;a=l}return null}function nb(a,l,d,f=!0){const g=l[Qo];g.begin&&g.begin();try{py(a,l,a.template,d)}catch(C){throw f&&sf(l,C),C}finally{g.end&&g.end()}}function FS(a,l,d){od(0),l(a,d)}function ib(a){return a[Yo]||(a[Yo]=[])}function LS(a){return a.cleanup||(a.cleanup=[])}function sf(a,l){const d=a[Hl],f=d?d.get(ly,null):null;f&&f.handleError(l)}function sb(a,l,d,f,g){for(let y=0;y<d.length;){const C=d[y++],D=d[y++],k=l[C],O=a.data[C];null!==O.setInput?O.setInput(k,g,f,D):k[D]=g}}function gu(a,l,d){const f=qs(l,a);!function du(a,l,d){a.setValue(l,d)}(a[qt],f,d)}function Dg(a,l,d){let f=d?a.styles:null,g=d?a.classes:null,y=0;if(null!==l)for(let C=0;C<l.length;C++){const D=l[C];"number"==typeof D?y=D:1==y?g=ve(g,D):2==y&&(f=ve(f,D+": "+l[++C]+";"))}d?a.styles=f:a.stylesWithoutHost=f,d?a.classes=g:a.classesWithoutHost=g}function by(a,l,d,f,g=!1){for(;null!==d;){const y=l[d.index];if(null!==y&&f.push(Si(y)),gs(y))for(let D=lr;D<y.length;D++){const k=y[D],O=k[Ct].firstChild;null!==O&&by(k[Ct],k,O,f)}const C=d.type;if(8&C)by(a,l,d.child,f);else if(32&C){const D=Ze(d,l);let k;for(;k=D();)f.push(k)}else if(16&C){const D=gw(l,d);if(Array.isArray(D))f.push(...D);else{const k=Bt(l[Ui]);by(k[Ct],k,D,f,!0)}}d=g?d.projectionNext:d.next}return f}class Ey{get rootNodes(){const l=this._lView,d=l[Ct];return by(d,l,d.firstChild,[])}constructor(l,d){this._lView=l,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[On]}set context(l){this._lView[On]=l}get destroyed(){return 128==(128&this._lView[on])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[wi];if(gs(l)){const d=l[To],f=d?d.indexOf(this):-1;f>-1&&(q_(l,f),au(d,f))}this._attachedToViewContainer=!1}Z_(this._lView[Ct],this._lView)}onDestroy(l){ER(this._lView[Ct],this._lView,null,l)}markForCheck(){OS(this._cdRefInjectingView||this._lView)}detach(){this._lView[on]&=-65}reattach(){this._lView[on]|=64}detectChanges(){nb(this._lView[Ct],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ng(a,l){ag(a,l,l[qt],2,null,null)}(this._lView[Ct],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=l}}class US extends Ey{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;nb(l[Ct],l,l[On],!1)}checkNoChanges(){}get context(){return null}}class VS extends Qh{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const d=xn(l);return new Md(d,this.ngModule)}}function ob(a){const l=[];for(let d in a)a.hasOwnProperty(d)&&l.push({propName:a[d],templateName:d});return l}class BS{constructor(l,d){this.injector=l,this.parentInjector=d}get(l,d,f){f=Xt(f);const g=this.injector.get(l,iS,f);return g!==iS||d===iS?g:this.parentInjector.get(l,d,f)}}class Md extends Ow{get inputs(){return ob(this.componentDef.inputs)}get outputs(){return ob(this.componentDef.outputs)}constructor(l,d){super(),this.componentDef=l,this.ngModule=d,this.componentType=l.type,this.selector=function cS(a){return a.map(IB).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!d}create(l,d,f,g){let y=(g=g||this.ngModule)instanceof Kh?g:g?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const C=y?new BS(l,y):l,D=C.get(Ki,null);if(null===D)throw new re(407,!1);const k=C.get(wB,null),O=D.createRenderer(null,this.componentDef),B=this.componentDef.selectors[0][0]||"div",Y=f?function bR(a,l,d){return a.selectRootElement(l,d===We.ShadowDom)}(O,f,this.componentDef.encapsulation):bl(O,B,function AR(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(B)),de=this.componentDef.onPush?288:272,Ee=SS(0,null,null,1,0,null,null,null,null,null),je=pu(null,Ee,null,de,null,null,D,O,k,C,null);let lt,mt;tc(je);try{const Rt=this.componentDef;let rn,Xe=null;Rt.findHostDirectiveDefs?(rn=[],Xe=new Map,Rt.findHostDirectiveDefs(Rt,rn,Xe),rn.push(Rt)):rn=[Rt];const cn=function kR(a,l){const d=a[Ct],f=ai;return a[f]=l,Il(d,f,2,"#host",null)}(je,Y),gi=function ab(a,l,d,f,g,y,C,D){const k=g[Ct];!function RR(a,l,d,f){for(const g of a)l.mergedAttrs=ys(l.mergedAttrs,g.hostAttrs);null!==l.mergedAttrs&&(Dg(l,l.mergedAttrs,!0),null!==d&&OT(f,d,l))}(f,a,l,C);const O=y.createRenderer(l,d),B=pu(g,yy(d),null,d.onPush?32:16,g[a.index],a,y,O,D||null,null,null);return k.firstCreatePass&&Tg(k,a,f.length-1),Sg(g,B),g[a.index]=B}(cn,Y,Rt,rn,je,D,O);mt=Wu(Ee,ai),Y&&function PR(a,l,d,f){if(f)ul(a,d,["ng-version",nS.full]);else{const{attrs:g,classes:y}=function dS(a){const l=[],d=[];let f=1,g=2;for(;f<a.length;){let y=a[f];if("string"==typeof y)2===g?""!==y&&l.push(y,a[++f]):8===g&&d.push(y);else{if(!Ra(g))break;g=y}f++}return{attrs:l,classes:d}}(l.selectors[0]);g&&ul(a,d,g),y&&y.length>0&&NT(a,d,y.join(" "))}}(O,Rt,Y,f),void 0!==d&&function ub(a,l,d){const f=a.projection=[];for(let g=0;g<l.length;g++){const y=d[g];f.push(null!=y?Array.from(y):null)}}(mt,this.ngContentSelectors,d),lt=function lb(a,l,d,f,g,y){const C=Wi(),D=g[Ct],k=zr(C,g);AS(D,g,C,d,null,f);for(let B=0;B<d.length;B++)Xr(vs(g,D,C.directiveStart+B,C),g);kS(D,g,C),k&&Xr(k,g);const O=vs(g,D,C.directiveStart+C.componentOffset,C);if(a[On]=g[On]=O,null!==y)for(const B of y)B(O,l);return gy(D,C,a),O}(gi,Rt,rn,Xe,je,[jS]),bg(Ee,je,null)}finally{I_()}return new MR(this.componentType,lt,Jh(mt,je),je,mt)}}class MR extends zk{constructor(l,d,f,g,y){super(),this.location=f,this._rootLView=g,this._tNode=y,this.instance=d,this.hostView=this.changeDetectorRef=new US(g),this.componentType=l}setInput(l,d){const f=this._tNode.inputs;let g;if(null!==f&&(g=f[l])){const y=this._rootLView;sb(y[Ct],y,g,l,d),DS(y,this._tNode.index)}}get injector(){return new Ta(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function jS(){const a=Wi();Xl(ze()[Ct],a)}function Cy(a){let l=function HS(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),d=!0;const f=[a];for(;l;){let g;if(ur(a))g=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new re(903,!1);g=l.\u0275dir}if(g){if(d){f.push(g);const C=a;C.inputs=Iy(a.inputs),C.declaredInputs=Iy(a.declaredInputs),C.outputs=Iy(a.outputs);const D=g.hostBindings;D&&FR(a,D);const k=g.viewQuery,O=g.contentQueries;if(k&&OR(a,k),O&&cb(a,O),Se(a.inputs,g.inputs),Se(a.declaredInputs,g.declaredInputs),Se(a.outputs,g.outputs),ur(g)&&g.data.animation){const B=a.data;B.animation=(B.animation||[]).concat(g.data.animation)}}const y=g.features;if(y)for(let C=0;C<y.length;C++){const D=y[C];D&&D.ngInherit&&D(a),D===Cy&&(d=!1)}}l=Object.getPrototypeOf(l)}!function NR(a){let l=0,d=null;for(let f=a.length-1;f>=0;f--){const g=a[f];g.hostVars=l+=g.hostVars,g.hostAttrs=ys(g.hostAttrs,d=ys(d,g.hostAttrs))}}(f)}function Iy(a){return a===xt?{}:a===ft?[]:a}function OR(a,l){const d=a.viewQuery;a.viewQuery=d?(f,g)=>{l(f,g),d(f,g)}:l}function cb(a,l){const d=a.contentQueries;a.contentQueries=d?(f,g,y)=>{l(f,g,y),d(f,g,y)}:l}function FR(a,l){const d=a.hostBindings;a.hostBindings=d?(f,g)=>{l(f,g),d(f,g)}:l}function Ag(a){return!!db(a)&&(Array.isArray(a)||!(a instanceof Map)&&Symbol.iterator in a)}function db(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function oa(a,l,d){return a[l]=d}function Os(a,l,d){return!Object.is(a[l],d)&&(a[l]=d,!0)}function Sy(a,l,d,f,g){const y=function Ec(a,l,d,f){const g=Os(a,l,d);return Os(a,l+1,f)||g}(a,l,d,f);return Os(a,l+2,g)||y}function hb(a,l,d,f){const g=ze();return Os(g,Wr(),l)&&(Wt(),sa($n(),g,a,l,d,f)),hb}function lf(a,l,d,f){return Os(a,Wr(),d)?l+De(d)+f:gn}function Mg(a,l,d,f,g,y,C,D){const O=Sy(a,function _s(){return un.lFrame.bindingIndex}(),d,g,C);return ea(3),O?l+De(d)+f+De(g)+y+De(C)+D:gn}function Pd(a,l,d,f,g,y,C,D){const k=ze(),O=Wt(),B=a+ai,Y=O.firstCreatePass?function FB(a,l,d,f,g,y,C,D,k){const O=l.consts,B=Il(l,a,4,C||null,xs(O,D));Jw(l,d,B,xs(O,k)),Xl(l,B);const Y=B.tViews=SS(2,B,f,g,y,l.directiveRegistry,l.pipeRegistry,null,l.schemas,O);return null!==l.queries&&(l.queries.template(l,B),Y.queries=l.queries.embeddedTView(B)),B}(B,O,k,l,d,f,g,y,C):O.data[B];uo(Y,!1);const de=k[qt].createComment("");og(O,k,de,Y),Xr(de,k),Sg(k,k[B]=rf(de,k,de,Y)),ed(Y)&&my(O,k,Y),null!=C&&_y(k,Y,D)}function WR(a){return function lo(a,l){return a[l]}(function Ju(){return un.lFrame.contextLView}(),ai+a)}function Nd(a,l,d){const f=ze();return Os(f,Wr(),l)&&Ns(Wt(),$n(),f,a,l,f[qt],d,!1),Nd}function fb(a,l,d,f,g){const C=g?"class":"style";sb(a,d,l.inputs[C],C,f)}function Od(a,l,d,f){const g=ze(),y=Wt(),C=ai+a,D=g[qt],k=y.firstCreatePass?function Ay(a,l,d,f,g,y){const C=l.consts,k=Il(l,a,2,f,xs(C,g));return Jw(l,d,k,xs(C,y)),null!==k.attrs&&Dg(k,k.attrs,!1),null!==k.mergedAttrs&&Dg(k,k.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,k),k}(C,y,g,l,d,f):y.data[C],O=g[C]=bl(D,l,function T_(){return un.lFrame.currentNamespace}()),B=ed(k);return uo(k,!0),OT(D,O,k),32!=(32&k.flags)&&og(y,g,O,k),0===function Yu(){return un.lFrame.elementDepthCount}()&&Xr(O,g),function Fp(){un.lFrame.elementDepthCount++}(),B&&(my(y,g,k),gy(y,k,g)),null!==f&&_y(g,k),Od}function Tl(){let a=Wi();wa()?vh():(a=a.parent,uo(a,!1));const l=a;!function Ql(){un.lFrame.elementDepthCount--}();const d=Wt();return d.firstCreatePass&&(Xl(d,a),So(a)&&d.queries.elementEnd(a)),null!=l.classesWithoutHost&&function Th(a){return 0!=(8&a.flags)}(l)&&fb(d,l,ze(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function nu(a){return 0!=(16&a.flags)}(l)&&fb(d,l,ze(),l.stylesWithoutHost,!1),Tl}function QS(a,l,d,f){return Od(a,l,d,f),Tl(),QS}function cf(a,l,d){const f=ze(),g=Wt(),y=a+ai,C=g.firstCreatePass?function LB(a,l,d,f,g){const y=l.consts,C=xs(y,f),D=Il(l,a,8,"ng-container",C);return null!==C&&Dg(D,C,!0),Jw(l,d,D,xs(y,g)),null!==l.queries&&l.queries.elementStart(l,D),D}(y,g,f,l,d):g.data[y];uo(C,!0);const D=f[y]=f[qt].createComment("");return og(g,f,D,C),Xr(D,f),ed(C)&&(my(g,f,C),gy(g,C,f)),null!=d&&_y(f,C),cf}function My(){let a=Wi();const l=Wt();return wa()?vh():(a=a.parent,uo(a,!1)),l.firstCreatePass&&(Xl(l,a),So(a)&&l.queries.elementEnd(a)),My}function YR(){return ze()}function pb(a){return!!a&&"function"==typeof a.then}function JS(a){return!!a&&"function"==typeof a.subscribe}const QR=JS;function XS(a,l,d,f){const g=ze(),y=Wt(),C=Wi();return function XR(a,l,d,f,g,y,C){const D=ed(f),O=a.firstCreatePass&&LS(a),B=l[On],Y=ib(l);let de=!0;if(3&f.type||C){const lt=zr(f,l),mt=C?C(lt):lt,Rt=Y.length,rn=C?cn=>C(Si(cn[f.index])):f.index;let Xe=null;if(!C&&D&&(Xe=function UB(a,l,d,f){const g=a.cleanup;if(null!=g)for(let y=0;y<g.length-1;y+=2){const C=g[y];if(C===d&&g[y+1]===f){const D=l[Yo],k=g[y+2];return D.length>k?D[k]:null}"string"==typeof C&&(y+=2)}return null}(a,l,g,f.index)),null!==Xe)(Xe.__ngLastListenerFn__||Xe).__ngNextListenerFn__=y,Xe.__ngLastListenerFn__=y,de=!1;else{y=tD(f,l,B,y,!1);const cn=d.listen(mt,g,y);Y.push(y,cn),O&&O.push(g,rn,Rt,Rt+1)}}else y=tD(f,l,B,y,!1);const Ee=f.outputs;let je;if(de&&null!==Ee&&(je=Ee[g])){const lt=je.length;if(lt)for(let mt=0;mt<lt;mt+=2){const gi=l[je[mt]][je[mt+1]].subscribe(y),Yi=Y.length;Y.push(y,gi),O&&O.push(g,f.index,Yi,-(Yi+1))}}}(y,g,g[qt],C,a,l,f),XS}function eD(a,l,d,f){try{return cr(6,l,d),!1!==d(f)}catch(g){return sf(a,g),!1}finally{cr(7,l,d)}}function tD(a,l,d,f,g){return function y(C){if(C===Function)return f;OS(a.componentOffset>-1?dr(a.index,l):l);let k=eD(l,d,f,C),O=y.__ngNextListenerFn__;for(;O;)k=eD(l,d,O,C)&&k,O=O.__ngNextListenerFn__;return g&&!1===k&&(C.preventDefault(),C.returnValue=!1),k}}function nD(a=1){return function TT(a){return(un.lFrame.contextLView=function ad(a,l){for(;a>0;)l=l[ds],a--;return l}(a,un.lFrame.contextLView))[On]}(a)}function iD(a,l,d){return gb(a,"",l,"",d),iD}function gb(a,l,d,f,g){const y=ze(),C=lf(y,l,d,f);return C!==gn&&Ns(Wt(),$n(),y,a,C,y[qt],g,!1),gb}function mb(a,l){return a<<17|l<<2}function Fd(a){return a>>17&32767}function rD(a){return 2|a}function df(a){return(131068&a)>>2}function sD(a,l){return-131069&a|l<<2}function oD(a){return 1|a}function lP(a,l,d,f,g){const y=a[d+1],C=null===l;let D=f?Fd(y):df(y),k=!1;for(;0!==D&&(!1===k||C);){const B=a[D+1];zB(a[D],l)&&(k=!0,a[D+1]=f?oD(B):rD(B)),D=f?Fd(B):df(B)}k&&(a[d+1]=f?rD(y):oD(y))}function zB(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&Ir(a,l)>=0}const es={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function uP(a){return a.substring(es.key,es.keyEnd)}function cP(a,l){const d=es.textEnd;return d===l?-1:(l=es.keyEnd=function QB(a,l,d){for(;l<d&&a.charCodeAt(l)>32;)l++;return l}(a,es.key=l,d),Pg(a,l,d))}function Pg(a,l,d){for(;l<d&&a.charCodeAt(l)<=32;)l++;return l}function aD(a,l,d){return Sl(a,l,d,!1),aD}function lD(a,l){return Sl(a,l,null,!0),lD}function gP(a){!function Dl(a,l,d,f){const g=Wt(),y=ea(2);g.firstUpdatePass&&_P(g,null,y,f);const C=ze();if(d!==gn&&Os(C,y,d)){const D=g.data[Kr()];if(EP(D,f)&&!mP(g,y)){let k=f?D.classesWithoutHost:D.stylesWithoutHost;null!==k&&(d=ve(k,d||"")),fb(g,D,C,d,f)}else!function sj(a,l,d,f,g,y,C,D){g===gn&&(g=ft);let k=0,O=0,B=0<g.length?g[0]:null,Y=0<y.length?y[0]:null;for(;null!==B||null!==Y;){const de=k<g.length?g[k+1]:void 0,Ee=O<y.length?y[O+1]:void 0;let lt,je=null;B===Y?(k+=2,O+=2,de!==Ee&&(je=Y,lt=Ee)):null===Y||null!==B&&B<Y?(k+=2,je=B):(O+=2,je=Y,lt=Ee),null!==je&&wP(a,l,d,f,je,lt,C,D),B=k<g.length?g[k]:null,Y=O<y.length?y[O]:null}}(g,D,C,C[qt],C[y+1],C[y+1]=function rj(a,l,d){if(null==d||""===d)return ft;const f=[],g=El(d);if(Array.isArray(g))for(let y=0;y<g.length;y++)a(f,g[y],!0);else if("object"==typeof g)for(const y in g)g.hasOwnProperty(y)&&a(f,y,g[y]);else"string"==typeof g&&l(f,g);return f}(a,l,d),f,y)}}(Qr,_u,a,!0)}function _u(a,l){for(let d=function KB(a){return function hP(a){es.key=0,es.keyEnd=0,es.value=0,es.valueEnd=0,es.textEnd=a.length}(a),cP(a,Pg(a,0,es.textEnd))}(l);d>=0;d=cP(l,d))Qr(a,uP(l),!0)}function Sl(a,l,d,f){const g=ze(),y=Wt(),C=ea(2);y.firstUpdatePass&&_P(y,a,C,f),l!==gn&&Os(g,C,l)&&wP(y,y.data[Kr()],g,g[qt],a,g[C+1]=function oj(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=Me(El(a)))),a}(l,d),f,C)}function mP(a,l){return l>=a.expandoStartIndex}function _P(a,l,d,f){const g=a.data;if(null===g[d+1]){const y=g[Kr()],C=mP(a,d);EP(y,f)&&null===l&&!C&&(l=!1),l=function tj(a,l,d,f){const g=ec(a);let y=f?l.residualClasses:l.residualStyles;if(null===g)0===(f?l.classBindings:l.styleBindings)&&(d=xy(d=uD(null,a,l,d,f),l.attrs,f),y=null);else{const C=l.directiveStylingLast;if(-1===C||a[C]!==g)if(d=uD(g,a,l,d,f),null===y){let k=function nj(a,l,d){const f=d?l.classBindings:l.styleBindings;if(0!==df(f))return a[Fd(f)]}(a,l,f);void 0!==k&&Array.isArray(k)&&(k=uD(null,a,l,k[1],f),k=xy(k,l.attrs,f),function ij(a,l,d,f){a[Fd(d?l.classBindings:l.styleBindings)]=f}(a,l,f,k))}else y=function yP(a,l,d){let f;const g=l.directiveEnd;for(let y=1+l.directiveStylingLast;y<g;y++)f=xy(f,a[y].hostAttrs,d);return xy(f,l.attrs,d)}(a,l,f)}return void 0!==y&&(f?l.residualClasses=y:l.residualStyles=y),d}(g,y,l,f),function qB(a,l,d,f,g,y){let C=y?l.classBindings:l.styleBindings,D=Fd(C),k=df(C);a[f]=d;let B,O=!1;if(Array.isArray(d)?(B=d[1],(null===B||Ir(d,B)>0)&&(O=!0)):B=d,g)if(0!==k){const de=Fd(a[D+1]);a[f+1]=mb(de,D),0!==de&&(a[de+1]=sD(a[de+1],f)),a[D+1]=function $B(a,l){return 131071&a|l<<17}(a[D+1],f)}else a[f+1]=mb(D,0),0!==D&&(a[D+1]=sD(a[D+1],f)),D=f;else a[f+1]=mb(k,0),0===D?D=f:a[k+1]=sD(a[k+1],f),k=f;O&&(a[f+1]=rD(a[f+1])),lP(a,B,f,!0),lP(a,B,f,!1),function ZB(a,l,d,f,g){const y=g?a.residualClasses:a.residualStyles;null!=y&&"string"==typeof l&&Ir(y,l)>=0&&(d[f+1]=oD(d[f+1]))}(l,B,a,f,y),C=mb(D,k),y?l.classBindings=C:l.styleBindings=C}(g,y,l,d,C,f)}}function uD(a,l,d,f,g){let y=null;const C=d.directiveEnd;let D=d.directiveStylingLast;for(-1===D?D=d.directiveStart:D++;D<C&&(y=l[D],f=xy(f,y.hostAttrs,g),y!==a);)D++;return null!==a&&(d.directiveStylingLast=D),f}function xy(a,l,d){const f=d?1:2;let g=-1;if(null!==l)for(let y=0;y<l.length;y++){const C=l[y];"number"==typeof C?g=C:g===f&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Qr(a,C,!!d||l[++y]))}return void 0===a?null:a}function wP(a,l,d,f,g,y,C,D){if(!(3&l.type))return;const k=a.data,O=k[D+1],B=function GB(a){return 1==(1&a)}(O)?bP(k,l,d,g,df(O),C):void 0;_b(B)||(_b(y)||function HB(a){return 2==(2&a)}(O)&&(y=bP(k,null,d,g,D,C)),function wk(a,l,d,f,g){if(l)g?a.addClass(d,f):a.removeClass(d,f);else{let y=-1===f.indexOf("-")?void 0:Ma.DashCase;null==g?a.removeStyle(d,f,y):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),y|=Ma.Important),a.setStyle(d,f,g,y))}}(f,C,qs(Kr(),d),g,y))}function bP(a,l,d,f,g,y){const C=null===l;let D;for(;g>0;){const k=a[g],O=Array.isArray(k),B=O?k[1]:k,Y=null===B;let de=d[g+1];de===gn&&(de=Y?ft:void 0);let Ee=Y?Uh(de,f):B===f?de:void 0;if(O&&!_b(Ee)&&(Ee=Uh(k,f)),_b(Ee)&&(D=Ee,C))return D;const je=a[g+1];g=C?Fd(je):df(je)}if(null!==l){let k=y?l.residualClasses:l.residualStyles;null!=k&&(D=Uh(k,f))}return D}function _b(a){return void 0!==a}function EP(a,l){return 0!=(a.flags&(l?8:16))}function CP(a,l=""){const d=ze(),f=Wt(),g=a+ai,y=f.firstCreatePass?Il(f,g,1,l,null):f.data[g],C=d[g]=function bd(a,l){return a.createText(l)}(d[qt],l);og(f,d,C,y),uo(y,!1)}function cD(a){return yb("",a,""),cD}function yb(a,l,d){const f=ze(),g=lf(f,a,l,d);return g!==gn&&gu(f,Kr(),g),yb}function dD(a,l,d,f,g,y,C){const D=ze(),k=Mg(D,a,l,d,f,g,y,C);return k!==gn&&gu(D,Kr(),k),dD}function hD(a,l,d){const f=ze();if(Os(f,Wr(),l)){const y=Wt(),C=$n();Ns(y,C,f,a,l,function rb(a,l,d){return(null===a||ur(a))&&(d=function ph(a){for(;Array.isArray(a);){if("object"==typeof a[fs])return a;a=a[As]}return null}(d[l.index])),d[qt]}(ec(y.data),C,f),d,!0)}return hD}const hf=void 0;var Sj=["en",[["a","p"],["AM","PM"],hf],[["AM","PM"],hf,hf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hf,"{1} 'at' {0}",hf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Tj(a){const d=Math.floor(Math.abs(a)),f=a.toString().replace(/^[^.]*\.?/,"").length;return 1===d&&0===f?1:5}];let ff={};function fD(a){const l=function Dj(a){return a.toLowerCase().replace(/_/g,"-")}(a);let d=vb(l);if(d)return d;const f=l.split("-")[0];if(d=vb(f),d)return d;if("en"===f)return Sj;throw new re(701,!1)}function pD(a){return fD(a)[tn.PluralCase]}function vb(a){return a in ff||(ff[a]=zn.ng&&zn.ng.common&&zn.ng.common.locales&&zn.ng.common.locales[a]),ff[a]}var tn=(()=>((tn=tn||{})[tn.LocaleId=0]="LocaleId",tn[tn.DayPeriodsFormat=1]="DayPeriodsFormat",tn[tn.DayPeriodsStandalone=2]="DayPeriodsStandalone",tn[tn.DaysFormat=3]="DaysFormat",tn[tn.DaysStandalone=4]="DaysStandalone",tn[tn.MonthsFormat=5]="MonthsFormat",tn[tn.MonthsStandalone=6]="MonthsStandalone",tn[tn.Eras=7]="Eras",tn[tn.FirstDayOfWeek=8]="FirstDayOfWeek",tn[tn.WeekendRange=9]="WeekendRange",tn[tn.DateFormat=10]="DateFormat",tn[tn.TimeFormat=11]="TimeFormat",tn[tn.DateTimeFormat=12]="DateTimeFormat",tn[tn.NumberSymbols=13]="NumberSymbols",tn[tn.NumberFormats=14]="NumberFormats",tn[tn.CurrencyCode=15]="CurrencyCode",tn[tn.CurrencySymbol=16]="CurrencySymbol",tn[tn.CurrencyName=17]="CurrencyName",tn[tn.Currencies=18]="Currencies",tn[tn.Directionality=19]="Directionality",tn[tn.PluralCase=20]="PluralCase",tn[tn.ExtraData=21]="ExtraData",tn))();const pf="en-US";let Ry=pf;function ID(a,l,d,f,g){if(a=fe(a),Array.isArray(a))for(let y=0;y<a.length;y++)ID(a[y],l,d,f,g);else{const y=Wt(),C=ze();let D=Sd(a)?a:fe(a.provide),k=JT(a);const O=Wi(),B=1048575&O.providerIndexes,Y=O.directiveStart,de=O.providerIndexes>>20;if(Sd(a)||!a.multi){const Ee=new nc(k,g,tf),je=SD(D,l,g?B:B+de,Y);-1===je?(Dh(ho(O,C),y,D),TD(y,a,l.length),l.push(D),O.directiveStart++,O.directiveEnd++,g&&(O.providerIndexes+=1048576),d.push(Ee),C.push(Ee)):(d[je]=Ee,C[je]=Ee)}else{const Ee=SD(D,l,B+de,Y),je=SD(D,l,B,B+de),mt=je>=0&&d[je];if(g&&!mt||!g&&!(Ee>=0&&d[Ee])){Dh(ho(O,C),y,D);const Rt=function pN(a,l,d,f,g){const y=new nc(a,d,tf);return y.multi=[],y.index=l,y.componentProviders=0,fN(y,g,f&&!d),y}(g?a6:DD,d.length,g,f,k);!g&&mt&&(d[je].providerFactory=Rt),TD(y,a,l.length,0),l.push(D),O.directiveStart++,O.directiveEnd++,g&&(O.providerIndexes+=1048576),d.push(Rt),C.push(Rt)}else TD(y,a,Ee>-1?Ee:je,fN(d[g?je:Ee],k,!g&&f));!g&&f&&mt&&d[je].componentProviders++}}}function TD(a,l,d,f){const g=Sd(l),y=function $k(a){return!!a.useClass}(l);if(g||y){const k=(y?fe(l.useClass):l).prototype.ngOnDestroy;if(k){const O=a.destroyHooks||(a.destroyHooks=[]);if(!g&&l.multi){const B=O.indexOf(d);-1===B?O.push(d,[f,k]):O[B+1].push(f,k)}else O.push(d,k)}}}function fN(a,l,d){return d&&a.componentProviders++,a.multi.push(l)-1}function SD(a,l,d,f){for(let g=d;g<f;g++)if(l[g]===a)return g;return-1}function DD(a,l,d,f){return AD(this.multi,[])}function a6(a,l,d,f){const g=this.multi;let y;if(this.providerFactory){const C=this.providerFactory.componentProviders,D=vs(d,d[Ct],this.providerFactory.index,f);y=D.slice(0,C),AD(g,y);for(let k=C;k<D.length;k++)y.push(D[k])}else y=[],AD(g,y);return y}function AD(a,l){for(let d=0;d<a.length;d++)l.push((0,a[d])());return l}function MD(a,l=[]){return d=>{d.providersResolver=(f,g)=>function o6(a,l,d){const f=Wt();if(f.firstCreatePass){const g=ur(a);ID(d,f.data,f.blueprint,g,!0),ID(l,f.data,f.blueprint,g,!1)}}(f,g?g(a):a,l)}}class mf{}class gN{}function l6(a,l){return new mN(a,l??null)}class mN extends mf{constructor(l,d){super(),this._parent=d,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new VS(this);const f=cs(l);this._bootstrapComponents=hu(f.bootstrap),this._r3Injector=Gw(l,d,[{provide:mf,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver}],Me(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class xD extends gN{constructor(l){super(),this.moduleType=l}create(l){return new mN(this.moduleType,l)}}class u6 extends mf{constructor(l,d,f){super(),this.componentFactoryResolver=new VS(this),this.instance=null;const g=new qk([...l,{provide:mf,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver}],d||Pw(),f,new Set(["environment"]));this.injector=g,g.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function kD(a,l,d=null){return new u6(a,l,d).injector}let c6=(()=>{class a{constructor(d){this._injector=d,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(d){if(!d.standalone)return null;if(!this.cachedInjectors.has(d.id)){const f=zh(0,d.type),g=f.length>0?kD([f],this._injector,`Standalone[${d.type.name}]`):null;this.cachedInjectors.set(d.id,g)}return this.cachedInjectors.get(d.id)}ngOnDestroy(){try{for(const d of this.cachedInjectors.values())null!==d&&d.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=Ft({token:a,providedIn:"environment",factory:()=>new a(rt(Kh))}),a})();function _N(a){a.getStandaloneInjector=l=>l.get(c6).getOrCreateStandaloneInjector(a)}function Ab(a,l,d){const f=Er()+a,g=ze();return g[f]===gn?oa(g,f,d?l.call(d):l()):function af(a,l){return a[l]}(g,f)}function ND(a,l,d,f){return function SN(a,l,d,f,g,y){const C=l+d;return Os(a,C,g)?oa(a,C+1,y?f.call(y,g):f(g)):function Uy(a,l){const d=a[l];return d===gn?void 0:d}(a,C+1)}(ze(),Er(),a,l,d,f)}function VD(a){return l=>{setTimeout(a,void 0,l)}}const yu=class S6 extends V.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,d,f){let g=l,y=d||(()=>null),C=f;if(l&&"object"==typeof l){const k=l;g=k.next?.bind(k),y=k.error?.bind(k),C=k.complete?.bind(k)}this.__isAsync&&(y=VD(y),g&&(g=VD(g)),C&&(C=VD(C)));const D=super.subscribe({next:g,error:y,complete:C});return l instanceof u.w0&&l.add(D),D}};function D6(){return this._results[Symbol.iterator]()}class Mb{get changes(){return this._changes||(this._changes=new yu)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=Mb.prototype;d[Symbol.iterator]||(d[Symbol.iterator]=D6)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,d){return this._results.reduce(l,d)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,d){const f=this;f.dirty=!1;const g=function Ur(a){return a.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function Fh(a,l,d){if(a.length!==l.length)return!1;for(let f=0;f<a.length;f++){let g=a[f],y=l[f];if(d&&(g=d(g),y=d(y)),y!==g)return!1}return!0}(f._results,g,d))&&(f._results=g,f.length=g.length,f.last=g[this.length-1],f.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let By=(()=>{class a{}return a.__NG_ELEMENT_ID__=kN,a})();const A6=By,M6=class extends A6{constructor(l,d,f){super(),this._declarationLView=l,this._declarationTContainer=d,this.elementRef=f}createEmbeddedView(l,d){const f=this._declarationTContainer.tViews,g=pu(this._declarationLView,f,l,16,null,f.declTNode,null,null,null,null,d||null);g[Xa]=this._declarationLView[this._declarationTContainer.index];const C=this._declarationLView[Fr];return null!==C&&(g[Fr]=C.createEmbeddedView(f)),bg(f,g,l),new Ey(g)}};function kN(){return yo(Wi(),ze())}function yo(a,l){return 4&a.type?new M6(l,a,Jh(a,l)):null}let Vg=(()=>{class a{}return a.__NG_ELEMENT_ID__=RN,a})();function RN(){return bs(Wi(),ze())}const Bg=Vg,xb=class extends Bg{constructor(l,d,f){super(),this._lContainer=l,this._hostTNode=d,this._hostLView=f}get element(){return Jh(this._hostTNode,this._hostLView)}get injector(){return new Ta(this._hostTNode,this._hostLView)}get parentInjector(){const l=iu(this._hostTNode,this._hostLView);if(sc(l)){const d=Ia(l,this._hostLView),f=cl(l);return new Ta(d[Ct].data[f+8],d)}return new Ta(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const d=jy(this._lContainer);return null!==d&&d[l]||null}get length(){return this._lContainer.length-lr}createEmbeddedView(l,d,f){let g,y;"number"==typeof f?g=f:null!=f&&(g=f.index,y=f.injector);const C=l.createEmbeddedView(d||{},y);return this.insert(C,g),C}createComponent(l,d,f,g,y){const C=l&&!function ou(a){return"function"==typeof a}(l);let D;if(C)D=d;else{const Y=d||{};D=Y.index,f=Y.injector,g=Y.projectableNodes,y=Y.environmentInjector||Y.ngModuleRef}const k=C?l:new Md(xn(l)),O=f||this.parentInjector;if(!y&&null==k.ngModule){const de=(C?O:this.parentInjector).get(Kh,null);de&&(y=de)}const B=k.create(O,g,void 0,y);return this.insert(B.hostView,D),B}insert(l,d){const f=l._lView,g=f[Ct];if(function Op(a){return gs(a[wi])}(f)){const B=this.indexOf(l);if(-1!==B)this.detach(B);else{const Y=f[wi],de=new xb(Y,Y[Li],Y[wi]);de.detach(de.indexOf(l))}}const y=this._adjustIndex(d),C=this._lContainer;!function fw(a,l,d,f){const g=lr+f,y=d.length;f>0&&(d[g-1][Or]=l),f<y-lr?(l[Or]=d[g],pd(d,lr+f,l)):(d.push(l),l[Or]=null),l[wi]=d;const C=l[Xa];null!==C&&d!==C&&function Gh(a,l){const d=a[Ms];l[Ui]!==l[wi][wi][Ui]&&(a[Hu]=!0),null===d?a[Ms]=[l]:d.push(l)}(C,l);const D=l[Fr];null!==D&&D.insertView(a),l[on]|=64}(g,f,C,y);const D=pc(y,C),k=f[qt],O=Q_(k,C[$u]);return null!==O&&function $_(a,l,d,f,g,y){f[As]=g,f[Li]=l,ag(a,f,d,1,g,y)}(g,C[Li],k,f,O,D),l.attachToViewContainerRef(),pd(Hy(C),y,l),l}move(l,d){return this.insert(l,d)}indexOf(l){const d=jy(this._lContainer);return null!==d?d.indexOf(l):-1}remove(l){const d=this._adjustIndex(l,-1),f=q_(this._lContainer,d);f&&(au(Hy(this._lContainer),d),Z_(f[Ct],f))}detach(l){const d=this._adjustIndex(l,-1),f=q_(this._lContainer,d);return f&&null!=au(Hy(this._lContainer),d)?new Ey(f):null}_adjustIndex(l,d=0){return l??this.length+d}};function jy(a){return a[To]}function Hy(a){return a[To]||(a[To]=[])}function bs(a,l){let d;const f=l[a.index];if(gs(f))d=f;else{let g;if(8&a.type)g=Si(f);else{const y=l[qt];g=y.createComment("");const C=zr(a,l);Ed(y,Q_(y,C),g,function _k(a,l){return a.nextSibling(l)}(y,C),!1)}l[a.index]=d=rf(f,l,g,a),Sg(l,d)}return new xb(d,a,l)}class Al{constructor(l){this.queryList=l,this.matches=null}clone(){return new Al(this.queryList)}setDirty(){this.queryList.setDirty()}}class kb{constructor(l=[]){this.queries=l}createEmbeddedView(l){const d=l.queries;if(null!==d){const f=null!==l.contentQueries?l.contentQueries[0]:d.length,g=[];for(let y=0;y<f;y++){const C=d.getByIndex(y);g.push(this.queries[C.indexInDeclarationView].clone())}return new kb(g)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let d=0;d<this.queries.length;d++)null!==ts(l,d).matches&&this.queries[d].setDirty()}}class Ic{constructor(l,d,f=null){this.predicate=l,this.flags=d,this.read=f}}class jg{constructor(l=[]){this.queries=l}elementStart(l,d){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(l,d)}elementEnd(l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(l)}embeddedTView(l){let d=null;for(let f=0;f<this.length;f++){const g=null!==d?d.length:0,y=this.getByIndex(f).embeddedTView(l,g);y&&(y.indexInDeclarationView=f,null!==d?d.push(y):d=[y])}return null!==d?new jg(d):null}template(l,d){for(let f=0;f<this.queries.length;f++)this.queries[f].template(l,d)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class $y{constructor(l,d=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(l,d){this.isApplyingToNode(d)&&this.matchTNode(l,d)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,d){this.elementStart(l,d)}embeddedTView(l,d){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,d),new $y(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let f=l.parent;for(;null!==f&&8&f.type&&f.index!==d;)f=f.parent;return d===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(l,d){const f=this.metadata.predicate;if(Array.isArray(f))for(let g=0;g<f.length;g++){const y=f[g];this.matchTNodeWithReadOption(l,d,PN(d,y)),this.matchTNodeWithReadOption(l,d,ml(d,l,y,!1,!1))}else f===By?4&d.type&&this.matchTNodeWithReadOption(l,d,-1):this.matchTNodeWithReadOption(l,d,ml(d,l,f,!1,!1))}matchTNodeWithReadOption(l,d,f){if(null!==f){const g=this.metadata.read;if(null!==g)if(g===gg||g===Vg||g===By&&4&d.type)this.addMatch(d.index,-2);else{const y=ml(d,l,g,!1,!1);null!==y&&this.addMatch(d.index,y)}else this.addMatch(d.index,f)}}addMatch(l,d){null===this.matches?this.matches=[l,d]:this.matches.push(l,d)}}function PN(a,l){const d=a.localNames;if(null!==d)for(let f=0;f<d.length;f+=2)if(d[f]===l)return d[f+1];return null}function Rb(a,l,d,f){return-1===d?function NN(a,l){return 11&a.type?Jh(a,l):4&a.type?yo(a,l):null}(l,a):-2===d?function yn(a,l,d){return d===gg?Jh(l,a):d===By?yo(l,a):d===Vg?bs(l,a):void 0}(a,l,f):vs(a,a[Ct],d,l)}function _f(a,l,d,f){const g=l[Fr].queries[f];if(null===g.matches){const y=a.data,C=d.matches,D=[];for(let k=0;k<C.length;k+=2){const O=C[k];D.push(O<0?null:Rb(l,y[O],C[k+1],d.metadata.read))}g.matches=D}return g.matches}function Pb(a,l,d,f){const g=a.queries.getByIndex(d),y=g.matches;if(null!==y){const C=_f(a,l,g,d);for(let D=0;D<y.length;D+=2){const k=y[D];if(k>0)f.push(C[D/2]);else{const O=y[D+1],B=l[-k];for(let Y=lr;Y<B.length;Y++){const de=B[Y];de[Xa]===de[wi]&&Pb(de[Ct],de,O,f)}if(null!==B[Ms]){const Y=B[Ms];for(let de=0;de<Y.length;de++){const Ee=Y[de];Pb(Ee[Ct],Ee,O,f)}}}}}return f}function Ld(a){const l=ze(),d=Wt(),f=sd();od(f+1);const g=ts(d,f);if(a.dirty&&function Ku(a){return 4==(4&a[on])}(l)===(2==(2&g.metadata.flags))){if(null===g.matches)a.reset([]);else{const y=g.crossesNgTemplate?Pb(d,l,f,[]):_f(d,l,g,f);a.reset(y,vB),a.notifyOnChanges()}return!0}return!1}function BD(a,l,d,f){const g=Wt();if(g.firstCreatePass){const y=Wi();(function Ob(a,l,d){null===a.queries&&(a.queries=new jg),a.queries.track(new $y(l,d))})(g,new Ic(l,d,f),y.index),function x6(a,l){const d=a.contentQueries||(a.contentQueries=[]);l!==(d.length?d[d.length-1]:-1)&&d.push(a.queries.length-1,l)}(g,a),2==(2&d)&&(g.staticContentQueries=!0)}!function Nb(a,l,d){const f=new Mb(4==(4&d));ER(a,l,f,f.destroy),null===l[Fr]&&(l[Fr]=new kb),l[Fr].queries.push(new Al(f))}(g,ze(),d)}function Pa(){return function jD(a,l){return a[Fr].queries[l].queryList}(ze(),sd())}function ts(a,l){return a.queries.getByIndex(l)}function Gy(a){return!!cs(a)}function If(...a){}const $b=new Gn("Application Initializer");let Zg=(()=>{class a{constructor(d){this.appInits=d,this.resolve=If,this.reject=If,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,g)=>{this.resolve=f,this.reject=g})}runInitializers(){if(this.initialized)return;const d=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const y=this.appInits[g]();if(pb(y))d.push(y);else if(QR(y)){const C=new Promise((D,k)=>{y.subscribe({complete:D,error:k})});d.push(C)}}Promise.all(d).then(()=>{f()}).catch(g=>{this.reject(g)}),0===d.length&&f(),this.initialized=!0}}return a.\u0275fac=function(d){return new(d||a)(rt($b,8))},a.\u0275prov=Ft({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Tf=new Gn("AppId",{providedIn:"root",factory:function Na(){return`${xl()}${xl()}${xl()}`}});function xl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zg=new Gn("Platform Initializer"),Wy=new Gn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ky=new Gn("appBootstrapListener"),WN=new Gn("AnimationModuleType");let KN=(()=>{class a{log(d){console.log(d)}warn(d){console.warn(d)}}return a.\u0275fac=function(d){return new(d||a)},a.\u0275prov=Ft({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const Yy=new Gn("LocaleId",{providedIn:"root",factory:()=>yt(Yy,Tt.Optional|Tt.SkipSelf)||function YN(){return typeof $localize<"u"&&$localize.locale||pf}()}),QN=new Gn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class JN{constructor(l,d){this.ngModuleFactory=l,this.componentFactories=d}}let XN=(()=>{class a{compileModuleSync(d){return new xD(d)}compileModuleAsync(d){return Promise.resolve(this.compileModuleSync(d))}compileModuleAndAllComponentsSync(d){const f=this.compileModuleSync(d),y=hu(cs(d).declarations).reduce((C,D)=>{const k=xn(D);return k&&C.push(new Md(k)),C},[]);return new JN(f,y)}compileModuleAndAllComponentsAsync(d){return Promise.resolve(this.compileModuleAndAllComponentsSync(d))}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return a.\u0275fac=function(d){return new(d||a)},a.\u0275prov=Ft({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Gb=(()=>Promise.resolve(0))();function Wg(a){typeof Zone>"u"?Gb.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class Fo{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yu(!1),this.onMicrotaskEmpty=new yu(!1),this.onStable=new yu(!1),this.onError=new yu(!1),typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!f&&d,g.shouldCoalesceRunChangeDetection=f,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function wu(){let a=zn.requestAnimationFrame,l=zn.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d);const f=l[Zone.__symbol__("OriginalDelegate")];f&&(l=f)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function o1(a){const l=()=>{!function Sc(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(zn,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,Zb(a),a.isCheckStableRunning=!0,qb(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),Zb(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,f,g,y,C,D)=>{try{return Yg(a),d.invokeTask(g,y,C,D)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||a.shouldCoalesceRunChangeDetection)&&l(),zb(a)}},onInvoke:(d,f,g,y,C,D,k)=>{try{return Yg(a),d.invoke(g,y,C,D,k)}finally{a.shouldCoalesceRunChangeDetection&&l(),zb(a)}},onHasTask:(d,f,g,y)=>{d.hasTask(g,y),f===g&&("microTask"==y.change?(a._hasPendingMicrotasks=y.microTask,Zb(a),qb(a)):"macroTask"==y.change&&(a.hasPendingMacrotasks=y.macroTask))},onHandleError:(d,f,g,y)=>(d.handleError(g,y),a.runOutsideAngular(()=>a.onError.emit(y)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fo.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(Fo.isInAngularZone())throw new re(909,!1)}run(l,d,f){return this._inner.run(l,d,f)}runTask(l,d,f,g){const y=this._inner,C=y.scheduleEventTask("NgZoneEvent: "+g,l,s1,If,If);try{return y.runTask(C,d,f)}finally{y.cancelTask(C)}}runGuarded(l,d,f){return this._inner.runGuarded(l,d,f)}runOutsideAngular(l){return this._outer.run(l)}}const s1={};function qb(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function Zb(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function Yg(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function zb(a){a._nesting--,qb(a)}class Wb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yu,this.onMicrotaskEmpty=new yu,this.onStable=new yu,this.onError=new yu}run(l,d,f){return l.apply(d,f)}runGuarded(l,d,f){return l.apply(d,f)}runOutsideAngular(l){return l()}runTask(l,d,f,g){return l.apply(d,f)}}const Kb=new Gn(""),Qy=new Gn("");let Qb,Yb=(()=>{class a{constructor(d,f,g){this._ngZone=d,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Qb||(function Qg(a){Qb=a}(g),g.addToWindow(f)),this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fo.assertNotInAngularZone(),Wg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wg(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(d)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,f,g){let y=-1;f&&f>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==y),d(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:d,timeoutId:y,updateCb:g})}whenStable(d,f,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,f,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(d){this.registry.registerApplication(d,this)}unregisterApplication(d){this.registry.unregisterApplication(d)}findProviders(d,f,g){return[]}}return a.\u0275fac=function(d){return new(d||a)(rt(Fo),rt(a1),rt(Qy))},a.\u0275prov=Ft({token:a,factory:a.\u0275fac}),a})(),a1=(()=>{class a{constructor(){this._applications=new Map}registerApplication(d,f){this._applications.set(d,f)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,f=!0){return Qb?.findTestabilityInTree(this,d,f)??null}}return a.\u0275fac=function(d){return new(d||a)},a.\u0275prov=Ft({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),Dc=null;const Jy=new Gn("AllowMultipleToken"),Xy=new Gn("PlatformDestroyListeners"),kl=!1;class Jg{constructor(l,d){this.name=l,this.token=d}}function tv(a,l,d=[]){const f=`Platform: ${l}`,g=new Gn(f);return(y=[])=>{let C=d1();if(!C||C.injector.get(Jy,!1)){const D=[...d,...y,{provide:g,useValue:!0}];a?a(D):function ev(a){if(Dc&&!Dc.get(Jy,!1))throw new re(400,!1);Dc=a;const l=a.get(rO);(function u1(a){const l=a.get(zg,null);l&&l.forEach(d=>d())})(a)}(function iO(a=[],l){return fu.create({name:l,providers:[{provide:Rw,useValue:"platform"},{provide:Xy,useValue:new Set([()=>Dc=null])},...a]})}(D,f))}return function c1(a){const l=d1();if(!l)throw new re(401,!1);return l}()}}function d1(){return Dc?.get(rO)??null}let rO=(()=>{class a{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,f){const g=function h1(a,l){let d;return d="noop"===a?new Wb:("zone.js"===a?void 0:a)||new Fo(l),d}(f?.ngZone,function nv(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(f)),y=[{provide:Fo,useValue:g}];return g.run(()=>{const C=fu.create({providers:y,parent:this.injector,name:d.moduleType.name}),D=d.create(C),k=D.injector.get(ly,null);if(!k)throw new re(402,!1);return g.runOutsideAngular(()=>{const O=g.onError.subscribe({next:B=>{k.handleError(B)}});D.onDestroy(()=>{Ws(this._modules,D),O.unsubscribe()})}),function f1(a,l,d){try{const f=d();return pb(f)?f.catch(g=>{throw l.runOutsideAngular(()=>a.handleError(g)),g}):f}catch(f){throw l.runOutsideAngular(()=>a.handleError(f)),f}}(k,g,()=>{const O=D.injector.get(Zg);return O.runInitializers(),O.donePromise.then(()=>(function bb(a){wt(a,"Expected localeId to be defined"),"string"==typeof a&&(Ry=a.toLowerCase().replace(/_/g,"-"))}(D.injector.get(Yy,pf)||pf),this._moduleDoBootstrap(D),D))})})}bootstrapModule(d,f=[]){const g=p1({},f);return function l1(a,l,d){const f=new xD(d);return Promise.resolve(f)}(0,0,d).then(y=>this.bootstrapModuleFactory(y,g))}_moduleDoBootstrap(d){const f=d.injector.get(Sf);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(g=>f.bootstrap(g));else{if(!d.instance.ngDoBootstrap)throw new re(-403,!1);d.instance.ngDoBootstrap(f)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new re(404,!1);this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const d=this._injector.get(Xy,null);d&&(d.forEach(f=>f()),d.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(d){return new(d||a)(rt(fu))},a.\u0275prov=Ft({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function p1(a,l){return Array.isArray(l)?l.reduce(p1,a):{...a,...l}}let Sf=(()=>{class a{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(d,f,g){this._zone=d,this._injector=f,this._exceptionHandler=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new $.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),C=new $.y(D=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{Fo.assertNotInAngularZone(),Wg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const O=this._zone.onUnstable.subscribe(()=>{Fo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{k.unsubscribe(),O.unsubscribe()}});this.isStable=(0,ge.T)(y,C.pipe((0,Ie.B)()))}bootstrap(d,f){const g=d instanceof Ow;if(!this._injector.get(Zg).done){!g&&Ti(d);throw new re(405,kl)}let C;C=g?d:this._injector.get(Qh).resolveComponentFactory(d),this.componentTypes.push(C.componentType);const D=function nO(a){return a.isBoundToModule}(C)?void 0:this._injector.get(mf),O=C.create(fu.NULL,[],f||C.selector,D),B=O.location.nativeElement,Y=O.injector.get(Kb,null);return Y?.registerApplication(B),O.onDestroy(()=>{this.detachView(O.hostView),Ws(this.components,O),Y?.unregisterApplication(B)}),this._loadComponent(O),O}tick(){if(this._runningTick)throw new re(101,!1);try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(d))}finally{this._runningTick=!1}}attachView(d){const f=d;this._views.push(f),f.attachToAppRef(this)}detachView(d){const f=d;Ws(this._views,f),f.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d);const f=this._injector.get(Ky,[]);f.push(...this._bootstrapListeners),f.forEach(g=>g(d))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(d=>d()),this._views.slice().forEach(d=>d.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(d){return this._destroyListeners.push(d),()=>Ws(this._destroyListeners,d)}destroy(){if(this._destroyed)throw new re(406,!1);const d=this._injector;d.destroy&&!d.destroyed&&d.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(d){return new(d||a)(rt(Fo),rt(Kh),rt(ly))},a.\u0275prov=Ft({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Ws(a,l){const d=a.indexOf(l);d>-1&&a.splice(d,1)}function sO(){return!1}let aO=(()=>{class a{}return a.__NG_ELEMENT_ID__=Df,a})();function Df(a){return function em(a,l,d){if(ql(a)&&!d){const f=dr(a.index,l);return new Ey(f,f)}return 47&a.type?new Ey(l[Ui],l):null}(Wi(),ze(),16==(16&a))}class y1{constructor(){}supports(l){return Ag(l)}create(l){return new v1(l)}}const dO=(a,l)=>l;class v1{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||dO}forEachItem(l){let d;for(d=this._itHead;null!==d;d=d._next)l(d)}forEachOperation(l){let d=this._itHead,f=this._removalsHead,g=0,y=null;for(;d||f;){const C=!f||d&&d.currentIndex<av(f,g,y)?d:f,D=av(C,g,y),k=C.currentIndex;if(C===f)g--,f=f._nextRemoved;else if(d=d._next,null==C.previousIndex)g++;else{y||(y=[]);const O=D-g,B=k-g;if(O!=B){for(let de=0;de<O;de++){const Ee=de<y.length?y[de]:y[de]=0,je=Ee+de;B<=je&&je<O&&(y[de]=Ee+1)}y[C.previousIndex]=B-O}}D!==k&&l(C,D,k)}}forEachPreviousItem(l){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)l(d)}forEachAddedItem(l){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)l(d)}forEachMovedItem(l){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)l(d)}forEachRemovedItem(l){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)l(d)}forEachIdentityChange(l){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)l(d)}diff(l){if(null==l&&(l=[]),!Ag(l))throw new re(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let g,y,C,d=this._itHead,f=!1;if(Array.isArray(l)){this.length=l.length;for(let D=0;D<this.length;D++)y=l[D],C=this._trackByFn(D,y),null!==d&&Object.is(d.trackById,C)?(f&&(d=this._verifyReinsertion(d,y,C,D)),Object.is(d.item,y)||this._addIdentityChange(d,y)):(d=this._mismatch(d,y,C,D),f=!0),d=d._next}else g=0,function ZS(a,l){if(Array.isArray(a))for(let d=0;d<a.length;d++)l(a[d]);else{const d=a[Symbol.iterator]();let f;for(;!(f=d.next()).done;)l(f.value)}}(l,D=>{C=this._trackByFn(g,D),null!==d&&Object.is(d.trackById,C)?(f&&(d=this._verifyReinsertion(d,D,C,g)),Object.is(d.item,D)||this._addIdentityChange(d,D)):(d=this._mismatch(d,D,C,g),f=!0),d=d._next,g++}),this.length=g;return this._truncate(d),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,d,f,g){let y;return null===l?y=this._itTail:(y=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(l.item,d)||this._addIdentityChange(l,d),this._reinsertAfter(l,y,g)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(f,g))?(Object.is(l.item,d)||this._addIdentityChange(l,d),this._moveAfter(l,y,g)):l=this._addAfter(new hO(d,f),y,g),l}_verifyReinsertion(l,d,f,g){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==y?l=this._reinsertAfter(y,l._prev,g):l.currentIndex!=g&&(l.currentIndex=g,this._addToMoves(l,g)),l}_truncate(l){for(;null!==l;){const d=l._next;this._addToRemovals(this._unlink(l)),l=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,d,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const g=l._prevRemoved,y=l._nextRemoved;return null===g?this._removalsHead=y:g._nextRemoved=y,null===y?this._removalsTail=g:y._prevRemoved=g,this._insertAfter(l,d,f),this._addToMoves(l,f),l}_moveAfter(l,d,f){return this._unlink(l),this._insertAfter(l,d,f),this._addToMoves(l,f),l}_addAfter(l,d,f){return this._insertAfter(l,d,f),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,d,f){const g=null===d?this._itHead:d._next;return l._next=g,l._prev=d,null===g?this._itTail=l:g._prev=l,null===d?this._itHead=l:d._next=l,null===this._linkedRecords&&(this._linkedRecords=new rE),this._linkedRecords.put(l),l.currentIndex=f,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const d=l._prev,f=l._next;return null===d?this._itHead=f:d._next=f,null===f?this._itTail=d:f._prev=d,l}_addToMoves(l,d){return l.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rE),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,d){return l.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class hO{constructor(l,d){this.item=l,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class iE{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,d){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===d||d<=f.currentIndex)&&Object.is(f.trackById,l))return f;return null}remove(l){const d=l._prevDup,f=l._nextDup;return null===d?this._head=f:d._nextDup=f,null===f?this._tail=d:f._prevDup=d,null===this._head}}class rE{constructor(){this.map=new Map}put(l){const d=l.trackById;let f=this.map.get(d);f||(f=new iE,this.map.set(d,f)),f.add(l)}get(l,d){const g=this.map.get(l);return g?g.get(l,d):null}remove(l){const d=l.trackById;return this.map.get(d).remove(l)&&this.map.delete(d),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function av(a,l,d){const f=a.previousIndex;if(null===f)return f;let g=0;return d&&f<d.length&&(g=d[f]),f+l+g}class nm{constructor(){}supports(l){return l instanceof Map||db(l)}create(){return new fO}}class fO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let d;for(d=this._mapHead;null!==d;d=d._next)l(d)}forEachPreviousItem(l){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)l(d)}forEachChangedItem(l){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)l(d)}forEachAddedItem(l){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)l(d)}forEachRemovedItem(l){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)l(d)}diff(l){if(l){if(!(l instanceof Map||db(l)))throw new re(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(l,(f,g)=>{if(d&&d.key===g)this._maybeAddToChanges(d,f),this._appendAfter=d,d=d._next;else{const y=this._getOrCreateRecordForKey(g,f);d=this._insertBeforeOrAppend(d,y)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let f=d;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,d){if(l){const f=l._prev;return d._next=l,d._prev=f,l._prev=d,f&&(f._next=d),l===this._mapHead&&(this._mapHead=d),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(l,d){if(this._records.has(l)){const g=this._records.get(l);this._maybeAddToChanges(g,d);const y=g._prev,C=g._next;return y&&(y._next=C),C&&(C._prev=y),g._next=null,g._prev=null,g}const f=new pO(l);return this._records.set(l,f),f.currentValue=d,this._addToAdditions(f),f}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,d){Object.is(d,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=d,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,d){l instanceof Map?l.forEach(d):Object.keys(l).forEach(f=>d(l[f],f))}}class pO{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function w1(){return new sE([new y1])}let sE=(()=>{class a{constructor(d){this.factories=d}static create(d,f){if(null!=f){const g=f.factories.slice();d=d.concat(g)}return new a(d)}static extend(d){return{provide:a,useFactory:f=>a.create(d,f||w1()),deps:[[a,new N,new lu]]}}find(d){const f=this.factories.find(g=>g.supports(d));if(null!=f)return f;throw new re(901,!1)}}return a.\u0275prov=Ft({token:a,providedIn:"root",factory:w1}),a})();function aE(){return new lv([new nm])}let lv=(()=>{class a{constructor(d){this.factories=d}static create(d,f){if(f){const g=f.factories.slice();d=d.concat(g)}return new a(d)}static extend(d){return{provide:a,useFactory:f=>a.create(d,f||aE()),deps:[[a,new N,new lu]]}}find(d){const f=this.factories.find(g=>g.supports(d));if(f)return f;throw new re(901,!1)}}return a.\u0275prov=Ft({token:a,providedIn:"root",factory:aE}),a})();const b1=tv(null,"core",[]);let mO=(()=>{class a{constructor(d){}}return a.\u0275fac=function(d){return new(d||a)(rt(Sf))},a.\u0275mod=Lu({type:a}),a.\u0275inj=Yn({}),a})();function _O(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}},3942:(Te,ye,q)=>{"use strict";q.d(ye,{Z:()=>qe});var V=q(2090),u=q(4859),$=q(9681),ge=q(1877);class Ie{constructor(re,pe){this._delegate=re,this.firebase=pe,(0,$._addComponent)(re,new u.wA("app-compat",()=>this,"PUBLIC")),this.container=re.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this._delegate.automaticDataCollectionEnabled=re}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(re=>{this._delegate.checkDestroyed(),re()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,$.deleteApp)(this._delegate)))}_getService(re,pe=$._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const Le=this._delegate.container.getProvider(re);return!Le.isInitialized()&&"EXPLICIT"===(null===(De=Le.getComponent())||void 0===De?void 0:De.instantiationMode)&&Le.initialize(),Le.getImmediate({identifier:pe})}_removeServiceInstance(re,pe=$._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(re).clearInstance(pe)}_addComponent(re){(0,$._addComponent)(this._delegate,re)}_addOrOverwriteComponent(re){(0,$._addOrOverwriteComponent)(this._delegate,re)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Se=new V.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function ve(){const te=function Me(te){const re={},pe={__esModule:!0,initializeApp:function Ue(_e,Re={}){const Be=$.initializeApp(_e,Re);if((0,V.r3)(re,Be.name))return re[Be.name];const gt=new te(Be,pe);return re[Be.name]=gt,gt},app:Le,registerVersion:$.registerVersion,setLogLevel:$.setLogLevel,onLog:$.onLog,apps:null,SDK_VERSION:$.SDK_VERSION,INTERNAL:{registerComponent:function He(_e){const Re=_e.name,Be=Re.replace("-compat","");if($._registerComponent(_e)&&"PUBLIC"===_e.type){const gt=(bt=Le())=>{if("function"!=typeof bt[Be])throw Se.create("invalid-app-argument",{appName:Re});return bt[Be]()};void 0!==_e.serviceProps&&(0,V.ZB)(gt,_e.serviceProps),pe[Be]=gt,te.prototype[Be]=function(...bt){return this._getService.bind(this,Re).apply(this,_e.multipleInstances?bt:[])}}return"PUBLIC"===_e.type?pe[Be]:null},removeApp:function De(_e){delete re[_e]},useAsService:function nt(_e,Re){return"serverAuth"===Re?null:Re},modularAPIs:$}};function Le(_e){if(!(0,V.r3)(re,_e=_e||$._DEFAULT_ENTRY_NAME))throw Se.create("no-app",{appName:_e});return re[_e]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function Fe(){return Object.keys(re).map(_e=>re[_e])}}),Le.App=te,pe}(Ie);return te.INTERNAL=Object.assign(Object.assign({},te.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function re(pe){(0,V.ZB)(te,pe)},createSubscribe:V.ne,ErrorFactory:V.LL,deepExtend:V.ZB}),te}(),ie=new ge.Yd("@firebase/app-compat");if((0,V.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const te=self.firebase.SDK_VERSION;te&&te.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=oe;!function me(te){(0,$.registerVersion)("@firebase/app-compat","0.2.3",te)}()},9681:(Te,ye,q)=>{"use strict";q.r(ye),q.d(ye,{FirebaseError:()=>ge.ZR,SDK_VERSION:()=>Pr,_DEFAULT_ENTRY_NAME:()=>it,_addComponent:()=>ii,_addOrOverwriteComponent:()=>Jt,_apps:()=>wt,_clearComponents:()=>Yn,_components:()=>_t,_getProvider:()=>Ft,_registerComponent:()=>Zt,_removeServiceInstance:()=>pn,deleteApp:()=>us,getApp:()=>Ii,getApps:()=>ls,initializeApp:()=>ro,onLog:()=>Tt,registerVersion:()=>ei,setLogLevel:()=>ir});var V=q(5861),u=q(4859),$=q(1877),ge=q(2090),Ie=q(8766);class xe{constructor(Ge){this.container=Ge}getPlatformInfoString(){return this.container.getProviders().map(yt=>{if(function Se(rt){return"VERSION"===rt.getComponent()?.type}(yt)){const Xt=yt.getImmediate();return`${Xt.library}/${Xt.version}`}return null}).filter(yt=>yt).join(" ")}}const Me="@firebase/app",oe=new $.Yd("@firebase/app"),it="[DEFAULT]",ot={[Me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wt=new Map,_t=new Map;function ii(rt,Ge){try{rt.container.addComponent(Ge)}catch(yt){oe.debug(`Component ${Ge.name} failed to register with FirebaseApp ${rt.name}`,yt)}}function Jt(rt,Ge){rt.container.addOrOverwriteComponent(Ge)}function Zt(rt){const Ge=rt.name;if(_t.has(Ge))return oe.debug(`There were multiple attempts to register component ${Ge}.`),!1;_t.set(Ge,rt);for(const yt of wt.values())ii(yt,rt);return!0}function Ft(rt,Ge){const yt=rt.container.getProvider("heartbeat").getImmediate({optional:!0});return yt&&yt.triggerHeartbeat(),rt.container.getProvider(Ge)}function pn(rt,Ge,yt=it){Ft(rt,Ge).clearInstance(yt)}function Yn(){_t.clear()}const Pn=new ge.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Gi{constructor(Ge,yt,Xt){this._isDeleted=!1,this._options=Object.assign({},Ge),this._config=Object.assign({},yt),this._name=yt.name,this._automaticDataCollectionEnabled=yt.automaticDataCollectionEnabled,this._container=Xt,this.container.addComponent(new u.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ge){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ge}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ge){this._isDeleted=Ge}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}}const Pr="9.17.1";function ro(rt,Ge={}){let yt=rt;"object"!=typeof Ge&&(Ge={name:Ge});const Xt=Object.assign({name:it,automaticDataCollectionEnabled:!1},Ge),nn=Xt.name;if("string"!=typeof nn||!nn)throw Pn.create("bad-app-name",{appName:String(nn)});if(yt||(yt=(0,ge.aH)()),!yt)throw Pn.create("no-options");const Tn=wt.get(nn);if(Tn){if((0,ge.vZ)(yt,Tn.options)&&(0,ge.vZ)(Xt,Tn.config))return Tn;throw Pn.create("duplicate-app",{appName:nn})}const se=new u.H0(nn);for(const he of _t.values())se.addComponent(he);const ee=new Gi(yt,Xt,se);return wt.set(nn,ee),ee}function Ii(rt=it){const Ge=wt.get(rt);if(!Ge&&rt===it)return ro();if(!Ge)throw Pn.create("no-app",{appName:rt});return Ge}function ls(){return Array.from(wt.values())}function us(rt){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,V.Z)(function*(rt){const Ge=rt.name;wt.has(Ge)&&(wt.delete(Ge),yield Promise.all(rt.container.getProviders().map(yt=>yt.delete())),rt.isDeleted=!0)})).apply(this,arguments)}function ei(rt,Ge,yt){var Xt;let nn=null!==(Xt=ot[rt])&&void 0!==Xt?Xt:rt;yt&&(nn+=`-${yt}`);const Tn=nn.match(/\s|\//),se=Ge.match(/\s|\//);if(Tn||se){const ee=[`Unable to register library "${nn}" with version "${Ge}":`];return Tn&&ee.push(`library name "${nn}" contains illegal characters (whitespace or "/")`),Tn&&se&&ee.push("and"),se&&ee.push(`version name "${Ge}" contains illegal characters (whitespace or "/")`),void oe.warn(ee.join(" "))}Zt(new u.wA(`${nn}-version`,()=>({library:nn,version:Ge}),"VERSION"))}function Tt(rt,Ge){if(null!==rt&&"function"!=typeof rt)throw Pn.create("invalid-log-argument");(0,$.Am)(rt,Ge)}function ir(rt){(0,$.Ub)(rt)}const yr="firebase-heartbeat-database",Fi=1,vr="firebase-heartbeat-store";let qi=null;function zn(){return qi||(qi=(0,Ie.X3)(yr,Fi,{upgrade:(rt,Ge)=>{0===Ge&&rt.createObjectStore(vr)}}).catch(rt=>{throw Pn.create("idb-open",{originalErrorMessage:rt.message})})),qi}function zt(){return(zt=(0,V.Z)(function*(rt){try{return(yield zn()).transaction(vr).objectStore(vr).get(Zi(rt))}catch(Ge){if(Ge instanceof ge.ZR)oe.warn(Ge.message);else{const yt=Pn.create("idb-get",{originalErrorMessage:Ge?.message});oe.warn(yt.message)}}})).apply(this,arguments)}function At(rt,Ge){return wr.apply(this,arguments)}function wr(){return(wr=(0,V.Z)(function*(rt,Ge){try{const Xt=(yield zn()).transaction(vr,"readwrite");return yield Xt.objectStore(vr).put(Ge,Zi(rt)),Xt.done}catch(yt){if(yt instanceof ge.ZR)oe.warn(yt.message);else{const Xt=Pn.create("idb-set",{originalErrorMessage:yt?.message});oe.warn(Xt.message)}}})).apply(this,arguments)}function Zi(rt){return`${rt.name}!${rt.options.appId}`}class vi{constructor(Ge){this.container=Ge,this._heartbeatsCache=null;const yt=this.container.getProvider("app").getImmediate();this._storage=new Zr(yt),this._heartbeatsCachePromise=this._storage.read().then(Xt=>(this._heartbeatsCache=Xt,Xt))}triggerHeartbeat(){var Ge=this;return(0,V.Z)(function*(){const Xt=Ge.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),nn=fi();if(null===Ge._heartbeatsCache&&(Ge._heartbeatsCache=yield Ge._heartbeatsCachePromise),Ge._heartbeatsCache.lastSentHeartbeatDate!==nn&&!Ge._heartbeatsCache.heartbeats.some(Tn=>Tn.date===nn))return Ge._heartbeatsCache.heartbeats.push({date:nn,agent:Xt}),Ge._heartbeatsCache.heartbeats=Ge._heartbeatsCache.heartbeats.filter(Tn=>{const se=new Date(Tn.date).valueOf();return Date.now()-se<=2592e6}),Ge._storage.overwrite(Ge._heartbeatsCache)})()}getHeartbeatsHeader(){var Ge=this;return(0,V.Z)(function*(){if(null===Ge._heartbeatsCache&&(yield Ge._heartbeatsCachePromise),null===Ge._heartbeatsCache||0===Ge._heartbeatsCache.heartbeats.length)return"";const yt=fi(),{heartbeatsToSend:Xt,unsentEntries:nn}=function Nn(rt,Ge=1024){const yt=[];let Xt=rt.slice();for(const nn of rt){const Tn=yt.find(se=>se.agent===nn.agent);if(Tn){if(Tn.dates.push(nn.date),mn(yt)>Ge){Tn.dates.pop();break}}else if(yt.push({agent:nn.agent,dates:[nn.date]}),mn(yt)>Ge){yt.pop();break}Xt=Xt.slice(1)}return{heartbeatsToSend:yt,unsentEntries:Xt}}(Ge._heartbeatsCache.heartbeats),Tn=(0,ge.L)(JSON.stringify({version:2,heartbeats:Xt}));return Ge._heartbeatsCache.lastSentHeartbeatDate=yt,nn.length>0?(Ge._heartbeatsCache.heartbeats=nn,yield Ge._storage.overwrite(Ge._heartbeatsCache)):(Ge._heartbeatsCache.heartbeats=[],Ge._storage.overwrite(Ge._heartbeatsCache)),Tn})()}}function fi(){return(new Date).toISOString().substring(0,10)}class Zr{constructor(Ge){this.app=Ge,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,V.Z)(function*(){return!!(0,ge.hl)()&&(0,ge.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ge=this;return(0,V.Z)(function*(){return(yield Ge._canUseIndexedDBPromise)&&(yield function Qn(rt){return zt.apply(this,arguments)}(Ge.app))||{heartbeats:[]}})()}overwrite(Ge){var yt=this;return(0,V.Z)(function*(){var Xt;if(yield yt._canUseIndexedDBPromise){const Tn=yield yt.read();return At(yt.app,{lastSentHeartbeatDate:null!==(Xt=Ge.lastSentHeartbeatDate)&&void 0!==Xt?Xt:Tn.lastSentHeartbeatDate,heartbeats:Ge.heartbeats})}})()}add(Ge){var yt=this;return(0,V.Z)(function*(){var Xt;if(yield yt._canUseIndexedDBPromise){const Tn=yield yt.read();return At(yt.app,{lastSentHeartbeatDate:null!==(Xt=Ge.lastSentHeartbeatDate)&&void 0!==Xt?Xt:Tn.lastSentHeartbeatDate,heartbeats:[...Tn.heartbeats,...Ge.heartbeats]})}})()}}function mn(rt){return(0,ge.L)(JSON.stringify({version:2,heartbeats:rt})).length}!function rr(rt){Zt(new u.wA("platform-logger",Ge=>new xe(Ge),"PRIVATE")),Zt(new u.wA("heartbeat",Ge=>new vi(Ge),"PRIVATE")),ei(Me,"0.9.3",rt),ei(Me,"0.9.3","esm2017"),ei("fire-js","")}("")},4859:(Te,ye,q)=>{"use strict";q.d(ye,{H0:()=>Me,wA:()=>$,zt:()=>Ie});var V=q(5861),u=q(2090);class ${constructor(oe,ie,fe){this.name=oe,this.instanceFactory=ie,this.type=fe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const ge="[DEFAULT]";class Ie{constructor(oe,ie){this.name=oe,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const ie=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(ie)){const fe=new u.BH;if(this.instancesDeferred.set(ie,fe),this.isInitialized(ie)||this.shouldAutoInitialize())try{const st=this.getOrInitializeService({instanceIdentifier:ie});st&&fe.resolve(st)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(oe){var ie;const fe=this.normalizeInstanceIdentifier(oe?.identifier),st=null!==(ie=oe?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(fe)&&!this.shouldAutoInitialize()){if(st)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:fe})}catch(me){if(st)return null;throw me}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function Se(ve){return"EAGER"===ve.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:ge})}catch{}for(const[ie,fe]of this.instancesDeferred.entries()){const st=this.normalizeInstanceIdentifier(ie);try{const me=this.getOrInitializeService({instanceIdentifier:st});fe.resolve(me)}catch{}}}}clearInstance(oe=ge){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,V.Z)(function*(){const ie=Array.from(oe.instances.values());yield Promise.all([...ie.filter(fe=>"INTERNAL"in fe).map(fe=>fe.INTERNAL.delete()),...ie.filter(fe=>"_delete"in fe).map(fe=>fe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=ge){return this.instances.has(oe)}getOptions(oe=ge){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:ie={}}=oe,fe=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(fe))throw Error(`${this.name}(${fe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const st=this.getOrInitializeService({instanceIdentifier:fe,options:ie});for(const[me,qe]of this.instancesDeferred.entries())fe===this.normalizeInstanceIdentifier(me)&&qe.resolve(st);return st}onInit(oe,ie){var fe;const st=this.normalizeInstanceIdentifier(ie),me=null!==(fe=this.onInitCallbacks.get(st))&&void 0!==fe?fe:new Set;me.add(oe),this.onInitCallbacks.set(st,me);const qe=this.instances.get(st);return qe&&oe(qe,st),()=>{me.delete(oe)}}invokeOnInitCallbacks(oe,ie){const fe=this.onInitCallbacks.get(ie);if(fe)for(const st of fe)try{st(oe,ie)}catch{}}getOrInitializeService({instanceIdentifier:oe,options:ie={}}){let fe=this.instances.get(oe);if(!fe&&this.component&&(fe=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=oe,ve===ge?void 0:ve),options:ie}),this.instances.set(oe,fe),this.instancesOptions.set(oe,ie),this.invokeOnInitCallbacks(fe,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,fe)}catch{}var ve;return fe||null}normalizeInstanceIdentifier(oe=ge){return this.component?this.component.multipleInstances?oe:ge:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Me{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const ie=this.getProvider(oe.name);if(ie.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);ie.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const ie=new Ie(oe,this);return this.providers.set(oe,ie),ie}getProviders(){return Array.from(this.providers.values())}}},1877:(Te,ye,q)=>{"use strict";q.d(ye,{Am:()=>ve,Ub:()=>Me,Yd:()=>Se,in:()=>u});const V=[];var u=(()=>{return(oe=u||(u={}))[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",u;var oe})();const $={debug:u.DEBUG,verbose:u.VERBOSE,info:u.INFO,warn:u.WARN,error:u.ERROR,silent:u.SILENT},ge=u.INFO,Ie={[u.DEBUG]:"log",[u.VERBOSE]:"log",[u.INFO]:"info",[u.WARN]:"warn",[u.ERROR]:"error"},xe=(oe,ie,...fe)=>{if(ie<oe.logLevel)return;const st=(new Date).toISOString(),me=Ie[ie];if(!me)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[me](`[${st}]  ${oe.name}:`,...fe)};class Se{constructor(ie){this.name=ie,this._logLevel=ge,this._logHandler=xe,this._userLogHandler=null,V.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in u))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?$[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,u.DEBUG,...ie),this._logHandler(this,u.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,u.VERBOSE,...ie),this._logHandler(this,u.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,u.INFO,...ie),this._logHandler(this,u.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,u.WARN,...ie),this._logHandler(this,u.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,u.ERROR,...ie),this._logHandler(this,u.ERROR,...ie)}}function Me(oe){V.forEach(ie=>{ie.setLogLevel(oe)})}function ve(oe,ie){for(const fe of V){let st=null;ie&&ie.level&&(st=$[ie.level]),fe.userLogHandler=null===oe?null:(me,qe,...te)=>{const re=te.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");qe>=(st??me.logLevel)&&oe({level:u[qe].toLowerCase(),message:re,args:te,type:me.name})}}}},259:(Te,ye,q)=>{"use strict";q.d(ye,{C6:()=>V.getApps,Mq:()=>V.getApp});var V=q(9681);(0,V.registerVersion)("firebase","9.17.1","app")},9260:(Te,ye,q)=>{"use strict";q.d(ye,{Z:()=>V.Z});var V=q(3942);V.Z.registerVersion("firebase","9.17.1","app-compat")},9568:(Te,ye,q)=>{"use strict";q.r(ye);var V=q(5861),u=q(3942),$=q(2722),ge=q(2090),Se=(q(9681),q(1877),q(4859));function Me(){return window}const ve=2e3;function ie(){return ie=(0,V.Z)(function*(J,H,Q){var Ae;const{BuildInfo:We}=Me();(0,$.ap)(H.sessionId,"AuthEvent did not contain a session ID");const xt=yield function pe(J){return De.apply(this,arguments)}(H.sessionId),ft={};return(0,$.aq)()?ft.ibi=We.packageName:(0,$.ar)()?ft.apn=We.packageName:(0,$.as)(J,"operation-not-supported-in-this-environment"),We.displayName&&(ft.appDisplayName=We.displayName),ft.sessionId=xt,(0,$.at)(J,Q,H.type,void 0,null!==(Ae=H.eventId)&&void 0!==Ae?Ae:void 0,ft)}),ie.apply(this,arguments)}function st(){return(st=(0,V.Z)(function*(J){const{BuildInfo:H}=Me(),Q={};(0,$.aq)()?Q.iosBundleId=H.packageName:(0,$.ar)()?Q.androidPackageName=H.packageName:(0,$.as)(J,"operation-not-supported-in-this-environment"),yield(0,$.au)(J,Q)})).apply(this,arguments)}function te(){return(te=(0,V.Z)(function*(J,H,Q){const{cordova:Ae}=Me();let We=()=>{};try{yield new Promise((xt,ft)=>{let hn=null;function $t(){var ln;xt();const br=null===(ln=Ae.plugins.browsertab)||void 0===ln?void 0:ln.close;"function"==typeof br&&br(),"function"==typeof Q?.close&&Q.close()}function Hn(){hn||(hn=window.setTimeout(()=>{ft((0,$.aw)(J,"redirect-cancelled-by-user"))},ve))}function sr(){"visible"===document?.visibilityState&&Hn()}H.addPassiveListener($t),document.addEventListener("resume",Hn,!1),(0,$.ar)()&&document.addEventListener("visibilitychange",sr,!1),We=()=>{H.removePassiveListener($t),document.removeEventListener("resume",Hn,!1),document.removeEventListener("visibilitychange",sr,!1),hn&&window.clearTimeout(hn)}})}finally{We()}})).apply(this,arguments)}function De(){return(De=(0,V.Z)(function*(J){const H=function Le(J){if((0,$.ap)(/[0-9a-zA-Z]+/.test(J),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(J);const H=new ArrayBuffer(J.length),Q=new Uint8Array(H);for(let Ae=0;Ae<J.length;Ae++)Q[Ae]=J.charCodeAt(Ae);return Q}(J),Q=yield crypto.subtle.digest("SHA-256",H);return Array.from(new Uint8Array(Q)).map(We=>We.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Ue=20;class Fe extends $.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(H=>{this.resolveInialized=H})}addPassiveListener(H){this.passiveListeners.add(H)}removePassiveListener(H){this.passiveListeners.delete(H)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(H){return this.resolveInialized(),this.passiveListeners.forEach(Q=>Q(H)),super.onEvent(H)}initialized(){var H=this;return(0,V.Z)(function*(){yield H.initPromise})()}}function _e(J){return Re.apply(this,arguments)}function Re(){return(Re=(0,V.Z)(function*(J){const H=yield bt()._get(Ot(J));return H&&(yield bt()._remove(Ot(J))),H})).apply(this,arguments)}function gt(){const J=[],H="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Q=0;Q<Ue;Q++){const Ae=Math.floor(Math.random()*H.length);J.push(H.charAt(Ae))}return J.join("")}function bt(){return(0,$.az)($.b)}function Ot(J){return(0,$.aA)("authEvent",J.config.apiKey,J.name)}function Oe(J){if(!J?.includes("?"))return{};const[H,...Q]=J.split("?");return(0,ge.zd)(Q.join("?"))}const it=class Ye{constructor(){this._redirectPersistence=$.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=$.aB,this._overrideRedirectResult=$.aC}_initialize(H){var Q=this;return(0,V.Z)(function*(){const Ae=H._key();let We=Q.eventManagers.get(Ae);return We||(We=new Fe(H),Q.eventManagers.set(Ae,We),Q.attachCallbackListeners(H,We)),We})()}_openPopup(H){(0,$.as)(H,"operation-not-supported-in-this-environment")}_openRedirect(H,Q,Ae,We){var xt=this;return(0,V.Z)(function*(){!function re(J){var H,Q,Ae,We,xt,ft,hn,$t,Hn,sr;const ln=Me();(0,$.ax)("function"==typeof(null===(H=ln?.universalLinks)||void 0===H?void 0:H.subscribe),J,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,$.ax)(typeof(null===(Q=ln?.BuildInfo)||void 0===Q?void 0:Q.packageName)<"u",J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,$.ax)("function"==typeof(null===(xt=null===(We=null===(Ae=ln?.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===We?void 0:We.browsertab)||void 0===xt?void 0:xt.openUrl),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,$.ax)("function"==typeof(null===($t=null===(hn=null===(ft=ln?.cordova)||void 0===ft?void 0:ft.plugins)||void 0===hn?void 0:hn.browsertab)||void 0===$t?void 0:$t.isAvailable),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,$.ax)("function"==typeof(null===(sr=null===(Hn=ln?.cordova)||void 0===Hn?void 0:Hn.InAppBrowser)||void 0===sr?void 0:sr.open),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(H);const ft=yield xt._initialize(H);yield ft.initialized(),ft.resetRedirect(),(0,$.aD)(),yield xt._originValidation(H);const hn=function He(J,H,Q=null){return{type:H,eventId:Q,urlResponse:null,sessionId:gt(),postBody:null,tenantId:J.tenantId,error:(0,$.aw)(J,"no-auth-event")}}(H,Ae,We);yield function nt(J,H){return bt()._set(Ot(J),H)}(H,hn);const $t=yield function oe(J,H,Q){return ie.apply(this,arguments)}(H,hn,Q),Hn=yield function me(J){const{cordova:H}=Me();return new Promise(Q=>{H.plugins.browsertab.isAvailable(Ae=>{let We=null;Ae?H.plugins.browsertab.openUrl(J):We=H.InAppBrowser.open(J,(0,$.av)()?"_blank":"_system","location=yes"),Q(We)})})}($t);return function qe(J,H,Q){return te.apply(this,arguments)}(H,ft,Hn)})()}_isIframeWebStorageSupported(H,Q){throw new Error("Method not implemented.")}_originValidation(H){const Q=H._key();return this.originValidationPromises[Q]||(this.originValidationPromises[Q]=function fe(J){return st.apply(this,arguments)}(H)),this.originValidationPromises[Q]}attachCallbackListeners(H,Q){const{universalLinks:Ae,handleOpenURL:We,BuildInfo:xt}=Me(),ft=setTimeout((0,V.Z)(function*(){yield _e(H),Q.onEvent(ot())}),500),hn=function(){var sr=(0,V.Z)(function*(ln){clearTimeout(ft);const br=yield _e(H);let Ou=null;br&&ln?.url&&(Ou=function Be(J,H){var Q,Ae;const We=function ce(J){const H=Oe(J),Q=H.link?decodeURIComponent(H.link):void 0,Ae=Oe(Q).link,We=H.deep_link_id?decodeURIComponent(H.deep_link_id):void 0;return Oe(We).link||We||Ae||Q||J}(H);if(We.includes("/__/auth/callback")){const xt=Oe(We),ft=xt.firebaseError?function an(J){try{return JSON.parse(J)}catch{return null}}(decodeURIComponent(xt.firebaseError)):null,hn=null===(Ae=null===(Q=ft?.code)||void 0===Q?void 0:Q.split("auth/"))||void 0===Ae?void 0:Ae[1],$t=hn?(0,$.aw)(hn):null;return $t?{type:J.type,eventId:J.eventId,tenantId:J.tenantId,error:$t,urlResponse:null,sessionId:null,postBody:null}:{type:J.type,eventId:J.eventId,tenantId:J.tenantId,sessionId:J.sessionId,urlResponse:We,postBody:null}}return null}(br,ln.url)),Q.onEvent(Ou||ot())});return function(br){return sr.apply(this,arguments)}}();typeof Ae<"u"&&"function"==typeof Ae.subscribe&&Ae.subscribe(null,hn);const $t=We,Hn=`${xt.packageName.toLowerCase()}://`;Me().handleOpenURL=function(){var sr=(0,V.Z)(function*(ln){if(ln.toLowerCase().startsWith(Hn)&&hn({url:ln}),"function"==typeof $t)try{$t(ln)}catch(br){console.error(br)}});return function(ln){return sr.apply(this,arguments)}}()}};function ot(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,$.aw)("no-auth-event")}}const Jt=1e3;function Zt(){var J;return(null===(J=self?.location)||void 0===J?void 0:J.protocol)||null}function pn(J=(0,ge.z$)()){return!("file:"!==Zt()&&"ionic:"!==Zt()&&"capacitor:"!==Zt()||!J.toLowerCase().match(/iphone|ipad|ipod|android/))}function Pr(){try{const J=self.localStorage,H=$.aI();if(J)return J.setItem(H,"1"),J.removeItem(H),!function Gi(J=(0,ge.z$)()){return function ri(){return(0,ge.w1)()&&11===document?.documentMode}()||function Pn(J=(0,ge.z$)()){return/Edge\/\d+/.test(J)}(J)}()||(0,ge.hl)()}catch{return ro()&&(0,ge.hl)()}return!1}function ro(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ii(){return(function Ft(){return"http:"===Zt()||"https:"===Zt()}()||(0,ge.ru)()||pn())&&!function Yn(){return(0,ge.b$)()||(0,ge.UG)()}()&&Pr()&&!ro()}function ls(){return pn()&&typeof document<"u"}function Nr(){return(Nr=(0,V.Z)(function*(){return!!ls()&&new Promise(J=>{const H=setTimeout(()=>{J(!1)},Jt);document.addEventListener("deviceready",()=>{clearTimeout(H),J(!0)})})})).apply(this,arguments)}const Tt={LOCAL:"local",NONE:"none",SESSION:"session"},ir=$.ax,yr="persistence";function vr(J){return qi.apply(this,arguments)}function qi(){return(qi=(0,V.Z)(function*(J){yield J._initializationPromise;const H=Qn(),Q=$.aA(yr,J.config.apiKey,J.name);H&&H.setItem(Q,J._getPersistence())})).apply(this,arguments)}function Qn(){var J;try{return(null===(J=function ei(){return typeof window<"u"?window:null}())||void 0===J?void 0:J.sessionStorage)||null}catch{return null}}const zt=$.ax;class At{constructor(){this.browserResolver=$.az($.k),this.cordovaResolver=$.az(it),this.underlyingResolver=null,this._redirectPersistence=$.a,this._completeRedirectFn=$.aB,this._overrideRedirectResult=$.aC}_initialize(H){var Q=this;return(0,V.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._initialize(H)})()}_openPopup(H,Q,Ae,We){var xt=this;return(0,V.Z)(function*(){return yield xt.selectUnderlyingResolver(),xt.assertedUnderlyingResolver._openPopup(H,Q,Ae,We)})()}_openRedirect(H,Q,Ae,We){var xt=this;return(0,V.Z)(function*(){return yield xt.selectUnderlyingResolver(),xt.assertedUnderlyingResolver._openRedirect(H,Q,Ae,We)})()}_isIframeWebStorageSupported(H,Q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(H,Q)}_originValidation(H){return this.assertedUnderlyingResolver._originValidation(H)}get _shouldInitProactively(){return ls()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var H=this;return(0,V.Z)(function*(){if(H.underlyingResolver)return;const Q=yield function us(){return Nr.apply(this,arguments)}();H.underlyingResolver=Q?H.cordovaResolver:H.browserResolver})()}}function wr(J){return J.unwrap()}function zi(J){return vi(J)}function vi(J){const{_tokenResponse:H}=J instanceof ge.ZR?J.customData:J;if(!H)return null;if(!(J instanceof ge.ZR)&&"temporaryProof"in H&&"phoneNumber"in H)return $.P.credentialFromResult(J);const Q=H.providerId;if(!Q||Q===$.o.PASSWORD)return null;let Ae;switch(Q){case $.o.GOOGLE:Ae=$.Q;break;case $.o.FACEBOOK:Ae=$.N;break;case $.o.GITHUB:Ae=$.T;break;case $.o.TWITTER:Ae=$.W;break;default:const{oauthIdToken:We,oauthAccessToken:xt,oauthTokenSecret:ft,pendingToken:hn,nonce:$t}=H;return xt||ft||We||hn?hn?Q.startsWith("saml.")?$.aL._create(Q,hn):$.J._fromParams({providerId:Q,signInMethod:Q,pendingToken:hn,idToken:We,accessToken:xt}):new $.U(Q).credential({idToken:We,accessToken:xt,rawNonce:$t}):null}return J instanceof ge.ZR?Ae.credentialFromError(J):Ae.credentialFromResult(J)}function fi(J,H){return H.catch(Q=>{throw Q instanceof ge.ZR&&function Ds(J,H){var Q;const Ae=null===(Q=H.customData)||void 0===Q?void 0:Q._tokenResponse;if("auth/multi-factor-auth-required"===H?.code)H.resolver=new mn(J,$.an(J,H));else if(Ae){const We=vi(H),xt=H;We&&(xt.credential=We,xt.tenantId=Ae.tenantId||void 0,xt.email=Ae.email||void 0,xt.phoneNumber=Ae.phoneNumber||void 0)}}(J,Q),Q}).then(Q=>{const We=Q.user;return{operationType:Q.operationType,credential:zi(Q),additionalUserInfo:$.al(Q),user:rr.getOrCreate(We)}})}function Nn(J,H){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,V.Z)(function*(J,H){const Q=yield H;return{verificationId:Q.verificationId,confirm:Ae=>fi(J,Q.confirm(Ae))}})).apply(this,arguments)}class mn{constructor(H,Q){this.resolver=Q,this.auth=function Zi(J){return J.wrapped()}(H)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(H){return fi(wr(this.auth),this.resolver.resolveSignIn(H))}}class rr{constructor(H){this._delegate=H,this.multiFactor=$.ao(H)}static getOrCreate(H){return rr.USER_MAP.has(H)||rr.USER_MAP.set(H,new rr(H)),rr.USER_MAP.get(H)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(H){return this._delegate.getIdTokenResult(H)}getIdToken(H){return this._delegate.getIdToken(H)}linkAndRetrieveDataWithCredential(H){return this.linkWithCredential(H)}linkWithCredential(H){var Q=this;return(0,V.Z)(function*(){return fi(Q.auth,$.Z(Q._delegate,H))})()}linkWithPhoneNumber(H,Q){var Ae=this;return(0,V.Z)(function*(){return Nn(Ae.auth,$.l(Ae._delegate,H,Q))})()}linkWithPopup(H){var Q=this;return(0,V.Z)(function*(){return fi(Q.auth,$.d(Q._delegate,H,At))})()}linkWithRedirect(H){var Q=this;return(0,V.Z)(function*(){return yield vr($.aE(Q.auth)),$.g(Q._delegate,H,At)})()}reauthenticateAndRetrieveDataWithCredential(H){return this.reauthenticateWithCredential(H)}reauthenticateWithCredential(H){var Q=this;return(0,V.Z)(function*(){return fi(Q.auth,$._(Q._delegate,H))})()}reauthenticateWithPhoneNumber(H,Q){return Nn(this.auth,$.r(this._delegate,H,Q))}reauthenticateWithPopup(H){return fi(this.auth,$.e(this._delegate,H,At))}reauthenticateWithRedirect(H){var Q=this;return(0,V.Z)(function*(){return yield vr($.aE(Q.auth)),$.h(Q._delegate,H,At)})()}sendEmailVerification(H){return $.ab(this._delegate,H)}unlink(H){var Q=this;return(0,V.Z)(function*(){return yield $.ak(Q._delegate,H),Q})()}updateEmail(H){return $.ag(this._delegate,H)}updatePassword(H){return $.ah(this._delegate,H)}updatePhoneNumber(H){return $.u(this._delegate,H)}updateProfile(H){return $.af(this._delegate,H)}verifyBeforeUpdateEmail(H,Q){return $.ac(this._delegate,H,Q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}rr.USER_MAP=new WeakMap;const rt=$.ax;let Ge=(()=>{class J{constructor(Q,Ae){if(this.app=Q,Ae.isInitialized())return this._delegate=Ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:We}=Q.options;rt(We,"invalid-api-key",{appName:Q.name}),rt(We,"invalid-api-key",{appName:Q.name});const xt=typeof window<"u"?At:void 0;this._delegate=Ae.initialize({options:{persistence:Xt(We,Q.name),popupRedirectResolver:xt}}),this._delegate._updateErrorMap($.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Q){this._delegate.languageCode=Q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Q){this._delegate.tenantId=Q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Q,Ae){$.G(this._delegate,Q,Ae)}applyActionCode(Q){return $.a2(this._delegate,Q)}checkActionCode(Q){return $.a3(this._delegate,Q)}confirmPasswordReset(Q,Ae){return $.a1(this._delegate,Q,Ae)}createUserWithEmailAndPassword(Q,Ae){var We=this;return(0,V.Z)(function*(){return fi(We._delegate,$.a5(We._delegate,Q,Ae))})()}fetchProvidersForEmail(Q){return this.fetchSignInMethodsForEmail(Q)}fetchSignInMethodsForEmail(Q){return $.aa(this._delegate,Q)}isSignInWithEmailLink(Q){return $.a8(this._delegate,Q)}getRedirectResult(){var Q=this;return(0,V.Z)(function*(){rt(Ii(),Q._delegate,"operation-not-supported-in-this-environment");const Ae=yield $.j(Q._delegate,At);return Ae?fi(Q._delegate,Promise.resolve(Ae)):{credential:null,user:null}})()}addFrameworkForLogging(Q){!function wt(J,H){(0,$.aE)(J)._logFramework(H)}(this._delegate,Q)}onAuthStateChanged(Q,Ae,We){const{next:xt,error:ft,complete:hn}=yt(Q,Ae,We);return this._delegate.onAuthStateChanged(xt,ft,hn)}onIdTokenChanged(Q,Ae,We){const{next:xt,error:ft,complete:hn}=yt(Q,Ae,We);return this._delegate.onIdTokenChanged(xt,ft,hn)}sendSignInLinkToEmail(Q,Ae){return $.a7(this._delegate,Q,Ae)}sendPasswordResetEmail(Q,Ae){return $.a0(this._delegate,Q,Ae||void 0)}setPersistence(Q){var Ae=this;return(0,V.Z)(function*(){let We;switch(function Fi(J,H){ir(Object.values(Tt).includes(H),J,"invalid-persistence-type"),(0,ge.b$)()?ir(H!==Tt.SESSION,J,"unsupported-persistence-type"):(0,ge.UG)()?ir(H===Tt.NONE,J,"unsupported-persistence-type"):ro()?ir(H===Tt.NONE||H===Tt.LOCAL&&(0,ge.hl)(),J,"unsupported-persistence-type"):ir(H===Tt.NONE||Pr(),J,"unsupported-persistence-type")}(Ae._delegate,Q),Q){case Tt.SESSION:We=$.a;break;case Tt.LOCAL:We=(yield $.az($.i)._isAvailable())?$.i:$.b;break;case Tt.NONE:We=$.L;break;default:return $.as("argument-error",{appName:Ae._delegate.name})}return Ae._delegate.setPersistence(We)})()}signInAndRetrieveDataWithCredential(Q){return this.signInWithCredential(Q)}signInAnonymously(){return fi(this._delegate,$.X(this._delegate))}signInWithCredential(Q){return fi(this._delegate,$.Y(this._delegate,Q))}signInWithCustomToken(Q){return fi(this._delegate,$.$(this._delegate,Q))}signInWithEmailAndPassword(Q,Ae){return fi(this._delegate,$.a6(this._delegate,Q,Ae))}signInWithEmailLink(Q,Ae){return fi(this._delegate,$.a9(this._delegate,Q,Ae))}signInWithPhoneNumber(Q,Ae){return Nn(this._delegate,$.s(this._delegate,Q,Ae))}signInWithPopup(Q){var Ae=this;return(0,V.Z)(function*(){return rt(Ii(),Ae._delegate,"operation-not-supported-in-this-environment"),fi(Ae._delegate,$.c(Ae._delegate,Q,At))})()}signInWithRedirect(Q){var Ae=this;return(0,V.Z)(function*(){return rt(Ii(),Ae._delegate,"operation-not-supported-in-this-environment"),yield vr(Ae._delegate),$.f(Ae._delegate,Q,At)})()}updateCurrentUser(Q){return this._delegate.updateCurrentUser(Q)}verifyPasswordResetCode(Q){return $.a4(this._delegate,Q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return J.Persistence=Tt,J})();function yt(J,H,Q){let Ae=J;"function"!=typeof J&&({next:Ae,error:H,complete:Q}=J);const We=Ae;return{next:ft=>We(ft&&rr.getOrCreate(ft)),error:H,complete:Q}}function Xt(J,H){const Q=function zn(J,H){const Q=Qn();if(!Q)return[];const Ae=$.aA(yr,J,H);switch(Q.getItem(Ae)){case Tt.NONE:return[$.L];case Tt.LOCAL:return[$.i,$.a];case Tt.SESSION:return[$.a];default:return[]}}(J,H);if(typeof self<"u"&&!Q.includes($.i)&&Q.push($.i),typeof window<"u")for(const Ae of[$.b,$.a])Q.includes(Ae)||Q.push(Ae);return Q.includes($.L)||Q.push($.L),Q}class nn{constructor(){this.providerId="phone",this._delegate=new $.P(wr(u.Z.auth()))}static credential(H,Q){return $.P.credential(H,Q)}verifyPhoneNumber(H,Q){return this._delegate.verifyPhoneNumber(H,Q)}unwrap(){return this._delegate}}nn.PHONE_SIGN_IN_METHOD=$.P.PHONE_SIGN_IN_METHOD,nn.PROVIDER_ID=$.P.PROVIDER_ID;const Tn=$.ax;class se{constructor(H,Q,Ae=u.Z.app()){var We;Tn(null===(We=Ae.options)||void 0===We?void 0:We.apiKey,"invalid-api-key",{appName:Ae.name}),this._delegate=new $.R(H,Q,Ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function he(J){J.INTERNAL.registerComponent(new Se.wA("auth-compat",H=>{const Q=H.getProvider("app-compat").getImmediate(),Ae=H.getProvider("auth");return new Ge(Q,Ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:$.A.EMAIL_SIGNIN,PASSWORD_RESET:$.A.PASSWORD_RESET,RECOVER_EMAIL:$.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:$.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:$.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:$.A.VERIFY_EMAIL}},EmailAuthProvider:$.M,FacebookAuthProvider:$.N,GithubAuthProvider:$.T,GoogleAuthProvider:$.Q,OAuthProvider:$.U,SAMLAuthProvider:$.V,PhoneAuthProvider:nn,PhoneMultiFactorGenerator:$.m,RecaptchaVerifier:se,TwitterAuthProvider:$.W,Auth:Ge,AuthCredential:$.H,Error:ge.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),J.registerVersion("@firebase/auth-compat","0.3.3")}(u.Z)},8766:(Te,ye,q)=>{"use strict";q.d(ye,{Lj:()=>Ue,X3:()=>Le});var V=q(5861);const u=(Re,Be)=>Be.some(gt=>Re instanceof gt);let $,ge;const Se=new WeakMap,Me=new WeakMap,ve=new WeakMap,oe=new WeakMap,ie=new WeakMap;let me={get(Re,Be,gt){if(Re instanceof IDBTransaction){if("done"===Be)return Me.get(Re);if("objectStoreNames"===Be)return Re.objectStoreNames||ve.get(Re);if("store"===Be)return gt.objectStoreNames[1]?void 0:gt.objectStore(gt.objectStoreNames[0])}return pe(Re[Be])},set:(Re,Be,gt)=>(Re[Be]=gt,!0),has:(Re,Be)=>Re instanceof IDBTransaction&&("done"===Be||"store"===Be)||Be in Re};function re(Re){return"function"==typeof Re?function te(Re){return Re!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xe(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Re)?function(...Be){return Re.apply(De(this),Be),pe(Se.get(this))}:function(...Be){return pe(Re.apply(De(this),Be))}:function(Be,...gt){const bt=Re.call(De(this),Be,...gt);return ve.set(bt,Be.sort?Be.sort():[Be]),pe(bt)}}(Re):(Re instanceof IDBTransaction&&function st(Re){if(Me.has(Re))return;const Be=new Promise((gt,bt)=>{const Ot=()=>{Re.removeEventListener("complete",an),Re.removeEventListener("error",ce),Re.removeEventListener("abort",ce)},an=()=>{gt(),Ot()},ce=()=>{bt(Re.error||new DOMException("AbortError","AbortError")),Ot()};Re.addEventListener("complete",an),Re.addEventListener("error",ce),Re.addEventListener("abort",ce)});Me.set(Re,Be)}(Re),u(Re,function Ie(){return $||($=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Re,me):Re)}function pe(Re){if(Re instanceof IDBRequest)return function fe(Re){const Be=new Promise((gt,bt)=>{const Ot=()=>{Re.removeEventListener("success",an),Re.removeEventListener("error",ce)},an=()=>{gt(pe(Re.result)),Ot()},ce=()=>{bt(Re.error),Ot()};Re.addEventListener("success",an),Re.addEventListener("error",ce)});return Be.then(gt=>{gt instanceof IDBCursor&&Se.set(gt,Re)}).catch(()=>{}),ie.set(Be,Re),Be}(Re);if(oe.has(Re))return oe.get(Re);const Be=re(Re);return Be!==Re&&(oe.set(Re,Be),ie.set(Be,Re)),Be}const De=Re=>ie.get(Re);function Le(Re,Be,{blocked:gt,upgrade:bt,blocking:Ot,terminated:an}={}){const ce=indexedDB.open(Re,Be),Oe=pe(ce);return bt&&ce.addEventListener("upgradeneeded",Ve=>{bt(pe(ce.result),Ve.oldVersion,Ve.newVersion,pe(ce.transaction))}),gt&&ce.addEventListener("blocked",()=>gt()),Oe.then(Ve=>{an&&Ve.addEventListener("close",()=>an()),Ot&&Ve.addEventListener("versionchange",()=>Ot())}).catch(()=>{}),Oe}function Ue(Re,{blocked:Be}={}){const gt=indexedDB.deleteDatabase(Re);return Be&&gt.addEventListener("blocked",()=>Be()),pe(gt).then(()=>{})}const Fe=["get","getKey","getAll","getAllKeys","count"],He=["put","add","delete","clear"],nt=new Map;function _e(Re,Be){if(!(Re instanceof IDBDatabase)||Be in Re||"string"!=typeof Be)return;if(nt.get(Be))return nt.get(Be);const gt=Be.replace(/FromIndex$/,""),bt=Be!==gt,Ot=He.includes(gt);if(!(gt in(bt?IDBIndex:IDBObjectStore).prototype)||!Ot&&!Fe.includes(gt))return;const an=function(){var ce=(0,V.Z)(function*(Oe,...Ve){const Ye=this.transaction(Oe,Ot?"readwrite":"readonly");let it=Ye.store;return bt&&(it=it.index(Ve.shift())),(yield Promise.all([it[gt](...Ve),Ot&&Ye.done]))[0]});return function(Ve){return ce.apply(this,arguments)}}();return nt.set(Be,an),an}!function qe(Re){me=Re(me)}(Re=>({...Re,get:(Be,gt,bt)=>_e(Be,gt)||Re.get(Be,gt,bt),has:(Be,gt)=>!!_e(Be,gt)||Re.has(Be,gt)}))},5861:(Te,ye,q)=>{"use strict";function V($,ge,Ie,xe,Se,Me,ve){try{var oe=$[Me](ve),ie=oe.value}catch(fe){return void Ie(fe)}oe.done?ge(ie):Promise.resolve(ie).then(xe,Se)}function u($){return function(){var ge=this,Ie=arguments;return new Promise(function(xe,Se){var Me=$.apply(ge,Ie);function ve(ie){V(Me,xe,Se,ve,oe,"next",ie)}function oe(ie){V(Me,xe,Se,ve,oe,"throw",ie)}ve(void 0)})}}q.d(ye,{Z:()=>u})}},Te=>{Te(Te.s=2634)}]);